!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d3b7b736-f3b9-49e1-a900-9b9660416db6",e._sentryDebugIdIdentifier="sentry-dbid-d3b7b736-f3b9-49e1-a900-9b9660416db6")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2452],{86546:function(e,t,n){Promise.resolve().then(n.bind(n,9870)),Promise.resolve().then(n.bind(n,48821)),Promise.resolve().then(n.bind(n,47396)),Promise.resolve().then(n.bind(n,61603)),Promise.resolve().then(n.bind(n,12642)),Promise.resolve().then(n.bind(n,71931)),Promise.resolve().then(n.bind(n,90966)),Promise.resolve().then(n.bind(n,71156)),Promise.resolve().then(n.bind(n,53701)),Promise.resolve().then(n.bind(n,47465)),Promise.resolve().then(n.bind(n,35640)),Promise.resolve().then(n.bind(n,70747)),Promise.resolve().then(n.bind(n,74453)),Promise.resolve().then(n.bind(n,9)),Promise.resolve().then(n.bind(n,18897)),Promise.resolve().then(n.bind(n,19395)),Promise.resolve().then(n.bind(n,30433)),Promise.resolve().then(n.bind(n,9653))},74611:function(e,t,n){"use strict";n.d(t,{g:function(){return s}});var r=n(83171),a=n(17188),i=n(78421);function s(e,t){return{queryKey:r.O0.accountStatus,queryFn:async()=>((null==e?void 0:e.fromInvoiceEditor)&&await (0,i.ch)(),{stripeStatus:await (0,a.H)()}),...t}}},90734:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(9845),a=n(30393);let i=()=>{let{subscriptionStatus:e}=(0,r.D)(),{hide_payments_nonsaas_web:t,payments_enabled:n}=(0,a.V)(["hide_payments_nonsaas_web","payments_enabled"]);return null!=n&&!!n.enabled&&(null!=e&&!!e.hasPaidSub||null!=e&&!!e.hasFreeSub||null!=e&&!!e.hadFreeSubsInThePast||null!=e&&!!e.hadPaidSubsInThePast||null==t||!t.enabled)}},2540:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(58078),a=n(70747),i=n(83171);let s=()=>{let e=(0,a.useIsFetching)(i.hb.accountStatus)>0,t=(0,a.useIsFetching)(i.O0.accountStatus)>0,[n,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{n||e||t||s(!0)},[e,t,n]),n}},62209:function(e,t,n){"use strict";n.d(t,{K:function(){return s},p:function(){return o}});var r=n(4878),a=n(11626);let i={disputes:{[a.ON.PAYPAL]:0,[a.ON.STRIPE]:0}},s=(0,r.Ue)((e,t)=>({...i,getDisputesCountByProviderName:e=>t().disputes[e],_setDisputes:t=>e({disputes:t})})),o=e=>{let{disputes:t}=e;s.getState()._setDisputes(t||{[a.ON.PAYPAL]:0,[a.ON.STRIPE]:0})}},60315:function(e,t,n){"use strict";n.d(t,{G:function(){return c},q:function(){return u}});var r=n(4878),a=n(11626),i=n(54865),s=n(17706),o=n(17188),l=n(67580);let c=(0,r.Ue)((e,t)=>({paypalStatus:null,updatePaypalEnabled:async t=>{try{let{paymentMethods:n}=await (0,s.Zi)({enable:t,paymentProvider:a.ON.PAYPAL}),r=await (0,o.w5)();return e({paypalStatus:r}),n}catch(t){e({paypalStatus:await (0,o.w5)()})}},updatePaypalStatus:async t=>{e({paypalStatus:t})},setPaypalStatus:t=>e({paypalStatus:t}),isPaypalEnabled:()=>{let{paypalStatus:e}=t();return!!e&&i.rZ(e)},isPaypalEligible:()=>{let{paypalStatus:e}=t();return!!e&&i.dh(e)},isPaypalInitial:()=>{let{paypalStatus:e}=t();return!!e&&i.Gb(e)},isPaypalPending:()=>{let{paypalStatus:e}=t();return!!e&&i.hO(e)},isPaypalOnboarded:()=>{let{paypalStatus:e}=t();return!!e&&i.aH(e)},isPaypalAccepting:()=>{let{paypalStatus:e}=t();return!!e&&i.SP(e)},isPaypalClosed:()=>{let{paypalStatus:e}=t();return!!e&&i.hj(e)},isPaypalOnboardingCompleted:()=>{let{paypalStatus:e}=t();return!!e&&i.RK(e)},isPaypalOnboardingAvailable:()=>{let{paypalStatus:e}=t();return!!e&&i.uI(e)},getPaypalOnboardingCompletedAt:()=>{var e;let{paypalStatus:n}=t();if(!n||!i.p3(n))return null;let r=null===(e=n.paypal)||void 0===e?void 0:e.completedOnboardingAt;return r?new Date(r).getTime():null},getPaypalAccountEmail:()=>{var e,n;let{paypalStatus:r}=t();return r&&(null===(e=r.paypal)||void 0===e?void 0:e.paypalPrimaryEmail)?null===(n=r.paypal)||void 0===n?void 0:n.paypalPrimaryEmail:null},getPaypalMerchantId:()=>{var e;let{paypalStatus:n}=t();return n&&(null===(e=n.paypal)||void 0===e?void 0:e.paypalMerchantId)||null},getPaypalAccountCurrency:()=>{var e;let{paypalStatus:n}=t();return n&&(null===(e=n.paypal)||void 0===e?void 0:e.paypalPrimaryCurrency)||null},getPaypalFees:()=>{var e;let{paypalStatus:n}=t();return n&&(null===(e=n.paypal)||void 0===e?void 0:e.paypalFees)||null},isEligibleForPPCPUpgrade:()=>{var e;let{paypalStatus:n}=t();return!!n&&!!(null===(e=n.paypal)||void 0===e?void 0:e.isPPCPUpgradeEligible)},isACHUpgradeEligible:()=>{var e;let{paypalStatus:n}=t();return!!n&&!!(null===(e=n.paypal)||void 0===e?void 0:e.isACHUpgradeEligible)},isACHAccepting:()=>{let{paypalStatus:e}=t();return!!e&&i.mB(e)},isPaypalWalletsAccepting:()=>{let{paypalStatus:e}=t();return!!e&&(i.bC(e)||i.BM(e))},isPrimaryEmailConfirmed:()=>{var e;let{paypalStatus:n}=t();return!!n&&!!(null===(e=n.paypal)||void 0===e?void 0:e.isPrimaryEmailConfirmed)},isModalOpen:!1,openModal:()=>e({isModalOpen:!0}),closeModal:()=>e({isModalOpen:!1}),origin:window.location.pathname.includes("/settings")?l.T.webSettings:l.T.webInvoiceList})),u=e=>{let{paypalStatus:t}=e;c.getState().setPaypalStatus(t)}},57659:function(e,t,n){"use strict";n.d(t,{M:function(){return c},h:function(){return u}});var r=n(4878),a=n(11626),i=n(79474),s=n(17706),o=n(17188),l=n(67580);let c=(0,r.Ue)((e,t)=>({stripeStatus:null,setStripeStatus:t=>e({stripeStatus:t}),stripeMerchantId:()=>{let{stripeStatus:e}=t();return null==e?void 0:e.stripe.stripeMerchantId},stripeCountry:()=>{let{stripeStatus:e}=t();return null==e?void 0:e.stripe.stripeCountry},stripePrimaryCurrency:()=>{let{stripeStatus:e}=t();return null==e?void 0:e.stripe.stripePrimaryCurrency},stripePrimaryEmail:()=>{let{stripeStatus:e}=t();return null==e?void 0:e.stripe.stripePrimaryEmail},isStripeEligible:()=>{let{stripeStatus:e}=t();return e&&(0,i.Rh)(e)},isStripeEligibleAndOptedIn:()=>t().isStripeEligible()&&!t().isStripeOptedOut(),isStripeOptedOut:()=>{let{stripeStatus:e}=t();return e&&(0,i.sG)(e)},isStripeOnboardingAvailable:()=>{let{stripeStatus:e}=t();return e&&(0,i.cb)(e)},isStripeInitial:()=>{let{stripeStatus:e}=t();return e&&(0,i.DO)(e)},isStripePending:()=>{let{stripeStatus:e}=t();return e&&(0,i.Kr)(e)},isStripePendingVerification:()=>{let{stripeStatus:e}=t();return e&&(0,i.HX)(e)},isStripeRejected:()=>{let{stripeStatus:e}=t();return e&&(0,i.hb)(e)},isStripeRestricted:()=>{let{stripeStatus:e}=t();return e&&(0,i.Je)(e)},isStripeRestrictedSoon:()=>{let{stripeStatus:e}=t();return e&&(0,i.EI)(e)},isStripeAccepting:()=>{let{stripeStatus:e}=t();return e&&(0,i.iu)(e)},isStripeEnabled:()=>{let{stripeStatus:e}=t();return e&&(0,i.wh)(e)},isStripeAcceptingAndEnabled:()=>{let{stripeStatus:e}=t();return e&&(0,i.Rp)(e)},isStripeSubsetOfAccepting:()=>{let{stripeStatus:e}=t();return e&&(0,i.DE)(e)},isStripeSubsetOfAcceptingAndEnabled:()=>{let{stripeStatus:e}=t();return e&&(0,i.wh)(e)&&(0,i.DE)(e)},stripeOptOut:()=>{var e;let{stripeStatus:n}=t();return"boolean"==typeof(null==n?void 0:null===(e=n.stripe)||void 0===e?void 0:e.userOptOut)?n.stripe.userOptOut:null},getStripeFees:()=>{let{stripeStatus:e}=t();return e&&(0,i.iu)(e)?e.stripe.stripeFees:null},updateStripeEnabled:async t=>{try{let{status:n,paymentMethods:r}=await (0,s.Zi)({enable:t,paymentProvider:a.ON.STRIPE});return e({stripeStatus:n}),r}catch(t){e({stripeStatus:await (0,o.H)()})}},isModalOpen:!1,openModal:()=>e({isModalOpen:!0}),closeModal:()=>e({isModalOpen:!1}),origin:window.location.pathname.includes("/settings")?l.T.webSettings:l.T.webInvoiceList})),u=e=>{let{stripeStatus:t}=e;c.getState().setStripeStatus(null!=t?t:null)}},70995:function(e,t,n){"use strict";n.d(t,{T:function(){return p}});var r=n(27602),a=n(64142),i=n(17892),s=n(12272);let o=async()=>{let e="".concat(s.t.NEXT_PUBLIC_REACT_APP_IS_PAYMENTS,"/auth/exchange-token"),t=await (0,i.Y)(),n=await fetch(e,{method:"POST",headers:{"Content-Type":a.bT.APP_JSON},body:JSON.stringify({parseToken:t}),cache:"no-cache"});if(!n.ok)throw Error("Request failed");if(n.status>=400)throw Error(n.statusText);return(await n.json()).token};var l=n(67986);let c=null,u=e=>(0,r.Z)(e).exp-Date.now()/1e3<=10,d=async()=>{let e={"Content-Type":a.bT.APP_JSON,"x-is-platform":"web","x-is-version":(0,l.C)()};return(!c||u(c))&&(c=await o()),e.Authorization="Bearer ".concat(c),e},p=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.t.NEXT_PUBLIC_REACT_APP_IS_PAYMENTS,r={...await d(),...t.headers},a=await fetch("".concat(n).concat(e),{...t,cache:"no-cache",headers:r});if(!a.ok)throw Error("Failed to fetch data from is-payments");if(a.status>=400)throw Error(a.statusText);return a.json()}},63868:function(e,t,n){"use strict";n.d(t,{m:function(){return d}});var r=n(42006),a=n(64142),i=n(16550),s=n(17892),o=n(12272);let l=async()=>{let e="".concat(o.t.NEXT_PUBLIC_REACT_APP_PAYPAL_URL,"/auth/exchange-token"),t=await (0,s.Y)(),n=await fetch(e,{method:"POST",headers:{"Content-Type":a.bT.APP_JSON},body:JSON.stringify({parseToken:t}),cache:"no-cache"});if(!n.ok)throw Error("Request failed");if(n.status>=400)throw Error(n.statusText);return(await n.json()).token};var c=n(59792);let u=async e=>{let t={"Content-Type":a.bT.APP_JSON,"x-is-platform":"web","x-is-version":c.env.REACT_APP_VERSION||"99999.0.0-".concat(c.env.REACT_APP_ENV)};if(e)return t;let n=r.sk?await l():await (0,i.f)();return t.Authorization="Bearer ".concat(n),t},d=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.t.NEXT_PUBLIC_REACT_APP_PAYPAL_URL,{isPublicEndpoint:r,...a}=t,i={...await u(r),...a.headers},s=await fetch("".concat(n).concat(e),{...a,cache:"no-cache",headers:i});if(!s.ok)throw Error("Failed to fetch data from is-paypal");if(s.status>=400)throw Error(s.statusText);return s.json()}},69227:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var r=n(59792);let a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={"x-is-app":"app.invoicesimple.com","x-is-platform":"web","x-is-version":r.env.REACT_APP_VERSION||"99999.0.0-".concat(r.env.REACT_APP_ENV),...t.headers},a=await fetch(e,{...t,headers:n});if(!a.ok)throw Error("Failed to fetch data from next");return a.json()}},23835:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(81071),a=n(12272);let i=()=>{let e=window.location.host?window.location.host:"",t=a.t.NEXT_PUBLIC_REACT_APP_PROXY_HOST===e,n=(0,r.useRouter)();return{push:e=>{if(t)return window.location.assign("".concat(a.t.NEXT_PUBLIC_REACT_APP_HOST).concat(e));n.push(e)},replace:e=>{if(t)return window.location.assign("".concat(a.t.NEXT_PUBLIC_REACT_APP_HOST).concat(e));n.replace(e)},prefetch:n.prefetch}}},17706:function(e,t,n){"use strict";n.d(t,{W5:function(){return o},Zi:function(){return c},_r:function(){return s},h_:function(){return u},wW:function(){return l}});var r=n(70995);let a="/api/v1",i=e=>{let{shouldIncludePaypalUnbrandedAch:t=!1,shouldIncludePaypalBnpl:n=!1}=e||{};return[...t?["is-pp-ach"]:[],...n?["is-pp-paylater"]:[]].join(",")};async function s(e){let t=i(e);return(0,r.T)("".concat(a,"/accounts/me/payment-methods"),{method:"GET",...t&&{headers:{"x-is-flags":t}}})}async function o(e,t){let n=i(t);return(0,r.T)("".concat(a,"/accounts/me/payment-methods"),{method:"PUT",body:JSON.stringify({blocked:e}),...n&&{headers:{"x-is-flags":n}}})}async function l(e,t){let n=i(t);return(0,r.T)("".concat(a,"/accounts/me/documents/").concat(e,"/payment-methods"),{method:"GET",...n&&{headers:{"x-is-flags":n}}})}let c=async e=>{let{enable:t=!1,paymentProvider:n=null}=e;return(0,r.T)("".concat(a,"/").concat(t?"accounts/me/enable-provider":"accounts/me/disable-provider"),{method:"PATCH",body:JSON.stringify({provider:n})})};async function u(e,t,n){let s=i(n);return(0,r.T)("".concat(a,"/accounts/me/documents/").concat(t,"/payment-methods"),{method:"PUT",body:JSON.stringify({blocked:e}),...s&&{headers:{"x-is-flags":s}}})}},17188:function(e,t,n){"use strict";n.d(t,{j4:function(){return g},w5:function(){return v},H:function(){return m},Ov:function(){return b},GM:function(){return y}});var r=n(70995),a=n(63868),i=n(42006),s=n(64142),o=n(17892),l=n(12272);let c=async()=>{let e="".concat(l.t.NEXT_PUBLIC_REACT_APP_STRIPE_URL,"/auth/exchange-token"),t=await (0,o.Y)(),n=await fetch(e,{method:"POST",headers:{"Content-Type":s.bT.APP_JSON},body:JSON.stringify({parseToken:t}),cache:"no-cache"});if(!n.ok)throw Error("Request failed");if(n.status>=400)throw Error(n.statusText);return(await n.json()).token};var u=n(19481),d=n(59792);let p=async e=>{let t={"Content-Type":s.bT.APP_JSON,"x-is-platform":"web","x-is-version":d.env.REACT_APP_VERSION||"99999.0.0-".concat(d.env.REACT_APP_ENV)};if(e)return t;let n=i.sk?await c():await (0,u.h)();return t.Authorization="Bearer ".concat(n),t},f=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l.t.NEXT_PUBLIC_REACT_APP_STRIPE_URL,{isPublicEndpoint:r,...a}=t,i={...await p(r),...a.headers},s=await fetch("".concat(n).concat(e),{...a,cache:"no-cache",headers:i});if(!s.ok)throw Error("Failed to fetch data from is-stripe");if(s.status>=400)throw Error(s.statusText);return s.json()},h="/api/v2";async function v(){return(0,a.m)("".concat("/api/v1","/accounts/me"),{method:"GET"})}async function m(){return f("".concat(h,"/accounts/me"),{method:"GET"})}async function b(){return f("".concat(h,"/accounts/me/opt-in"),{method:"PATCH"})}async function y(){return f("".concat(h,"/accounts/me/opt-out"),{method:"PATCH"})}async function g(){return(0,r.T)("".concat("/api/v1","/accounts/me/disputes/count"),{method:"GET"})}},51985:function(e,t,n){"use strict";var r,a;n.d(t,{D:function(){return i},_:function(){return r}}),(a=r||(r={})).invoiceEditor="invoice-editor",a.invoicePreview="invoice-preview",a.settings="settings",a.invoiceList="invoice-list",a.estimateEditor="estimate-editor",a.notDefined="not defined",a.onlinePaymentPreviewModal="online-payment-preview-modal";let i=()=>{let e=window.location.pathname.slice(1);switch(!0){case"settings"===e:return"settings";case"invoices"===e:return"invoice-list";case""===e||e.startsWith("invoices/")||e.startsWith("invoice/"):return"invoice-editor";case e.startsWith("estimates/")||e.startsWith("estimate/"):return"estimate-editor";default:return"not defined"}}},16550:function(e,t,n){"use strict";n.d(t,{A:function(){return u},f:function(){return c}});var r=n(64142),a=n(27602),i=n(17892);let s=null;async function o(e){try{let t=await fetch("/paypal/token/exchange",{method:"POST",headers:{"Content-Type":r.bT.APP_JSON},body:JSON.stringify({parseToken:e}),cache:"no-cache"}),{token:n}=await t.json();return n}catch(e){throw Error("Unexpected error exchanging token: ".concat(e.message))}}async function l(){try{let e=await (0,i.Y)();return s=await o(e)}catch(e){throw Error(e.message)}}async function c(){try{if(!s||s&&function(e){if(!e)throw Error("No token provided");return(0,a.Z)(e).exp-Date.now()/1e3<=10}(s))return l();return s}catch(e){throw Error(e.message)}}function u(){s=null}},23165:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(64142),a=n(5460),i=n(77208),s=n(12272),o=n(51985);let l=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=(0,i.ej)("sessionToken");t||(t=(0,o.D)());let r=new URLSearchParams({token:await u(n),origin:t,platform:"web"});(0,a.vU)("".concat(s.t.NEXT_PUBLIC_REACT_APP_PAYMENTS_LANDING_PAGE,"/auth?").concat(r.toString()),e)},c=async e=>{try{let t=await fetch("/is-payments/token/exchange",{method:"POST",headers:{"Content-Type":r.bT.APP_JSON},body:JSON.stringify({parseToken:e})});return await t.json()}catch(e){throw Error("Unexpected error exchanging token: ".concat(e.message))}};async function u(e){try{return(await c(e)).token}catch(e){throw Error(e.message)}}},67580:function(e,t,n){"use strict";n.d(t,{S:function(){return l},T:function(){return a}});var r,a,i=n(5460),s=n(12272),o=n(19481);async function l(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{(0,i.vU)("".concat(s.t.NEXT_PUBLIC_REACT_APP_STRIPE_URL,"/connect?token=").concat(await (0,o.h)(),"&origin=").concat(e),t)}catch(e){throw Error("Error starting Stripe onboarding: ".concat(e.message))}}(r=a||(a={})).webInvoiceList="web-invoice-list",r.webSettings="web-settings"},19481:function(e,t,n){"use strict";n.d(t,{h:function(){return o}}),n(27602);var r=n(17892),a=n(69227);async function i(e){try{return await (0,a.Y)("/api/payments/stripe/token/exchange",{body:JSON.stringify({parseToken:e}),cache:"no-cache",method:"POST"})}catch(e){throw Error("Unexpected error exchanging token: ".concat(e.message))}}async function s(){try{let e=await (0,r.Y)();if(!e)throw Error("Missing parse token");return await i(e)}catch(e){throw Error(e.message)}}function o(){try{return s()}catch(e){throw Error(e.message)}}},15059:function(e,t,n){"use strict";n.d(t,{CA:function(){return i},Vy:function(){return s},vV:function(){return o}}),n(76225),n(31609);var r=n(64142);let a=e=>e.filter(e=>!e.isTrial&&e.isActive),i=e=>a(e).length>0,s=e=>{let t=e.filter(e=>e.orderSku&&e.orderSku.match(/web/)).sort((e,t)=>t.orderTimestamp-e.orderTimestamp);return t.length&&t[t.length-1]||null},o=e=>{if((null==e?void 0:e.isSubPaid)||(null==e?void 0:e.activeSubscriptionTier))return e.tier;switch(e.tier){case r.QV.PREMIUM_LEGACY:return r.QV.PREMIUM;case r.QV.ESSENTIALS:return r.QV.STARTER;case r.QV.PLUS:return r.QV.PRO}return e.tier}},5460:function(e,t,n){"use strict";n.d(t,{FU:function(){return i},vU:function(){return r}});let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){window.open(e,"_blank");return}window.location.assign(e)},a=()=>{let e=window.navigator.userAgent;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)?"iOS":"unknown"},i=()=>{try{switch(a()){case"iOS":window.open("https://apps.apple.com/us/app/invoice-simple-receipt-maker/id694831622","_blank");break;case"Android":window.open("https://play.google.com/store/apps/details?id=com.aadhk.woinvoice","_blank")}}catch(e){window.location.reload()}}},27466:function(e,t,n){"use strict";var r,a,i;n.d(t,{K:function(){return a},Z:function(){return r}}),(r||(r={})).PHONE="phone",(i=a||(a={})).ACKNOWLEDGE_MODAL_SHOWN="acknowledge_modal_shown",i.COMPANY_NAME="company_name",i.IS_GUEST="is_guest",i.PAYMENT_STATUS="payment_status",i.SIGNED_UP_DATE="signed_up",i.WEB_ONBOARDING_V1_START="web_onboarding_v1_start",i.WEB_ONBOARDING_V1_DETAILS="web_onboarding_v1_details",i.WEB_ONBOARDING_V1_SIZE="web_onboarding_v1_size",i.WEB_ONBOARDING_V1_REVENUE="web_onboarding_v1_revenue",i.WEB_ONBOARDING_V1_LOGO="web_onboarding_v1_logo",i.WEB_ONBOARDING_V1_PAYMENTS="web_onboarding_v1_payments",i.WEB_ONBOARDING_V1_TEMPLATE="web_onboarding_v1_template",i.WEB_ONBOARDING_V1_FINISH="web_onboarding_v1_finish",i.IS_SUBCRIPTION_ACTIVE="is_subscription_active",i.HAS_FREE_TRIAL_SUBSCRIPTION="has_free_trial_subscription",i.EXPERIMENTS="experiments"},11835:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});let r=/.+@.+\..+/,a=e=>"string"==typeof e&&r.test(e.trim())},13323:function(e,t,n){"use strict";n.d(t,{A:function(){return s},M:function(){return i}});var r=n(9411),a=n(11835);let i=async e=>{let{userId:t,email:n}=e;if(t&&null!==n&&(0,a.v)(n)){var i;return null===(i=window.Verisoul)||void 0===i?void 0:i.account({id:t,email:n}).catch(t=>r.D.error("Failed to track Verisoul user - nextjs",{error:t,attributes:e}))}},s=async()=>{var e;return null===(e=window.Verisoul)||void 0===e?void 0:e.reinitialize().catch(e=>r.D.error("Failed to reset Verisoul session",{error:e}))}},9870:function(e,t,n){"use strict";n.r(t),n.d(t,{Navbar:function(){return F}});var r,a,i=n(37821),s=n(37903),o=n(81071),l=n(64142),c=n(44668),u=n(73378),d=n(58078);let p=d.forwardRef((e,t)=>(0,i.jsx)("svg",{...e,ref:t,width:"32",height:"32",viewBox:"0 0 21 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M20.5257 0.366943L9.18097 10.1489L8.86262 10.3805L8.70634 10.4673L8.60794 10.502L8.49218 10.5425L8.4343 10.5599L8.36484 10.5715L8.27802 10.5772H8.11595H7.91915L7.82075 10.5715L7.73393 10.5599L7.6529 10.5425L7.58923 10.5252L0.730264 7.89154L0.579773 7.85681L0.504526 7.87997L0.429281 7.95521L0.406128 8.00731V8.07676L0.429281 8.18674L0.730264 8.57455L7.78602 18.3392L7.86127 18.4028L7.95388 18.4781L8.09858 18.5186L8.2375 18.5244L8.3822 18.4897L8.50954 18.4144L8.60794 18.3218L8.74107 18.1771L20.6589 0.505859V0.436401L20.6241 0.366943H20.5257Z",fill:"white"})}));p.displayName="Logo";var f=n(42236),h=n(12272);let v=(e,t)=>{let n="https://".concat(h.t.NEXT_PUBLIC_REACT_APP_HOST).concat(e);return t?n:e};var m=n(23835),b=n(15059),y=n(61449),g=n(9411),P=n(16550),w=n(77208);let E=async()=>{(0,P.A)(),(0,w.nJ)("lastOnboardingPage"),await _()},_=async()=>{let e=(0,w.ej)("sessionToken");if(!e)return null;(0,w.nJ)("sessionToken");try{await (0,y.W)("/logout",{method:"POST",headers:{"X-Parse-Session-Token":e},next:{revalidate:0}})}catch(e){return g.D.error(e,{errorMsg:"Error calling /logout from parse"}),null}};var x=n(99547),N=n(9845),S=n(30393),T=n(65833),A=n(13323),I=n(66962);let O=d.forwardRef((e,t)=>{let{className:n="",left:r,right:a,children:s,...o}=e,[l,c]=(0,d.useState)(!1),u=l?"flex":"hidden";return(0,i.jsx)("nav",{...o,ref:t,className:"".concat(n," bg-brand-gray py-[11px] min-h-[64px] flex lg:items-center w-full justify-center"),children:(0,i.jsx)("div",{className:"max-w-[1140px] w-full px-4 flex justify-between flex-col lg:flex-row",children:(0,i.jsxs)("div",{className:"flex lg:items-center flex-col lg:flex-row w-full",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center lg:mr-[20px] w-full lg:w-auto",children:[(0,i.jsx)("div",{className:"flex items-center gap-[8px] min-h-[42px]",children:r}),(0,i.jsxs)("div",{className:"ml-auto lg:ml-0 lg:hidden",children:[(0,i.jsx)(I.dc,{className:"".concat(!l||"hidden"," cursor-pointer"),onClick:()=>{c(!0)}}),(0,i.jsx)(I.bM,{className:"".concat(l||"hidden"," cursor-pointer"),onClick:()=>{c(!1)}})]})]}),(0,i.jsx)("div",{className:"lg:flex ".concat(u," mt-[20px] lg:mt-0 items-center gap-[10px] flex-col lg:flex-row w-full lg:w-auto"),children:s}),(0,i.jsx)("div",{className:"lg:flex ".concat(u," mt-[5px] lg:mt-0 ml-auto items-center gap-[10px] lg:gap-[5px] w-full lg:w-auto flex-col justify-items-start lg:flex-row"),children:a})]})})})});O.displayName="Navbar";let R=d.forwardRef((e,t)=>{let{className:n="",children:r,isActive:a,isDisabled:s,...o}=e;return(0,i.jsx)("a",{className:"".concat(n," ").concat(a?"bg-[#5E5E5E]":""," whitespace-nowrap hover:no-underline font-medium group rounded-[8px] text-sm text-[#fff] hover:bg-[#5E5E5E] transition duration-150 ease-in-out flex items-center p-[10px] w-full relative"),ref:t,"aria-disabled":s,...o,children:r})});R.displayName="NavbarItem";let C=d.forwardRef((e,t)=>{let{className:n="",children:r,title:a,isActive:s,...o}=e;return(0,i.jsx)("div",{tabIndex:0,className:"".concat(n," ").concat(s?"bg-[#5E5E5E]":""," group rounded-[8px] text-sm hover:bg-[#5E5E5E] transition duration-150 ease-in-out flex items-center px-[10px] py-[7.5px] text-[#fff] font-medium w-full relative cursor-pointer"),ref:t,...o,children:(0,i.jsxs)(i.Fragment,{children:[a,(0,i.jsx)(I.g6,{className:"hidden lg:block ml-[2.5px] rotate-180 group-hover:rotate-0 group-focus:rotate-0 transition ease-in-out duration-300"}),(0,i.jsx)("div",{className:"lg:group-hover:block lg:group-focus-within:block lg:group-focus-visible:block hidden mt-[2px] w-full pt-[64px] absolute -ml-4",children:(0,i.jsx)("div",{className:"absolute bg-[#fff] py-4 shadow-lg rounded-xl flex flex-col text-gray-800 opacity-100 z-50",children:r})})]})})});C.displayName="NavbarMenu";let L=d.forwardRef((e,t)=>{let{className:n,children:r,isActive:a,...s}=e;return(0,i.jsx)("a",{...s,ref:t,className:"".concat(n," ").concat(a?"bg-slate-100":""," hover:no-underline cursor-pointer text-left px-[25px] py-[10px] hover:bg-slate-100"),children:r})});L.displayName="NavbarSubItem";var j=n(23165),k=n(2540),M=n(11626),U=n(90734),B=n(60315),V=n(57659);let D=()=>{let{payments_enabled:e,new_payments_dashboard:t}=(0,S.V)(["payments_enabled","new_payments_dashboard"]),n=(0,B.G)(),r=(0,V.M)(),a=(0,U.P)(),i={eligible:[],initial:[],pending:[],accepting:[],restricted:[],rejected:[],paymentsTabHref:null};if(!(null==e?void 0:e.enabled)||!(null==t?void 0:t.enabled)||!a||!(null==r?void 0:r.stripeStatus)||!(null==n?void 0:n.paypalStatus))return i;let{isStripeEligibleAndOptedIn:s,isStripeSubsetOfAccepting:o,isStripePending:l,isStripePendingVerification:c,isStripeInitial:u,isStripeRejected:d,isStripeRestricted:p}=r,{isPaypalEligible:f,isPaypalAccepting:h,isPaypalPending:v,isPaypalInitial:m,isPaypalOnboarded:b,isPaypalClosed:y}=n;return f()||s()?(f()&&i.eligible.push(M.ON.PAYPAL),m()&&i.initial.push(M.ON.PAYPAL),(h()||y())&&i.accepting.push(M.ON.PAYPAL),(v()||b())&&i.pending.push(M.ON.PAYPAL),s()&&i.eligible.push(M.ON.STRIPE),u()&&i.initial.push(M.ON.STRIPE),(l()||c())&&i.pending.push(M.ON.STRIPE),o()&&i.accepting.push(M.ON.STRIPE),d()&&i.rejected.push(M.ON.STRIPE),p()&&i.restricted.push(M.ON.STRIPE),{...i,paymentsTabHref:"/payments/dashboard"}):i},G=e=>{let{children:t}=e,n=D(),{trackAction:r}=(0,N.D)(),a=function(){let{payments_enabled:e,paypal_v_stripe_variant:t}=(0,S.V)(["payments_enabled","paypal_v_stripe_variant"]),{isStripeInitial:n,isStripeEligibleAndOptedIn:r}=(0,V.M)(),{isPaypalInitial:a}=(0,B.G)();if(!(null==e?void 0:e.enabled))return!1;let i=!(t.enabled&&r()),s=t.enabled&&n()&&a(),o=i&&a();return s||o}(),s=(0,k.N)(),l=(0,o.useRouter)();return n.paymentsTabHref&&s?(0,i.jsx)(R,{"aria-label":"Navigate To Payments",href:"/payments/dashboard",onClick:()=>{r("paypal-navItem-clicked"),a?(0,j._)():n.paymentsTabHref&&l.push(n.paymentsTabHref)},className:"cursor-pointer","data-sentry-element":"NavbarItem","data-sentry-component":"PaymentsNavItem","data-sentry-source-file":"payments-navbar-item.tsx",children:t}):null};(r=a||(a={})).HOME="/",r.CLIENTS="/clients",r.ESTIMATE="/estimate",r.ESTIMATES="/estimates",r.EXPENSE="/expense",r.EXPENSES="/expenses",r.INVOICE="/invoice",r.INVOICES="/invoices",r.ITEMS="/items",r.SETTINGS="/settings",r.REPORTS="/reports";let F=e=>{var t;let n=(0,m._)(),r=(0,o.usePathname)(),{fta:a}=(0,f.Y)(),{user:d}=(0,N.D)(),h=e=>{if(r){for(let t of e)if(r.startsWith(t))return!0}return!1},{verisoul:y}=(0,S.V)(["verisoul"]),g=(0,b.CA)(e.subscriptions),P=async()=>{await E(),y.enabled&&await (0,A.A)(),n.replace("/login#loggedOut")},w=null===(t=e.subscriptionStatus)||void 0===t?void 0:t.subscriptionTier,_=w===l.QV.PREMIUM||w===l.QV.PREMIUM_LEGACY;return(0,i.jsxs)(O,{left:(0,i.jsxs)(s.default,{href:v("/invoices",e.isProxied),className:"flex items-center font-medium text-[16px] text-[#fff]",children:[(0,i.jsx)(p,{width:32,height:32,className:"mr-3"}),a({id:"navbar.navBrand.appName"})]}),right:(0,i.jsxs)(i.Fragment,{children:[g&&!_&&(0,i.jsx)(s.default,{href:v((0,T.X2)({ref:T.Wu.NAVBAR_UPGRADE_CROWN}),e.isProxied),tabIndex:-1,children:(0,i.jsx)("div",{className:"hidden lg:flex w-8 h-6 bg-[#737373] items-center justify-center rounded-full",children:(0,i.jsx)(c.m,{className:"cursor-pointer hidden lg:block"})})}),(0,i.jsx)(R,{"aria-label":"Navigate To Settings",href:v("/settings",e.isProxied),isActive:h(["/settings"]),children:a({id:"navbar.navItems.settings"})}),d&&(0,x.T)(d)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R,{"aria-label":"Navigate To Login",className:"cursor-pointer",href:v("/login",e.isProxied),tabIndex:0,children:a({id:"navbar.navAccessItems.login"})}),(0,i.jsx)(R,{"aria-label":"Navigate To Sign Up",className:"cursor-pointer",href:v("/signup",e.isProxied),tabIndex:0,children:a({id:"navbar.navAccessItems.signup"})})]}):(0,i.jsx)(R,{"aria-label":"Navigate To Logout",className:"cursor-pointer",onClick:P,tabIndex:0,children:a({id:"navbar.navAccessItems.logout"})}),!_&&(0,i.jsx)(s.default,{href:v((0,T.X2)(),e.isProxied),className:"self-start",tabIndex:-1,children:(0,i.jsx)(u.z,{role:"navigation","aria-label":"Navigate To Paywall",variant:"white",className:"w-full lg:w-auto whitespace-nowrap text-sm justify-self-start",children:a({id:"navbar.navItems.upgrade"})})})]}),"data-sentry-element":"NavbarBase","data-sentry-component":"Navbar","data-sentry-source-file":"navbar.tsx",children:[(0,i.jsx)(R,{href:v("/invoices",e.isProxied),"aria-label":"Navigate To Invoices",isActive:"/"===r||h(["/invoice","/invoices"]),"data-sentry-element":"NavbarItem","data-sentry-source-file":"navbar.tsx",children:a({id:"navbar.navItems.invoices"})}),(0,i.jsx)(R,{href:v("/estimates",e.isProxied),"aria-label":"Navigate To Estimates",isActive:h(["/estimate","/estimates"]),"data-sentry-element":"NavbarItem","data-sentry-source-file":"navbar.tsx",children:a({id:"navbar.navItems.estimates"})}),(0,i.jsx)(R,{href:v("/expenses",e.isProxied),"aria-label":"Navigate To Expenses",isActive:h(["/expense","/expenses"]),"data-sentry-element":"NavbarItem","data-sentry-source-file":"navbar.tsx",children:a({id:"navbar.navItems.expenses"})}),(0,i.jsx)(G,{"data-sentry-element":"PaymentsNavItem","data-sentry-source-file":"navbar.tsx",children:a({id:"navbar.navItems.payments"})}),(0,i.jsx)(R,{"aria-label":"Navigate To Reports",href:v("/reports",e.isProxied),isActive:h(["/reports"]),"data-sentry-element":"NavbarItem","data-sentry-source-file":"navbar.tsx",children:a({id:"navbar.navItems.reports"})}),(0,i.jsxs)(C,{"aria-label":"Navbar Submenu",className:"hidden lg:flex text-sm",title:a({id:"navbar.navMenu.more"}),"data-sentry-element":"NavbarMenu","data-sentry-source-file":"navbar.tsx",children:[(0,i.jsx)(L,{"aria-label":"Navigate To Clients",href:v("/clients",e.isProxied),isActive:h(["/clients"]),"data-sentry-element":"NavbarSubItem","data-sentry-source-file":"navbar.tsx",children:a({id:"navbar.navItems.clients"})}),(0,i.jsx)(L,{"aria-label":"Navigate To Items",href:v("/items",e.isProxied),isActive:h(["/items"]),"data-sentry-element":"NavbarSubItem","data-sentry-source-file":"navbar.tsx",children:a({id:"navbar.navItems.items"})})]}),(0,i.jsx)(R,{href:v("/clients",e.isProxied),isActive:h(["/clients"]),className:"lg:hidden","data-sentry-element":"NavbarItem","data-sentry-source-file":"navbar.tsx",children:a({id:"navbar.navItems.clients"})}),(0,i.jsx)(R,{href:v("/items",e.isProxied),isActive:h(["/items"]),className:"lg:hidden","data-sentry-element":"NavbarItem","data-sentry-source-file":"navbar.tsx",children:a({id:"navbar.navItems.items"})})]})}},48821:function(e,t,n){"use strict";n.d(t,{Providers:function(){return g}});var r=n(37821),a=n(58078),i=n(19395),s=n(27466),o=n(54865),l=n(60315),c=n(83171),u=n(17188),d=n(78421);let p=(e,t)=>({queryKey:c.xW.disputes,queryFn:async()=>((null==e?void 0:e.fromInvoiceEditor)&&await (0,d.ch)(),await (0,u.j4)()),...t});var f=n(63868),h=n(9411);let v=async()=>{try{return await (0,f.m)("".concat("/api/v1","/accounts/me"),{cache:"no-cache"})}catch(e){return h.D.error(e,{errorMsg:"Error getting PayPal account status"}),null}};var m=n(74611),b=n(62209),y=n(57659);let g=e=>{var t,u;let{children:f}=e,{data:h}=(0,i.useQuery)((t=void 0,u={refetchOnReconnect:!0,refetchOnWindowFocus:!0},{queryKey:c.hb.accountStatus,queryFn:async()=>((null==t?void 0:t.fromInvoiceEditor)&&await (0,d.ch)(),{paypalStatus:await v()}),...u})),{data:g}=(0,i.useQuery)((0,m.g)(void 0,{refetchOnReconnect:!0,refetchOnWindowFocus:!0})),{data:P}=(0,i.useQuery)(p(void 0,{refetchOnReconnect:!0,refetchOnWindowFocus:!0}));return(0,a.useEffect)(()=>{(0,y.h)({stripeStatus:(null==g?void 0:g.stripeStatus)||null})},[g]),(0,a.useEffect)(()=>{(0,l.q)({paypalStatus:(null==h?void 0:h.paypalStatus)||null})},[h]),(0,a.useEffect)(()=>{(0,b.p)({disputes:P})},[P]),(0,a.useEffect)(()=>{!function(e){var t,r,a;let i=null==e?void 0:null===(t=e.paypal)||void 0===t?void 0:t.paypalStatus,c=null===(a=l.G.getState().paypalStatus)||void 0===a?void 0:null===(r=a.paypal)||void 0===r?void 0:r.paypalStatus;null!=i&&i!==c&&Promise.all([n.e(5609),n.e(8843)]).then(n.bind(n,8843)).then(e=>{var t;let{getUser:n}=e;null===(t=n())||void 0===t||t.setCustomUserAttribute(s.K.PAYMENT_STATUS,o.Be[i])})}((null==h?void 0:h.paypalStatus)||null)},[h]),(0,r.jsx)(r.Fragment,{children:f})}}},function(e){e.O(0,[5751,4742,4287,4497,8637,8249,2991,2758,3584,9751,34,9167,7799,128,3123,6341,6130,1975,7115,7264,1744],function(){return e(e.s=86546)}),_N_E=e.O()}]);