!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ac1a2bab-8953-4b2d-b050-28e618ce16e5",e._sentryDebugIdIdentifier="sentry-dbid-ac1a2bab-8953-4b2d-b050-28e618ce16e5")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5866],{1499:function(e,t,a){a.d(t,{HK:function(){return r.HK}}),a(37821),a(58078),a(64142),a(29205),a(64144),a(80331),a(9411),a(30161),a(60754);var r=a(92637)},92637:function(e,t,a){a.d(t,{vm:function(){return s},ip:function(){return o},HK:function(){return i}});var r=a(69379),n=a(64142);a(64144),a(80331),a(9411),a(13376);var l=a(81387);let o=e=>{let{maxWeeklyReferrals:t,referralsThisWeek:a}=e;if(a<t)return!1;let o=new Date,s=Number((0,l.$)().getItem(r.F.REFERRAL_LIMIT_MODAL_LAST_SHOWN)),i=(0,n.Sz)(o,1).getTime();return!s||s<i},s=()=>{localStorage.setItem(r.F.REFERRAL_LIMIT_MODAL_LAST_SHOWN,Date.now().toString())},i=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e("advocate-action",{action:t,platform:"web",...a})}},25044:function(e,t,a){a.d(t,{mR:function(){return h},Kk:function(){return v},Z0:function(){return j},my:function(){return E}});var r=a(37821);a(58078);var n=a(53138),l=a.n(n),o=a(66962),s=a(9777),i=a(42236),d=a(87698),c=a(14883);let m=e=>{let{primaryButtonText:t,secondaryButtonText:a,onPrimaryButtonClick:n,onSecondaryButtonClick:l}=e,o="text-[14px] font-light px-[12px] py-[6px]",s={footer:"flex flex-col-reverse sm:flex-row-reverse gap-2 h-full sm:h-fit sm:bg-gray-100 px-5 py-3 rounded-none sm:rounded-b-xl sm:mt-6",primaryButton:"".concat(o," bg-neutral-600 text-white"),secondaryButton:"".concat(o," bg-white text-gray-700 border-gray-400")};return(0,r.jsxs)("footer",{className:s.footer,"data-sentry-component":"AdvocateModalFooter","data-sentry-source-file":"advocate-modal-footer.tsx",children:[t&&(0,r.jsx)(c.z,{color:"custom",className:s.primaryButton,onClick:n,"data-testid":"close-btn",children:t}),a&&(0,r.jsx)(c.z,{color:"custom",className:s.secondaryButton,onClick:l,"data-testid":"close-btn-2",children:a})]})},u=e=>{let{title:t,close:a}=e;return(0,r.jsxs)("header",{className:"flex justify-between items-center px-4 py-2 border-b border-gray-200","data-sentry-component":"AdvocateModalHeader","data-sentry-source-file":"advocate-modal-header.tsx",children:[(0,r.jsx)("p",{className:"text-zinc-800 text-sm font-bold capitalize leading-[21px]",children:t}),(0,r.jsx)("button",{onClick:a,className:"px-1 py-1 hover:bg-gray-50 transition focus:bg-gray-50 rounded-full focus:outline-gray","data-testid":"close-icon-btn",children:(0,r.jsx)(o.bM,{color:"black",fill:"black","data-sentry-element":"IconClose","data-sentry-source-file":"advocate-modal-header.tsx"})})]})};var f=a(7363),y=a(64142);let x=e=>{var t;let{reward:a,index:n,icon:l,isLast:o}=e,s={container:(0,d.cn)("flex flex-row items-center justify-between w-full bg-neutral-100 px-3 py-3",o?"":"border-b border-gray-200"),item:"flex flex-col w-full items-start",title:"text-gray-500 text-[14px] font-bold",date:"text-gray-400 text-[13px] font-light",amount:"text-gray-500 text-[15px] font-bold",icon:"pr-2"};return(0,r.jsxs)("div",{className:s.container,"data-sentry-component":"AdvocateHistoryRewardItem","data-sentry-source-file":"advocate-history-rewards-item.tsx",children:[(0,r.jsx)("div",{className:s.icon,children:l}),(0,r.jsxs)("div",{className:s.item,children:[(0,r.jsx)("p",{className:s.title,children:a.friendName}),(0,r.jsx)("p",{className:s.date,children:a.createdOn?(0,f.Z)(new Date(a.createdOn),"PPP H:mm"):""})]}),(0,r.jsx)("p",{className:s.amount,children:(0,y.n4)({number:null!==(t=a.rewardAmount)&&void 0!==t?t:0,currencyCode:"USD"})})]},n)},p=e=>{let{title:t,icon:a,rewards:n}=e;return(0,r.jsxs)("div",{className:"flex flex-col w-full px-4 py-2 mt-3","data-sentry-component":"AdvocateHistoryRewards","data-sentry-source-file":"advocate-history-rewards.tsx",children:[(0,r.jsx)("p",{className:"text-neutral-600 text-sm font-medium mb-3",children:t}),(0,r.jsx)("div",{className:"w-full max-h-[327px] overflow-y-auto rounded-lg",children:n.map((e,t)=>(0,r.jsx)(x,{icon:a,index:t,reward:e,isLast:t===n.length-1},t))})]})},h=e=>{let{open:t,close:a,rewards:n}=e,{f:c}=(0,i.Y)(),f=l()(n)?"":"sm:max-w-screen-sm",y={modal:(0,d.cn)("fixed sm:relative rounded-none sm:rounded-xl inset-0 sm:inset-auto",f),section:"flex flex-col w-full h-full sm:h-fit"};return(0,r.jsx)(s.u_,{open:t,onClose:a,className:y.modal,"data-sentry-element":"Modal","data-sentry-component":"AdvocateHistoryModal","data-sentry-source-file":"advocate-history-modal.tsx",children:(0,r.jsxs)("section",{className:y.section,children:[(0,r.jsx)(u,{title:c({id:"referral.history"}),close:a,"data-sentry-element":"AdvocateModalHeader","data-sentry-source-file":"advocate-history-modal.tsx"}),l()(n)&&(0,r.jsx)("p",{className:"text-neutral-600 text-sm font-normal px-4 py-2 mt-3 mb-3",children:c({id:"referral.history.empty"})}),!l()(n)&&(0,r.jsx)(p,{title:c({id:"referral.history.completed"}),rewards:n,icon:(0,r.jsx)(o.h9,{})}),(0,r.jsx)(m,{primaryButtonText:c({id:"referral.history.close"}),onPrimaryButtonClick:a,"data-sentry-element":"AdvocateModalFooter","data-sentry-source-file":"advocate-history-modal.tsx"})]})})};var _=a(81071),b=a(1499),N=a(9845);let v=e=>{let{open:t,close:a,hasActiveSub:n}=e,{f:l}=(0,i.Y)(),o=(0,_.useRouter)(),{trackAction:d}=(0,N.D)(),c=()=>{(0,b.HK)(d,"ineligible-dismiss"),a()};return(0,r.jsx)(s.u_,{open:t,onClose:c,className:"relative rounded-xl","data-sentry-element":"Modal","data-sentry-component":"AdvocateIneligibleModal","data-sentry-source-file":"advocate-ineligible-modal.tsx",children:(0,r.jsxs)("section",{className:"flex flex-col",children:[(0,r.jsx)(u,{title:l({id:"referral.ineligibility"}),close:a,"data-sentry-element":"AdvocateModalHeader","data-sentry-source-file":"advocate-ineligible-modal.tsx"}),(0,r.jsx)("p",{className:"text-neutral-600 text-sm font-normal px-4 py-2 mt-3 mb-3",children:l({id:"referral.ineligibility.description"})}),n?(0,r.jsx)(m,{primaryButtonText:l({id:"referral.ineligibility.ok"}),onPrimaryButtonClick:c}):(0,r.jsx)(m,{primaryButtonText:l({id:"subscription.tiered.subscribeHeader"}),onPrimaryButtonClick:()=>{(0,b.HK)(d,"ineligible-subscribe"),a(),o.push("/subscription")},secondaryButtonText:l({id:"referral.history.close"}),onSecondaryButtonClick:c})]})})};var g=a(21576);let E=e=>{let{open:t,email:a,isLoggedIn:n}=e,l=(0,_.useRouter)(),{f:o}=(0,i.Y)(),d=()=>n?"/invoices":a?"/login?email=".concat(encodeURIComponent(a)):"/login";return(0,r.jsx)(s.u_,{open:t,onClose:()=>{},className:"fixed sm:relative [@media(max-width:640px)]:inset-0 rounded-none sm:rounded-lg","data-sentry-element":"Modal","data-sentry-component":"UnableToRedeemModal","data-sentry-source-file":"unable-to-redeem-modal.tsx",children:(0,r.jsxs)("section",{className:"flex flex-col w-full h-full px-6 py-5",children:[(0,r.jsxs)("header",{className:"flex flex-col justify-center items-center",children:[(0,r.jsx)(g.V.Title,{as:"h1",className:"text-gray-800 text-2xl font-bold leading-loose","data-sentry-element":"unknown","data-sentry-source-file":"unable-to-redeem-modal.tsx",children:o({id:"referral.modal.unable.redeem"})}),(0,r.jsx)(g.V.Title,{as:"h2",className:"text-gray-800 text-lg font-normal leading-7","data-sentry-element":"unknown","data-sentry-source-file":"unable-to-redeem-modal.tsx",children:o({id:"referral.modal.existing.user"})})]}),(0,r.jsx)("footer",{className:"flex flex-col h-full justify-end sm:mt-6",children:(0,r.jsx)(c.z,{color:"primary",style:{width:"100%"},onClick:()=>l.push(d()),"data-sentry-element":"RoundedButton","data-sentry-source-file":"unable-to-redeem-modal.tsx",children:o({id:n?"dialog.modal.continue.button":"referral.modal.login.update"})})})]})})};var w=a(45172);let j=e=>{let{open:t,close:a}=e,{f:n,ft:l}=(0,i.Y)(),{trackAction:o}=(0,N.D)(),c={modal:(0,d.cn)("fixed sm:relative rounded-none sm:rounded-xl inset-0 sm:inset-auto"),section:"flex flex-col w-full h-full sm:h-fit"},f=()=>{(0,b.HK)(o,"reward-limit-dismiss"),a()};return(0,r.jsx)(s.u_,{open:t,onClose:()=>{},className:c.modal,"data-sentry-element":"Modal","data-sentry-component":"AdvocateLimitModal","data-sentry-source-file":"advocate-limit-modal.tsx",children:(0,r.jsxs)("section",{className:c.section,children:[(0,r.jsx)(u,{title:n({id:"referral.modal.limit.title"}),close:f,"data-sentry-element":"AdvocateModalHeader","data-sentry-source-file":"advocate-limit-modal.tsx"}),(0,r.jsx)("p",{className:"text-neutral-600 text-sm font-normal px-4 py-2 mt-3",children:n({id:"referral.modal.limit.body1"})}),(0,r.jsx)("p",{className:"text-neutral-600 text-sm font-normal px-4 py-2 mt-3",children:n({id:"referral.modal.limit.body2"})}),(0,r.jsx)(m,{primaryButtonText:l({id:"signup.header"}),secondaryButtonText:l({id:"referral.modal.limit.dismiss"}),onPrimaryButtonClick:()=>{(0,b.HK)(o,"reward-limit-signup"),a(),window.open(w.Kj,"_blank")},onSecondaryButtonClick:f,"data-sentry-element":"AdvocateModalFooter","data-sentry-source-file":"advocate-limit-modal.tsx"})]})})}},24351:function(e,t,a){a.d(t,{$:function(){return l}});var r=a(37821);a(58078);var n=a(87698);let l=e=>{let{className:t,...a}=e;return(0,r.jsxs)("svg",{"aria-hidden":"true",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:(0,n.cn)("inline w-4 h-4 mr-2 text-gray-100 animate-spin fill-gray-800",t),viewBox:"0 0 100 101",...a,"data-sentry-element":"svg","data-sentry-component":"Spinner","data-sentry-source-file":"spinner.tsx",children:[(0,r.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor","data-sentry-element":"path","data-sentry-source-file":"spinner.tsx"}),(0,r.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill","data-sentry-element":"path","data-sentry-source-file":"spinner.tsx"})]})}},52757:function(e,t,a){a.d(t,{W:function(){return m}});var r=a(7363),n=a(44513),l=a(31118),o=a(71743),s=a(68293),i=a(27833),d=a(70408);let c={"en-US":n.default,"fr-FR":l.default,"de-DE":o.default,"it-IT":s.default,"es-ES":i.default,"nl-NL":d.default},m=e=>{let{date:t,formatStr:a="PP",locale:n}=e;return(0,r.Z)(t,a,{locale:c[n]})}},13376:function(e,t,a){a.d(t,{n:function(){return i}});var r=a(64144),n=a(80331),l=a(9411),o=a(36543),s=a(12272);let i=async e=>{try{if(!s.t.NEXT_PUBLIC_FRIENDBUY_CAMPAIGN_ID)throw Error("NEXT_PUBLIC_FRIENDBUY_CAMPAIGN_ID env is not set");let t=await (0,n.A)({user:null==e?void 0:e.user}),a=o.F+"/friendbuy/personal-referral-link";return await (0,r.KF)(a,{method:"POST",headers:{...t,"Content-Type":"application/json"},body:JSON.stringify({campaignId:s.t.NEXT_PUBLIC_FRIENDBUY_CAMPAIGN_ID})})}catch(e){l.D.error("Error getting referral link",e)}}},45172:function(e,t,a){a.d(t,{Kj:function(){return l},S5:function(){return o},cI:function(){return s}});var r=a(9411),n=a(69021);let l="https://app.impact.com/campaign-campaign-info-v2/Invoice-Simple.brand",o=async e=>{try{let a=window.ire,r=await (0,n.l)().catch(()=>"");if(a){var t;a("identify",{customerId:e.userId,customerEmail:null!==(t=null==e?void 0:e.email)&&void 0!==t?t:"",customProfileId:r})}}catch(t){r.D.error("Failed to track Impact user - nextjs",{error:t,attributes:e})}},s=async e=>{try{let r=window.ire,l=await (0,n.l)().catch(()=>"");if(r){var t,a;r("trackConversion",46690,{orderId:"IR_AN_64_TS",customerId:null!==(t=null==e?void 0:e.userId)&&void 0!==t?t:"",customerEmail:null!==(a=null==e?void 0:e.email)&&void 0!==a?a:"",customProfileId:l},{verifySiteDefinitionMatch:!0})}}catch(t){r.D.error("Failed to track Impact account - nextjs",{error:t,attributes:e})}}},60754:function(e,t,a){a.d(t,{ReferralShare:function(){return k}});var r=a(37821),n=a(58078),l=a(64142),o=a(45075),s=a(9777),i=a(1309),d=a(73378),c=a(24351);let m=e=>{let t=e.secondaryButtonText?"":"w-full p-4 text-base",a=e.onSecondaryButtonClick||e.onClose;return(0,r.jsxs)("footer",{className:"flex flex-col gap-3 bg-gray-100 px-6 py-4 rounded-b-lg text-gray-900","data-sentry-component":"PromoModalFooter","data-sentry-source-file":"promo-modal-footer.tsx",children:[(0,r.jsxs)("div",{className:"promo-modal-footer-btn-container flex justify-between",children:[!!e.secondaryButtonText&&(0,r.jsx)(d.z,{onClick:a,type:"button",disabled:e.secondaryButtonLoading,children:e.secondaryButtonLoading?(0,r.jsx)(c.$,{}):e.secondaryButtonText}),(0,r.jsx)(d.z,{variant:"primary",disabled:e.primaryButtonLoading,className:t,onClick:e.onPrimaryButtonClick,"data-sentry-element":"Button","data-sentry-source-file":"promo-modal-footer.tsx",children:e.primaryButtonLoading?(0,r.jsx)(c.$,{}):e.primaryButtonText})]}),!!e.footerText&&(0,r.jsx)("p",{"data-testid":"promo-modal-footer-text",className:"text-center text-xs",children:e.footerText})]})},u=e=>(0,r.jsxs)("section",{className:"promo-modal-content","data-sentry-component":"PromoModalContent","data-sentry-source-file":"promo-modal-content.tsx",children:[(0,r.jsx)(i.L,{onClickXIcon:e.onClose,headerMessage:e.title,dataTestId:"promo-modal-x","data-sentry-element":"TopContainer","data-sentry-source-file":"promo-modal-content.tsx"}),(0,r.jsx)("figure",{children:e.image}),(0,r.jsx)("p",{"data-testid":"promo-modal-content-body",className:"w-full font-inter leading-7 p-7 text-[#454545] [@media(max-width:400px)]:overflow-y-scroll [@media(max-width:400px)]:h-48",children:e.body}),(0,r.jsx)(m,{...e,"data-sentry-element":"PromoModalFooter","data-sentry-source-file":"promo-modal-content.tsx"})]});var f=a(27547),y=a(42236);let x=e=>{let{ft:t}=(0,y.Y)(),a=t({id:"advocate.consent.modal.title"}),n=(0,r.jsx)(f._,{id:"advocate.consent.modal.description",values:{b:e=>(0,r.jsx)("strong",{className:"font-bold",children:e})}}),l=(0,r.jsx)("img",{src:"/images/advocate-reward.png",alt:a,className:"w-full object-contain"}),o=t({id:"advocate.consent.modal.cta"}),i=(0,r.jsx)(f._,{id:"advocate.consent.modal.terms",values:{link:e=>(0,r.jsx)("a",{href:"https://www.invoicesimple.com/referral-terms",target:"_blank",rel:"noreferrer",className:"cursor-pointer text-link-primary font-semibold",children:e})}});return(0,r.jsx)(s.u_,{open:e.isOpen,onClose:e.onDismiss,"data-sentry-element":"Modal","data-sentry-component":"ModalAdvocateConsent","data-sentry-source-file":"modal-advocate-consent.tsx",children:(0,r.jsx)(u,{title:a,body:n,image:l,primaryButtonText:o,footerText:i,primaryButtonLoading:e.loading,onPrimaryButtonClick:e.onAccept,onClose:e.onDismiss,"data-sentry-element":"PromoModalContent","data-sentry-source-file":"modal-advocate-consent.tsx"})})};var p=a(25044),h=a(29205),_=a(13376),b=a(62426),N=a(9845),v=a(65833),g=a(135),E=a(52757),w=a(45172);let j=()=>{let{ft:e,locale:t}=(0,y.Y)(),a=(0,E.W)({date:(0,g.Z)(Date.now()),formatStr:"MMMM do, yyyy",locale:t}),n={limitReached1:e({id:"referral.settings.limitReached1"}),limitReached2:e({id:"referral.settings.limitReached2"},{date:a}),limitReached3:e({id:"referral.settings.limitReached3"})};return(0,r.jsxs)("p",{className:"text-justify text-xs mt-5","data-sentry-component":"LimitReached","data-sentry-source-file":"limit-reached.tsx",children:[n.limitReached1," ",n.limitReached2," ",(0,r.jsx)("a",{className:"text-sky-700",href:w.Kj,target:"_blank",children:n.limitReached3}),"."]})};var T=a(92637);let I=(e,t)=>({referralInfo:t,isConsentRequired:e,copiedRecently:!1,showConsentModal:!1,savingConsent:!1,fetchingReferralInfo:!1,openHistoryModal:!1,openShareModal:!1,openIneligibilityModal:!1,openLimitModal:!1}),S=(e,t)=>{switch(t.type){case"SET_REFERRAL_INFO":return{...e,referralInfo:t.payload};case"SET_IS_CONSENT_REQUIRED":return{...e,isConsentRequired:t.payload};case"SET_COPIED_RECENTLY":return{...e,copiedRecently:t.payload};case"SET_SHOW_CONSENT_MODAL":return{...e,showConsentModal:t.payload};case"SET_SAVING_CONSENT":return{...e,savingConsent:t.payload};case"SET_FETCHING_REFERRAL_INFO":return{...e,fetchingReferralInfo:t.payload};case"SET_OPEN_HISTORY_MODAL":return{...e,openHistoryModal:t.payload};case"SET_OPEN_SHARE_MODAL":return{...e,openShareModal:t.payload};case"SET_OPEN_INELIGIBILITY_MODAL":return{...e,openIneligibilityModal:t.payload};case"SET_OPEN_LIMIT_MODAL":return t.payload&&(0,T.vm)(),{...e,openLimitModal:t.payload};default:return e}};var R=a(66962),C=a(84463),M=a(87698);let O=e=>{let{label:t,children:a,className:n}=e,l=(0,M.cn)("\n      relative text-xs w-full\n      before:content-[attr(tooltip-data)]\n      before:absolute\n      before:px-3 before:py-2\n      before:left-1/2 before:-top-3\n      before:w-max before:max-w-xs\n      before:-translate-x-1/2 before:-translate-y-full\n      before:bg-gray-200\n      before:rounded-md\n      before:opacity-0\n      before:transition-all\n\n      after:absolute\n      after:left-1/2 after:-top-3\n      after:h-0 after:w-0\n      after:-translate-x-1/2 after:border-8\n      after:border-t-gray-200\n      after:border-l-transparent\n      after:border-b-transparent\n      after:border-r-transparent\n      after:opacity-0\n      after:transition-all\n\n      hover:before:opacity-100\n      hover:after:opacity-100\n    ",n);return(0,r.jsx)("div",{className:l,"tooltip-data":t,"data-testid":t.toLowerCase().replace(" ","-"),"data-sentry-component":"Tooltip","data-sentry-source-file":"tooltip.tsx",children:a})},L=e=>{let{label:t,children:a}=e;return(0,r.jsxs)("div",{className:"flex flex-col md:flex-row w-full items-start md:items-center mt-2","data-sentry-component":"Row","data-sentry-source-file":"rows.tsx",children:[(0,r.jsx)(C._,{className:"text-xs font-inter text-label-gray font-medium w-full md:py-3 md:max-w-[150px] pr-3",label:t,"data-sentry-element":"Label","data-sentry-source-file":"rows.tsx"}),a]})},A={ReferralsThisWeek:e=>{let{referralsThisWeek:t,maxWeeklyReferrals:a}=e,{fta:n}=(0,y.Y)();return(0,r.jsx)(L,{label:n({id:"referral.settings.referralsThisWeek"}),"data-sentry-element":"Row","data-sentry-component":"ReferralsThisWeek","data-sentry-source-file":"rows.tsx",children:(0,r.jsx)("p",{className:"w-full text-start text-xs",children:"".concat(t,"/").concat(a)})})},Earnings:e=>{let{earnings:t}=e,{fta:a}=(0,y.Y)();return(0,r.jsx)(L,{label:a({id:"referral.settings.earnings"}),"data-sentry-element":"Row","data-sentry-component":"Earnings","data-sentry-source-file":"rows.tsx",children:(0,r.jsx)("p",{className:"w-full text-start text-xs",children:(0,l.n4)({number:t,currencyCode:"USD"})})})},Link:e=>{let{link:t,handleCopyLink:a,copiedRecently:n,isAllowedToUseReferral:l,openFriendbuyShare:o}=e,{f:s,fta:i}=(0,y.Y)(),c=l?"blur-none":"blur",m={icon:c,link:(0,M.cn)("w-full text-xs font-extralight truncate mt-1",c),button:"flex flex-row w-full border-gray-300 pl-3 pr-0",tooltip:(0,M.cn)("w-full md:w-[75%]",l?"pointer-events-auto":"pointer-events-none")};return(0,r.jsx)(L,{label:i({id:"referral.settings.link"}),"data-sentry-element":"Row","data-sentry-component":"Link","data-sentry-source-file":"rows.tsx",children:(0,r.jsxs)("div",{className:(0,M.cn)("flex flex-col md:flex-row w-full md:w-[400px] md:space-x-1",l?"":"select-none"),children:[(0,r.jsx)(O,{className:m.tooltip,label:s(n?{id:"referral.settings.link.copied"}:{id:"referral.settings.link.copy"}),"data-sentry-element":"Tooltip","data-sentry-source-file":"rows.tsx",children:(0,r.jsxs)(d.z,{variant:"white",className:m.button,onClick:a,"data-testid":"referral-link-btn","data-sentry-element":"Button","data-sentry-source-file":"rows.tsx",children:[(0,r.jsx)("p",{"data-testid":"referral-link",className:m.link,children:t}),n?(0,r.jsx)(R.f0,{width:50,className:m.icon}):(0,r.jsx)(R.Rx,{width:50,className:m.icon})]})}),(0,r.jsx)(d.z,{className:"w-full md:w-[25%] mt-2 md:mt-0","data-testid":"referral-share-btn",onClick:o,"data-sentry-element":"Button","data-sentry-source-file":"rows.tsx",children:s({id:"referral.settings.share"})})]})})},History:e=>{let{openReferralHistory:t}=e,{fta:a}=(0,y.Y)();return(0,r.jsx)(L,{label:a({id:"referral.settings.history"}),"data-sentry-element":"Row","data-sentry-component":"History","data-sentry-source-file":"rows.tsx",children:(0,r.jsx)(d.z,{variant:"primary",className:"w-full md:min-w-[400px] !mt-0","data-testid":"referral-history-btn",onClick:t,"data-sentry-element":"Button","data-sentry-source-file":"rows.tsx",children:a({id:"referral.settings.see.history"})})})}},k=e=>{var t,a,s,i,d,c,m;let{isReferralConsentGiven:u,isEligibleForReferral:f,referralLink:g,history:E,hasActiveSub:w}=e,{f:R}=(0,y.Y)(),{trackAction:C,user:M}=(0,N.D)(),[O,L]=(0,n.useReducer)(S,I(!1===u,{link:g,totalEarnings:null==E?void 0:E.totalAmount})),{isConsentRequired:k,referralInfo:D,copiedRecently:H,showConsentModal:B,savingConsent:P,fetchingReferralInfo:F,openHistoryModal:Y,openShareModal:W,openIneligibilityModal:K,openLimitModal:G}=O;if((0,n.useEffect)(()=>{let e=(0,v.Lm)(v.a$.REF),t=e===v.a$.REFERRAL_HISTORY,a=e===v.a$.REFERRAL_SHARE;if(t||a){let e=document.getElementById("refer-share");null==e||e.scrollIntoView({behavior:"smooth"}),k?L({type:"SET_SHOW_CONSENT_MODAL",payload:!0}):t?(L({type:"SET_OPEN_HISTORY_MODAL",payload:!0}),(0,T.HK)(C,"history-url")):a&&(L({type:"SET_OPEN_SHARE_MODAL",payload:!0}),(0,T.HK)(C,"share-url",{source:"settings"}))}},[]),(0,n.useEffect)(()=>{(Y||W)&&E&&(0,T.ip)(E)&&L({type:"SET_OPEN_LIMIT_MODAL",payload:!0})},[Y,W]),!M)return null;let U=l.RX.REFERRAL_PROGRAM,z=R({id:"advocate.consent.modal.terms"}).replace(/<\/?link>/g,""),Z=null!==(a=null!==(t=M.email)&&void 0!==t?t:M.objectId)&&void 0!==a?a:M.username,V=async()=>{try{L({type:"SET_FETCHING_REFERRAL_INFO",payload:!0});let e=await (0,_.n)({user:M});L({type:"SET_REFERRAL_INFO",payload:{link:e,totalEarnings:null==E?void 0:E.totalAmount}})}catch(e){}finally{L({type:"SET_FETCHING_REFERRAL_INFO",payload:!1})}},$=async()=>{(0,T.HK)(C,"terms-accept");try{L({type:"SET_SAVING_CONSENT",payload:!0});let e=[{consentType:U,consentValue:Z,consentMessage:z,consentStatus:l.lg.CONSENT_GIVEN}];await (0,h.p)({data:e,user:M}),L({type:"SET_IS_CONSENT_REQUIRED",payload:!1}),L({type:"SET_SHOW_CONSENT_MODAL",payload:!1}),V()}catch(e){}finally{L({type:"SET_SAVING_CONSENT",payload:!1})}},X=!!E&&E.referralsThisWeek>=E.maxWeeklyReferrals,Q=(0,r.jsx)("p",{className:"text-justify text-xs font-normal",children:"".concat(R({id:"referral.settings.description"}))});return F?(0,r.jsxs)(r.Fragment,{children:[Q,(0,r.jsx)(o.o,{className:"pt-4",count:3,height:37})]}):(0,r.jsxs)("div",{id:"refer-share","data-sentry-component":"ReferralShare","data-sentry-source-file":"referral-share.tsx",children:[(0,r.jsx)(x,{isOpen:B,loading:P,onAccept:$,onDismiss:()=>{(0,T.HK)(C,"terms-dismiss");let e=[{consentType:U,consentValue:Z,consentMessage:z,consentStatus:l.lg.CONSENT_NOT_GIVEN}];(0,h.p)({data:e,user:M}),L({type:"SET_SHOW_CONSENT_MODAL",payload:!1})},"data-sentry-element":"ModalAdvocateConsent","data-sentry-source-file":"referral-share.tsx"}),(0,r.jsx)(b._,{openShareModal:W,closeShareModal:()=>{G||L({type:"SET_OPEN_SHARE_MODAL",payload:!1})},"data-sentry-element":"ModalFriendbuyShare","data-sentry-source-file":"referral-share.tsx"}),(0,r.jsx)(p.mR,{open:Y,close:()=>{G||L({type:"SET_OPEN_HISTORY_MODAL",payload:!1})},rewards:null!==(s=null==E?void 0:E.results)&&void 0!==s?s:[],"data-sentry-element":"AdvocateHistoryModal","data-sentry-source-file":"referral-share.tsx"}),(0,r.jsx)(p.Z0,{open:G,close:()=>{L({type:"SET_OPEN_LIMIT_MODAL",payload:!1})},"data-sentry-element":"AdvocateLimitModal","data-sentry-source-file":"referral-share.tsx"}),(0,r.jsx)(p.Kk,{hasActiveSub:w,open:K,close:()=>{L({type:"SET_OPEN_INELIGIBILITY_MODAL",payload:!1})},"data-sentry-element":"AdvocateIneligibleModal","data-sentry-source-file":"referral-share.tsx"}),Q,(0,r.jsx)(A.ReferralsThisWeek,{referralsThisWeek:null!==(i=null==E?void 0:E.referralsThisWeek)&&void 0!==i?i:0,maxWeeklyReferrals:null!==(d=null==E?void 0:E.maxWeeklyReferrals)&&void 0!==d?d:5,"data-sentry-element":"unknown","data-sentry-source-file":"referral-share.tsx"}),(0,r.jsx)(A.Earnings,{earnings:null!==(c=D.totalEarnings)&&void 0!==c?c:0,"data-sentry-element":"unknown","data-sentry-source-file":"referral-share.tsx"}),(0,r.jsx)(A.Link,{link:null!==(m=D.link)&&void 0!==m?m:"",copiedRecently:H,isAllowedToUseReferral:!k&&f,handleCopyLink:()=>{var e;if((0,T.HK)(C,"link-copy"),k){L({type:"SET_SHOW_CONSENT_MODAL",payload:!0});return}if(!f){L({type:"SET_OPEN_INELIGIBILITY_MODAL",payload:!0});return}L({type:"SET_COPIED_RECENTLY",payload:!0}),setTimeout(()=>{L({type:"SET_COPIED_RECENTLY",payload:!1})},3e3),navigator.clipboard.writeText(null!==(e=D.link)&&void 0!==e?e:"")},openFriendbuyShare:()=>{if((0,T.HK)(C,"share-click",{source:"settings"}),k){L({type:"SET_SHOW_CONSENT_MODAL",payload:!0});return}if(!f){L({type:"SET_OPEN_INELIGIBILITY_MODAL",payload:!0});return}L({type:"SET_OPEN_SHARE_MODAL",payload:!0})},"data-sentry-element":"unknown","data-sentry-source-file":"referral-share.tsx"}),(0,r.jsx)(A.History,{openReferralHistory:()=>{if((0,T.HK)(C,"history-click",{source:"settings"}),k){L({type:"SET_SHOW_CONSENT_MODAL",payload:!0});return}if(!f){L({type:"SET_OPEN_INELIGIBILITY_MODAL",payload:!0});return}L({type:"SET_OPEN_HISTORY_MODAL",payload:!0})},"data-sentry-element":"unknown","data-sentry-source-file":"referral-share.tsx"}),X&&(0,r.jsx)(j,{})]})}},62426:function(e,t,a){a.d(t,{_:function(){return l}});var r=a(37821);a(58078);var n=a(9777);let l=e=>(0,r.jsx)(n.u_,{open:e.openShareModal,onClose:e.closeShareModal,className:"sm:flex sm:justify-center","data-sentry-element":"Modal","data-sentry-component":"ModalFriendbuyShare","data-sentry-source-file":"modal-friendbuy-share.tsx",children:(0,r.jsx)("div",{id:"fb-advocate-share-modal"})})},84463:function(e,t,a){a.d(t,{_:function(){return r._}});var r=a(4071)},4071:function(e,t,a){a.d(t,{_:function(){return l}});var r=a(37821);a(58078);var n=a(87698);let l=e=>{let{label:t,isRequired:a,...l}=e;return(0,r.jsx)("label",{className:(0,n.cn)("text-gray-700 text-sm font-medium leading-tight pb-1",e.className),...l,"data-sentry-component":"Label","data-sentry-source-file":"label.tsx",children:a?"".concat(t,"*"):t})}},27547:function(e,t,a){a.d(t,{_:function(){return l}});var r=a(37821);a(58078);var n=a(92973);function l(e){let{id:t,...a}=e;return(0,r.jsx)(n.Z,{id:t,...a,"data-sentry-element":"ReactIntlFormattedMessage","data-sentry-component":"FormattedMessage","data-sentry-source-file":"formatted-message.tsx"})}}}]);