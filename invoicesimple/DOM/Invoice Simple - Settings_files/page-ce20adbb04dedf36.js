!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="99d0b999-6140-4b7a-ad04-ec2cc34f1224",e._sentryDebugIdIdentifier="sentry-dbid-99d0b999-6140-4b7a-ad04-ec2cc34f1224")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{64948:function(e,t,s){Promise.resolve().then(s.bind(s,48119)),Promise.resolve().then(s.bind(s,3535)),Promise.resolve().then(s.bind(s,94096)),Promise.resolve().then(s.bind(s,4693)),Promise.resolve().then(s.bind(s,54544)),Promise.resolve().then(s.bind(s,1913)),Promise.resolve().then(s.bind(s,93748)),Promise.resolve().then(s.bind(s,55444)),Promise.resolve().then(s.bind(s,95282)),Promise.resolve().then(s.bind(s,60038)),Promise.resolve().then(s.bind(s,33919)),Promise.resolve().then(s.bind(s,95217)),Promise.resolve().then(s.bind(s,74036)),Promise.resolve().then(s.bind(s,88069)),Promise.resolve().then(s.bind(s,69075)),Promise.resolve().then(s.bind(s,11301)),Promise.resolve().then(s.bind(s,60754)),Promise.resolve().then(s.bind(s,94004)),Promise.resolve().then(s.bind(s,36947)),Promise.resolve().then(s.bind(s,21631)),Promise.resolve().then(s.bind(s,65632)),Promise.resolve().then(s.bind(s,64765)),Promise.resolve().then(s.bind(s,12642)),Promise.resolve().then(s.bind(s,71931)),Promise.resolve().then(s.bind(s,90966)),Promise.resolve().then(s.bind(s,71156)),Promise.resolve().then(s.bind(s,53701)),Promise.resolve().then(s.bind(s,47465)),Promise.resolve().then(s.bind(s,35640)),Promise.resolve().then(s.bind(s,70747)),Promise.resolve().then(s.bind(s,74453)),Promise.resolve().then(s.bind(s,9)),Promise.resolve().then(s.bind(s,18897)),Promise.resolve().then(s.bind(s,19395)),Promise.resolve().then(s.bind(s,30433)),Promise.resolve().then(s.bind(s,9653))},29008:function(e,t,s){"use strict";s.d(t,{u:function(){return a}}),s(8956);var a=(0,s(3349).$)("9c822eaa8706ce76d157fb87bfde57b6ee2f93c5")},74611:function(e,t,s){"use strict";s.d(t,{g:function(){return l}});var a=s(83171),n=s(17188),r=s(78421);function l(e,t){return{queryKey:a.O0.accountStatus,queryFn:async()=>((null==e?void 0:e.fromInvoiceEditor)&&await (0,r.ch)(),{stripeStatus:await (0,n.H)()}),...t}}},17914:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(19395),n=s(83171),r=s(65556),l=s(30393);let i=e=>{let{pulsem_reviews:t}=(0,l.V)(["pulsem_reviews"]);return(0,a.useQuery)({queryKey:n.m7.status,queryFn:()=>(0,r.f)(),enabled:null==t?void 0:t.enabled,...e})}},68531:function(e,t,s){"use strict";s.d(t,{Jm:function(){return r},Zn:function(){return l},bA:function(){return a},hC:function(){return i},rb:function(){return n}});let a=.17,n=1e3,r=1200,l=170,i=204},42978:function(e,t,s){"use strict";s.d(t,{Q:function(){return i}});var a=s(28763),n=s.n(a),r=s(61449),l=s(17892);function i(e){return{mutationFn:async e=>{let t=await (0,l.Y)(),s={["val".concat(n()(e.type))]:e.value,type:e.type,remoteId:e.remoteId,deleted:!1,updated:new Date().getTime(),objectId:e.objectId||void 0};if(s.objectId)return await (0,r.W)("/classes/Setting/".concat(s.objectId),{headers:{"X-Parse-Session-Token":t},cache:"no-cache",body:JSON.stringify(s),method:"PUT"}),{remoteId:e.remoteId};let a={remoteId:{$eq:s.remoteId}},i="where=".concat(JSON.stringify(a)),o=await (0,r.W)("/classes/Setting?".concat(i),{headers:{"X-Parse-Session-Token":t},cache:"no-cache",method:"GET"}).catch(()=>null);try{var d;if(o&&(null==o?void 0:null===(d=o.results)||void 0===d?void 0:d.length))return await (0,r.W)("/classes/Setting/".concat(o.results[0].objectId),{headers:{"X-Parse-Session-Token":t},cache:"no-cache",body:JSON.stringify(s),method:"PUT"}),{remoteId:e.remoteId};return await (0,r.W)("/classes/Setting",{headers:{"X-Parse-Session-Token":t},cache:"no-cache",body:JSON.stringify(s),method:"POST"}),{remoteId:e.remoteId}}catch(e){if("A duplicate value for a field with unique values was provided"===e.message)return;throw Error(e.message)}},...e}}},65941:function(e,t,s){"use strict";s.d(t,{m:function(){return r}});var a=s(99171),n=s.n(a);function r(e){let{transformedSettings:t,labelToRemoteIdMap:s,mutation:a,fieldErrors:r}=e;return n()((e,n)=>{let{name:l}=n,i=s[l],o=t[i];if(r[l]){console.error("Field ".concat(l," has errors"));return}a.mutate({remoteId:i,value:e[l],objectId:o.objectId,type:o.type})},500)}},63373:function(e,t,s){"use strict";function a(e,t){let s={};for(let[a,n]of Object.entries(t))s[a]=e[n].value;return s}s.d(t,{k:function(){return a}}),s(67691)},39217:function(e,t,s){"use strict";s.d(t,{Tg:function(){return h},XI:function(){return f},hL:function(){return m},j5:function(){return u},oH:function(){return x},xA:function(){return y},zk:function(){return p}});var a=s(8232),n=s(17328),r=s(25457),l=s(62384),i=s(69379),o=s(64142),d=s(26935),c=s(81387);let u=e=>{let{subscriptionStatus:t,source:s}=e,a=!((null==t?void 0:t.active)&&t.hasPaidSub)&&!(null==t?void 0:t.hasFreeSub)&&!(null==t?void 0:t.hadPaidSubsInThePast);return(null==t?void 0:t.docsThresholdCount)===0?a:!!a&&["settings","invoices"].includes(s)},m=e=>e.subscriptionTier===o.QV.STARTER||e.subscriptionTier===o.QV.ESSENTIALS||"legacy-invoice-limit-3"===e.legacyUsageGroup,x=e=>e.subscriptionTier===o.QV.PLUS||"legacy-invoice-limit-10"===e.legacyUsageGroup,f=e=>{let{subscriptionStatus:t,source:s}=e;if(!t)return!1;if(u({subscriptionStatus:t,source:s}))return!0;if(!m(t)&&!x(t))return!1;{let{remainingDocCount:e,threshold:a}=p({subscriptionStatus:t,source:s});return e<=a}},p=e=>{let{subscriptionStatus:t,source:s}=e,a=0,n=0;return t&&(u({subscriptionStatus:t,source:s})?a=Math.max(0,d.Tv.FREE_LIMIT_LOGGED_IN-t.docsThresholdCount):m(t)?(a=Math.max(0,d.Tv.TIER_1_LIMIT-t.docsCountLastMonth),n=1):x(t)&&(a=Math.max(0,d.Tv.TIER_2_LIMIT-t.docsCountLastMonth),n=3)),{remainingDocCount:a,threshold:n}},y=e=>parseInt((0,c.$)().getItem(i.F.DOC_LIMIT_BANNER_COUNT)||"0")!==e&&((0,c.$)().setItem(i.F.DOC_LIMIT_BANNER_COUNT,"".concat(e)),!0),h=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;if(!t||"monthly"===t)return e;let i=s;return i=(0,a.Z)(i,(0,n.Z)(e)),i=(0,r.Z)(i,1),(0,l.Z)([i,e])}},2246:function(e,t,s){"use strict";s.d(t,{uV:function(){return a.uV},z_:function(){return a.z_}});var a=s(93426)},93426:function(e,t,s){"use strict";s.d(t,{VT:function(){return x},X$:function(){return u},u4:function(){return m},uV:function(){return o},z_:function(){return d}});var a=s(13967),n=s(40610),r=s(18962),l=s(69379),i=s(81387);let o=e=>e.active&&"com.invoicesimple.freetrial.14day"===e.orderSku&&!(null==e?void 0:e.hadPaidSubsInThePast),d=e=>!!e&&o(e),c=e=>(null==e?void 0:e.active)?(0,a.Z)(e.activeUntil,1).getTime():0,u=e=>{let t=c(e),s=Date.now(),a=(0,n.Z)(t,s);return a<=0?0:a},m=e=>({featuresTotal:Object.values(e).length,featuresCompleted:Object.values(e).filter(e=>"completed"===e).length}),x=()=>{var e;let t=new Date(null!==(e=(0,i.$)().getItem(l.F.TRIAL_BANNER_LAST_SHOWN))&&void 0!==e?e:0),s=new Date;return!(t&&(0,r.Z)(t,s))&&((0,i.$)().setItem(l.F.TRIAL_BANNER_LAST_SHOWN,s.toString()),!0)}},77774:function(e,t,s){"use strict";s.d(t,{NK:function(){return n.N},Y0:function(){return a.AlertBanner}});var a=s(47396);s(61603),s(16243);var n=s(96755)},96755:function(e,t,s){"use strict";var a,n;s.d(t,{N:function(){return a}}),(n=a||(a={})).Banner="banner",n.Modal="modal"},69252:function(e,t,s){"use strict";s.d(t,{J2:function(){return i},yk:function(){return d},xo:function(){return o}});var a=s(37821),n=s(58078),r=s(70269),l=s(87698);let i=r.fC,o=r.xz,d=n.forwardRef((e,t)=>{let{className:s,align:n="center",sideOffset:i=4,...o}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsx)(r.VY,{ref:t,align:n,sideOffset:i,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})})});d.displayName=r.VY.displayName},36543:function(e,t,s){"use strict";s.d(t,{F:function(){return a}});let a="/api/v3/app"},62374:function(e,t,s){"use strict";s.d(t,{g:function(){return r},u:function(){return n}});var a=s(12272);let n=()=>{if(a.t.NEXT_PUBLIC_REACT_APP_PAYPAL_DASHBOARD_URL)window.open(a.t.NEXT_PUBLIC_REACT_APP_PAYPAL_DASHBOARD_URL,"_blank");else throw Error("No PAYPAL_DASHBOARD_URL setup")},r=()=>{window.open("https://dashboard.stripe.com/dashboard","_blank")}},44355:function(e,t,s){"use strict";s.d(t,{D0:function(){return l},p7:function(){return i}});var a=s(64142),n=s(64144),r=s(17892);async function l(e){let{file:t,remoteId:s,user:l}=e,i=await (0,r.Y)(),o=l.objectId,d=l.account.objectId,c={photoId:s,accountId:d,extension:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(".");return t[t.length-1].toLowerCase()}(t.name)};return await (0,n.KF)("/api/v2/request-upload-photo",{method:"POST",headers:{"X-Parse-Session-Token":i,"x-is-account":d,"x-is-user":o,"Content-Type":a.bT.APP_JSON},body:JSON.stringify(c),cache:"no-cache"})}let i=async e=>{let{presignedUrl:t,file:s}=e;return fetch(t,{method:"PUT",body:s,headers:{"Content-Type":s.type,"Content-Length":s.size.toString()}})}},65556:function(e,t,s){"use strict";s.d(t,{f:function(){return i}});var a=s(77740),n=s(64144),r=s(80331),l=s(36543);async function i(){try{let e=await (0,r.A)();return await (0,n.KF)(l.F+"/pulsem/account",{method:"GET",headers:{...e,"Content-Type":"application/json"}})}catch(t){if(t instanceof a.RequestFailedError){var e;switch(null===(e=t.logData)||void 0===e?void 0:e.statusCode){case 403:return null;case 404:return{onboarded:!1}}}throw t}}},29530:function(e,t,s){"use strict";s.d(t,{T:function(){return r}});var a=s(61449),n=s(17892);async function r(){let e=await (0,n.Y)(),t=new URLSearchParams({where:JSON.stringify({deleted:{$eq:!1}})});return(await (0,a.W)("/classes/Setting?".concat(t),{headers:{"X-Parse-Session-Token":e},cache:"no-cache"})).results}},2144:function(e,t,s){"use strict";s.d(t,{I:function(){return c}});var a=s(9411),n=s(17892),r=s(61449);let l=async(e,t)=>{let{objectId:s,...a}=e;await (0,r.W)("/classes/Setting",{method:"POST",cache:"no-cache",body:JSON.stringify({...a}),headers:{"X-Parse-Session-Token":t}})};var i=s(67691);function o(e,t){if(e&&i.MP.safeParse(e).success)return{type:i.Sd.Str,remoteId:e.name,valStr:new String(e.value).valueOf(),updated:new Date().getTime(),deleted:!1,objectId:t};if(e&&i.cj.safeParse(e).success)return{type:i.Sd.Bool,remoteId:e.name,valBool:new Boolean(e.value).valueOf(),updated:new Date().getTime(),deleted:!1,objectId:t};if(e&&i.pP.safeParse(e).success)return{type:i.Sd.Num,remoteId:e.name,valNum:new Number(e.value).valueOf(),updated:new Date().getTime(),deleted:!1,objectId:t};if(e&&i.KV.safeParse(e).success)return{type:i.Sd.Dec,remoteId:e.name,valDec:new Number(e.value).valueOf(),updated:new Date().getTime(),deleted:!1,objectId:t};throw Error("Invalid state reached when constructing parseSetting from setting: ".concat(e))}let d=async(e,t)=>{await (0,r.W)("/classes/Setting/".concat(e.objectId),{method:"PUT",cache:"no-cache",body:JSON.stringify({...e}),headers:{"X-Parse-Session-Token":t}})},c=async e=>{let t=await (0,n.Y)();t&&await Promise.all(e.map(e=>u(e,t)))},u=async(e,t)=>{try{if(e.parseObjectId){let s=o(e.setting,e.parseObjectId);await d(s,t)}else{let s=o(e.setting,"unused");await l(s,t)}}catch(t){a.D.error(t,{errorMsg:"Error while saving setting",data:e})}}},67691:function(e,t,s){"use strict";s.d(t,{KV:function(){return f},MP:function(){return o},Sd:function(){return n},cj:function(){return c},pP:function(){return m},x4:function(){return w}});var a,n,r=s(51668),l=s(64142);let i=r.G0([r.i0(l.Vd.CompanyLogo),r.i0(l.Vd.CompanyIndustry),r.i0(l.Vd.CompanyIndustryGCID),r.i0(l.Vd.ThemeColor),r.i0(l.Vd.TaxLabel),r.i0(l.Vd.LocaleCurrencyCode),r.i0(l.Vd.InvoiceLastNo),r.i0(l.Vd.EstimateLastNo),r.i0(l.Vd.CompanyName),r.i0(l.Vd.ContactEmail),r.i0(l.Vd.CompanyAddressLine1),r.i0(l.Vd.CompanyAddressLine2),r.i0(l.Vd.CompanyAddressLine3),r.i0(l.Vd.ContactPhone),r.i0(l.Vd.ContactMobile),r.i0(l.Vd.ContactFax),r.i0(l.Vd.CompletedInvoiceNumber),r.i0(l.Vd.ContactPhoneDialCode),r.i0(l.Vd.CompanyBusinessNumber),r.i0(l.Vd.RenameInvoiceTitle),r.i0(l.Vd.RenameEstimateTitle),r.i0(l.Vd.LocaleLanguage),r.i0(l.Vd.RequestReviewLink1),r.i0(l.Vd.ContactWebsiteUrl),r.i0(l.Vd.ContactName),r.i0(l.Vd.DefaultEstimateNote),r.i0(l.Vd.DefaultInvoiceNote),r.i0(l.Vd.CompanySize),r.i0(l.Vd.CompanyAnnualRevenueAmount),r.i0(l.Vd.CompanyAnnualRevenueCurrency),r.i0(l.Vd.LocaleDateFormat),r.i0(l.Vd.EmailDefaultMessage),r.i0(l.Vd.RenameCompanyBusinessNumber),r.i0(l.Vd.RenameItemQuantity),r.i0(l.Vd.RenameItemRate),r.i0(l.Vd.PaymentBank),r.i0(l.Vd.PaymentPaypalEmail),r.i0(l.Vd.PaymentCheque),r.i0(l.Vd.PaymentOther),r.i0(l.Vd.PaymentTerms),r.i0(l.Vd.RenameEstimateEstimateNumber),r.i0(l.Vd.RenameInvoiceInvoiceNumber),r.i0(l.Vd.StripeAccessToken),r.i0(l.Vd.StripeEmail),r.i0(l.Vd.StripePublishableKey),r.i0(l.Vd.ReferralLink),r.i0(l.Vd.TrialFeaturesExplored)]),o=r.Ry({name:i,value:r.Z_()}),d=r.G0([r.i0(l.Vd.TaxInclusive),r.i0(l.Vd.RequestReviewEnabled),r.i0(l.Vd.EstimateSignatureRequired),r.i0(l.Vd.PaymentAlwaysAddSurcharge),r.i0(l.Vd.EmailCopySender),r.i0(l.Vd.InvoiceHideQuantityAndRate),r.i0(l.Vd.InvoiceCompleteLogged),r.i0(l.Vd.InvoiceComplete2Logged),r.i0(l.Vd.PaymentQRCodeEnabled),r.i0(l.Vd.AcornFinancing),r.i0(l.Vd.AutomaticReviewsEnabled)]),c=r.Ry({name:d,value:r.O7()}),u=r.G0([r.i0(l.Vd.TaxType),r.i0(l.Vd.PaymentFeesType),r.i0(l.Vd.ThemeTemplate),r.i0(l.Vd.LocaleTaxYearStartMonth)]),m=r.Ry({name:u,value:r.Rx()});r.Ry({origin:r.Km(["paymentIntentRequest"]).optional(),modal:r.Km(["edge"]).optional(),"unbranded-upgrade-modal":r.Km(["1"]).optional()});let x=r.i0(l.Vd.TaxRate),f=r.Ry({name:x,value:r.Rx()});r.G0([o,c,m,f]),(a=n||(n={})).Str="str",a.Bool="bool",a.Dec="dec",a.Num="num";let p=r.Ry({remoteId:i,type:r.i0("str"),valStr:r.Z_()}),y=r.Ry({remoteId:d,type:r.i0("bool"),valBool:r.O7()}),h=r.Ry({remoteId:u,type:r.i0("num"),valNum:r.Rx()}),g=r.Ry({remoteId:x,type:r.i0("dec"),valDec:r.Rx()}),v=r.Ry({deleted:r.O7(),objectId:r.Z_(),updated:r.jt(r.Rx())}),b=r.G0([p,y,h,g]),w=r.G0([b,v])},15059:function(e,t,s){"use strict";s.d(t,{CA:function(){return r},Vy:function(){return l},vV:function(){return i}}),s(76225),s(31609);var a=s(64142);let n=e=>e.filter(e=>!e.isTrial&&e.isActive),r=e=>n(e).length>0,l=e=>{let t=e.filter(e=>e.orderSku&&e.orderSku.match(/web/)).sort((e,t)=>t.orderTimestamp-e.orderTimestamp);return t.length&&t[t.length-1]||null},i=e=>{if((null==e?void 0:e.isSubPaid)||(null==e?void 0:e.activeSubscriptionTier))return e.tier;switch(e.tier){case a.QV.PREMIUM_LEGACY:return a.QV.PREMIUM;case a.QV.ESSENTIALS:return a.QV.STARTER;case a.QV.PLUS:return a.QV.PRO}return e.tier}},76242:function(e,t,s){"use strict";s.d(t,{V:function(){return a}});let a=(0,s(4878).Ue)(e=>({alert:null,showAlert:t=>e(()=>({alert:t})),hideAlert:()=>e(()=>({alert:null}))}))},61692:function(e,t,s){"use strict";s.d(t,{N:function(){return l},g:function(){return i}});var a=s(26935),n=s(9411),r=s(2246);let l=e=>{let{user:t,feature:s,numUses:r,additionalConditions:l}=e;return t?(0,a.LM)({feature:s,user:t,numUses:r,additionalConditions:l}):(n.D.warning("User not found when checking feature access",{feature:s}),!1)},i=e=>{let{user:t,feature:s,subscriptionStatus:a}=e;if(!t)return n.D.warning("User not found when checking feature access",{feature:s}),!1;let i=!!a&&(0,r.uV)(a);return l({user:t,feature:s})||i}},52708:function(e,t,s){"use strict";s.d(t,{Y:function(){return n}});var a=s(59792);async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={"x-is-app":"app.invoicesimple.com","x-is-platform":"web","x-is-version":a.env.REACT_APP_VERSION||"99999.0.0-".concat(a.env.REACT_APP_ENV),...t.headers},n=await fetch(e,{...t,headers:s});if(!n.ok)throw Error("Failed to fetch data from next");return n.json()}},67337:function(e,t,s){"use strict";s.d(t,{F:function(){return u}});var a=s(77732);let n=(e,t)=>{t.shouldUseNativeValidation&&o(e,t);let s={};for(let n in e){let i=(0,a.U2)(t.fields,n),o=Object.assign(e[n]||{},{ref:i&&i.ref});if(l(t.names||Object.keys(e),n)){let e=Object.assign({},r((0,a.U2)(s,n)));(0,a.t8)(e,"root",o),(0,a.t8)(s,n,e)}else(0,a.t8)(s,n,o)}return s},r=e=>Array.isArray(e)?e.filter(Boolean):[],l=(e,t)=>e.some(e=>e.startsWith(t+".")),i=(e,t,s)=>{if(e&&"reportValidity"in e){let n=(0,a.U2)(s,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},o=(e,t)=>{for(let s in t.fields){let a=t.fields[s];a&&a.ref&&"reportValidity"in a.ref?i(a.ref,s,e):a.refs&&a.refs.forEach(t=>i(t,s,e))}},d=e=>null!=e.errors,c=(e,t)=>{let s={};for(;e.length;){let n=e[0],{code:r,message:l,path:i}=n,o=i.join(".");if(!s[o]){if("unionErrors"in n){let e=n.unionErrors[0].errors[0];s[o]={message:e.message,type:e.code}}else s[o]={message:l,type:r}}if("unionErrors"in n&&n.unionErrors.forEach(t=>t.errors.forEach(t=>e.push(t))),t){let e=s[o].types,l=e&&e[n.code];s[o]=(0,a.KN)(o,t,s,r,l?[].concat(l,n.message):n.message)}e.shift()}return s},u=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return async(a,r,l)=>{try{let n=await e["sync"===s.mode?"parse":"parseAsync"](a,t);return l.shouldUseNativeValidation&&o({},l),{errors:{},values:s.raw?a:n}}catch(e){if(d(e))return{values:{},errors:n(c(e.errors,!l.shouldUseNativeValidation&&"all"===l.criteriaMode),l)};throw e}}}},77114:function(e,t,s){"use strict";s.d(t,{F:function(){return r}});var a=s(83171),n=s(29530);function r(e,t){return{queryKey:a.pO.global,queryFn:async()=>({settings:await (0,n.T)()}),...t}}},48119:function(e,t,s){"use strict";s.r(t),s.d(t,{MODAL_STRIPE_OPT_OUT_COMPONENT:function(){return I},ModalStripeOptOut:function(){return k},PaymentsStripeOptOutModalActions:function(){return n}});var a,n,r=s(37821),l=s(58078),i=s(23528),o=s(19395),d={src:"/_next/static/media/stripe-opt-out-promo.21bbd3e0.png",height:772,width:1340,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAlUlEQVR42g3KQQqCQBhA4Tc2ZmqLpAhKFwXRpot1ti4RtGrRDVpkIgVCGwXTdObPt32fulxvRgQmrqLoAs7Nis5CFAaEWtDOkFjLq/iwiCzHbY2I5fQQnspHG2OY+h6H3Yam7Zl7HmpkMN+OtB/jdL1BKUji9TAc7lnKuyipW0v1ExxXaxAhzzO0qdgvS+JkNuARWgl/TgI/O/pOy4EAAAAASUVORK5CYII=",blurWidth:8,blurHeight:5},c=s(73378),u=s(9777),m=s(1309),x=s(42236),f=s(9411),p=s(17188),y=s(31957),h=s(74611),g=s(9845),v=s(30393),b=s(60315),w=s(57659);let j=()=>{let e=(0,w.M)(),t=(0,b.G)(),{multiprocessor_dormant_to_paypal_prompt:s,payments_enabled:a,paypal_v_stripe_variant:n}=(0,v.V)(["multiprocessor_dormant_to_paypal_prompt","payments_enabled","paypal_v_stripe_variant"]),{subscriptionStatus:r}=(0,g.D)(),l=e.isStripeOnboardingAvailable()&&(null==n?void 0:n.enabled),i=t.getPaypalOnboardingCompletedAt(),o=e.stripeOptOut();return!(!(null==a?void 0:a.enabled)||!(null==s?void 0:s.enabled)||!((null==r?void 0:r.hasFreeSub)||(null==r?void 0:r.hasPaidSub))||null!==o||!l||!i||Date.now()-i<26784e5)};var N=s(74805);let C=()=>{let e=j(),{shouldShowPaymentsModal:t,showPaymentsModal:s,hidePaymentsModal:a,isEligibleForPaymentsModal:n}=(0,N.gt)({modalConfig:{modalName:N.tl.SurchargePromoModal,isEligibleForModal:()=>e},initialState:!1});return{shouldShowModalStripeOptOut:t,showModalStripeOptOut:s,hideModalStripeOptOut:a,isEligibleForModalStripeOptOut:n}};(a=n||(n={})).OPT_OUT="opt-out",a.OPT_IN="opt-in";let I="multiprocessor-to-paypal-only-modal",k=()=>{let e=(0,l.useRef)(null),{ft:t}=(0,x.Y)(),{trackAction:s}=(0,g.D)(),{refetch:a}=(0,o.useQuery)((0,h.g)()),[n,v]=(0,l.useState)(!1),[b,w]=(0,l.useState)(!1),{shouldShowModalStripeOptOut:j,showModalStripeOptOut:N,hideModalStripeOptOut:k,isEligibleForModalStripeOptOut:F}=C();(0,l.useEffect)(()=>{F&&!n&&(N(),s("payments-viewed",{component:I}),v(!0))},[F,n]);let S=async()=>{w(!0);try{await (0,p.GM)(),s("payments-cta",{action:"opt-in",component:I}),a()}catch(e){f.D.error(e),(0,y.jx)({title:"Error",body:"An error occurred while opting in.",isClosable:!0})}finally{k(),w(!1)}},R=async()=>{w(!0);try{await (0,p.Ov)(),s("payments-cta",{action:"opt-out",component:I}),a()}catch(e){(0,y.jx)({title:"Error",body:"An error occurred while opting out.",isClosable:!0}),f.D.error(e)}finally{k(),w(!1)}};return(0,r.jsx)(u.u_,{ref:e,open:j,onClose:R,"data-sentry-element":"Modal","data-sentry-component":"ModalStripeOptOut","data-sentry-source-file":"modal-stripe-opt-out.tsx",children:(0,r.jsxs)("div",{className:"stripe-optout-modal-content","data-testid":"stripe-optout-modal-content",children:[(0,r.jsx)(m.L,{onClickXIcon:R,dataTestId:"stripe-optout-modal-top-container",headerMessage:t({id:"stripeOptOut.modal.title"}),"data-sentry-element":"TopContainer","data-sentry-source-file":"modal-stripe-opt-out.tsx"}),(0,r.jsxs)("main",{children:[(0,r.jsx)("section",{children:(0,r.jsx)(i.default,{alt:"stripe opt-out promo",className:"w-full",src:d,"data-sentry-element":"Image","data-sentry-source-file":"modal-stripe-opt-out.tsx"})}),(0,r.jsx)("section",{className:"w-full font-inter leading-7 p-7 text-[#454545] [@media(max-width:400px)]:overflow-y-scroll [@media(max-width:400px)]:h-48",children:(0,r.jsx)("div",{children:t({id:"stripeOptOut.modal.description"})})})]}),(0,r.jsxs)("footer",{className:"flex justify-between bg-gray-100 px-6 py-4 flex-row rounded-b-lg text-gray-900",children:[(0,r.jsx)(c.z,{disabled:b,variant:"default","data-testid":"stripe-optout-modal-cancel-button",onClick:R,"data-sentry-element":"Button","data-sentry-source-file":"modal-stripe-opt-out.tsx",children:t({id:"stripeOptOut.modal.cancel"})}),(0,r.jsx)(c.z,{disabled:b,variant:"primary","data-testid":"stripe-optout-modal-submit-button",onClick:S,"data-sentry-element":"Button","data-sentry-source-file":"modal-stripe-opt-out.tsx",children:t({id:"stripeOptOut.modal.confirm"})})]})]})})}},4693:function(e,t,s){"use strict";s.r(t),s.d(t,{SubscriptionHandler:function(){return k}});var a=s(58078),n=s(81071),r=s(9),l=s(64142),i=s(77774),o=s(42236),d=s(9411);let c=async e=>{if(window&&window.AF)try{window.AF("pba","event",e)}catch(t){d.D.error("Error tracking AF event",{error:t,data:e})}},u=(e,t)=>{window.uetq=window.uetq||[],t?window.uetq.push("event",e,t):window.uetq.push("event",e)},m=(e,t,s)=>{var a,n;return null===(n=window)||void 0===n?void 0:null===(a=n.fbq)||void 0===a?void 0:a.call(window.fbq,e,t,s)};var x=s(88470),f=s(62708);let p=()=>{var e;return null===(e=window)||void 0===e?void 0:e.rdt},y=()=>{let e=p();null==e||e("init","t2_95mtjksx"),null==e||e("track","Purchase")};var h=s(64144),g=s(80331);let v=async e=>{let t=await (0,g.A)({user:e.user});await (0,h.KF)("/api/v2/subscription/email/premium",{body:JSON.stringify(e),method:"POST",headers:{...t,"Content-Type":l.bT.APP_JSON}})};var b=s(15059),w=s(76242),j=s(9845),N=s(52708);let C=(e,t,s)=>{try{if(!window.optimizely)return;"function"==typeof window.optimizely.push&&window.optimizely.push({type:"event",eventName:e,tags:s||{},properties:t||{}})}catch(a){d.D.error("Failed to track Web Optimizely event:",{error:a,eventName:e,eventTags:s,properties:t})}};var I=s(21373);let k=e=>{let{user:t}=(0,j.D)(),s=(0,n.useRouter)(),d=(0,n.usePathname)(),{showAlert:p}=(0,w.V)(),{f:h}=(0,o.Y)(),g=(0,a.useRef)(!1),k=(0,b.Vy)(e.subscriptions),F=e.subscriptionStatus.subscriptionTier,S=()=>{var e;return F?h({id:"purchase.alert.title.tier"},{tier:(0,I.M)((0,b.vV)({tier:F,isSubPaid:!!(null==t?void 0:t.isSubPaid),activeSubscriptionTier:null!==(e=null==t?void 0:t.activeSubscriptionTier)&&void 0!==e?e:null}))}):h({id:"invoice.list.purchase.alert.success.title"})},R=(0,r.useMutation)({mutationFn:async e=>await (0,N.Y)("/stripe/sessions/".concat(e)),onSuccess:s=>{var a,n;let{metadata:r}=s,o=(null===(a=e.searchParams)||void 0===a?void 0:a.totalAmount)?+(null===(n=e.searchParams)||void 0===n?void 0:n.totalAmount):s.amount_total;p({bannerType:"success",body:h({id:"invoice.list.purchase.alert.success.body"}),isClosable:!0,title:S(),type:i.NK.Banner}),(0,x.AA)("web-purchase"),(null==t?void 0:t.activeSubscriptionTier)===l.QV.PREMIUM&&v({accountId:r.accountId,email:s.customer_details.email,firstName:s.customer_details.name,user:t}),k&&((0,x.f3)(s.amount_total/100,s.currency||"USD"),function(e,t){var s;let a,n,r;if(!f.yv||t<=0)return;let l=(t/100).toString();try{a=top&&""!==top.document.referrer?encodeURIComponent(top.document.referrer.substring(0,512)):""}catch(e){a=null!==document.referrer?document.referrer.toString().substring(0,512):""}try{n=window&&window.top&&document.location&&window.top.location===document.location?document.location:window&&window.top&&window.top.location?window.top.location:document.location}catch(e){n=document.location}try{r=""!==parent.location.href?encodeURIComponent(parent.location.href.toString().substring(0,512)):""}catch(e){try{r=null!==n?encodeURIComponent(n.toString().substring(0,512)):""}catch(e){r=""}}let i,o="",d=document.createElement("script"),c=Number(document.getElementsByTagName("script").length)-1,u=document.getElementsByTagName("script")[c];void 0===i&&(i=Math.floor(1e17*Math.random())),o="dx.mountain.com/spx?conv=1&shaid=37238&tdr="+a+"&plh="+r+"&cb="+i+"&shoid="+e+"&shoamt="+l+"&shocur=&shopid=&shoq=&shoup=&shpil=",d.type="text/javascript",d.src=("https:"===document.location.protocol?"https://":"http://")+o,null===(s=u.parentNode)||void 0===s||s.insertBefore(d,u)}(k.orderId,o),u("purchase",{revenue_value:o,currency:e.searchParams.currency||"USD"}),m("track","Purchase",{value:o,currency:e.searchParams.currency||"USD"}),y(),C("subscription-purchase",{amount:o/100}),c({eventType:"EVENT",eventName:"af_purchase",eventRevenueCurrency:e.searchParams.currency||"USD",eventRevenue:o/100}),(0,x.FY)("subscription-purchase"))}});return(0,a.useEffect)(()=>{if(!e.searchParams||!d||g.current)return;let a="true"===e.searchParams.success,n=e.searchParams.sessionId;a&&n&&(null==t?void 0:t.isSubPaid)&&(g.current=!0,R.mutate(n),s.replace(d))},[e.searchParams,d,null==t?void 0:t.isSubPaid]),null}},54544:function(e,t,s){"use strict";s.r(t),s.d(t,{AccountDelete:function(){return p}});var a=s(37821),n=s(77774),r=s(73378),l=s(84463),i=s(42236),o=s(9411),d=s(76242),c=s(31957),u=s(9845),m=s(64144),x=s(80331);let f=async()=>{let e=await (0,x.A)();await (0,m.KF)("/api/v2/account-delete/request",{headers:e,method:"POST",parseAsText:!0})},p=e=>{let{f:t}=(0,i.Y)(),{showAlert:s}=(0,d.V)(),{user:m}=(0,u.D)(),x=async()=>{if(null==m?void 0:m.isSubPaid){(0,c.jx)({title:t({id:"account.delete.failed"}),body:t({id:"account.delete.failed.submessage"})});return}try{await f()}catch(e){o.D.error("Error requesting account deletion",e),(0,c.jx)({title:t({id:"account.delete.failed"}),body:t({id:"account.delete.failed.defaultmessage"})});return}(0,c.O7)({title:t({id:"account.delete.request.received"}),body:t({id:"account.delete.request.receivedmessage"})})};return(0,a.jsxs)("div",{className:"w-full items-center flex md:flex-row flex-col md:mt-0 mt-3","data-sentry-component":"AccountDelete","data-sentry-source-file":"account-delete.tsx",children:[(0,a.jsx)(l._,{label:t({id:"account.delete.title"}),className:"text-xs w-full md:py-3 font-inter text-label-gray font-medium","data-sentry-element":"Label","data-sentry-source-file":"account-delete.tsx"}),(0,a.jsx)(r.z,{className:"w-full md:min-w-[400px] !mt-0 bg-[#A94442] text-white",onClick:()=>{s({title:t({id:"account.delete.title"}),body:t({id:"account.delete.confirmationmessage"}),type:n.NK.Modal,onConfirm(){x()}})},"data-sentry-element":"Button","data-sentry-source-file":"account-delete.tsx",children:t({id:"account.delete.title"})})]})}},1913:function(e,t,s){"use strict";s.r(t),s.d(t,{AutomatedReviewsSettings:function(){return em}});var a=s(37821),n=s(58078),r=s(9),l=s(77732),i=s(64142),o=s(26935),d=s(9418),c=s(73378),u=s(40834),m=s(94747),x=s(24351),f=s(42236),p=s(31957),y=s(61692),h=s(17914),g=s(9845),v=s(67337),b=s(42978),w=s(65941),j=s(63373),N=s(53138),C=s.n(N),I=s(9777),k=s(19395),F=s(83171),S=s(64144),R=s(80331),E=s(36543);async function A(){try{let e=await (0,R.A)();return await (0,S.KF)(E.F+"/pulsem/reviews",{method:"GET",headers:{...e,"Content-Type":"application/json"}})}catch(e){throw Error("Failed to fetch feedback reviews: "+e)}}var M=s(30393);let L=e=>{let{pulsem_reviews:t}=(0,M.V)(["pulsem_reviews"]);return(0,k.useQuery)({queryKey:F.m7.reviews,queryFn:()=>A(),enabled:null==t?void 0:t.enabled,...e})};var V=s(14883);function P(e){let{onClose:t}=e,{f:s}=(0,f.Y)();return(0,a.jsx)("footer",{className:"flex justify-end items-center w-full px-4 py-3 bg-gray-100 rounded-b-[12px]","data-sentry-component":"ReviewsModalFooter","data-sentry-source-file":"reviews-modal-footer.tsx",children:(0,a.jsx)(V.z,{color:"custom",className:"px-3 py-1.5 bg-[#4D4D4D] rounded",onClick:t,"data-testid":"close-btn","data-sentry-element":"RoundedButton","data-sentry-source-file":"reviews-modal-footer.tsx",children:(0,a.jsx)("span",{className:"font-inter font-medium text-xs capitalize text-white",children:s({id:"settings.list.feedbackReviews.closeButton"})})})})}var T=s(66962);function _(e){let{onClose:t}=e,{f:s}=(0,f.Y)();return(0,a.jsxs)("header",{className:"flex flex-row justify-between items-center w-full h-[50px] px-4 md:px-5 py-3 border-b border-gray-200","data-sentry-component":"ReviewsModalHeader","data-sentry-source-file":"reviews-modal-header.tsx",children:[(0,a.jsx)("span",{className:"font-inter font-bold text-sm uppercase text-gray-800",children:s({id:"settings.list.feedbackReviews.title"})}),(0,a.jsx)("button",{onClick:t,className:"w-8 h-8","aria-label":"Close",children:(0,a.jsx)(T.bM,{color:"black",fill:"black","data-sentry-element":"IconClose","data-sentry-source-file":"reviews-modal-header.tsx"})})]})}var D=s(48139);let O=e=>{if(!e)return null;let t=new Date(e);if(isNaN(t.getTime()))return null;let s=new Date;return(0,D.Z)(s,t)},B=e=>{var t,s,n,r;let{review:l}=e,{f:i,fta:o}=(0,f.Y)(),d={Positive:{id:"settings.list.feedbackReviews.positiveExperience"},Neutral:{id:"settings.list.feedbackReviews.neutralExperience"},Negative:{id:"settings.list.feedbackReviews.negativeExperience"}},c={"How likely are you to recommend us to your friends and family?":{id:"settings.list.feedbackReviews.likelyToRecommend"},Professionalism:{id:"settings.list.feedbackReviews.professionalism"},"Quality of Service":{id:"settings.list.feedbackReviews.qualityOfService"}},u=null===(t=l.mood)||void 0===t?void 0:t.value,m=o(d[u]?d[u]:d.Neutral),x=O(l.datetime||""),p=null!==x?i({id:"app.daysAgoPlural"},{count:x}):"";return(0,a.jsxs)("div",{className:"px-6 py-3 min-h-[100px] md:min-h-[137px] border-b border-gray-200","data-sentry-component":"ReviewsModalItem","data-sentry-source-file":"reviews-modal-item.tsx",children:[(0,a.jsx)("div",{className:"font-semibold text-base text-gray-900",children:m}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:(null===(s=l.surveyee)||void 0===s?void 0:s.email)||i({id:"settings.list.feedbackReviews.noEmail"})}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"\xb7"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:p})]}),(0,a.jsxs)("div",{className:"flex items-center min-h-[21px] my-2",children:[(0,a.jsx)("div",{className:"block w-[2px] min-w-[2px] max-w-[2px] bg-gray-400 mr-2 self-stretch"}),(0,a.jsx)("span",{className:"text-sm text-gray-900 break-words",children:(null===(n=l.review_text)||void 0===n?void 0:n.value)||i({id:"settings.list.feedbackReviews.noComment"})})]}),(null===(r=l.sliders)||void 0===r?void 0:r.length)>0&&(0,a.jsx)("div",{className:"flex flex-wrap items-center min-h-[21px] mt-1 gap-x-12",children:l.sliders.map((e,t)=>e.question&&(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.question in c?i(c[e.question]):e.question,": ",(0,a.jsx)("span",{className:"text-gray-900",children:e.value})]},t))})]})},Z=()=>{let{f:e}=(0,f.Y)();return(0,a.jsx)("div",{className:"py-2 px-4 border-b border-gray-200 flex items-center","data-sentry-component":"ReviewsModalTopbar","data-sentry-source-file":"reviews-modal-topbar.tsx",children:(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:e({id:"settings.list.feedbackReviews.message"})})})},W=e=>{let{onClose:t,reviews:s}=e;return(0,a.jsxs)("div",{className:"md:w-[635px] md:min-w-[635px] md:max-w-[635px] md:h-[566px] bg-white rounded-[12px] flex flex-col","data-sentry-component":"ReviewsModalData","data-sentry-source-file":"reviews-modal-data.tsx",children:[(0,a.jsx)(_,{onClose:t,"data-sentry-element":"ReviewsModalHeader","data-sentry-source-file":"reviews-modal-data.tsx"}),(0,a.jsx)(Z,{"data-sentry-element":"ReviewsModalTopbar","data-sentry-source-file":"reviews-modal-data.tsx"}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:s.map((e,t)=>(0,a.jsx)(B,{review:e},e.transaction_id||t))}),(0,a.jsx)(P,{onClose:t,"data-sentry-element":"ReviewsModalFooter","data-sentry-source-file":"reviews-modal-data.tsx"})]})},U=n.forwardRef((e,t)=>(0,a.jsxs)("svg",{width:"33",height:"32",viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M16.5003 29.3334C23.8641 29.3334 29.8337 23.3639 29.8337 16.0001C29.8337 8.63628 23.8641 2.66675 16.5003 2.66675C9.13653 2.66675 3.16699 8.63628 3.16699 16.0001C3.16699 23.3639 9.13653 29.3334 16.5003 29.3334Z",fill:"#3CC279",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"}),(0,a.jsx)("path",{d:"M11.167 18.6667C11.167 18.6667 13.167 21.3334 16.5003 21.3334C19.8337 21.3334 21.8337 18.6667 21.8337 18.6667",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"}),(0,a.jsx)("path",{d:"M12.5 12H12.5133",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"}),(0,a.jsx)("path",{d:"M20.5 12H20.5133",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"})]}));U.displayName="IconHappyGreenCircle";let Y=n.forwardRef((e,t)=>(0,a.jsxs)("svg",{width:"33",height:"32",viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M16.5003 29.3334C23.8641 29.3334 29.8337 23.3639 29.8337 16.0001C29.8337 8.63628 23.8641 2.66675 16.5003 2.66675C9.13653 2.66675 3.16699 8.63628 3.16699 16.0001C3.16699 23.3639 9.13653 29.3334 16.5003 29.3334Z",fill:"#FFA600",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"}),(0,a.jsx)("path",{d:"M11.167 20H21.8337",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"}),(0,a.jsx)("path",{d:"M12.5 12H12.5133",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"}),(0,a.jsx)("path",{d:"M20.5 12H20.5133",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"})]}));Y.displayName="IconNeutralOrangeCircle";let X=n.forwardRef((e,t)=>(0,a.jsxs)("svg",{width:"33",height:"32",viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M16.5003 29.3334C23.8641 29.3334 29.8337 23.3639 29.8337 16.0001C29.8337 8.63628 23.8641 2.66675 16.5003 2.66675C9.13653 2.66675 3.16699 8.63628 3.16699 16.0001C3.16699 23.3639 9.13653 29.3334 16.5003 29.3334Z",fill:"#FF5721",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"}),(0,a.jsx)("path",{d:"M21.8337 21.3334C21.8337 21.3334 19.8337 18.6667 16.5003 18.6667C13.167 18.6667 11.167 21.3334 11.167 21.3334",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"}),(0,a.jsx)("path",{d:"M12.5 12H12.5133",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"}),(0,a.jsx)("path",{d:"M20.5 12H20.5133",stroke:"#212121","stroke-width":"2.66667","stroke-linecap":"round","stroke-linejoin":"round"})]}));X.displayName="IconSadRedCircle";let H=e=>{let{onClose:t}=e,{f:s}=(0,f.Y)();return(0,a.jsxs)("div",{className:"flex flex-col w-full md:w-[635px] h-[453px] bg-white rounded-[12px] shadow","data-sentry-component":"ReviewsModalEmpty","data-sentry-source-file":"reviews-modal-empty.tsx",children:[(0,a.jsx)(_,{onClose:t,"data-sentry-element":"ReviewsModalHeader","data-sentry-source-file":"reviews-modal-empty.tsx"}),(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center flex-1 gap-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,a.jsx)(U,{"data-sentry-element":"IconHappyGreenCircle","data-sentry-source-file":"reviews-modal-empty.tsx"}),(0,a.jsx)(Y,{"data-sentry-element":"IconNeutralOrangeCircle","data-sentry-source-file":"reviews-modal-empty.tsx"}),(0,a.jsx)(X,{"data-sentry-element":"IconSadRedCircle","data-sentry-source-file":"reviews-modal-empty.tsx"})]}),(0,a.jsx)("p",{className:"text-center text-[14px] text-[#212121] leading-[20px] w-full max-w-[301px]",children:s({id:"settings.list.feedbackReviews.noReviews"})})]}),(0,a.jsx)(P,{onClose:t,"data-sentry-element":"ReviewsModalFooter","data-sentry-source-file":"reviews-modal-empty.tsx"})]})},z=n.forwardRef((e,t)=>(0,a.jsx)("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22.1004 12.89C22.1004 18.192 17.8023 22.49 12.5004 22.49C7.19846 22.49 2.90039 18.192 2.90039 12.89C2.90039 7.58811 7.19846 3.29004 12.5004 3.29004C17.8023 3.29004 22.1004 7.58811 22.1004 12.89ZM13.7004 17.69C13.7004 18.3528 13.1631 18.89 12.5004 18.89C11.8376 18.89 11.3004 18.3528 11.3004 17.69C11.3004 17.0273 11.8376 16.49 12.5004 16.49C13.1631 16.49 13.7004 17.0273 13.7004 17.69ZM12.5004 6.89004C11.8376 6.89004 11.3004 7.4273 11.3004 8.09004V12.89C11.3004 13.5528 11.8376 14.09 12.5004 14.09C13.1631 14.09 13.7004 13.5528 13.7004 12.89V8.09004C13.7004 7.4273 13.1631 6.89004 12.5004 6.89004Z",fill:"#F99900"})}));z.displayName="IconWarningOrangeCircle";let G=e=>{let{onClose:t,onReload:s}=e,{f:n}=(0,f.Y)();return(0,a.jsxs)("div",{className:"bg-white rounded-[12px] md:w-[635px] h-[325px] flex flex-col","data-sentry-component":"ReviewsModalError","data-sentry-source-file":"reviews-modal-error.tsx",children:[(0,a.jsx)(_,{onClose:t,"data-sentry-element":"ReviewsModalHeader","data-sentry-source-file":"reviews-modal-error.tsx"}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,a.jsx)(Z,{"data-sentry-element":"ReviewsModalTopbar","data-sentry-source-file":"reviews-modal-error.tsx"}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:[(0,a.jsx)(z,{"data-sentry-element":"IconWarningOrangeCircle","data-sentry-source-file":"reviews-modal-error.tsx"}),(0,a.jsx)("div",{className:"text-center text-sm text-gray-700 w-full max-w-[235px] mt-2",children:n({id:"settings.list.feedbackReviews.errorMessage"})}),(0,a.jsx)("button",{className:"w-full max-w-[235px] h-10 mt-2 bg-white border border-gray-300 rounded font-medium text-sm text-gray-800",onClick:s,type:"button",children:n({id:"settings.list.feedbackReviews.reloadButton"})})]})]}),(0,a.jsx)(P,{onClose:t,"data-sentry-element":"ReviewsModalFooter","data-sentry-source-file":"reviews-modal-error.tsx"})]})};var q=s(92829);let J=e=>{let{onClose:t}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-[12px] md:w-[635px] md:h-[453px] flex flex-col","data-sentry-component":"ReviewsModalLoading","data-sentry-source-file":"reviews-modal-loading.tsx",children:[(0,a.jsx)(_,{onClose:t,"data-sentry-element":"ReviewsModalHeader","data-sentry-source-file":"reviews-modal-loading.tsx"}),(0,a.jsx)(Z,{"data-sentry-element":"ReviewsModalTopbar","data-sentry-source-file":"reviews-modal-loading.tsx"}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto py-2",children:[1,2,3,4].map(e=>(0,a.jsxs)(q.ZP,{speed:1.5,width:"100%",viewBox:"0 0 340 36",backgroundColor:"#E8E8E9",foregroundColor:"#f3f3f3",className:"flex items-center gap-4 px-7 py-1",children:[(0,a.jsx)("circle",{cx:"20",cy:"18",r:"16"}),(0,a.jsx)("rect",{x:"48",y:"8",rx:"6",ry:"6",width:"80%",height:"9"}),(0,a.jsx)("rect",{x:"48",y:"22",rx:"6",ry:"6",width:"50%",height:"9"})]}))}),(0,a.jsx)(P,{onClose:t,"data-sentry-element":"ReviewsModalFooter","data-sentry-source-file":"reviews-modal-loading.tsx"})]})},Q=e=>{let{open:t,onClose:s}=e,{data:n,isLoading:r,isError:l,refetch:i}=L();return r?(0,a.jsx)(I.u_,{open:t,onClose:s,className:"w-[635px] max-w-[635px] sm:w-[635px] sm:max-w-[635px]",children:(0,a.jsx)(J,{onClose:s})}):l?(0,a.jsx)(I.u_,{open:t,onClose:s,className:"w-[635px] max-w-[635px] sm:w-[635px] sm:max-w-[635px]",children:(0,a.jsx)(G,{onClose:s,onReload:i})}):C()(null==n?void 0:n.reviews)?(0,a.jsx)(I.u_,{open:t,onClose:s,className:"w-[635px] max-w-[635px] sm:w-[635px] sm:max-w-[635px]",children:(0,a.jsx)(H,{onClose:s})}):(0,a.jsx)(I.u_,{open:t,onClose:s,className:"w-[635px] max-w-[635px] sm:w-[635px] sm:max-w-[635px]","data-sentry-element":"Modal","data-sentry-component":"ReviewsModal","data-sentry-source-file":"reviews-modal.tsx",children:(0,a.jsx)(W,{onClose:s,reviews:(null==n?void 0:n.reviews)||[],"data-sentry-element":"ReviewsModalData","data-sentry-source-file":"reviews-modal.tsx"})})};var K=s(82682),$=s(90857),ee=s(84463),et=s(39067);let es=e=>{let{label:t,children:s,locked:n}=e;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row w-full items-start md:items-center mt-2","data-sentry-component":"Row","data-sentry-source-file":"row.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center text-xs w-full md:max-w-[150px] pr-3",children:[(0,a.jsx)(ee._,{className:"font-inter text-label-gray font-medium text-xs w-full md:py-3 md:max-w-[150px] pr-3",label:t,"data-sentry-element":"Label","data-sentry-source-file":"row.tsx"}),n&&(0,a.jsx)(et.m,{className:"w-6 h-6"})]}),s]})};var ea=s(81071),en=s(23398);let er=n.forwardRef((e,t)=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",...e,ref:t,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.25694 3.09882C9.02154 1.73952 10.9786 1.73952 11.7432 3.09882L17.3235 13.0194C18.0735 14.3526 17.11 15.9999 15.5804 15.9999H4.41978C2.89013 15.9999 1.9267 14.3526 2.67663 13.0194L8.25694 3.09882ZM11 13C11 13.5523 10.5523 14 10 14C9.44772 14 9 13.5523 9 13C9 12.4477 9.44772 12 10 12C10.5523 12 11 12.4477 11 13ZM10 5C9.44772 5 9 5.44772 9 6V9C9 9.55228 9.44772 10 10 10C10.5523 10 11 9.55228 11 9V6C11 5.44772 10.5523 5 10 5Z",fill:"#FB923C"})}));er.displayName="IconOrangeWarningTriangle";let el={feature:"pulse-m",source:"AutomaticReviewsSettings"},ei=()=>{let{f:e,fta:t}=(0,f.Y)(),s=(0,g.D)(),n=(0,y.g)({feature:o.eS.AUTOMATIC_REVIEWS,user:s.user,subscriptionStatus:s.subscriptionStatus}),r=(0,m.R9)(d.y);return(0,a.jsx)(es,{locked:!n,label:e({id:"settings.list.reviewRequests.automaticSetting"}),"data-sentry-element":"Row","data-sentry-component":"GetStarted","data-sentry-source-file":"get-started.tsx",children:(0,a.jsx)(c.z,{variant:"primary",className:"w-full md:min-w-[400px] !mt-0",onClick:()=>{r(),s.trackAction("web-button-click",{action:"get-started",text:"Get Started",feature:"pulse-m",source:"AutomaticReviewsSettings",hasAccessToFeature:n})},"data-sentry-element":"Button","data-sentry-source-file":"get-started.tsx",children:t({id:"settings.list.reviewRequests.getStarted"})})})},eo=e=>{let{f:t}=(0,f.Y)(),s=(0,g.D)(),n=e=>{s.trackAction("pulse-m",{type:"toggle",source:"AutomaticReviewsSettings",action:"automatic-review-request",platform:i.t4.WEB,enabled:e})};return(0,a.jsx)(es,{label:t({id:"settings.list.reviewRequests.automaticSetting"}),"data-sentry-element":"Row","data-sentry-component":"AutomatedReviewSetting","data-sentry-source-file":"automated-review-setting.tsx",children:(0,a.jsxs)("div",{className:"w-full flex justify-between !mt-0 space-x-3",children:[(0,a.jsx)(u.Wi,{control:e.form.control,name:"automatedReviews",render:e=>{let{field:t}=e;return(0,a.jsx)($.r,{checked:t.value,onCheckedChange:e=>{t.onChange(e),n(e)}})},"data-sentry-element":"FormField","data-sentry-source-file":"automated-review-setting.tsx"}),e.isLoading&&(0,a.jsx)(K.Z,{className:"animate-spin ease-in-out text-blue-600"})]})})},ed=()=>{let{f:e}=(0,f.Y)(),{data:t}=(0,h.Z)(),s=(0,ea.usePathname)(),n=(0,g.D)();return(null==t?void 0:t.placeId)?(0,a.jsx)(c.z,{variant:"white",className:"w-full md:min-w-[400px] !mt-0 mb-2",onClick:()=>{(0,en.zB)("google",{redirectTo:"/onboarding-automated-reviews?redirect=".concat(s)}),n.trackAction("web-button-click",{action:"update-google-business",text:"Update Google Business",...el})},"data-sentry-element":"Button","data-sentry-component":"GoogleBusiness","data-sentry-source-file":"google-business.tsx",children:e({id:"settings.list.reviewRequests.googleBusiness.update"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xs py-3 font-inter text-label-gray font-medium",children:e({id:"settings.list.reviewRequests.googleBusiness.notLinked"})}),(0,a.jsxs)(c.z,{variant:"white",className:"w-full flex items-center justify-center md:min-w-[400px] !mt-0 mb-2",onClick:()=>{(0,en.zB)("google",{redirectTo:"/onboarding-automated-reviews?redirect=".concat(s)}),n.trackAction("web-button-click",{action:"link-google-business",text:"Link Google Business Profile",...el})},children:[(0,a.jsx)(er,{className:"mr-2"}),e({id:"settings.list.reviewRequests.googleBusiness.link"})]})]})};var ec=s(51668);let eu=ec.Ry({automatedReviews:ec.O7()}),em=e=>{let{f:t}=(0,f.Y)(),{data:s,isLoading:n}=(0,h.Z)(),{user:r,subscriptionStatus:l}=(0,g.D)(),i=(0,y.g)({feature:o.eS.AUTOMATIC_REVIEWS,user:r,subscriptionStatus:l});return n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xs py-1 text-[#555555] font-normal",children:t({id:"settings.list.reviewRequests.description"})}),(0,a.jsx)(ex,{})]}):(null==s?void 0:s.onboarded)&&i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xs py-1 font-inter text-label-gray font-medium",children:t({id:"settings.list.reviewRequests.description"})}),(0,a.jsx)(ey,{settings:e.settings})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xs py-1 font-inter text-label-gray font-medium",children:t({id:"settings.list.reviewRequests.description"})}),(0,a.jsx)(ef,{"data-sentry-element":"GetStarted","data-sentry-source-file":"automated-reviews.tsx"})]})},ex=()=>(0,a.jsx)("div",{className:"flex justify-center py-4","data-sentry-component":"Loading","data-sentry-source-file":"automated-reviews.tsx",children:(0,a.jsx)(x.$,{"data-sentry-element":"Spinner","data-sentry-source-file":"automated-reviews.tsx"})}),ef=()=>(0,a.jsx)(m.pM,{modals:{[d.y]:{modal:d.h,props:{source:"settings"}}},"data-sentry-element":"ModalsContextProvider","data-sentry-component":"GetStarted","data-sentry-source-file":"automated-reviews.tsx",children:(0,a.jsx)(ei,{"data-sentry-element":"unknown","data-sentry-source-file":"automated-reviews.tsx"})}),ep={automatedReviews:i.Vd.AutomaticReviewsEnabled},ey=e=>{var t;let s=(0,f.Y)(),i=(0,g.D)(),o=(0,l.cI)({resolver:(0,v.F)(eu),defaultValues:(0,j.k)(e.settings,ep),mode:"onChange"}),d=(0,r.useMutation)((0,b.Q)({onError:()=>(0,p.h5)(s)}));(0,n.useEffect)(()=>{let t=(0,w.m)({mutation:d,fieldErrors:o.formState.errors,transformedSettings:e.settings,labelToRemoteIdMap:ep}),s=o.watch((e,s)=>{t(e,s)});return()=>{s.unsubscribe()}},[o,e.settings,d]);let[m,x]=(0,n.useState)(!1);return(0,a.jsxs)(u.l0,{...o,"data-sentry-element":"Form","data-sentry-component":"Onboarded","data-sentry-source-file":"automated-reviews.tsx",children:[(0,a.jsx)(eo,{form:o,isLoading:d.isLoading&&(null===(t=d.variables)||void 0===t?void 0:t.remoteId)===ep.automatedReviews,"data-sentry-element":"unknown","data-sentry-source-file":"automated-reviews.tsx"}),(0,a.jsx)(ed,{"data-sentry-element":"unknown","data-sentry-source-file":"automated-reviews.tsx"}),(0,a.jsx)(c.z,{variant:"primary",className:"w-full md:min-w-[400px] !mt-0",onClick:()=>{x(!0),i.trackAction("web-button-click",{text:"Feedback Reviews",action:"view-feedback-reviews",feature:"pulse-m",source:"AutomaticReviewsSettings"})},"data-sentry-element":"Button","data-sentry-source-file":"automated-reviews.tsx",children:s.f({id:"settings.list.reviewRequests.viewReviews"})}),(0,a.jsx)(Q,{open:m,onClose:()=>x(!1),"data-sentry-element":"ReviewsModal","data-sentry-source-file":"automated-reviews.tsx"})]})}},93748:function(e,t,s){"use strict";s.r(t),s.d(t,{BusinessDetails:function(){return F}});var a=s(37821),n=s(58078),r=s(33732),l=s(81071),i=s(9),o=s(77732),d=s(51668),c=s(64142),u=s(73378),m=s(40834),x=s(79399),f=s(42236),p=s(87698),y=s(31957),h=s(67337),g=s(42978),v=s(65941),b=s(63373),w=s(39567),j=s(68531);let N=()=>(0,a.jsx)("div",{className:"shadow mb-2",style:{width:"".concat(j.Zn,"px"),height:"".concat(j.hC,"px"),overflow:"hidden"},"data-sentry-component":"LoadingInvoicePreview","data-sentry-source-file":"loading-invoice-preview.tsx",children:(0,a.jsx)(w.O,{style:{width:"".concat(j.rb,"px"),height:"".concat(j.Jm,"px"),transform:"scale(".concat(j.bA,")"),transformOrigin:"top left",overflow:"hidden",pointerEvents:"none",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},"data-sentry-element":"Skeleton","data-sentry-source-file":"loading-invoice-preview.tsx"})}),C=(0,r.default)(()=>s.e(5331).then(s.bind(s,75331)).then(e=>e.InvoicePreview),{loadableGenerated:{webpack:()=>[75331]},loading:()=>(0,a.jsx)(N,{}),ssr:!1}),I=d.G0([d.i0(""),d.Z_().email()]),k=d.Ry({logo:d.Z_(),name:d.Z_(),businessOwnerName:d.Z_(),businessNumber:d.Z_(),addressLine1:d.Z_(),addressLine2:d.Z_(),addressLine3:d.Z_(),email:I,phone:d.Z_(),mobile:d.Z_(),website:d.Z_(),template:d.Rx()}),F=e=>{let t={logo:c.Vd.CompanyLogo,name:c.Vd.CompanyName,businessOwnerName:c.Vd.ContactName,businessNumber:c.Vd.CompanyBusinessNumber,addressLine1:c.Vd.CompanyAddressLine1,addressLine2:c.Vd.CompanyAddressLine2,addressLine3:c.Vd.CompanyAddressLine3,email:c.Vd.ContactEmail,phone:c.Vd.ContactPhone,mobile:c.Vd.ContactMobile,website:c.Vd.ContactWebsiteUrl,template:c.Vd.ThemeTemplate},s=(0,o.cI)({resolver:(0,h.F)(k),defaultValues:(0,b.k)(e.settings,t),mode:"onChange"}),r=(0,l.useRouter)(),d=(0,f.Y)(),w=(0,i.useMutation)((0,g.Q)({onError:()=>(0,y.h5)(d)}));(0,n.useEffect)(()=>{let a=(0,v.m)({mutation:w,fieldErrors:s.formState.errors,transformedSettings:e.settings,labelToRemoteIdMap:t}),n=s.watch(a);return()=>{n.unsubscribe()}},[s.watch,w]);let j="w-full items-center flex md:flex-row flex-col md:mt-0 mt-3",N="text-xs w-full md:py-3 font-inter text-label-gray font-medium",I="w-full md:min-w-[400px] !mt-0",F=e=>{var s;return w.isLoading&&(null===(s=w.variables)||void 0===s?void 0:s.remoteId)===t[e]};return(0,a.jsx)(m.l0,{...s,"data-sentry-element":"Form","data-sentry-component":"BusinessDetails","data-sentry-source-file":"business-details.tsx",children:(0,a.jsxs)("form",{className:"flex flex-col w-full items-center space-y-2 font-roboto text-[12px] text-[#555555] font-[500]",children:[e.children,(0,a.jsx)("div",{className:"h-5"}),(0,a.jsx)(m.Wi,{control:s.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:j,children:[(0,a.jsx)(m.lX,{className:N,children:d.fta({id:"settings.list.company.name"})}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(x.I,{className:I,isLoading:F("name"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"business-details.tsx"}),(0,a.jsx)(m.Wi,{control:s.control,name:"businessNumber",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:j,children:[(0,a.jsx)(m.lX,{className:N,children:d.fta({id:"settings.list.company.businessNumber"})}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(x.I,{className:I,isLoading:F("businessNumber"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"business-details.tsx"}),(0,a.jsx)(m.Wi,{control:s.control,name:"businessOwnerName",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:j,children:[(0,a.jsx)(m.lX,{className:N,children:d.fta({id:"settings.list.contact.name"})}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(x.I,{className:I,isLoading:F("businessOwnerName"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"business-details.tsx"}),(0,a.jsx)("div",{className:"h-5"}),(0,a.jsx)(m.Wi,{control:s.control,name:"addressLine1",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:j,children:[(0,a.jsx)(m.lX,{className:N,children:"".concat(d.fta({id:"settings.list.company.addressLine"})," 1")}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(x.I,{className:I,isLoading:F("addressLine1"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"business-details.tsx"}),(0,a.jsx)(m.Wi,{control:s.control,name:"addressLine2",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:j,children:[(0,a.jsx)(m.lX,{className:N,children:"".concat(d.fta({id:"settings.list.company.addressLine"})," 2")}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(x.I,{className:I,isLoading:F("addressLine2"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"business-details.tsx"}),(0,a.jsx)(m.Wi,{control:s.control,name:"addressLine3",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:j,children:[(0,a.jsx)(m.lX,{className:N,children:"".concat(d.fta({id:"settings.list.company.addressLine"})," 3")}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(x.I,{className:I,isLoading:F("addressLine3"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"business-details.tsx"}),(0,a.jsx)("div",{className:"h-5"}),(0,a.jsx)(m.Wi,{control:s.control,name:"email",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:j,children:[(0,a.jsx)(m.lX,{className:N,children:d.fta({id:"settings.list.company.email"})}),(0,a.jsx)(m.NI,{className:"relative",children:(0,a.jsx)(x.I,{className:I,isError:!!s.formState.errors.email,isValid:!s.formState.errors.email&&!!t.value,isLoading:F("email"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"business-details.tsx"}),(0,a.jsx)(m.Wi,{control:s.control,name:"phone",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:j,children:[(0,a.jsx)(m.lX,{className:N,children:d.fta({id:"settings.list.company.phone"})}),(0,a.jsx)(m.NI,{className:"relative",children:(0,a.jsx)(x.I,{className:I,isLoading:F("phone"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"business-details.tsx"}),(0,a.jsx)(m.Wi,{control:s.control,name:"mobile",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:j,children:[(0,a.jsx)(m.lX,{className:N,children:d.fta({id:"settings.list.company.mobile"})}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(x.I,{className:I,isLoading:F("mobile"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"business-details.tsx"}),(0,a.jsx)(m.Wi,{control:s.control,name:"website",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:j,children:[(0,a.jsx)(m.lX,{className:N,children:d.fta({id:"settings.list.company.website"})}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(x.I,{className:I,isLoading:F("website"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"business-details.tsx"}),(0,a.jsx)(m.Wi,{control:s.control,name:"template",render:t=>{let{field:s}=t;return(0,a.jsxs)(m.xJ,{className:j,children:[(0,a.jsx)(m.lX,{className:(0,p.cn)(N,"self-start"),children:d.fta({id:"templates.header"})}),(0,a.jsxs)("div",{className:(0,p.cn)("flex flex-col self-start",I),children:[(0,a.jsx)(C,{template:s.value,color:e.settings[c.Vd.ThemeColor].value}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(u.z,{className:I,onClick:e=>{e.preventDefault(),r.push("/templates")},children:d.fta({id:"settings.list.customizeTemplate"})})})]})]})},"data-sentry-element":"FormField","data-sentry-source-file":"business-details.tsx"})]})})}},55444:function(e,t,s){"use strict";s.r(t),s.d(t,{ClientSignatures:function(){return I}});var a=s(37821),n=s(58078),r=s(81071),l=s(9),i=s(82682),o=s(77732),d=s(51668),c=s(64142),u=s(26935),m=s(40834),x=s(90857),f=s(42236),p=s(31957),y=s(61692),h=s(9845),g=s(39067),v=s(67337),b=s(65833),w=s(42978),j=s(65941),N=s(63373);let C=d.Ry({clientSignatures:d.O7()}),I=e=>{let t={clientSignatures:c.Vd.EstimateSignatureRequired},s=(0,o.cI)({resolver:(0,v.F)(C),defaultValues:(0,N.k)(e.settings,t),mode:"onChange"}),d=(0,f.Y)(),I=(0,l.useMutation)((0,w.Q)({onError:()=>(0,p.h5)(d)})),{user:k}=(0,h.D)(),F=(0,y.N)({user:k,feature:u.eS.CLIENT_SIGNATURE}),S=(0,r.useRouter)();(0,n.useEffect)(()=>{let a=(0,j.m)({mutation:I,fieldErrors:s.formState.errors,transformedSettings:e.settings,labelToRemoteIdMap:t}),n=s.watch((e,t)=>{if(!F)return S.push((0,b.X2)({ref:b.Wu.SETTING,feature:u.eS.CLIENT_SIGNATURE}));a(e,t)});return()=>{n.unsubscribe()}},[s.watch,I]);let R=e=>{var s;return I.isLoading&&(null===(s=I.variables)||void 0===s?void 0:s.remoteId)===t[e]};return(0,a.jsx)(m.l0,{...s,"data-sentry-element":"Form","data-sentry-component":"ClientSignatures","data-sentry-source-file":"client-signatures.tsx",children:(0,a.jsx)("form",{className:"flex flex-col w-full items-center space-y-2 font-roboto text-[12px] text-[#555555] font-[500]",children:(0,a.jsx)(m.Wi,{control:s.control,name:"clientSignatures",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:"w-full items-center flex md:flex-row flex-col md:mt-0 mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-xs w-full md:max-w-[150px] pr-3",children:[(0,a.jsx)(m.lX,{className:"text-xs w-full font-inter text-label-gray font-medium",children:d.fta({id:"settings.list.clientSignatures.requireClientSignature"})}),!F&&(0,a.jsx)(g.m,{className:"w-6 h-6"})]}),(0,a.jsxs)("div",{className:"w-full flex justify-between !mt-0 space-x-3",children:[(0,a.jsx)(m.NI,{children:(0,a.jsx)(x.r,{checked:!!F&&t.value,onCheckedChange:t.onChange})}),R("clientSignatures")&&(0,a.jsx)(i.Z,{className:"animate-spin ease-in-out text-blue-600"})]})]})},"data-sentry-element":"FormField","data-sentry-source-file":"client-signatures.tsx"})})})}},95282:function(e,t,s){"use strict";s.d(t,{UploadCompanyLogo:function(){return N}});var a=s(37821),n=s(58078),r=s(9),l=s(65882),i=s(82682),o=s(35588),d=s(64142),c=s(40834),u=s(54414),m=s(42236),x=s(31957),f=s(9845),p=s(61449),y=s(17892);async function h(e){let t=await (0,y.Y)();return await (0,p.W)("/classes/Photo/".concat(e),{method:"PUT",body:JSON.stringify({deleted:!0,updated:Date.now()}),headers:{"X-Parse-Session-Token":t},cache:"no-cache"})}var g=s(42978),v=s(83257),b=s(44355);async function w(e){let t=await (0,y.Y)();return await (0,p.W)("/classes/Photo",{method:"POST",body:JSON.stringify({...e,deleted:!1,updated:Date.now()}),headers:{"X-Parse-Session-Token":t},cache:"no-cache"})}let j={[d.bT.IMG_JPEG]:[".jpg",".jpeg"],[d.bT.IMG_PNG]:[".png"],[d.bT.IMG_WEBP]:[".webp"]},N=e=>{let t=(0,m.Y)(),[s,p]=(0,n.useState)((()=>{var t,s,a;let n=null===(t=e.photo)||void 0===t?void 0:t.url,r=null===(s=e.photo)||void 0===s?void 0:s.remoteId,l=null===(a=e.photo)||void 0===a?void 0:a.objectId;return n&&r&&l?{type:"photo-loaded",url:n,objectId:l,photoRemoteId:r}:{type:"no-photo"}})()),{user:y}=(0,f.D)(),N=(0,r.useMutation)((0,g.Q)({onError:()=>{p({type:"photo-error",errorMessage:t.ft({id:"photoDrop.upload.failed.genericError"})}),(0,x.h5)(t)}})),C=(0,r.useMutation)({mutationFn:async e=>{let{file:t,user:s}=e,a=(0,v.Z)(),n=await (0,b.D0)({file:t,remoteId:a,user:s});await (0,b.p7)({file:t,presignedUrl:n.signedRequest});let r=await w({remoteId:a,md5:(0,v.Z)(),url:n.url,type:d.HB.LOGO});return{remoteId:a,url:n.url,objectId:r.objectId}},onError:()=>{p({type:"photo-error",errorMessage:t.ft({id:"photoDrop.upload.failed.genericError"})}),(0,x.h5)(t)},onSuccess:t=>{p({type:"photo-loaded",url:t.url,photoRemoteId:t.remoteId,objectId:t.objectId}),N.mutate({objectId:e.settings[d.Vd.CompanyLogo].objectId,value:t.remoteId,remoteId:d.Vd.CompanyLogo,type:"str"})}}),I=(0,r.useMutation)({mutationFn:async e=>{let{objectId:t}=e;await h(t)},onError:()=>{p({type:"photo-error",errorMessage:t.ft({id:"app.alert.logo.save.failed.title"})}),(0,x.h5)(t)},onSuccess:()=>{p({type:"no-photo"})}});async function k(e){p({type:"photo-loading",previewUrl:function(e){try{return URL.createObjectURL(e)}catch(e){return}}(e)||""}),C.mutate({file:e,user:y})}async function F(e){window.confirm(t.ft({id:"photoDrop.removeConfirm"}))&&I.mutate({objectId:e})}let{getRootProps:S,getInputProps:R}=(0,o.uI)({accept:j,maxSize:5e6,minSize:1,multiple:!1,onDrop:function(e){let{onError:t,onSuccess:s}=e;return function(e,a,n){if(a.length>0)return t(function(e){let{errors:t}=e[0],s=t.map(e=>e.code);return s.includes("file-too-large")?"file-too-large":s.includes("too-many-files")?"too-many-files":"file-invalid-type"}(a));let r=e[0],l=new Image;return l.src=URL.createObjectURL(r),l.onload=()=>l.width*l.height>2e7?t("file-too-large"):s(r)}}({onSuccess:k,onError:e=>{p({type:"photo-error",errorMessage:{"file-too-large":t.ft({id:"photoDrop.upload.failed.maxFileSizeExceeded"},{maxFileSize:5}),"file-invalid-type":t.ft({id:"photoDrop.upload.failed.unsupportedFileType"}),"too-many-files":t.ft({id:"photoDrop.upload.failed.multipleFilesForbidden"})}[e]||t.ft({id:"photoDrop.upload.failed.genericError"})})}})});return(0,a.jsx)(c.Wi,{name:"logo",render:()=>(0,a.jsxs)(c.xJ,{className:"w-full items-center flex md:flex-row flex-col md:mt-0 mt-3",children:[(0,a.jsx)(c.lX,{className:"text-xs font-inter text-label-gray font-medium w-full md:py-3 self-start",children:t.ft({id:"photoDrop.logo"})}),(0,a.jsx)(c.NI,{children:(0,a.jsx)("div",{className:"bg-gray-50 border rounded-lg flex justify-center items-center w-full md:min-w-[400px] !mt-0 relative",children:(0,a.jsxs)("div",{...S({className:"relative w-full h-[150px] p-2"}),children:[(0,a.jsx)("input",{...R({className:"w-full h-full flex items-center justify-center"})}),(0,a.jsxs)("div",{className:"flex items-center w-full h-full justify-center cursor-pointer group",children:["photo-loaded"===s.type&&(0,a.jsxs)("div",{className:"m-0 h-full rounded-md",children:[(0,a.jsx)("img",{src:s.url,className:"m-0 h-full rounded-md object-contain",alt:"invoice logo"}),(0,a.jsx)("button",{className:"absolute top-0 right-0 p-3 group-hover:block hidden hover:text-red-600",type:"button",onClick:e=>{e.stopPropagation(),F(s.objectId)},children:(0,a.jsx)(l.Z,{size:16})}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 left-0 w-full group-hover:block hidden bg-gray-100 opacity-80 h-[30px]"}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 left-0 w-full group-hover:block hidden p-1",children:(0,a.jsx)("p",{className:"text-center",children:t.ft({id:"photoDrop.update"})})})]}),"no-photo"===s.type&&(0,a.jsxs)("div",{className:"w-full h-full flex justify-center items-center",children:[(0,a.jsx)(u.f,{}),(0,a.jsxs)("p",{className:"px-2",children:["+"," ",t.ft({id:"photoDrop.logo"})]}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 left-0 w-full group-hover:block hidden bg-gray-100 opacity-80 h-[30px]"}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 left-0 w-full group-hover:block hidden p-1",children:(0,a.jsx)("p",{className:"text-center",children:t.ft({id:"photoDrop.add"})})})]}),"photo-loading"===s.type&&(0,a.jsxs)("div",{className:"w-full h-full flex justify-center items-center relative",children:[(0,a.jsx)("img",{src:s.previewUrl,className:"m-0 h-full rounded-md object-contain",alt:"invoice logo"}),(0,a.jsx)("div",{className:"absolute top-0 right-0",children:(0,a.jsx)(i.Z,{className:"animate-spin ease-in-out text-blue-600"})})]}),"photo-error"===s.type&&(0,a.jsxs)("div",{className:"w-full h-full flex justify-center items-center",children:[(0,a.jsx)(u.f,{}),(0,a.jsxs)("p",{className:"px-2",children:["+"," ",t.ft({id:"photoDrop.logo"})]}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 left-0 w-full bg-red-100 opacity-80 h-[30px]"}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 left-0 w-full p-1",children:(0,a.jsx)("p",{className:"text-center",children:s.errorMessage})})]})]})]})})})]}),"data-sentry-element":"FormField","data-sentry-component":"UploadCompanyLogo","data-sentry-source-file":"upload-company-logo.tsx"})}},60038:function(e,t,s){"use strict";s.d(t,{CustomerFinancing:function(){return E}});var a=s(37821),n=s(58078),r=s(9),l=s(77732),i=s(51668),o=s(64142),d=s(40834),c=s(42236),u=s(31957),m=s(67337),x=s(42978),f=s(65941),p=s(37903);let y=()=>({form:"flex flex-col w-full items-center space-y-2 font-roboto text-[12px] text-[#555555] font-[500]",formItem:"w-full items-center flex md:flex-row flex-col md:mt-0 mt-3 py-3",formLabel:"text-xs w-full md:max-w-[150px] pr-3 text-[#555555]",formInput:"w-full md:min-w-[400px] !mt-0",formLink:"text-xs text-link-primary font-[600]"}),h=()=>{let e=(0,c.Y)(),t=y();return(0,a.jsxs)("p",{className:"text-xs py-1 font-inter text-label-gray font-medium","data-sentry-component":"FinancingDescription","data-sentry-source-file":"financing-description.tsx",children:[e.fta({id:"settings.list.customerFinancing.howItWorks"})," ",(0,a.jsx)("span",{className:t.formLink,children:(0,a.jsx)(p.default,{target:"_blank",rel:"noopener noreferrer",href:"https://help.invoicesimple.com/en/articles/10595059-how-do-i-offer-my-clients-payment-financing","data-sentry-element":"Link","data-sentry-source-file":"financing-description.tsx",children:e.fta({id:"learnMore"})})})]})};var g=s(82682),v=s(90857),b=s(67308),w=s(9845),j=s(30393);let N=e=>{let{form:t,isFieldLoading:s}=e,n=(0,c.Y)(),r=y(),l=(0,b.zf)(),{trackAction:i}=(0,w.D)(),{acorn_financing_invoice_web:o}=(0,j.V)(["acorn_financing_invoice_web"]);return(0,a.jsx)(d.Wi,{control:t.control,name:"acornFinancing",render:e=>{let{field:t}=e;return(0,a.jsxs)(d.xJ,{className:r.formItem,children:[(0,a.jsx)("div",{className:r.formLabel,children:(0,a.jsx)(d.lX,{className:"text-xs w-full font-inter text-label-gray font-medium",children:n.fta({id:o.enabled?"settings.list.customerFinancing.showFinancingInvoicesAndEstimates":"settings.list.customerFinancing.showFinancing"})})}),(0,a.jsxs)("div",{className:"w-full flex justify-between !mt-0 space-x-3",children:[(0,a.jsx)(d.NI,{children:(0,a.jsx)(v.r,{checked:void 0===t.value||t.value,onCheckedChange:e=>{t.onChange(e),i("payments-cta",{...l,action:"toggle-financing-settings",ctaValue:e})}})}),s("acornFinancing")&&(0,a.jsx)(g.Z,{className:"animate-spin ease-in-out text-blue-600"})]})]})},"data-sentry-element":"FormField","data-sentry-component":"FinancingSwitch","data-sentry-source-file":"financing-switch.tsx"})};var C=s(87698);let I=()=>{let e=(0,c.Y)(),t=y(),s=(0,b.zf)(),{trackAction:n}=(0,w.D)(),r="/pdfs/Acorn_Finance_Financing_Flyer.pdf";return(0,a.jsxs)(d.xJ,{className:t.formItem,"data-sentry-element":"FormItem","data-sentry-component":"FinancingSalesTools","data-sentry-source-file":"financing-sales-tools.tsx",children:[(0,a.jsx)("div",{className:"flex items-center text-xs w-full md:max-w-[150px] pr-3",children:(0,a.jsx)(d.lX,{className:(0,C.cn)(t.formLabel,"font-inter text-label-gray font-medium"),"data-sentry-element":"FormLabel","data-sentry-source-file":"financing-sales-tools.tsx",children:e.fta({id:"settings.list.customerFinancing.salesTools"})})}),(0,a.jsx)("div",{className:(0,C.cn)("flex flex-col self-start",t.formInput),children:(0,a.jsx)(d.NI,{"data-sentry-element":"FormControl","data-sentry-source-file":"financing-sales-tools.tsx",children:(0,a.jsx)(p.default,{href:r,onClick:e=>{e.preventDefault(),n("payments-cta",{...s,action:"view-brochure-estimate-settings"}),window.open(r,"_blank","noopener,noreferrer")},className:t.formLink,"data-sentry-element":"Link","data-sentry-source-file":"financing-sales-tools.tsx",children:e.fta({id:"settings.list.customerFinancing.viewFinancingBrochure"})})})})]})};var k=s(23528),F=s(6168);let S=()=>{let e=(0,c.Y)(),t=y();return(0,a.jsxs)(d.xJ,{className:t.formItem,"data-sentry-element":"FormItem","data-sentry-component":"FinancingPartners","data-sentry-source-file":"financing-partners.tsx",children:[(0,a.jsx)("div",{className:t.formLabel,children:(0,a.jsx)(d.lX,{className:"text-xs w-full font-inter text-label-gray font-medium","data-sentry-element":"FormLabel","data-sentry-source-file":"financing-partners.tsx",children:e.fta({id:"settings.list.customerFinancing.availablePartners"})})}),(0,a.jsx)("div",{className:(0,C.cn)("flex flex-col self-start",t.formInput),children:(0,a.jsx)(d.NI,{"data-sentry-element":"FormControl","data-sentry-source-file":"financing-partners.tsx",children:(0,a.jsx)(k.default,{src:F.Z,alt:"Acorn",width:100,height:100,"data-sentry-element":"Image","data-sentry-source-file":"financing-partners.tsx"})})})]})},R=i.Ry({acornFinancing:i.O7().optional()}),E=e=>{let t=(0,n.useMemo)(()=>({acornFinancing:o.Vd.AcornFinancing}),[]),s=(0,l.cI)({resolver:(0,m.F)(R),defaultValues:function(e){let t={};return null===e.acornFinancing.objectId?t.acornFinancing=!0:t.acornFinancing=e.acornFinancing.value,t}(e.settings),mode:"onChange"}),i=(0,c.Y)(),p=(0,r.useMutation)((0,x.Q)({onError:()=>(0,u.h5)(i)}));return(0,n.useEffect)(()=>{let a=(0,f.m)({mutation:p,fieldErrors:s.formState.errors,transformedSettings:e.settings,labelToRemoteIdMap:t}),n=s.watch((e,t)=>{a(e,t)});return()=>{n.unsubscribe()}},[s,t,e.settings,p]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{"data-sentry-element":"FinancingDescription","data-sentry-source-file":"customer-financing.tsx"}),(0,a.jsxs)(d.l0,{...s,"data-sentry-element":"Form","data-sentry-source-file":"customer-financing.tsx",children:[(0,a.jsx)(N,{form:s,isFieldLoading:e=>{var s;return p.isLoading&&(null===(s=p.variables)||void 0===s?void 0:s.remoteId)===t[e]},"data-sentry-element":"FinancingSwitch","data-sentry-source-file":"customer-financing.tsx"}),(0,a.jsx)(I,{"data-sentry-element":"FinancingSalesTools","data-sentry-source-file":"customer-financing.tsx"}),(0,a.jsx)(S,{"data-sentry-element":"FinancingPartners","data-sentry-source-file":"customer-financing.tsx"})]})]})}},33919:function(e,t,s){"use strict";s.r(t),s.d(t,{Customize:function(){return C}});var a=s(37821),n=s(58078),r=s(9),l=s(77732),i=s(51668),o=s(64142),d=s(73378),c=s(10336),u=s(40834),m=s(79399),x=s(9777),f=s(36723),p=s(42236),y=s(87698),h=s(31957),g=s(50390),v=s(67337),b=s(42978),w=s(65941),j=s(63373);let N=i.Ry({invoiceTitle:i.Z_(),estimateTitle:i.Z_(),businessNumberLabel:i.Z_(),quantityLabel:i.Z_(),unitCostLabel:i.Z_(),showQuantityAndUnitCost:i.O7(),defaultEmailMessage:i.Z_(),sendMeACopyOfEmails:i.O7()}),C=e=>{let{isOpen:t,open:s,close:i}=(0,x.dd)(),C={invoiceTitle:o.Vd.RenameInvoiceTitle,estimateTitle:o.Vd.RenameEstimateTitle,businessNumberLabel:o.Vd.RenameCompanyBusinessNumber,quantityLabel:o.Vd.RenameItemQuantity,unitCostLabel:o.Vd.RenameItemRate,showQuantityAndUnitCost:o.Vd.InvoiceHideQuantityAndRate,defaultEmailMessage:o.Vd.EmailDefaultMessage,sendMeACopyOfEmails:o.Vd.EmailCopySender},I=(0,l.cI)({resolver:(0,v.F)(N),defaultValues:(0,j.k)(e.settings,C),mode:"onChange"}),k=(0,p.Y)(),F=(0,r.useMutation)((0,b.Q)({onError:()=>(0,h.h5)(k)}));(0,n.useEffect)(()=>{let t=(0,w.m)({mutation:F,fieldErrors:I.formState.errors,transformedSettings:e.settings,labelToRemoteIdMap:C}),s=I.watch(t);return()=>{s.unsubscribe()}},[I.watch,F]);let S="w-full items-center flex md:flex-row flex-col md:mt-0 mt-3",R="text-xs w-full md:py-3 md:max-w-[150px] pr-3 font-inter text-label-gray font-medium",E="w-full md:min-w-[400px] !mt-0",A=e=>{var t;return F.isLoading&&(null===(t=F.variables)||void 0===t?void 0:t.remoteId)===C[e]};return(0,a.jsx)(u.l0,{...I,"data-sentry-element":"Form","data-sentry-component":"Customize","data-sentry-source-file":"customize.tsx",children:(0,a.jsxs)("form",{className:"flex flex-col w-full items-center space-y-2 font-roboto text-[12px] text-[#555555] font-[500]",children:[(0,a.jsx)(g.K,{onClose:i,open:t,dataType:"invoices","data-sentry-element":"ExportSummaryModal","data-sentry-source-file":"customize.tsx"}),(0,a.jsx)(u.Wi,{control:I.control,name:"invoiceTitle",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{className:S,children:[(0,a.jsx)(u.lX,{className:R,children:k.fta({id:"settings.list.invoice.title"})}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(m.I,{className:E,isLoading:A("invoiceTitle"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"customize.tsx"}),(0,a.jsx)(u.Wi,{control:I.control,name:"estimateTitle",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{className:S,children:[(0,a.jsx)(u.lX,{className:R,children:k.fta({id:"settings.list.estimate.title"})}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(m.I,{className:E,isLoading:A("estimateTitle"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"customize.tsx"}),(0,a.jsx)(u.Wi,{control:I.control,name:"businessNumberLabel",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{className:S,children:[(0,a.jsx)(u.lX,{className:R,children:k.fta({id:"settings.list.company.businessNumberLabel"})}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(m.I,{className:E,isLoading:A("businessNumberLabel"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"customize.tsx"}),(0,a.jsx)(u.Wi,{control:I.control,name:"quantityLabel",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{className:S,children:[(0,a.jsx)(u.lX,{className:R,children:k.fta({id:"settings.list.quantity.label"})}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(m.I,{className:E,isLoading:A("quantityLabel"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"customize.tsx"}),(0,a.jsx)(u.Wi,{control:I.control,name:"unitCostLabel",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{className:S,children:[(0,a.jsx)(u.lX,{className:R,children:k.fta({id:"settings.list.itemRate.label"})}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(m.I,{className:E,isLoading:A("unitCostLabel"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"customize.tsx"}),(0,a.jsx)(u.Wi,{control:I.control,name:"showQuantityAndUnitCost",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{className:S,children:[(0,a.jsx)(u.lX,{className:R,children:k.fta({id:"settings.list.hideUnitCost"})}),(0,a.jsx)("div",{className:"w-full flex justify-start !mt-0",children:(0,a.jsx)(u.NI,{children:(0,a.jsx)(c.X,{className:"!mt-0",checked:!t.value,onCheckedChange:e=>t.onChange(!e)})})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"customize.tsx"}),(0,a.jsx)(u.Wi,{control:I.control,name:"defaultEmailMessage",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{className:S,children:[(0,a.jsx)(u.lX,{className:(0,y.cn)(R,"self-start"),children:k.fta({id:"settings.list.email.defaultMessage"})}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(f.g,{className:E,...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"customize.tsx"}),(0,a.jsx)(u.Wi,{control:I.control,name:"sendMeACopyOfEmails",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{className:S,children:[(0,a.jsx)(u.lX,{className:R,children:k.fta({id:"settings.list.send.email.copy"})}),(0,a.jsx)("div",{className:"w-full flex justify-start !mt-0",children:(0,a.jsx)(u.NI,{children:(0,a.jsx)(c.X,{className:"!mt-0",checked:t.value,onCheckedChange:t.onChange})})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"customize.tsx"}),(0,a.jsxs)(u.xJ,{className:S,"data-sentry-element":"FormItem","data-sentry-source-file":"customize.tsx",children:[(0,a.jsx)(u.lX,{className:R,"data-sentry-element":"FormLabel","data-sentry-source-file":"customize.tsx",children:k.fta({id:"settings.list.invoice.data"})}),(0,a.jsx)(u.NI,{"data-sentry-element":"FormControl","data-sentry-source-file":"customize.tsx",children:(0,a.jsx)(d.z,{className:E,onClick:e=>{e.preventDefault(),s()},"data-sentry-element":"Button","data-sentry-source-file":"customize.tsx",children:k.f({id:"settings.list.export.summary.btn"})})})]})]})})}},95217:function(e,t,s){"use strict";s.r(t),s.d(t,{DefaultNotes:function(){return b}});var a=s(37821),n=s(58078),r=s(9),l=s(82682),i=s(77732),o=s(51668),d=s(64142),c=s(40834),u=s(36723),m=s(42236),x=s(87698),f=s(31957),p=s(67337),y=s(42978),h=s(65941),g=s(63373);let v=o.Ry({defaultInvoiceNote:o.Z_(),defaultEstimateNote:o.Z_()}),b=e=>{let t={defaultInvoiceNote:d.Vd.DefaultInvoiceNote,defaultEstimateNote:d.Vd.DefaultEstimateNote},s=(0,i.cI)({resolver:(0,p.F)(v),defaultValues:(0,g.k)(e.settings,t),mode:"onChange"}),o=(0,m.Y)(),b=(0,r.useMutation)((0,y.Q)({onError:()=>(0,f.h5)(o)}));(0,n.useEffect)(()=>{let a=(0,h.m)({mutation:b,fieldErrors:s.formState.errors,transformedSettings:e.settings,labelToRemoteIdMap:t}),n=s.watch(a);return()=>{n.unsubscribe()}},[s.watch,b]);let w="w-full items-center flex md:flex-row flex-col md:mt-0 mt-3",j="text-xs w-full md:py-3 md:max-w-[150px] pr-3 font-inter text-label-gray font-medium",N="w-full md:min-w-[400px] !mt-0",C=e=>{var s;return b.isLoading&&(null===(s=b.variables)||void 0===s?void 0:s.remoteId)===t[e]};return(0,a.jsx)(c.l0,{...s,"data-sentry-element":"Form","data-sentry-component":"DefaultNotes","data-sentry-source-file":"default-notes.tsx",children:(0,a.jsxs)("form",{className:"flex flex-col w-full items-center space-y-2 font-roboto text-[12px] text-[#555555] font-[500]",children:[(0,a.jsx)(c.Wi,{control:s.control,name:"defaultInvoiceNote",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{className:w,children:[(0,a.jsx)(c.lX,{className:(0,x.cn)(j,"self-start"),children:o.ft({id:"settings.list.invoices"})}),(0,a.jsx)(c.NI,{children:(0,a.jsx)(u.g,{className:N,...t})}),C("defaultInvoiceNote")&&(0,a.jsx)(l.Z,{className:"absolute top-2 right-2 animate-spin ease-in-out text-blue-600"})]})},"data-sentry-element":"FormField","data-sentry-source-file":"default-notes.tsx"}),(0,a.jsx)(c.Wi,{control:s.control,name:"defaultEstimateNote",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{className:w,children:[(0,a.jsx)(c.lX,{className:(0,x.cn)(j,"self-start"),children:o.ft({id:"settings.list.estimates"})}),(0,a.jsx)(c.NI,{children:(0,a.jsx)(u.g,{className:N,...t})}),C("defaultEstimateNote")&&(0,a.jsx)(l.Z,{className:"absolute top-2 right-2 animate-spin ease-in-out text-blue-600"})]})},"data-sentry-element":"FormField","data-sentry-source-file":"default-notes.tsx"})]})})}},74036:function(e,t,s){"use strict";s.d(t,{EdgeRewards:function(){return A}});var a=s(37821),n=s(58078),r=s(73378),l=s(9845);let i=()=>(0,a.jsxs)("svg",{width:"80",height:"16",viewBox:"0 0 80 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"IconEdgeRewards","data-sentry-source-file":"icon-edge-rewards.tsx",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_807_49315)","data-sentry-element":"g","data-sentry-source-file":"icon-edge-rewards.tsx",children:[(0,a.jsx)("path",{d:"M10.7237 3.58291H3.90214V6.56823H8.90947V9.13757H3.90214V12.857H10.9898V15.5731H0.926773V0.842285H10.7237V3.58291Z",fill:"#20192A","data-sentry-element":"path","data-sentry-source-file":"icon-edge-rewards.tsx"}),(0,a.jsx)("path",{d:"M22.988 4.53711L17.5937 15.8422H16.6019L11.1833 4.53711H14.328L17.0857 10.7769L19.8433 4.53711H22.988Z",fill:"#20192A","data-sentry-element":"path","data-sentry-source-file":"icon-edge-rewards.tsx"}),(0,a.jsx)("path",{d:"M34.0187 11.0707H26.3746C26.7375 12.4655 27.8502 13.2485 29.4468 13.2485C30.6321 13.2485 31.5997 12.8325 32.4947 12.1229L33.7284 14.1784C32.4947 15.2306 31.0433 15.8178 29.35 15.8178C25.8909 15.8178 23.3751 13.2974 23.3751 10.043C23.3751 6.78846 25.8667 4.26807 29.0839 4.26807C32.1561 4.26807 34.2122 6.54376 34.2122 9.40674C34.2122 10.043 34.1154 10.7036 34.0187 11.0707ZM26.3505 8.94181H31.3094C31.2852 7.54703 30.1967 6.71505 28.9388 6.71505C27.7051 6.71505 26.6891 7.5715 26.3505 8.94181Z",fill:"#20192A","data-sentry-element":"path","data-sentry-source-file":"icon-edge-rewards.tsx"}),(0,a.jsx)("path",{d:"M42.9206 4.53728V7.18002H42.1223C40.4048 7.18002 39.1953 8.06094 39.1953 10.0675V15.5732H36.2199V4.53728H38.9534V5.85865C39.6791 4.92879 40.7677 4.41493 41.953 4.41493C42.3642 4.39046 42.6303 4.4394 42.9206 4.53728Z",fill:"#20192A","data-sentry-element":"path","data-sentry-source-file":"icon-edge-rewards.tsx"}),(0,a.jsx)("path",{d:"M55.3784 5.61391C55.3784 8.45241 53.2013 10.3855 50.1292 10.3855H47.6376V15.5731H44.6622V0.842285H50.1292C53.2013 0.842285 55.3784 2.72646 55.3784 5.61391ZM47.6376 3.5095V7.74279H50.1292C51.508 7.74279 52.3305 6.86187 52.3305 5.58944C52.3305 4.36595 51.508 3.48503 50.1292 3.48503H47.6376V3.5095Z",fill:"#FFB301","data-sentry-element":"path","data-sentry-source-file":"icon-edge-rewards.tsx"}),(0,a.jsx)("path",{d:"M56.5879 15.5732H59.5633C59.5633 15.5732 59.5633 11.291 59.5633 10.3856C59.5633 8.86846 59.6117 7.52262 60.3857 7.03322C61.0389 6.61723 61.8855 6.78852 62.4903 7.18004L64.111 4.83093C64.111 4.83093 63.2885 4.46388 62.6354 4.29259C61.4501 3.99896 59.7326 4.09684 58.6441 4.75752C57.5555 5.41821 56.6605 6.71511 56.6121 8.1833C56.5879 8.89293 56.5879 15.5732 56.5879 15.5732Z",fill:"#FFB301","data-sentry-element":"path","data-sentry-source-file":"icon-edge-rewards.tsx"}),(0,a.jsx)("path",{d:"M77.1494 10.043C77.1494 13.322 74.5127 15.8179 71.2712 15.8179C70.0617 15.8179 69.1425 15.5977 68.3684 15.1817C67.7637 14.8391 67.2557 14.3742 66.7235 13.738C66.6026 13.5911 66.4816 13.4443 66.3607 13.273C65.7559 12.49 63.2402 8.20777 63.2402 8.20777L64.8125 5.80972C64.8125 5.80972 67.7153 10.459 68.5861 11.4133C69.6021 12.5634 70.2794 13.0283 71.3196 13.0283C72.9403 13.0283 74.1498 11.7559 74.1498 10.043C74.1498 8.30565 72.9403 7.00875 71.3196 7.00875C70.6181 7.00875 70.0134 7.22898 69.5296 7.62049C69.0699 8.01201 68.6829 8.45247 68.2475 9.06422L66.5542 6.6417C67.6185 5.24692 69.3844 4.24365 71.3196 4.24365C74.5127 4.29259 77.1494 6.78852 77.1494 10.043Z",fill:"#FFB301","data-sentry-element":"path","data-sentry-source-file":"icon-edge-rewards.tsx"}),(0,a.jsx)("path",{d:"M68.3684 15.1818C67.7636 14.8881 67.2314 14.3743 66.7234 13.738C67.2314 14.3498 67.7636 14.8392 68.3684 15.1818Z",fill:"#FFB301","data-sentry-element":"path","data-sentry-source-file":"icon-edge-rewards.tsx"}),(0,a.jsx)("path",{d:"M78.2864 3.63193C78.1412 3.63193 77.9719 3.60746 77.8509 3.53405C77.7058 3.48511 77.5848 3.38723 77.4881 3.28936C77.3913 3.19148 77.2946 3.04466 77.2462 2.89784C77.1978 2.75102 77.1494 2.6042 77.1494 2.43291C77.1494 2.26162 77.1736 2.1148 77.2462 1.96798C77.3188 1.82116 77.3913 1.69881 77.4881 1.57646C77.5848 1.47859 77.7058 1.38071 77.8509 1.33177C77.9961 1.28283 78.1412 1.23389 78.2864 1.23389C78.4315 1.23389 78.5766 1.25836 78.7218 1.33177C78.8669 1.38071 78.9879 1.47859 79.0846 1.57646C79.1814 1.67434 79.2782 1.82116 79.3265 1.96798C79.3991 2.1148 79.4233 2.26162 79.4233 2.43291C79.4233 2.6042 79.3991 2.75102 79.3265 2.89784C79.254 3.04466 79.1814 3.16701 79.0846 3.28936C78.9879 3.38723 78.8669 3.48511 78.7218 3.53405C78.5766 3.60746 78.4315 3.63193 78.2864 3.63193ZM78.2864 3.4117C78.4073 3.4117 78.5283 3.38723 78.6492 3.33829C78.7702 3.28936 78.8427 3.21595 78.9395 3.14254C79.0121 3.06913 79.0846 2.97125 79.133 2.8489C79.1814 2.75102 79.2056 2.62867 79.2056 2.50632V2.38397C79.2056 2.26162 79.1814 2.16374 79.133 2.04139C79.0846 1.94351 79.0363 1.84563 78.9395 1.74775C78.8427 1.64987 78.7702 1.60093 78.6492 1.55199C78.5283 1.50306 78.4315 1.47859 78.2864 1.47859C78.1654 1.47859 78.0445 1.50306 77.9235 1.55199C77.8026 1.60093 77.73 1.67434 77.6332 1.74775C77.5365 1.82116 77.4881 1.91904 77.4397 2.04139C77.3913 2.13927 77.3671 2.26162 77.3671 2.38397V2.50632C77.3671 2.62867 77.3913 2.72655 77.4397 2.8489C77.4881 2.94678 77.5365 3.04466 77.6332 3.14254C77.7058 3.21595 77.8026 3.28936 77.9235 3.33829C78.0203 3.38723 78.1412 3.4117 78.2864 3.4117ZM78.0686 3.06913H77.8267V1.84563H78.3347C78.4557 1.84563 78.5283 1.8701 78.6008 1.94351C78.6734 2.01692 78.6976 2.09033 78.6976 2.21268C78.6976 2.31056 78.6734 2.38397 78.625 2.43291C78.5766 2.48185 78.5283 2.53079 78.4557 2.55526L78.746 3.04466H78.4799L78.238 2.57973H78.0445V3.06913H78.0686ZM78.3589 2.40844C78.4557 2.40844 78.4799 2.3595 78.4799 2.28609V2.16374C78.4799 2.09033 78.4315 2.04139 78.3589 2.04139H78.0928V2.40844H78.3589Z",fill:"#FFB301","data-sentry-element":"path","data-sentry-source-file":"icon-edge-rewards.tsx"})]}),(0,a.jsx)("defs",{"data-sentry-element":"defs","data-sentry-source-file":"icon-edge-rewards.tsx",children:(0,a.jsx)("clipPath",{id:"clip0_807_49315","data-sentry-element":"clipPath","data-sentry-source-file":"icon-edge-rewards.tsx",children:(0,a.jsx)("rect",{width:"79.7028",height:"15",fill:"white",transform:"translate(0 0.842285)","data-sentry-element":"rect","data-sentry-source-file":"icon-edge-rewards.tsx"})})})]}),o=()=>(0,a.jsxs)("svg",{width:"37",height:"16",viewBox:"0 0 37 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"IconEdgeTag","data-sentry-source-file":"icon-edge-tag.tsx",children:[(0,a.jsx)("path",{d:"M14.2876 6.49951H13.2019V10.1775H14.2752C15.4396 10.1775 16.1151 9.32584 16.1151 8.33224C16.1151 7.33864 15.4977 6.49951 14.2835 6.49951H14.2876Z",fill:"#FFB301","data-sentry-element":"path","data-sentry-source-file":"icon-edge-tag.tsx"}),(0,a.jsx)("path",{d:"M5.07893 0.842285L0.70282 5.25086V15.8423H31.7334L36.1095 11.4337V0.842285H5.07893ZM10.1015 6.44902H6.94789V7.55951H10.0311V9.02069H6.94789V10.223H10.1015V11.6758H5.2364V4.99202H10.1015V6.44485V6.44902ZM14.287 11.68H11.4898V4.9962H14.2746C16.3632 4.9962 17.8674 6.25698 17.8674 8.33185C17.8674 10.4067 16.3673 11.68 14.287 11.68ZM25.306 10.4986C24.5891 11.2918 23.6235 11.8011 22.372 11.8011C20.3912 11.8011 18.7791 10.4693 18.7791 8.34437C18.7791 6.21941 20.3912 4.88765 22.372 4.88765C23.8224 4.88765 24.7175 5.60989 25.2065 6.44067L23.7727 7.20048C23.5033 6.75795 22.9978 6.40727 22.372 6.40727C21.2863 6.40727 20.5238 7.25058 20.5238 8.3402C20.5238 9.42982 21.2904 10.2731 22.372 10.2731C22.89 10.2731 23.3583 10.0936 23.6235 9.87234V9.31292H22.1026V7.88097H25.306V10.4944V10.4986ZM31.5718 6.44902H28.4182V7.55951H31.5013V9.02069H28.4182V10.223H31.5718V11.6758H26.7067V4.99202H31.5718V6.44485V6.44902Z",fill:"#FFB301","data-sentry-element":"path","data-sentry-source-file":"icon-edge-tag.tsx"})]});var d=s(23528),c=s(81071),u=s(9),m=s(65882),x=s(1842),f={src:"/_next/static/media/edge-rewards.3e41dba3.png",height:472,width:826,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAqElEQVR42gVAuwnCQBj+/ruLeRFiYUwhWKRREFFsnMBGEDdwFAcS7HQAK0cIWKQQRNSImMOEPE9IHbCVPxivYuXVVaIADsZN6urH2LGRC0iU995+6U0W8+gSNoyAfjBgj/B0dq7rnahSpLrrm5ZpYToaglNFMFwUbc+vI4wFtzHLvs9OIiV0wUjTTEreGcrPLeAWAgGBjVA5wITiTBFBwXUtxC0dTQ31B5C3OMIpmjTOAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},p=s(26935),y=s(77740),h=s(77774),g=s(9777),v=s(24351),b=s(76242),w=s(65833),j=s(64144),N=s(80331);async function C(){let e=await (0,N.A)();return await (0,j.KF)("/api/v3/app/edge",{headers:e,method:"GET"})}let I=e=>{let t=()=>e.onOpenChange(!1),{trackAction:s,user:n}=(0,l.D)(),i=(0,c.useRouter)(),{showAlert:o}=(0,b.V)(),h=!!n&&(0,p.LM)({feature:p.eS.EDGE_REWARDS,user:n}),{mutate:j,isLoading:N}=(0,u.useMutation)({mutationFn:()=>C(),onSuccess:e=>{let s=e.url;s&&window.open(s,"_blank"),t()},onError:e=>{var s;if(t(),e instanceof y.RequestFailedError&&S((null===(s=e.logData)||void 0===s?void 0:s.responseText)||""))return i.push((0,w.X2)({ref:w.Wu.EDGE_REWARDS,feature:p.eS.EDGE_REWARDS}));k(e,o)}});return(0,a.jsxs)(g.u_,{open:e.open,onClose:t,className:"rounded-xl sm:max-w-[414px] ml-0","data-sentry-element":"Modal","data-sentry-component":"ModalEdgeRewards","data-sentry-source-file":"modal-edge-rewards.tsx",children:[(0,a.jsxs)("header",{className:"flex items-center pl-[24px] py-2 bg-white rounded-t-xl justify-between",children:[(0,a.jsx)("p",{className:"font-roboto text-[18px] text-[#333333] font-[500]",children:"EverPro Edge"}),(0,a.jsx)(r.z,{variant:"primary",className:"bg-transparent border-none outline-none hover:bg-gray-100 px-2",onClick:t,"aria-label":"Close modal","data-sentry-element":"Button","data-sentry-source-file":"modal-edge-rewards.tsx",children:(0,a.jsx)(m.Z,{className:"text-gray-400","data-testid":"x-icon",size:20,"data-sentry-element":"X","data-sentry-source-file":"modal-edge-rewards.tsx"})})]}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(d.default,{src:f,alt:"Everpro Edge Rewards",width:414,height:237,className:"object-contain w-full h-full pointer-events-none","data-sentry-element":"Image","data-sentry-source-file":"modal-edge-rewards.tsx"})}),(0,a.jsxs)("div",{className:"px-[24px] py-[20px] font-roboto text-[15px] text-[#454545] leading-[21px]",children:[(0,a.jsx)("h3",{className:"font-[500]",children:"Earn cash back and learn to grow your business"}),(0,a.jsx)("div",{className:"h-[24px]"}),(0,a.jsx)("p",{className:"font-[300]",children:"Get cash back from suppliers like Home Depot with EverPro Edge!"})]}),(0,a.jsx)("footer",{className:"flex items-center justify-end px-[24px] py-[16px] bg-gray-100 rounded-b-xl",children:(0,a.jsx)(r.z,{"data-testid":"cta",disabled:N,variant:"primary",onClick:()=>{if(s("web-modal-view",{type:"edge",action:"CTA pressed"}),!h)return i.push((0,w.X2)({ref:w.Wu.EDGE_REWARDS,feature:p.eS.EDGE_REWARDS}));j()},"data-sentry-element":"Button","data-sentry-source-file":"modal-edge-rewards.tsx",children:(0,a.jsx)("div",{className:"min-w-[60px]",children:N?(0,a.jsx)(v.$,{className:"mr-0"}):(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)("p",{children:"Continue"}),(0,a.jsx)("div",{className:"w-2"}),(0,a.jsx)(x.Z,{strokeWidth:3,size:16})]})})})})]})},k=(e,t)=>{var s;let a={type:h.NK.Modal,title:"Access Restricted",body:"You are ineligible for EverPro Edge at this time",hideCancelButton:!0,confirmText:"OK",onConfirm:()=>{}};if(!(e instanceof y.RequestFailedError)){t(a);return}let n=(null===(s=e.logData)||void 0===s?void 0:s.responseText)||"";if(F(n)){t({...a,body:"This feature is only available to users in the United States."});return}if(R(n)){t({...a,body:"You have already signed up to EverPro Edge. Please access this feature with the original user."});return}if(E(n)){t({...a,body:"This email is associated with an EverPro Edge account outside of Invoice Simple."});return}t(a)},F=e=>e.includes("Country code is not US"),S=e=>e.includes("User does not have an active subscription"),R=e=>e.includes("Launch Edge with the original registered user to gain access"),E=e=>e.includes("This Edge account does not belong to Invoice Simple"),A=e=>{var t;let[s,d]=n.useState((null===(t=e.searchParams)||void 0===t?void 0:t.modal)==="edge"),{trackAction:c}=(0,l.D)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{open:s,onOpenChange:d,"data-sentry-element":"ModalEdgeRewards","data-sentry-source-file":"edge-rewards.tsx"}),(0,a.jsxs)("div",{className:"border-gray-300 border rounded-md pl-[15px] py-[10px] flex flex-row justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-row pb-[4.5px] space-x-[10px]",children:[(0,a.jsx)(i,{"data-sentry-element":"IconEdgeRewards","data-sentry-source-file":"edge-rewards.tsx"}),(0,a.jsx)(o,{"data-sentry-element":"IconEdgeTag","data-sentry-source-file":"edge-rewards.tsx"})]}),(0,a.jsx)("p",{className:"text-[11px] font-500",children:"Earn cash back and learn to grow your business"})]}),(0,a.jsx)(r.z,{variant:"custom",className:"border-none text-blue-600 text-xs font-bold",onClick:()=>{c("web-modal-view",{type:"edge",action:"viewed"}),d(!0)},"data-sentry-element":"Button","data-sentry-source-file":"edge-rewards.tsx",children:"Continue"})]})]})}},88069:function(e,t,s){"use strict";s.r(t),s.d(t,{InvoiceNumber:function(){return g}});var a=s(37821),n=s(58078),r=s(9),l=s(77732),i=s(51668),o=s(64142),d=s(40834),c=s(79399),u=s(42236),m=s(31957),x=s(67337),f=s(42978),p=s(65941),y=s(63373);let h=i.Ry({invoiceNumber:i.Z_().regex(/^[a-zA-Z]+\d+$/,"Invoice Number should be letters followed by digits"),estimateNumber:i.Z_().regex(/^[a-zA-Z]+\d+$/,"Estimate Number should be letters followed by digits")}),g=e=>{let t={invoiceNumber:o.Vd.InvoiceLastNo,estimateNumber:o.Vd.EstimateLastNo},s=(0,l.cI)({resolver:(0,x.F)(h),defaultValues:(0,y.k)(e.settings,t),mode:"onChange"}),i=(0,u.Y)(),g=(0,r.useMutation)((0,f.Q)({onError:()=>(0,m.h5)(i)}));(0,n.useEffect)(()=>{let a=(0,p.m)({mutation:g,fieldErrors:s.formState.errors,transformedSettings:e.settings,labelToRemoteIdMap:t}),n=s.watch(a);return()=>{n.unsubscribe()}},[s.watch,g]);let v="w-full items-center flex md:flex-row flex-col md:mt-0 mt-3",b="text-xs w-full md:py-3 font-inter text-label-gray font-medium",w="w-full md:min-w-[400px] !mt-0",j=e=>{var s;return g.isLoading&&(null===(s=g.variables)||void 0===s?void 0:s.remoteId)===t[e]};return(0,a.jsx)(d.l0,{...s,"data-sentry-element":"Form","data-sentry-component":"InvoiceNumber","data-sentry-source-file":"invoice-number.tsx",children:(0,a.jsxs)("form",{className:"flex flex-col w-full items-center space-y-2 font-roboto text-[12px] text-[#555555] font-[500]",children:[(0,a.jsx)(d.Wi,{control:s.control,name:"invoiceNumber",render:e=>{let{field:t}=e;return(0,a.jsxs)(d.xJ,{className:v,children:[(0,a.jsx)(d.lX,{className:b,children:i.fta({id:"settings.list.invoice.number"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.NI,{children:(0,a.jsx)(c.I,{className:w,isLoading:j("invoiceNumber"),isError:!!s.formState.errors.invoiceNumber,isValid:!s.formState.errors.invoiceNumber&&!!t.value,...t})}),(0,a.jsx)(d.zG,{className:"text-xs text-red-600 font-light mt-1"})]})]})},"data-sentry-element":"FormField","data-sentry-source-file":"invoice-number.tsx"}),(0,a.jsx)(d.Wi,{control:s.control,name:"estimateNumber",render:e=>{let{field:t}=e;return(0,a.jsxs)(d.xJ,{className:v,children:[(0,a.jsx)(d.lX,{className:b,children:i.fta({id:"settings.list.estimate.number"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.NI,{children:(0,a.jsx)(c.I,{className:w,isLoading:j("estimateNumber"),isError:!!s.formState.errors.estimateNumber,isValid:!s.formState.errors.estimateNumber&&!!t.value,...t})}),(0,a.jsx)(d.zG,{className:"text-xs text-red-600 font-light mt-1"})]})]})},"data-sentry-element":"FormField","data-sentry-source-file":"invoice-number.tsx"})]})})}},69075:function(e,t,s){"use strict";s.r(t),s.d(t,{InvoiceSimplePayments:function(){return eu}});var a=s(37821),n=s(58078),r=s(9),l=s(64142),i=s(18519),o=s(68018),d=s(42236),c=s(40540),u=s(51985),m=s(62374),x=s(31957),f=s(29008),p=s(26088),y=s(7465),h=s(21100),g=s(99547),v=s(9845),b=s(67308),w=s(97393),j=s(88782);let N=()=>{let e=(0,b.zf)(),{open:t,isOpen:s}=(0,j.C)(),{trackAction:n,user:r}=(0,v.D)(),{f:l}=(0,d.Y)(),i=(0,g.T)(r),o=()=>{n("payments-cta",{...e,"from-guest-account":i,component:c.Z.learnMore}),t()};return(0,a.jsxs)("div",{"data-testid":"learnMore",className:"cursor-pointer","data-sentry-component":"LearnMoreSettings","data-sentry-source-file":"learn-more-settings.tsx",children:[s&&(0,a.jsx)(w.R,{}),(0,a.jsxs)("div",{className:"text-xs pb-2 flex flex-col",onClick:o,children:[(0,a.jsx)("p",{className:"font-medium",children:l({id:"learnMore.title"})}),(0,a.jsxs)("p",{className:"text-xs py-2 text-[#555555]",children:[l({id:"learnMore.subtitle"}),"\xa0",(0,a.jsx)("button",{type:"button","data-testid":"learnMoreButton",onClick:o,className:"bg-transparent border-none inline text-blue-600 hover:cursor-pointer hover:underline break-words p-0",children:(0,a.jsx)("b",{children:l({id:"learnMore"})})})]})]})]})};var C=s(80212),I=s(34992),k=s(90734),F=s(2540),S=s(60315),R=s(57659),E=s(56302),A=s(53528),M=s(30393),L=s(42978),V=s(10456);function P(e){return(0,a.jsxs)(V.Zb,{className:"bg-white w-full relative","data-sentry-element":"Card","data-sentry-component":"SettingTitleFormGroup","data-sentry-source-file":"setting-form-group.tsx",children:[(0,a.jsxs)(V.Ol,{"data-sentry-element":"CardHeader","data-sentry-source-file":"setting-form-group.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-x-2 items-center",children:[e.iconLeft,(0,a.jsx)(V.ll,{className:"font-quicksand capitalize text-[16px] text-[#333]","data-sentry-element":"CardTitle","data-sentry-source-file":"setting-form-group.tsx",children:e.title}),e.iconRight]}),(0,a.jsx)("div",{className:"h-[1px] bg-[#ececec] w-full"})]}),(0,a.jsx)(V.aY,{"data-sentry-element":"CardContent","data-sentry-source-file":"setting-form-group.tsx",children:e.children})]})}var T=s(74064),_=s(15836),D=s(11626),O=s(9777),B=s(74734),Z=s(86204);let W=e=>{let{isIsPaymentsModalOpen:t,setIsPaymentsModalOpen:s,isPaymentMethods:r,onConfirmBlock:l,paymentsCtaViewedEventMeta:u}=e,m=(0,n.useRef)(null),{isStripeEligibleAndOptedIn:x,isStripeInitial:f,isStripeEnabled:p}=(0,R.M)(),{isPaypalEligible:y,isPaypalInitial:h,isPaypalEnabled:g}=(0,S.G)(),[w,j]=(0,n.useState)(!1),{trackAction:N}=(0,v.D)(),{handleSubsetOfAcceptingToggle:C}=(0,b.uq)(b.XL.Paypal),{handleSubsetOfAcceptingToggle:I}=(0,b.uq)(b.XL.Stripe),k=x(),F=f(),E=p(),A=y(),M=h(),L=g(),V=(0,i.n)(),P=(0,o.Z)(),[T,_]=(0,n.useState)(r.filter(e=>{let{status:t}=e;return t===D.zP.ALLOWED})),{f:W}=(0,d.Y)(),U=()=>{N("payments-cta",{...u,component:c.Z.modalClosedPaymentMethodSelector}),s(!1)},Y=(0,n.useCallback)(async()=>{if(!M&&A){if(T.some(e=>{let{provider:t}=e;return t===D.ON.PAYPAL})){if(!L)return C(!0)}else if(L)return C(!1)}},[M,A,T,L,C]),X=(0,n.useCallback)(async()=>{if(!F&&k){if(T.some(e=>{let{provider:t}=e;return t===D.ON.STRIPE})){if(!E)return I(!0)}else if(E)return I(!1)}},[F,k,T,E,I]),H=async()=>{j(!0);let e=r.reduce((e,t)=>{let{id:s}=t;return T.some(e=>e.id===s)||e.push(s),e},[]),t=r.reduce((t,s)=>{let{id:a,name:n,status:r}=s;return r===D.zP.ALLOWED&&e.includes(a)?t.push("".concat(n,"-disabled")):r!==D.zP.BLOCKED||e.includes(a)||t.push("".concat(n,"-enabled")),t},[]).join(",");await Y(),await X(),await l({toBlock:e,flags:{shouldIncludePaypalUnbrandedAch:P,shouldIncludePaypalBnpl:V}}),k&&N("payments-cta",{...u,component:t,activePaymentProvider:c.f.stripe}),A&&N("payments-cta",{...u,component:t,activePaymentProvider:c.f.paypal}),N("payments-cta",{...u,component:c.Z.modalPaymentMethodSelector}),j(!1),s(!1)},z=e=>{if(T.some(t=>{let{id:s}=t;return s===e}))_(T.filter(t=>{let{id:s}=t;return s!==e}));else{let t=r.find(t=>{let{id:s}=t;return s===e});t&&_([...T,t])}};return(0,B.B)({...u,component:c.Z.modalPaymentMethodSelector}),(0,a.jsxs)(O.u_,{ref:m,open:t,onClose:U,"data-sentry-element":"Modal","data-sentry-component":"IsPaymentMethodsModal","data-sentry-source-file":"is-payment-methods-settings-modal.tsx",children:[(0,a.jsx)(Z.xB,{onClickXIcon:U,headerMessage:W({id:"payments.configure.modal.title"}),"data-sentry-element":"ModalHeader","data-sentry-source-file":"is-payment-methods-settings-modal.tsx"}),(0,a.jsx)("div",{className:"h-[1px] bg-gray-100 w-full"}),(0,a.jsxs)("section",{className:"flex flex-col py-5 px-[15px]",children:[(0,a.jsx)("p",{className:"text-[11px] text-[#374151] mb-[15px]",children:W({id:"payments.configure.modal.label"})}),(0,a.jsx)("div",{className:"flex flex-col gap-y-[10px]",children:r.map(e=>{let{id:t,logo:s,provider:n,fees:r,description:l}=e;return(0,a.jsx)(Z.IH,{isEnabled:T.some(e=>{let{id:s}=e;return s===t}),title:l,fees:r,onChange:()=>z(t),disabled:w,provider:n,children:(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:s.map((e,s)=>(0,a.jsx)("img",{src:e,alt:n,className:"max-h-4"},"".concat(t,"_icon_").concat(s)))})},t)})})]}),(0,a.jsx)("div",{className:"h-[1px] bg-gray-100 w-full"}),(0,a.jsx)(Z.mz,{onCancel:U,onConfirm:H,disabled:w,"data-sentry-element":"ModalFooter","data-sentry-source-file":"is-payment-methods-settings-modal.tsx"})]})};var U=s(31899),Y=s(73378);let X=e=>(0,a.jsxs)("div",{className:"w-full items-center flex md:flex-row flex-col md:mt-0 mt-3","data-sentry-component":"ManageAccountButton","data-sentry-source-file":"manage-account-button.tsx",children:[(0,a.jsx)("div",{className:"flex items-center text-xs w-full md:max-w-[150px] pr-3"}),(0,a.jsx)("div",{className:"w-full flex justify-between !mt-0 space-x-3",children:(0,a.jsx)(Y.z,{className:"w-full",type:"button",onClick:e.onClick,"data-sentry-element":"Button","data-sentry-source-file":"manage-account-button.tsx",children:e.buttonText})})]}),H=e=>{var t;let s="w-full items-center flex md:flex-row flex-col md:mt-0 mt-3";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:s,children:[(0,a.jsx)("div",{className:"flex items-center text-xs w-full md:max-w-[150px] pr-3",children:(0,a.jsxs)("label",{className:"text-xs w-full",children:[e.dictionary.email,":"]})}),(0,a.jsx)("div",{className:"w-full flex justify-between !mt-0 space-x-3 font-roboto font-normal",children:e.email})]}),(0,a.jsxs)("div",{className:s,children:[(0,a.jsx)("div",{className:"flex items-center text-xs w-full md:max-w-[150px] pr-3",children:(0,a.jsxs)("label",{className:"text-xs w-full",children:[e.dictionary.merchantId,":"]})}),(0,a.jsx)("div",{className:"w-full flex justify-between !mt-0 space-x-3 font-roboto font-normal",children:e.merchantId})]}),(0,a.jsxs)("div",{className:s,children:[(0,a.jsx)("div",{className:"flex items-center text-xs w-full md:max-w-[150px] pr-3",children:(0,a.jsxs)("label",{className:"text-xs w-full",children:[e.dictionary.currency,":"]})}),(0,a.jsx)("div",{className:"w-full flex justify-between !mt-0 space-x-3 font-roboto font-normal",children:null===(t=e.currency)||void 0===t?void 0:t.toUpperCase()})]})]})},z=e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H,{dictionary:{email:e.dictionary.email,merchantId:e.dictionary.merchantId,currency:e.dictionary.currency},email:e.email,merchantId:e.merchantId,currency:e.currency,"data-sentry-element":"PaymentAccountDetails","data-sentry-source-file":"manage-payment-account.tsx"}),(0,a.jsx)(X,{onClick:e.onManageAccountButtonClick,buttonText:e.dictionary.buttonText,"data-sentry-element":"ManageAccountButton","data-sentry-source-file":"manage-payment-account.tsx"})]});var G=s(77732),q=s(51668),J=s(40834),Q=s(76905),K=s(87698),$=s(24914);let ee=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)($.fC,{className:(0,K.cn)("grid gap-2",s),...n,ref:t})});ee.displayName=$.fC.displayName;let et=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)($.ck,{ref:t,className:(0,K.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:(0,a.jsx)($.z$,{className:"flex items-center justify-center ",children:(0,a.jsx)(Q.Z,{className:"h-2.5 w-2 text-current fill-gray-900 stroke-gray-900"})})})});et.displayName=$.ck.displayName;var es=s(90857),ea=s(9411),en=s(29205),er=s(1931),el=s(67337),ei=s(65941),eo=s(63373);let ed=q.Ry({paymentFeesType:q.Rx(),paymentAlwaysAddSurcharge:q.O7(),qrCodeEnabledSetting:q.O7()}),ec=e=>{let[t,s]=(0,n.useState)(!1),i={paymentFeesType:l.Vd.PaymentFeesType,paymentAlwaysAddSurcharge:l.Vd.PaymentAlwaysAddSurcharge,qrCodeEnabledSetting:l.Vd.PaymentQRCodeEnabled},o=(0,G.cI)({resolver:(0,el.F)(ed),defaultValues:(0,eo.k)(e.settings,i),mode:"onChange"}),c=(0,d.Y)(),{user:u,trackAction:m}=(0,v.D)(),f=(0,r.useMutation)((0,L.Q)({onError:()=>(0,x.h5)(c)}));(0,n.useEffect)(()=>{let t=(0,ei.m)({mutation:f,fieldErrors:o.formState.errors,transformedSettings:e.settings,labelToRemoteIdMap:i}),s=o.watch(t);return()=>{s.unsubscribe()}},[o.watch,f]);let p={formItem:"w-full items-center flex md:flex-row flex-col md:mt-0 mt-3"},{isPaypalEnabled:y}=(0,S.G)(),{isStripeEnabled:h}=(0,R.M)();if(!y()&&!h())return null;let g=e=>{m("web-button-click",{text:"Always add surcharge",action:"toggled",value:e,feature:"payments-surcharge-invoice-always-add-surcharge"})},b=async e=>{e?await (0,en.F0)({consentType:l.RX.PASSING_FEES_SURCHARGE,consentValue:"v0",user:u})?(o.setValue("paymentAlwaysAddSurcharge",!0),g(!0)):s(!0):(o.setValue("paymentAlwaysAddSurcharge",!1),g(!1))},w=async e=>{let t=[{consentType:l.RX.PASSING_FEES_SURCHARGE,consentStatus:l.lg.CONSENT_GIVEN,consentValue:"v0",consentMessage:e}];try{await (0,en.F0)({consentType:l.RX.PASSING_FEES_SURCHARGE,consentValue:"v0",user:u})||await (0,en.p)({data:t,user:u}),o.setValue("paymentAlwaysAddSurcharge",!0),s(!1)}catch(e){(0,x.jx)({title:"Error while saving consent details",body:e.message}),ea.D.error(Error("Error while saving consent details",{cause:e}),{accountId:null==u?void 0:u.account.objectId,data:t,createdAt:new Date().toISOString()})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(er.NF,{isOpen:t,onSubmit:w,onClose:()=>s(!1),"data-sentry-element":"ModalSurchargeConsent","data-sentry-source-file":"payment-settings.tsx"}),(0,a.jsxs)(J.l0,{...o,"data-sentry-element":"Form","data-sentry-source-file":"payment-settings.tsx",children:[(0,a.jsx)("div",{className:"h-[1px] bg-gray-100 w-full"}),(0,a.jsx)(J.Wi,{control:o.control,name:"paymentFeesType",render:e=>{let{field:t}=e;return(0,a.jsxs)(J.xJ,{className:(0,K.cn)(p.formItem,"justify-start"),children:[(0,a.jsx)(J.lX,{className:"text-xs w-full md:max-w-[150px] font-inter text-label-gray font-medium",children:c.f({id:"payments.surcharge.paymentProcessingFees"})}),(0,a.jsx)(J.NI,{className:"w-full flex flex-1 justify-between !mt-0 space-x-3",children:(0,a.jsxs)(ee,{onValueChange:e=>t.onChange(+e),defaultValue:t.value.toString(),className:"flex flex-col space-y-1 justify-start ml-0 gap-0 space-x-0",children:[(0,a.jsxs)(J.xJ,{className:"flex items-center space-x-3 space-y-0",children:[(0,a.jsx)(J.NI,{children:(0,a.jsx)(et,{value:l.iD.MARKUP.toString()})}),(0,a.jsx)(J.lX,{className:"font-roboto font-normal text-xs",children:c.f({id:"payments.surcharge.markUpItems"})})]}),(0,a.jsxs)(J.xJ,{className:"flex items-center space-x-3 space-y-0",children:[(0,a.jsx)(J.NI,{children:(0,a.jsx)(et,{value:l.iD.SURCHARGE.toString()})}),(0,a.jsx)(J.lX,{className:"font-roboto font-normal text-xs",children:c.f({id:"payments.surcharge.addSurchargeToInvoice"})})]})]})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"payment-settings.tsx"}),o.watch("paymentFeesType")===l.iD.SURCHARGE&&(0,a.jsx)(J.Wi,{control:o.control,name:"paymentAlwaysAddSurcharge",render:e=>{let{field:t}=e;return(0,a.jsxs)(J.xJ,{className:p.formItem,children:[(0,a.jsx)("div",{className:"flex items-center text-xs w-full md:max-w-[150px] pr-3",children:(0,a.jsx)(J.lX,{className:"text-xs w-full font-inter text-label-gray font-medium",children:c.f({id:"payments.surcharge.alwaysAddSurcharge"})})}),(0,a.jsx)("div",{className:"w-full flex justify-between !mt-0 space-x-3",children:(0,a.jsx)(J.NI,{children:(0,a.jsx)(es.r,{"data-testid":"always-add-surcharge-toggle",checked:t.value,onCheckedChange:b})})})]})}}),(0,a.jsx)(J.Wi,{control:o.control,name:"qrCodeEnabledSetting",render:e=>{let{field:t}=e;return(0,a.jsxs)(J.xJ,{className:p.formItem,children:[(0,a.jsx)("div",{className:"flex items-center text-xs w-full md:max-w-[150px] pr-3",children:(0,a.jsx)(J.lX,{className:"text-xs w-full font-inter text-label-gray font-medium",children:c.f({id:"payments.settings.qrCode"})})}),(0,a.jsx)("div",{className:"w-full flex justify-between !mt-0 space-x-3",children:(0,a.jsx)(J.NI,{children:(0,a.jsx)(es.r,{checked:t.value,onCheckedChange:t.onChange})})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"payment-settings.tsx"})]})]})},eu=e=>{let[t,s]=(0,n.useState)(!1),g=(0,d.Y)(),{isPaypalEligible:b,isPaypalAccepting:w,isPaypalEnabled:j,getPaypalAccountEmail:V,getPaypalMerchantId:D,getPaypalAccountCurrency:O,getPaypalFees:B,isACHUpgradeEligible:Z,isACHAccepting:Y}=(0,S.G)(),{getStripeFees:X,isStripeEligibleAndOptedIn:H,isStripeSubsetOfAccepting:G,isStripeSubsetOfAcceptingAndEnabled:q,isStripePendingVerification:J,stripeMerchantId:Q,stripePrimaryEmail:K,stripePrimaryCurrency:$}=(0,R.M)(),{trackAction:ee}=(0,v.D)(),{paypal_v_stripe_variant:et}=(0,M.V)(["paypal_v_stripe_variant"]),es=(0,k.P)(),ea=(0,i.n)(),en=(0,o.Z)(),er=null==et?void 0:et.enabled,{isPaypalUsable:el,isStripeUsable:ei}=(0,h.p)(e.settings[l.Vd.LocaleCurrencyCode].value),eo=el&&B(),ed=ei&&X(),[eu,em]=(0,n.useTransition)(),ex=e.settings[l.Vd.PaymentFeesType],ef=(0,C.c)(),ep=(0,F.N)(),ey=(Z()||Y())&&en&&!er,eh=er&&H(),eg={form:"flex flex-col w-full items-center space-y-2 font-roboto text-[12px] text-[#555555] font-[500]",formItem:"w-full items-center flex md:flex-row flex-col md:mt-0 mt-3"},ev=(0,n.useMemo)(()=>(0,u.D)(),[]),eb={activePaymentProvider:c.f.paypal,source:ev},ew={activePaymentProvider:c.f.stripe,source:ev},ej=(0,r.useMutation)((0,L.Q)({onError:()=>(0,x.h5)(g)})),eN=t=>{em(()=>{(0,f.u)()});let s=(0,l.P8)().find(e=>e.value.toUpperCase()===t);ej.mutate({remoteId:l.Vd.LocaleCurrencyCode,objectId:e.settings[l.Vd.LocaleCurrencyCode].objectId,type:E.Sd.Str,value:s.value})},{getISPaymentMethods:eC,blockISPaymentMethods:eI,allISPaymentMethods:ek}=(0,I.C)(),eF=q(),eS=w(),eR=j(),eE=(0,n.useMemo)(()=>(0,T.g)(ek,{shouldIncludeStripePaymentMethods:eF,shouldIncludePaypalPaymentMethods:eS&&eR,isMultiprocessor:er,shouldIncludePaypalUnbrandedAch:ey,shouldIncludePaypalBnpl:ea}),[ek,eF,eS,eR,er,ey,ea]),eA=(0,U.l)(e.settings["locale.currency-code"].value);(0,n.useEffect)(()=>{eC({flags:{shouldIncludePaypalUnbrandedAch:en,shouldIncludePaypalBnpl:ea}})},[eC,eA,ea,en,eh]);let eM={eligiblePaymentProviders:[H()?c.f.stripe:null,b()?c.f.paypal:null].filter(e=>null!==e),source:ev},eL=J()||G(),eV=w();return es&&ep?(0,a.jsx)("div",{"data-testid":"invoice-simple-payments","data-sentry-component":"InvoiceSimplePayments","data-sentry-source-file":"invoice-simple-payments.tsx",children:(0,a.jsxs)(P,{iconLeft:(0,a.jsx)(A.N,{className:"min-w-[146px] max-w-[194px] h-12 grow"}),title:"","data-sentry-element":"SettingTitleFormGroup","data-sentry-source-file":"invoice-simple-payments.tsx",children:[ey||ef?(0,a.jsx)("span",{className:"pb-1"}):(0,a.jsx)(N,{}),eE.length>0&&eA&&t&&(0,a.jsx)(W,{isIsPaymentsModalOpen:t,setIsPaymentsModalOpen:s,isPaymentMethods:eE,onConfirmBlock:eI,paymentsCtaViewedEventMeta:eM}),(0,a.jsxs)("section",{className:eg.form,children:[er&&H()&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:eg.formItem,children:[(0,a.jsx)("div",{className:"hidden md:flex items-center text-xs w-full md:max-w-[150px] pr-3",children:(0,a.jsx)("label",{className:"text-xs w-full",children:g.f({id:"payment.method.label.stripe"})})}),(0,a.jsx)("div",{className:"w-full flex justify-between !mt-0 space-x-3",children:(0,a.jsx)(y.l,{source:"settings",settings:e.settings,onCurrencyMismatchFix:eN,onUpdateStripePaymentSuppressed:()=>void 0})})]}),eL&&(0,a.jsx)(z,{dictionary:{email:g.f({id:"paymentBox.label.email"}),merchantId:g.f({id:"paymentBox.label.accountId"}),currency:g.f({id:"paymentBox.label.currency"}),buttonText:g.f({id:"paymentBox.cta.manageStripeAccount"})},email:K(),merchantId:Q(),currency:$(),onManageAccountButtonClick:()=>{J()&&ee("payments-cta",{...ew,component:c.Z.manageAccountPendingVerification}),G()&&ee("payments-cta",{...ew,component:c.Z.manageAccount}),(0,m.g)()}})]}),b()&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:eg.formItem,children:[(0,a.jsx)("div",{className:"hidden md:flex items-center text-xs w-full md:max-w-[150px] pr-3",children:(0,a.jsx)("label",{className:"text-xs w-full",children:g.f({id:"payment.method.label.paypal"})})}),(0,a.jsx)("div",{className:"w-full flex justify-between !mt-0 space-x-3",children:(0,a.jsx)(p.w,{source:"settings",settings:e.settings,onCurrencyMismatchFix:eN,onUpdatePaypalPaymentSuppressed:()=>void 0,pendingCurrencyMismatchFix:eu})})]}),eV&&(0,a.jsx)(z,{dictionary:{email:g.f({id:"paypalBox.label.email"}),merchantId:g.f({id:"paypalBox.label.accountId"}),currency:g.f({id:"paypalBox.label.currency"}),buttonText:g.f({id:"paypalBox.cta.managePaypalAccount"})},email:V(),merchantId:D(),currency:O(),onManageAccountButtonClick:()=>{ee("payments-cta",{...eb,component:c.Z.manageAccount}),(0,m.u)()}})]}),eE.length>0&&eA&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-[1px] bg-gray-100 w-full"}),(0,a.jsxs)("div",{className:"".concat(eg.formItem),children:[(0,a.jsx)("div",{className:"flex text-xs w-full md:max-w-[150px] pr-3 self-start",children:(0,a.jsx)("label",{className:"text-xs w-full",children:g.f({id:"payments.configure.label.paymentMethods"})})}),(0,a.jsxs)("div",{className:"flex-col w-full",children:[(0,a.jsx)(_.d,{isPaymentMethods:eE,paymentsCtaViewedEventMeta:eM}),(0,a.jsx)(_.m,{onClick:()=>{ee("payments-cta",{...eM,component:c.Z.tilePaymentMethodSelector}),s(!0)},buttonText:g.f({id:"payments.configure.modal.button"})})]})]})]}),(eo||ed)&&ex&&(0,a.jsx)(ec,{settings:e.settings})]})]})}):null}},11301:function(e,t,s){"use strict";s.r(t),s.d(t,{PaymentInfo:function(){return g}});var a=s(37821),n=s(58078),r=s(9),l=s(77732),i=s(51668),o=s(64142),d=s(40834),c=s(79399),u=s(42236),m=s(31957),x=s(67337),f=s(42978),p=s(65941),y=s(63373);let h=i.Ry({paypalAddress:i.Z_(),paymentInstructions:i.Z_(),byCheck:i.Z_(),other:i.Z_(),qrCodeEnabled:i.O7()}),g=e=>{let t={paypalAddress:o.Vd.PaymentPaypalEmail,paymentInstructions:o.Vd.PaymentBank,byCheck:o.Vd.PaymentCheque,other:o.Vd.PaymentOther,qrCodeEnabled:o.Vd.PaymentQRCodeEnabled},s=(0,l.cI)({resolver:(0,x.F)(h),defaultValues:(0,y.k)(e.settings,t),mode:"onChange"}),i=(0,u.Y)(),g=(0,r.useMutation)((0,f.Q)({onError:()=>(0,m.h5)(i)}));(0,n.useEffect)(()=>{let a=(0,p.m)({mutation:g,fieldErrors:s.formState.errors,transformedSettings:e.settings,labelToRemoteIdMap:t}),n=s.watch(a);return()=>{n.unsubscribe()}},[s.watch,g]);let v="w-full items-center flex md:flex-row flex-col md:mt-0 mt-3",b="text-xs w-full md:py-3 font-inter text-label-gray font-medium",w="w-full md:min-w-[400px] !mt-0",j=e=>{var s;return g.isLoading&&(null===(s=g.variables)||void 0===s?void 0:s.remoteId)===t[e]};return(0,a.jsx)(d.l0,{...s,"data-sentry-element":"Form","data-sentry-component":"PaymentInfo","data-sentry-source-file":"payment-info.tsx",children:(0,a.jsxs)("form",{className:"flex flex-col w-full items-center space-y-2 font-roboto text-[12px] text-[#555555] font-[500]",children:[(0,a.jsx)(d.Wi,{control:s.control,name:"paypalAddress",render:e=>{let{field:t}=e;return(0,a.jsxs)(d.xJ,{className:v,children:[(0,a.jsx)(d.lX,{className:b,children:i.fta({id:"paymentInstructions.paypal"})}),(0,a.jsx)(d.NI,{children:(0,a.jsx)(c.I,{className:w,isLoading:j("paypalAddress"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"payment-info.tsx"}),(0,a.jsx)(d.Wi,{control:s.control,name:"paymentInstructions",render:e=>{let{field:t}=e;return(0,a.jsxs)(d.xJ,{className:v,children:[(0,a.jsx)(d.lX,{className:b,children:i.fta({id:"paymentInstructions.paymentLabel"})}),(0,a.jsx)(d.NI,{children:(0,a.jsx)(c.I,{className:w,placeholder:i.ft({id:"paymentInstructions.placeholder"}),isLoading:j("paymentInstructions"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"payment-info.tsx"}),(0,a.jsx)(d.Wi,{control:s.control,name:"byCheck",render:e=>{let{field:t}=e;return(0,a.jsxs)(d.xJ,{className:v,children:[(0,a.jsx)(d.lX,{className:b,children:i.fta({id:"paymentInstructions.check"})}),(0,a.jsx)(d.NI,{children:(0,a.jsx)(c.I,{className:w,isLoading:j("byCheck"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"payment-info.tsx"}),(0,a.jsx)(d.Wi,{control:s.control,name:"other",render:e=>{let{field:t}=e;return(0,a.jsxs)(d.xJ,{className:v,children:[(0,a.jsx)(d.lX,{className:b,children:i.ft({id:"paymentInstructions.other"})}),(0,a.jsx)(d.NI,{children:(0,a.jsx)(c.I,{className:w,isLoading:j("other"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"payment-info.tsx"})]})})}},94004:function(e,t,s){"use strict";s.r(t),s.d(t,{Region:function(){return z}});var a=s(37821),n=s(58078),r=s(9),l=s(82682),i=s(77732),o=s(51668),d=s(64142),c=s(40834),u=s(83753),m=s(42236),x=s(87698),f=s(31957),p=s(29008),y=s(67337),h=s(42978),g=s(65941),v=s(63373),b=s(23528),w=s(73378),j=s(16675),N=s(19570),C=s(81589),I=s(65882);C.fC,C.xz;let k=C.h_;C.x8;let F=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(C.aV,{ref:t,className:(0,x.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});F.displayName=C.aV.displayName,n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsxs)(k,{children:[(0,a.jsx)(F,{}),(0,a.jsxs)(C.VY,{ref:t,className:(0,x.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[n,(0,a.jsxs)(C.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(I.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}).displayName=C.VY.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(C.Dx,{ref:t,className:(0,x.cn)("text-lg font-semibold leading-none tracking-tight",s),...n})}).displayName=C.Dx.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(C.dk,{ref:t,className:(0,x.cn)("text-sm text-muted-foreground",s),...n})}).displayName=C.dk.displayName;let S=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(j.mY,{ref:t,className:(0,x.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...n})});S.displayName=j.mY.displayName;let R=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(N.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(j.mY.Input,{ref:t,className:(0,x.cn)("flex h-11 w-full ring-0 rounded-md border-none bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...n})]})});R.displayName=j.mY.Input.displayName;let E=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(j.mY.List,{ref:t,className:(0,x.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...n})});E.displayName=j.mY.List.displayName;let A=n.forwardRef((e,t)=>(0,a.jsx)(j.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));A.displayName=j.mY.Empty.displayName;let M=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(j.mY.Group,{ref:t,className:(0,x.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...n})});M.displayName=j.mY.Group.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(j.mY.Separator,{ref:t,className:(0,x.cn)("-mx-1 h-px bg-border",s),...n})}).displayName=j.mY.Separator.displayName;let L=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(j.mY.Item,{ref:t,className:(0,x.cn)('relative flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled="true"]:pointer-events-none data-[disabled="true"]:opacity-50',s),...n})});L.displayName=j.mY.Item.displayName;var V=s(69252),P=s(18294),T=s(89136),_=s(60315),D=s(57659);let O=e=>{var t;let{close:s,setCurrency:r,tempCurrency:l,openConfirmationModal:i,openUpdatedModal:o}=(0,T.AM)(),[u,x]=n.useState(!1),{f}=(0,m.Y)(),p=n.useMemo(d.P8,[]),y=null!==(t=p.find(t=>t.value===e.selectedCurrency))&&void 0!==t?t:p.find(e=>"USD"===e.value);(0,P.Z)(y,"Currency option not found");let{getPaypalAccountCurrency:h}=(0,_.G)(),{stripePrimaryCurrency:g}=(0,D.M)(),v=t=>{var s,a;let n=null!==(s=g())&&void 0!==s?s:null,l=null!==(a=h())&&void 0!==a?a:null;if(l&&l.toLowerCase()!==t.value.toLowerCase()||n&&n.toLowerCase()!==t.value.toLowerCase()){i(t);return}e.onSelect(t.value),o(t),r(t),x(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.o7,{onContinue:()=>{r(l),e.onSelect(l.value),s()},"data-sentry-element":"ModalCurrencyChangeConfirmation","data-sentry-source-file":"currency-selector.tsx"}),(0,a.jsx)(T.we,{"data-sentry-element":"ModalCurrencyChangeUpdated","data-sentry-source-file":"currency-selector.tsx"}),(0,a.jsxs)(V.J2,{open:u,onOpenChange:x,"data-sentry-element":"Popover","data-sentry-source-file":"currency-selector.tsx",children:[(0,a.jsx)(c.NI,{className:"w-full md:min-w-[400px] !mt-0","data-sentry-element":"FormControl","data-sentry-source-file":"currency-selector.tsx",children:(0,a.jsx)(V.xo,{asChild:!0,"data-sentry-element":"PopoverTrigger","data-sentry-source-file":"currency-selector.tsx",children:(0,a.jsx)(w.z,{className:"min-w-full justify-start bg-white py-0 pl-3","data-sentry-element":"Button","data-sentry-source-file":"currency-selector.tsx",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"font-normal",children:y.value}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-lg pr-2",children:y.label}),(0,a.jsx)(b.default,{src:y.imageUrl,alt:y.name,width:40,height:40,"data-sentry-element":"Image","data-sentry-source-file":"currency-selector.tsx"})]})]})})})}),(0,a.jsx)(V.yk,{className:"p-0 bg-white md:w-[400px]",side:"bottom",align:"start",sideOffset:-42,"data-sentry-element":"PopoverContent","data-sentry-source-file":"currency-selector.tsx",children:(0,a.jsxs)(S,{"data-sentry-element":"Command","data-sentry-source-file":"currency-selector.tsx",children:[(0,a.jsx)(R,{placeholder:"Change currency...",className:"focus-visible:ring-0","data-sentry-element":"CommandInput","data-sentry-source-file":"currency-selector.tsx"}),(0,a.jsxs)(E,{"data-sentry-element":"CommandList","data-sentry-source-file":"currency-selector.tsx",children:[(0,a.jsx)(A,{"data-sentry-element":"CommandEmpty","data-sentry-source-file":"currency-selector.tsx",children:f({id:"settings.currency.select.no.results"})}),(0,a.jsx)(M,{"data-sentry-element":"CommandGroup","data-sentry-source-file":"currency-selector.tsx",children:p.map(e=>(0,a.jsxs)(L,{value:e.value,className:"flex justify-between items-center hover:bg-gray-100 active:bg-gray-200 cursor-pointer rounded-md",onSelect:()=>v(e),children:[(0,a.jsx)("p",{className:"font-normal",children:e.value}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-lg pr-2",children:e.label}),(0,a.jsx)(b.default,{src:e.imageUrl,alt:e.name,width:40,height:40})]})]},e.value))})]})]})})]})]})};var B=s(7363);let Z=[{value:"en-US",label:"English (US)"},{value:"en-CA",label:"English (CA)"},{value:"en-GB",label:"English (UK)"},{value:"en-AU",label:"English (AU)"},{value:"en-NZ",label:"English (NZ)"},{value:"en-IE",label:"English (IE)"},{value:"nl-NL",label:"Nederlands",en:"Dutch"},{value:"fr-FR",label:"Fran\xe7ais",en:"French"},{value:"de-DE",label:"Deutsch",en:"German"},{value:"it-IT",label:"Italiano",en:"Italian"},{value:"es-ES",label:"Espa\xf1ol",en:"Spanish"}],W=["yyyy-MM-dd","dd-MM-yyyy","MM-dd-yyyy","yyyy/MM/dd","dd/MM/yyyy","MM/dd/yyyy","yyyy.MM.dd","dd.MM.yyyy","MM.dd.yyyy","MMM d, yyyy","d MMM yyyy"],U=()=>W.map(e=>{let t=new Date;return{value:e,label:"".concat(e," (").concat((0,B.Z)(t,e),")")}}),Y={1:{id:"taxYearMonths.january"},2:{id:"taxYearMonths.february"},3:{id:"taxYearMonths.march"},4:{id:"taxYearMonths.april"},5:{id:"taxYearMonths.may"},6:{id:"taxYearMonths.june"},7:{id:"taxYearMonths.july"},8:{id:"taxYearMonths.august"},9:{id:"taxYearMonths.september"},10:{id:"taxYearMonths.october"},11:{id:"taxYearMonths.november"},12:{id:"taxYearMonths.december"}},X=e=>{let t=[];for(let[s,a]of Object.entries(Y))t.push({value:s,label:e.f(a)});return t},H=o.Ry({locale:o.Z_(),taxYear:o.Rx(),currency:o.Z_(),dateFormat:o.Z_()}),z=e=>{let[t,s]=n.useTransition(),[o,b]=n.useTransition(),w={locale:d.Vd.LocaleLanguage,taxYear:d.Vd.LocaleTaxYearStartMonth,currency:d.Vd.LocaleCurrencyCode,dateFormat:d.Vd.LocaleDateFormat},j=(0,i.cI)({resolver:(0,y.F)(H),values:(0,v.k)(e.settings,w),mode:"onChange"}),N=(0,m.Y)(),C=(0,r.useMutation)((0,h.Q)({onError:()=>(0,f.h5)(N),onSuccess:e=>{(null==e?void 0:e.remoteId)===d.Vd.LocaleLanguage&&s(async()=>{await (0,p.u)()}),(null==e?void 0:e.remoteId)===d.Vd.LocaleCurrencyCode&&b(async()=>{await (0,p.u)()})}}));(0,n.useEffect)(()=>{let t=(0,g.m)({mutation:C,fieldErrors:j.formState.errors,transformedSettings:e.settings,labelToRemoteIdMap:w}),s=j.watch(t);return()=>{s.unsubscribe()}},[j.watch,C]);let I="w-full items-center flex md:flex-row flex-col md:mt-0 mt-3",k="text-xs w-full md:py-3 font-inter text-label-gray font-medium",F="w-full md:min-w-[400px] !mt-0",S=e=>{var t;return C.isLoading&&(null===(t=C.variables)||void 0===t?void 0:t.remoteId)===w[e]};return(0,a.jsx)(c.l0,{...j,"data-sentry-element":"Form","data-sentry-component":"Region","data-sentry-source-file":"region.tsx",children:(0,a.jsxs)("form",{className:"flex flex-col w-full items-center space-y-2 font-roboto text-[12px] text-[#555555] font-[500]",children:[(0,a.jsx)(c.Wi,{control:j.control,name:"locale",render:e=>{let{field:s}=e;return(0,a.jsxs)(c.xJ,{className:I,children:[(0,a.jsx)(c.lX,{className:k,children:N.ft({id:"settings.list.locale"})}),(0,a.jsxs)(u.Ph,{onValueChange:e=>s.onChange(e),defaultValue:s.value,children:[(0,a.jsx)(c.NI,{className:F,children:(0,a.jsx)(u.i4,{isLoading:S("locale")||t,children:(0,a.jsx)(u.ki,{placeholder:Z[0].label})})}),(0,a.jsx)(u.Bw,{children:Z.map(e=>(0,a.jsx)(u.Ql,{value:e.value,children:e.label},e.value))})]})]})},"data-sentry-element":"FormField","data-sentry-source-file":"region.tsx"}),(0,a.jsx)(c.Wi,{control:j.control,name:"taxYear",render:e=>{let{field:t}=e,s=X(N);return(0,a.jsxs)(c.xJ,{className:I,children:[(0,a.jsx)(c.lX,{className:k,children:N.fta({id:"settings.list.tax.year.begins"})}),(0,a.jsxs)(u.Ph,{onValueChange:e=>t.onChange(+e),defaultValue:t.value?t.value.toString():s[0].value,children:[(0,a.jsx)(c.NI,{className:F,children:(0,a.jsx)(u.i4,{isLoading:S("taxYear"),children:(0,a.jsx)(u.ki,{placeholder:s[0].label})})}),(0,a.jsx)(u.Bw,{children:s.map(e=>(0,a.jsx)(u.Ql,{value:e.value,children:e.label},e.value))})]})]})},"data-sentry-element":"FormField","data-sentry-source-file":"region.tsx"}),(0,a.jsx)(c.Wi,{control:j.control,name:"currency",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{className:I,children:[(0,a.jsx)(c.lX,{className:k,children:N.ft({id:"settings.list.currency"})}),(0,a.jsxs)("div",{className:(0,x.cn)(F,"relative",o&&"opacity-50 pointer-events-none"),children:[(0,a.jsx)(O,{onSelect:t.onChange,selectedCurrency:t.value}),S("currency")||o&&(0,a.jsx)("div",{className:"absolute top-2 left-12",children:(0,a.jsx)(l.Z,{className:"animate-spin ease-in-out text-blue-600"})})]})]})},"data-sentry-element":"FormField","data-sentry-source-file":"region.tsx"}),(0,a.jsx)(c.Wi,{control:j.control,name:"dateFormat",render:e=>{let{field:t}=e,s=U();return(0,a.jsxs)(c.xJ,{className:I,children:[(0,a.jsx)(c.lX,{className:k,children:N.fta({id:"settings.list.date.format"})}),(0,a.jsxs)(u.Ph,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,a.jsx)(c.NI,{className:F,children:(0,a.jsx)(u.i4,{isLoading:S("dateFormat"),children:(0,a.jsx)(u.ki,{placeholder:s[0].label})})}),(0,a.jsx)(u.Bw,{children:s.map(e=>(0,a.jsx)(u.Ql,{value:e.value,children:e.label},e.value))})]})]})},"data-sentry-element":"FormField","data-sentry-source-file":"region.tsx"})]})})}},36947:function(e,t,s){"use strict";s.r(t),s.d(t,{Subscription:function(){return u}});var a=s(37821),n=s(81071),r=s(77774),l=s(73378),i=s(84463),o=s(42236),d=s(76242),c=s(65833);let u=e=>{let{email:t,showAnnualUpgrade:s}=e,{f:u}=(0,o.Y)(),{showAlert:m}=(0,d.V)(),x=(0,n.useRouter)(),f={row:"w-full items-center flex md:flex-row flex-col mt-2",label:"text-xs w-full md:py-3 font-inter text-label-gray font-medium",button:"w-full md:min-w-[400px] !mt-0"};return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsxs)("div",{className:f.row,children:[(0,a.jsx)(i._,{label:u({id:"settings.list.subscription.account"}),className:f.label}),(0,a.jsx)("text",{className:"w-full md:min-w-[400px] text-xs text-wrap",children:t})]}),s&&(0,a.jsxs)("div",{className:f.row,children:[(0,a.jsx)(i._,{label:u({id:"settings.list.subscription.annual.upgrade"}),className:f.label}),(0,a.jsx)(l.z,{variant:"primary",className:f.button,onClick:()=>{x.push((0,c.X2)({ref:c.Wu.SETTING}))},children:u({id:"settings.list.subscription.annual.upgrade"})})]}),(0,a.jsxs)("div",{className:f.row,children:[(0,a.jsx)(i._,{label:u({id:"settings.list.subscription.cancel"}),className:f.label,"data-sentry-element":"Label","data-sentry-source-file":"subscription.tsx"}),(0,a.jsx)(l.z,{className:f.button,onClick:()=>{m({title:u({id:"subscription.cancel.title"}),body:u({id:"subscription.cancel.confirmPrompt"}),type:r.NK.Modal,onConfirm(){x.push("/subscription-cancel-v2?ref=".concat(c.Wu.SETTING))}})},"data-sentry-element":"Button","data-sentry-source-file":"subscription.tsx",children:u({id:"subscription.cancel.title"})})]})]})}},21631:function(e,t,s){"use strict";s.r(t),s.d(t,{Tax:function(){return N}});var a=s(37821),n=s(58078),r=s(9),l=s(82682),i=s(77732),o=s(13084),d=s.n(o),c=s(51668),u=s(64142),m=s(10336),x=s(40834),f=s(79399),p=s(83753),y=s(42236),h=s(31957),g=s(67337),v=s(42978),b=s(65941),w=s(63373);let j=c.Ry({type:c.Rx(),rate:c.Rx(),label:c.Z_(),inclusive:c.O7()}),N=e=>{let t={type:u.Vd.TaxType,rate:u.Vd.TaxRate,label:u.Vd.TaxLabel,inclusive:u.Vd.TaxInclusive},s=(0,i.cI)({resolver:(0,g.F)(j),defaultValues:(0,w.k)(e.settings,t),mode:"onChange"}),o=(0,y.Y)(),c=(0,r.useMutation)((0,v.Q)({onError:()=>(0,h.h5)(o)}));(0,n.useEffect)(()=>{let a=(0,b.m)({mutation:c,fieldErrors:s.formState.errors,transformedSettings:e.settings,labelToRemoteIdMap:t}),n=s.watch(a);return()=>{n.unsubscribe()}},[s.watch,c]);let N="w-full items-center flex md:flex-row flex-col md:mt-0 mt-3",C="text-xs w-full md:py-3 md:max-w-[150px] pr-3 font-inter text-label-gray font-medium",I="w-full md:min-w-[400px] !mt-0",k=e=>{var s;return c.isLoading&&(null===(s=c.variables)||void 0===s?void 0:s.remoteId)===t[e]};return(0,a.jsx)(x.l0,{...s,"data-sentry-element":"Form","data-sentry-component":"Tax","data-sentry-source-file":"tax.tsx",children:(0,a.jsxs)("form",{className:"flex flex-col w-full items-center space-y-2 font-roboto text-[12px] text-[#555555] font-[500]",children:[(0,a.jsx)(x.Wi,{control:s.control,name:"type",render:e=>{let{field:t}=e;return(0,a.jsxs)(x.xJ,{className:N,children:[(0,a.jsx)(x.lX,{className:C,children:o.ft({id:"settings.list.tax.type"})}),(0,a.jsxs)(p.Ph,{onValueChange:e=>t.onChange(+e),defaultValue:t.value.toString(),children:[(0,a.jsx)(x.NI,{className:I,children:(0,a.jsx)(p.i4,{className:"border",isLoading:k("type"),children:(0,a.jsx)(p.ki,{placeholder:"Select a tax type"})})}),(0,a.jsxs)(p.Bw,{children:[(0,a.jsx)(p.Ql,{value:u.oA.TAX_SUBTOTAL.toString(),children:o.f({id:"i18n.tax.type.label.total"})}),(0,a.jsx)(p.Ql,{value:u.oA.TAX_DEDUCTED.toString(),children:o.f({id:"i18n.tax.type.label.deducted"})}),(0,a.jsx)(p.Ql,{value:u.oA.TAX_ITEM.toString(),children:o.f({id:"i18n.tax.type.label.item"})}),(0,a.jsx)(p.Ql,{value:u.oA.TAX_NONE.toString(),children:o.f({id:"i18n.tax.type.label.none"})})]})]})]})},"data-sentry-element":"FormField","data-sentry-source-file":"tax.tsx"}),(0,a.jsx)(x.Wi,{control:s.control,name:"rate",render:e=>{let{field:t}=e;return(0,a.jsxs)(x.xJ,{className:N,children:[(0,a.jsx)(x.lX,{className:C,children:o.ft({id:"settings.list.tax.rate"})}),(0,a.jsxs)("div",{className:"relative !mt-0 self-start",children:[(0,a.jsx)(x.NI,{className:I,children:(0,a.jsx)(d(),{...t,step:1,precision:3,dir:"ltr",min:0,max:100,className:"flex h-10 w-full !rounded-md font-extralight text-xs border border-gray-300 bg-background !px-3 !py-2 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",format:e=>e+"%",style:{wrap:{marginTop:0},btnUp:{paddingLeft:"0.5rem",paddingRight:"0.5rem",background:"transparent",border:"none",outline:"none",boxShadow:"none"},btnDown:{paddingLeft:"0.5rem",paddingRight:"0.5rem",background:"transparent",border:"none",outline:"none",boxShadow:"none"}}})}),k("rate")&&(0,a.jsx)(l.Z,{className:"absolute right-7 top-2 animate-spin ease-in-out text-blue-600"})]})]})},"data-sentry-element":"FormField","data-sentry-source-file":"tax.tsx"}),(0,a.jsx)(x.Wi,{control:s.control,name:"label",render:e=>{let{field:t}=e;return(0,a.jsxs)(x.xJ,{className:N,children:[(0,a.jsx)(x.lX,{className:C,children:o.ft({id:"settings.list.tax.label"})}),(0,a.jsx)(x.NI,{children:(0,a.jsx)(f.I,{className:I,isLoading:k("label"),...t})})]})},"data-sentry-element":"FormField","data-sentry-source-file":"tax.tsx"}),(0,a.jsx)(x.Wi,{control:s.control,name:"inclusive",render:e=>{let{field:t}=e;return(0,a.jsxs)(x.xJ,{className:N,children:[(0,a.jsx)(x.lX,{className:C,children:o.ft({id:"settings.list.tax.inclusive"})}),(0,a.jsxs)("div",{className:"w-full flex justify-between !mt-0 relative",children:[(0,a.jsx)(x.NI,{children:(0,a.jsx)(m.X,{className:"!mt-0",checked:t.value,onCheckedChange:t.onChange})}),k("inclusive")&&(0,a.jsx)(l.Z,{className:"absolute top-0 right-0 animate-spin ease-in-out text-blue-600"})]})]})},"data-sentry-element":"FormField","data-sentry-source-file":"tax.tsx"})]})})}},50478:function(e,t,s){"use strict";s.d(t,{J:function(){return m},TrialProvider:function(){return u}});var a=s(37821),n=s(58078),r=s(64142),l=s(9411),i=s(2144);let o=(0,n.createContext)(void 0),d={"business-info":null,"add-photos":null,"client-signature":null,"add-expense":null,"invoice-signature":null},c=async e=>{await (0,i.I)([{setting:{name:r.Vd.TrialFeaturesExplored,value:JSON.stringify(e)}}])},u=e=>{let{children:t,savedFeatures:s}=e,[r,i]=(0,n.useState)(s||d),u=async(e,t)=>{if("completed"===r[e])return;let s={...r,[e]:t};i(s);try{await c(s)}catch(e){l.D.error(e),i(r)}};return(0,a.jsx)(o.Provider,{value:{features:r,updateFeature:u,resetFeatures:()=>{i(d)}},"data-sentry-element":"unknown","data-sentry-component":"TrialProvider","data-sentry-source-file":"use-trial-store.tsx",children:t})},m=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useTrialStore must be used within TrialProvider");return e}},65632:function(e,t,s){"use strict";s.r(t),s.d(t,{BannerWrapper:function(){return F}});var a=s(37821),n=s(58078),r=s(9845),l=s(57244),i=s(2246),o=s(81071),d=s(64142),c=s(19501),u=s(50478),m=s(65833),x=s(24929),f=s(93426),p=s(75210),y=s(2320),h=s(70597),g=s(18139),v=s(27547);let b=e=>{let{paywallCouponConfig:t,featureUsage:s,daysLeft:a,onCtaClick:n}=e,r=a>7||t?"success":"warning",l=C(a,s,t);return{type:r,leftIcon:w(a,t),rightIcon:j(a,t),title:l,button:N(a,t),onCtaClick:n,isClosable:!1}},w=(e,t)=>{if(t)return(0,a.jsx)(p.Z,{className:"mr-1",color:"#166534"});let s=e>7?"#166534":"#A16207";return e>3?(0,a.jsx)(y.Z,{className:"mr-1",color:s,"data-sentry-element":"ClockIcon","data-sentry-component":"getLeftIcon","data-sentry-source-file":"get-banner-config.tsx"}):(0,a.jsx)(h.Z,{className:"mr-1",fill:s,stroke:"white",color:s,"data-sentry-element":"CircleAlert","data-sentry-component":"getLeftIcon","data-sentry-source-file":"get-banner-config.tsx"})},j=(e,t)=>(0,a.jsx)(g.Z,{className:"block md:hidden",color:e>7||t?"#166534":"#A16207","data-sentry-element":"ChevronRight","data-sentry-component":"getRightIcon","data-sentry-source-file":"get-banner-config.tsx"}),N=(e,t)=>t?(0,a.jsx)(v._,{id:"free.trial.button.title.coupon"}):e>3?(0,a.jsx)(v._,{id:"free.trial.button.title","data-sentry-element":"FormattedMessage","data-sentry-component":"getButton","data-sentry-source-file":"get-banner-config.tsx"}):(0,a.jsx)(v._,{id:"free.trial.button.title.subscribe","data-sentry-element":"FormattedMessage","data-sentry-component":"getButton","data-sentry-source-file":"get-banner-config.tsx"}),C=(e,t,s)=>{let n=I(e,t,s);return(0,a.jsxs)("p",{"data-testid":"title",className:"flex flex-col md:flex-row ml-1 text-sm","data-sentry-component":"getTitle","data-sentry-source-file":"get-banner-config.tsx",children:[(0,a.jsx)(v._,{id:"free.trial.banner.title",values:{count:e,b:e=>(0,a.jsx)("strong",{className:"font-semibold",children:e})},"data-sentry-element":"FormattedMessage","data-sentry-source-file":"get-banner-config.tsx"}),(0,a.jsx)("span",{className:"flex hidden md:block mx-1",children:"•"}),n]})},I=(e,t,s)=>{var n,r;if(!s){let s=t.featuresTotal===t.featuresCompleted;return(0,a.jsx)(v._,{id:s?"free.trial.banner.subtitle.complete":e>3?"free.trial.banner.subtitle":"free.trial.banner.subtitle.subscribe",values:{used:t.featuresCompleted,total:t.featuresTotal,b:e=>(0,a.jsx)("strong",{className:"font-semibold",children:e})}})}let l=null!==(n=s.durationMonths)&&void 0!==n?n:0,i=null!==(r=(0,c.vN)({paywallCouponConfig:s,platform:d.t4.WEB}))&&void 0!==r?r:0;return(0,a.jsx)("p",{"data-testid":"title",className:"text-sm","data-sentry-component":"getSubtitle","data-sentry-source-file":"get-banner-config.tsx",children:(0,a.jsx)(v._,{id:"free.trial.banner.subtitle.coupon",values:{count:e,maxDiscount:i,durationMonths:l,b:e=>(0,a.jsx)("strong",{className:"font-semibold",children:e})},"data-sentry-element":"FormattedMessage","data-sentry-source-file":"get-banner-config.tsx"})})},k=e=>{let{source:t,subscriptionStatus:s}=e,l=(0,o.useRouter)(),{trackAction:i,account:p}=(0,r.D)(),{features:y}=(0,u.J)(),h=(0,f.X$)(s),g=(0,f.u4)(y),v=(null==p?void 0:p.paywallCoupon)?c.ML[p.paywallCoupon]:void 0,w=(null==v?void 0:v[d.t4.WEB])?v:void 0;(0,n.useEffect)(()=>{(0,f.VT)()&&i("free-trial",{action:"banner-shown",platform:d.t4.WEB,source:t,"days-left":h})},[]);let j=b({daysLeft:h,featureUsage:g,paywallCouponConfig:w,onCtaClick:e=>{e.preventDefault(),i("free-trial",{action:"banner-click","days-left":h,platform:d.t4.WEB,source:t}),l.push("/subscription?ref=".concat(m.Wu.FREE_TRIAL))}});return(0,a.jsx)(x.j,{...j,"data-sentry-element":"Banner","data-sentry-component":"FreeTrialBanner","data-sentry-source-file":"free-trial-banner.tsx"})},F=e=>{let{source:t}=e,{subscriptionStatus:s}=(0,r.D)();return(0,i.z_)(s)?(0,a.jsx)(k,{source:t,subscriptionStatus:s}):(0,a.jsx)(l.j,{source:t,"data-sentry-element":"DocLimitBannerWrapper","data-sentry-component":"BannerWrapper","data-sentry-source-file":"banner-wrapper.tsx"})}},24929:function(e,t,s){"use strict";s.d(t,{j:function(){return c}});var a=s(37821),n=s(58078),r=s(73378),l=s(66962);let i={success:"text-green-800",warning:"text-yellow-800",danger:"text-red-800"},o={success:"bg-green-50",warning:"bg-yellow-50",danger:"bg-red-50"},d={success:"bg-green-700",warning:"bg-yellow-600",danger:"bg-red-800"},c=e=>{let{type:t,title:s,button:c,body:u,leftIcon:m,rightIcon:x,isClosable:f,onCtaClick:p}=e,[y,h]=(0,n.useState)(!0),g=o[t],v=d[t],b=i[t];return y?(0,a.jsx)("div",{id:"tailwind",className:"w-full","data-sentry-component":"Banner","data-sentry-source-file":"banner.tsx",children:(0,a.jsxs)("div",{"data-testid":"banner",className:"flex p-[12px] rounded-[4px] ".concat(g),children:[(0,a.jsxs)("div",{className:"flex items-center w-full md:pointer-events-none",onClick:p,children:[m,(0,a.jsxs)("div",{children:[!!s&&(0,a.jsx)("span",{"data-testid":"title",className:"".concat(b),children:s}),!!u&&(0,a.jsx)("span",{"data-testid":"body",className:"text-xs",children:u})]})]}),x&&(0,a.jsx)("div",{className:"flex items-center",children:x}),c&&(0,a.jsx)(r.z,{"data-testid":"btn-banner",variant:"primary",className:"rounded-lg whitespace-nowrap px-[12px] hidden md:block ".concat(v),onClick:p,children:c}),f&&(0,a.jsx)(l.bM,{"data-testid":"x-icon",className:"cursor-pointer",fill:"warning"===t?"#854d0e":"#991b1b",onClick:()=>h(!1)})]})}):null}},57244:function(e,t,s){"use strict";s.d(t,{j:function(){return j}});var a=s(37821),n=s(58078),r=s(64142),l=s(18294),i=s(9845),o=s(81071),d=s(42236),c=s(65833),u=s(24929),m=s(26935),x=s(18505),f=s(27547),p=s(39217);let y=e=>{let t,s,{subscriptionStatus:n,source:l,remainingDocCount:i,intl:o,onCtaClick:d}=e,c=i>0,u="warning";return(0,p.j5)({subscriptionStatus:n,source:l})||!n?(u=c?"warning":"danger",t=g(i,o),s=b(i,o,d)):((0,p.hL)(n)&&(t=h(i,n.planInterval,new Date(n.activeUntil),o),s=v(r.QV.ESSENTIALS,d)),(0,p.oH)(n)&&(t=h(i,n.planInterval,new Date(n.activeUntil),o),s=v(r.QV.PLUS,d))),{type:u,leftIcon:c?void 0:(0,a.jsx)(x.r,{className:"mr-1 stroke-red-50",fill:"currentColor",width:"24",height:"24"}),title:t,body:s,onCtaClick:d,isClosable:!1}},h=(e,t,s,n)=>{let r=1===e?n.ft({id:"docLimit.banner.paid.title.singular"},{date:n.formatDate((0,p.Tg)(s,t),{year:"numeric",month:"short",day:"numeric"})}):n.ft({id:"docLimit.banner.paid.title.plural"},{count:e,date:n.formatDate((0,p.Tg)(s,t),{year:"numeric",month:"short",day:"numeric"})});return(0,a.jsx)("p",{"data-testid":"title",className:"text-xs font-bold","data-sentry-component":"getPaidBannerTitle","data-sentry-source-file":"get-banner-config.tsx",children:r})},g=(e,t)=>{if(e>=m.Tv.FREE_LIMIT_LOGGED_IN)return;let s=1===e?t.ft({id:"docLimit.banner.free.title.singular"}):t.ft({id:"docLimit.banner.free.title.plural"},{count:e});return(0,a.jsx)("p",{"data-testid":"title",className:"text-xs font-bold","data-sentry-component":"getFreeBannerTitle","data-sentry-source-file":"get-banner-config.tsx",children:s})},v=(e,t)=>{let s="/subscription?".concat(c.a$.REF,"=").concat(c.a$.DOC_LIMIT_BANNER);return(0,a.jsx)(f._,{id:"docLimit.banner.".concat(e,".body"),values:{upgrade:e=>(0,a.jsx)("a",{href:s,className:"font-bold underline",onClick:t,"data-sentry-component":"getUpgradeElement","data-sentry-source-file":"get-banner-config.tsx",children:e})},"data-sentry-element":"FormattedMessage","data-sentry-component":"getPaidBannerBody","data-sentry-source-file":"get-banner-config.tsx"})},b=(e,t,s)=>{let n=e>=m.Tv.FREE_LIMIT_LOGGED_IN,r="/subscription?".concat(c.a$.REF,"=").concat(c.a$.DOC_LIMIT_BANNER),l=e=>(0,a.jsx)("a",{href:r,className:"font-bold underline",onClick:s,"data-sentry-component":"getUpgradeElement","data-sentry-source-file":"get-banner-config.tsx",children:e});return n?(0,a.jsxs)(a.Fragment,{children:[t.ft({id:"docLimit.banner.free.initial.body1"},{docCount:m.Tv.FREE_LIMIT_LOGGED_IN}),(0,a.jsx)("span",{className:"hidden sm:inline-block",children:"\xa0"}),(0,a.jsx)("span",{className:"block sm:inline-block",children:(0,a.jsx)(f._,{id:"docLimit.banner.free.initial.body2",values:{upgrade:l}})})]}):(0,a.jsx)(f._,{id:"docLimit.banner.free.body",values:{upgrade:l},"data-sentry-element":"FormattedMessage","data-sentry-component":"getFreeBannerBody","data-sentry-source-file":"get-banner-config.tsx"})},w=e=>{let{source:t,remainingDocCount:s}=e,n=(0,d.Y)(),l=(0,o.useRouter)(),{subscriptionStatus:m,trackAction:x}=(0,i.D)(),f=y({remainingDocCount:s,intl:n,onCtaClick:e=>{e.preventDefault(),x("doc-limit-banner",{action:"cta-click","docs-remaining":s,platform:r.t4.WEB,source:t}),l.push("/subscription?ref=".concat(c.Wu.DOC_LIMIT_BANNER))},subscriptionStatus:m,source:t});return(0,a.jsx)(u.j,{...f,"data-sentry-element":"Banner","data-sentry-component":"DocLimitBanner","data-sentry-source-file":"doc-limit-banner.tsx"})},j=e=>{let{source:t}=e,{subscriptionStatus:s}=(0,i.D)();return(0,p.XI)({subscriptionStatus:s,source:t})?(0,a.jsx)(N,{source:t,"data-sentry-element":"RenderDocLimitBanner","data-sentry-component":"DocLimitBannerWrapper","data-sentry-source-file":"doc-limit-banner-wrapper.tsx"}):null},N=e=>{let{trackAction:t,subscriptionStatus:s}=(0,i.D)();(0,l.Z)(s,"subscriptionStatus should be defined");let{remainingDocCount:o}=(0,p.zk)({subscriptionStatus:s,source:e.source});return(0,n.useEffect)(()=>{(0,p.xA)(o)&&t("doc-limit-banner",{action:"show","docs-remaining":o,platform:r.t4.WEB,source:e.source})},[]),(0,a.jsx)(w,{source:e.source,remainingDocCount:o,"data-sentry-element":"DocLimitBanner","data-sentry-component":"RenderDocLimitBanner","data-sentry-source-file":"doc-limit-banner-wrapper.tsx"})}},50390:function(e,t,s){"use strict";s.d(t,{K:function(){return z}});var a=s(37821),n=s(58078),r=s(3309),l=s(16482),i=s(7363),o=s(40610),d=s(77732),c=s(13590),u=s(69379),m=s(64142),x=s(95422),f=s(9777),p=s(24351),y=s(21576),h=s(42236),g=s(64144),v=s(80331);let b={XLSX:"XLSX",PDF:"PDF",CSV:"CSV"},w=async e=>{let{user:t,startDate:s,endDate:a,fileFormat:n="XLSX",includeImages:r=0,onSuccess:l}=e,o=(0,i.Z)(s,"yyyy-MM-dd"),d=(0,i.Z)(a,"yyyy-MM-dd"),c=n.toLowerCase(),u=new URLSearchParams({startDate:o,endDate:d,type:c,includeImages:r?"true":"false"}),m=await (0,v.A)({user:t}),x=await (0,g.KF)("/api/v3/app/export/expenses?".concat(u),{headers:m,cache:"no-cache",blob:!0}),f="Expense-Summary-[".concat(o,"]--[").concat(d,"].").concat(c),p=URL.createObjectURL(x),y=document.createElement("a");y.href=p,y.download=f,y.click(),y.remove(),l()},j=async e=>{let{user:t,startDate:s,endDate:a,fileFormat:n="XLSX",onSuccess:r}=e,l=(0,i.Z)(s,"yyyy-MM-dd"),o=(0,i.Z)(a,"yyyy-MM-dd"),d=n.toLowerCase(),c=new URLSearchParams({startDate:l,endDate:o,type:d}),u=await (0,v.A)({user:t}),m=await (0,g.KF)("/api/v3/app/export/invoices?".concat(c),{headers:u,cache:"no-cache",blob:!0}),x="Invoice-Summary-[".concat(l,"]--[").concat(o,"].").concat(d),f=URL.createObjectURL(m),p=document.createElement("a");p.href=f,p.download=x,p.click(),p.remove(),r()};var N=s(81387),C=s(9845),I=s(30393),k=s(26587),F=s(69787),S=s(7811),R=s(73378),E=s(6966),A=s(18139),M=s(69761);s(19993);var L=s(87698);let V=e=>{let{className:t,classNames:s,showOutsideDays:n=!0,...r}=e;return(0,a.jsx)(M._W,{locale:r.locale,showOutsideDays:n,className:(0,L.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,L.cn)((0,R.d)({variant:"ghost"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,L.cn)((0,R.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:()=>(0,a.jsx)(E.Z,{className:"h-4 w-4"}),IconRight:()=>(0,a.jsx)(A.Z,{className:"h-4 w-4"})},...r,"data-sentry-element":"DayPicker","data-sentry-component":"Calendar","data-sentry-source-file":"calendar.tsx"})};V.displayName="Calendar";var P=s(55717),T=s(79399),_=s(69252),D=s(52757);let O="MMM dd, yyyy";function B(e,t){return e?(0,D.W)({date:e,formatStr:O,locale:t}):""}let Z=n.forwardRef(e=>{let{locale:t}=(0,h.Y)(),{currentLocale:s}=(0,P.H)(),[r,l]=n.useState(!1),i=new Date,[o,d]=n.useState(e.value||i),[c,u]=n.useState(B(o,t)),m=i.getFullYear(),x=i.getMonth(),[f,p]=n.useState(o),y=i.getDate(),g=new Date(m+20,x,y+1),v=new Date(m-20,x,y+1),b=t=>{let s=(0,k.Z)(t,O,new Date);return!!(0,F.Z)(s)&&!(s<=v)&&!(s>=g)&&(!e.minDate||!(s<e.minDate))&&(!e.maxDate||!(s>e.maxDate))};return(0,a.jsx)("div",{className:"flex flex-col gap-3",children:(0,a.jsxs)("div",{className:"relative flex gap-2",children:[(0,a.jsx)(T.I,{id:e.id,value:c,"data-testid":e.id,className:"bg-white w-full",onChange:t=>{let s=(0,k.Z)(t.target.value,O,new Date);if(u(t.target.value),b(t.target.value))return d(s),p(s),e.onChange(s)},onBlur:()=>{b(c)||u(B(o,t))},onKeyDown:e=>{"ArrowDown"===e.key&&(e.preventDefault(),l(!0))}}),(0,a.jsxs)(_.J2,{open:r,onOpenChange:l,children:[(0,a.jsx)(_.xo,{asChild:!0,children:(0,a.jsxs)(R.z,{id:e.id+"-button",variant:"link",className:"absolute top-1/2 right-0 size-4 -translate-y-1/2",children:[(0,a.jsx)(S.Z,{className:"text-gray-500",size:18}),(0,a.jsx)("span",{className:"sr-only",children:e.dictionary.selectDate})]})}),(0,a.jsx)(_.yk,{className:"w-auto overflow-hidden p-0 bg-white",align:"end",alignOffset:-8,sideOffset:10,children:(0,a.jsx)(V,{mode:"single",locale:s,selected:o,captionLayout:"dropdown",month:f,onMonthChange:p,fromDate:e.minDate,toDate:e.maxDate,today:i,onSelect:s=>null!==s&&s?s>v&&s<g?(d(s),u(B(s,t)),l(!1),e.onChange(s)):e.onChange(new Date):void 0})})]})]})})});Z.displayName="ShadCNDatePicker";var W=s(37903),U=s(27547);let Y=e=>{let{email:t}=e,{f:s}=(0,h.Y)(),n=(0,a.jsx)(W.default,{href:"/settings",className:"text-blue-600 hover:text-blue-500",children:s({id:"export.summary.modal.message.settings.link"})});return t?(0,a.jsx)("div",{className:"bg-gray-100 rounded-md flex justify-center items-center","data-sentry-component":"InfoMessage","data-sentry-source-file":"info-message.tsx",children:(0,a.jsxs)("p",{className:"text-sm text-gray-900 px-3 py-4","data-testid":"expenses-export-image-included-message",children:[s({id:"export.summary.modal.message.imagesIncluded"})," ",(0,a.jsxs)("span",{className:"text-blue-500",children:["(",t,")"]})]})}):(0,a.jsx)("div",{className:"bg-red-50 rounded-md flex justify-center items-center",children:(0,a.jsx)("p",{className:"text-sm text-gray-900 px-3 py-4",children:(0,a.jsx)(U._,{id:"export.summary.modal.message.missingEmail",values:{linkToSettings:n}})})})},X=[{label:b.XLSX,value:b.XLSX},{label:b.PDF,value:b.PDF},{label:b.CSV,value:b.CSV}],H="expenses",z=e=>{let{open:t,onClose:s,settings:g,dataType:v}=e,k=(0,n.useRef)(null),[F,S]=(0,n.useState)(!1),[R,E]=(0,n.useState)(""),{trackAction:A,user:M}=(0,C.D)(),{pdf_export:L}=(0,I.V)(["pdf_export"]),V=X.filter(e=>{if(e.value===b.PDF){var t;return null!==(t=null==L?void 0:L.enabled)&&void 0!==t&&t}return!0}),{control:P,watch:T,register:_,handleSubmit:D}=(0,d.cI)({defaultValues:{from:(0,r.Z)(new Date),to:new Date,format:(()=>{var e;let t=(0,N.$)().getItem(u.F.EXPORT_FILE_FORMAT_KEY);return(t!==b.PDF||null!==(e=null==L?void 0:L.enabled)&&void 0!==e&&e)&&t||b.XLSX})(),includeImages:!1}}),{includeImages:O,from:B,to:W,format:U}=T(),{f:z}=(0,h.Y)(),G=!(null==g?void 0:g.businessEmail);(0,n.useEffect)(()=>{if(U===b.PDF&&B&&W&&(0,l.Z)(W,B)>1){E(z({id:"export.summary.modal.pdf.exceeds.date"}));return}E("")},[U,B,W,z]);let q=v===H&&G&&O||!!R,J=(e,t,s)=>{let a=(0,i.Z)(e,"yyyy-MM-dd"),n=(0,i.Z)(t,"yyyy-MM-dd");A("export-records",{platform:m.t4.WEB,type:v===H?"expense":"invoice","file-extension":s.toLowerCase(),"include-images":O,"from-date":a,"to-date":n,days:(0,o.Z)(t,e)}),(0,N.$)().setItem(u.F.EXPORT_FILE_FORMAT_KEY,s)},Q=async e=>{S(!0);try{let t={user:M,startDate:e.from,endDate:e.to,fileFormat:e.format,onSuccess:()=>J(e.from,e.to,e.format)};"expenses"===v?await w({...t,includeImages:Number(e.includeImages)}):await j(t),s()}catch(e){c.Am.error(z({id:"export.summary.toast.error.title"}),{description:z({id:v===H?"export.summary.toast.expense.error.message":"export.summary.toast.invoice.error.message"})})}finally{S(!1)}};return(0,a.jsxs)(f.u_,{ref:k,open:t,onClose:s,"data-sentry-element":"Modal","data-sentry-component":"ExportSummaryModal","data-sentry-source-file":"export-summary-modal.tsx",children:[(0,a.jsx)(y.V.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900 px-5 pt-5","data-sentry-element":"unknown","data-sentry-source-file":"export-summary-modal.tsx",children:v===H?z({id:"export.summary.modal.expense.title"}):z({id:"export.summary.modal.invoice.title"})}),(0,a.jsxs)("form",{onSubmit:D(Q),children:[(0,a.jsxs)("section",{className:"px-5 py-4",children:[(0,a.jsxs)("div",{className:"flex flex-row py-2 items-center w-full group",children:[(0,a.jsx)("label",{className:"text-[16px] w-[100px] sm:w-[175px]",htmlFor:"from",children:z({id:"export.summary.modal.from"})}),(0,a.jsx)("div",{className:"w-full flex-1",children:(0,a.jsx)(d.Qr,{name:"from",control:P,render:e=>{let{field:t}=e;return(0,a.jsx)(Z,{maxDate:W,id:"from",className:"text-[14px] group-hover:bg-gray-50",selected:t.value,dictionary:{selectDate:z({id:"datePicker.selectDate"})},...t})},"data-sentry-element":"Controller","data-sentry-source-file":"export-summary-modal.tsx"})})]}),(0,a.jsxs)("div",{className:"flex flex-row py-2 items-center w-full group",children:[(0,a.jsx)("label",{className:"text-[16px] w-[100px] sm:w-[175px]",htmlFor:"to",children:z({id:"export.summary.modal.to"})}),(0,a.jsx)("div",{className:"w-full flex-1",children:(0,a.jsx)(d.Qr,{name:"to",control:P,render:e=>{let{field:t}=e;return(0,a.jsx)(Z,{minDate:B,id:"to",selected:t.value,className:"text-[14px] group-hover:bg-gray-50",dictionary:{selectDate:z({id:"datePicker.selectDate"})},...t})},"data-sentry-element":"Controller","data-sentry-source-file":"export-summary-modal.tsx"})})]}),(0,a.jsxs)("div",{className:"flex flex-row py-2 items-center w-full group",children:[(0,a.jsx)("label",{className:"text-[16px] w-[100px] sm:w-[175px]",htmlFor:"format",children:z({id:"export.summary.modal.format"})}),(0,a.jsxs)("div",{className:"w-full flex-1",children:[(0,a.jsx)(d.Qr,{name:"format",control:P,render:e=>{let{field:t}=e;return(0,a.jsx)(x.TV,{...t,ref:null,id:"format-select",hideCheckbox:!0,isSearchable:!1,options:V,name:"format"})},"data-sentry-element":"Controller","data-sentry-source-file":"export-summary-modal.tsx"}),R&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600","data-testid":"pdf-date-range-error",children:R})]})]}),v==H&&(0,a.jsxs)("div",{className:"flex flex-row py-2 items-center w-full",children:[(0,a.jsx)("label",{className:"text-[16px] w-[100px] sm:w-[175px] cursor-pointer",htmlFor:"include-images",children:z({id:"export.summary.modal.includeImages"})}),(0,a.jsx)("div",{className:"w-full flex-1 flex items-center",children:(0,a.jsx)("input",{type:"checkbox",className:"w-[18px] h-[18px] cursor-pointer text-gray-800",id:"include-images",..._("includeImages")})})]})]}),O&&v===H&&(0,a.jsx)("div",{className:"px-5 pb-5",children:(0,a.jsx)(Y,{email:null==g?void 0:g.businessEmail})}),(0,a.jsxs)("footer",{className:"bg-gray-100 p-5 flex sm:flex-row flex-col-reverse space-y-3 sm:space-y-0 rounded-b-md",children:[(0,a.jsx)("button",{ref:k,onClick:s,type:"button",className:"flex-1 mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:z({id:"alert.modal.cancel.button"})}),(0,a.jsx)("button",{disabled:q||F,className:"flex-1 inline-flex w-full justify-center rounded-md bg-neutral-800 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-neutral-700 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:bg-gray-700 disabled:cursor-not-allowed relative",children:F?(0,a.jsx)(p.$,{className:"w-4 h-4 mr-2 text-gray-100 animate-spin fill-neutral-800"}):z({id:"export.summary.modal.export"})})]})]})]})}},47396:function(e,t,s){"use strict";s.r(t),s.d(t,{AlertBanner:function(){return i}});var a=s(37821);s(58078);var n=s(16243),r=s(96755),l=s(76242);let i=()=>{let{alert:e,hideAlert:t}=(0,l.V)();return e&&e.type===r.N.Banner?(0,a.jsx)(n.j,{...e,onClose:t,"data-sentry-element":"Banner","data-sentry-component":"AlertBanner","data-sentry-source-file":"alert-banner.tsx"}):null}},61603:function(e,t,s){"use strict";s.r(t),s.d(t,{AlertModal:function(){return u}});var a=s(37821),n=s(58078),r=s(66962),l=s(9777),i=s(21576),o=s(42236),d=s(76242),c=s(96755);let u=()=>{let{alert:e,hideAlert:t}=(0,d.V)(),s=(0,n.useRef)(null),{f:u}=(0,o.Y)();if(!e||e.type!==c.N.Modal)return null;let m=(null==e?void 0:e.confirmText)||u({id:"alert.modal.confirm.button"}),x=(null==e?void 0:e.cancelText)||u({id:"alert.modal.cancel.button"});return(0,a.jsx)(l.u_,{ref:s,open:!!e&&e.type===c.N.Modal,onClose:()=>{t();let s=e.onCancel;s&&s()},"data-sentry-element":"Modal","data-sentry-component":"AlertModal","data-sentry-source-file":"alert-modal.tsx",children:(0,a.jsxs)("section",{className:"sm:p-6 px-4 pb-4 pt-5",children:[(0,a.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,a.jsx)(r.FC,{className:"h-6 w-6 text-red-600","aria-hidden":"true","data-sentry-element":"IconWarning","data-sentry-source-file":"alert-modal.tsx"})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[(0,a.jsx)(i.V.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900","data-sentry-element":"unknown","data-sentry-source-file":"alert-modal.tsx",children:null==e?void 0:e.title}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:null==e?void 0:e.body})})]})]}),(0,a.jsxs)("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[(0,a.jsx)("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:()=>{t(),e.onConfirm()},children:m}),!(null==e?void 0:e.hideCancelButton)&&(0,a.jsx)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>{t();let s=e.onCancel;s&&s()},ref:s,children:x})]})]})})}},16243:function(e,t,s){"use strict";s.d(t,{j:function(){return o}});var a=s(37821);s(58078);let n={error:"bg-red-100",success:"bg-green-100",warning:"bg-yellow-100"},r={...n,warning:"bg-amber-50"},l={error:"text-red-800",success:"text-green-800",warning:"text-yellow-800"},i={...l,warning:"text-slate-800"},o=e=>{let{bannerVersion:t="v1",...s}=e,o="v2"===t,d=o?r:n,c=o?i:l,u=d[s.bannerType],m=c[s.bannerType];return(0,a.jsx)("div",{className:"".concat(u," ").concat(o?"rounded-[10px]":""," w-full"),role:"alert","data-sentry-component":"Banner","data-sentry-source-file":"banner.tsx",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto ".concat(o?"py-3 px-5":"px-4 py-2 sm:px-6 lg:px-8"," flex w-full"),children:[(0,a.jsxs)("div",{className:"w-full",children:[s.title&&(0,a.jsx)("strong",{className:"text-sm ".concat(m),children:s.title}),(0,a.jsx)("p",{className:"text-sm ".concat(m),children:s.body})]}),s.isClosable&&(0,a.jsx)("button",{onClick:s.onClose,className:"btn btn-close ".concat(m," px-2"),name:"btn-close",children:(0,a.jsx)("svg",{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{d:"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"})})})]})})};o.displayName="Banner"},9418:function(e,t,s){"use strict";s.d(t,{h:function(){return R},y:function(){return S}});var a=s(37821),n=s(58078),r=s(23528),l=s(37903),i={src:"/_next/static/media/automated-reviews.2f5e6098.png",height:600,width:1238,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAY0lEQVR42hXBOwrCQBQF0Nm94C5EdAXiLmwEi1RphBQp8ubd+z4zCSHknJL3i78fHL4EKQt/H3/d8nkt+I8wW/c9gZ4tt40gxqGonXprYewRQkdoNS+1CuFmodDMJsZZJ5V6ANNbWFRn+ZBwAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},o=s(26935),d=s(81071),c=s(82682),u=s(23398),m=s(73378),x=s(42236),f=s(9845),p=s(65833);let y={feature:"pulse-m",modal:"Discoverability"},h=e=>{let{f:t}=(0,x.Y)(),s=(0,d.useRouter)(),[r,l]=(0,n.useState)(!1),i=(0,f.D)(),h=(0,d.usePathname)();return e.isLoading?(0,a.jsx)("div",{className:"flex flex-col gap-3 w-full p-5 bg-[#F3F4F6]",children:(0,a.jsx)("div",{className:"flex justify-center py-2",children:(0,a.jsx)(c.Z,{className:"animate-spin ease-in-out text-blue-600"})})}):(0,a.jsx)("div",{className:"flex flex-col gap-3 w-full p-5 bg-[#F3F4F6]","data-sentry-component":"Footer","data-sentry-source-file":"footer.tsx",children:e.hasAccess?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.z,{className:"text-sm py-2 px-4 rounded-md",onClick:()=>{(0,u.zB)("google",{redirectTo:"/onboarding-automated-reviews?redirect=".concat(h)}),i.trackAction("web-button-click",{action:"start-google",text:"Get Started With Google",...y})},variant:"primary",type:"button",children:t({id:"automatedReviews.discoverabilityGetStartedGoogle"})}),(0,a.jsx)(m.z,{type:"button",variant:"white",className:"text-sm py-2 px-4 rounded-md border-[#999999]",onClick:()=>{s.push("/onboarding-automated-reviews"),i.trackAction("web-button-click",{action:"another-platform",text:"Continue Without A Google Account",...y})},children:t({id:"automatedReviews.discoverabilityContinueWithoutGoogle"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.z,{className:"flex text-sm py-2 px-4 rounded-md justify-center",onClick:()=>{l(!0);let e=p.a$.AUTOMATIC_REVIEWS;s.push((0,p.X2)({feature:o.eS.AUTOMATIC_REVIEWS,ref:e,successReturnPath:"/invoices?ref=".concat(e)})),i.trackAction("web-button-click",{action:"upgrade-now",text:"Upgrade now",...y})},disabled:r,variant:"primary",type:"button",children:r?(0,a.jsx)(c.Z,{className:"animate-spin text-white"}):t({id:"automatedReviews.upgrade"})}),(0,a.jsx)(m.z,{type:"button",variant:"white",className:"text-sm py-2 px-4 rounded-md border-[#999999]",onClick:e.onClose,children:t({id:"automatedReviews.maybeLater"})})]})})};var g=s(66962);let v=n.forwardRef((e,t)=>(0,a.jsxs)("svg",{...e,ref:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("g",{clipPath:"url(#clip0_2987_12896)",children:(0,a.jsx)("path",{d:"M20.945 11C21.1767 13.0717 20.682 15.1595 19.5455 16.907C18.4091 18.6545 16.7012 19.9533 14.7136 20.5817C12.726 21.21 10.5819 21.1289 8.6474 20.3522C6.71294 19.5755 5.10807 18.1514 4.10684 16.323C3.10561 14.4946 2.77011 12.3754 3.15763 10.3272C3.54514 8.27895 4.63164 6.42875 6.2316 5.09251C7.83157 3.75627 9.84576 3.01686 11.9303 3.00054C14.0148 2.98421 16.0403 3.69198 17.661 5.003L15.006 7.395C14.0544 6.77425 12.934 6.46341 11.7986 6.5052C10.6633 6.54699 9.56873 6.93935 8.66538 7.62837C7.76204 8.31739 7.09424 9.26925 6.75374 10.3532C6.41325 11.4371 6.41678 12.5998 6.76385 13.6816C7.11092 14.7634 7.78448 15.7112 8.692 16.3948C9.59951 17.0783 10.6964 17.464 11.832 17.4989C12.9676 17.5338 14.0861 17.2161 15.0339 16.5896C15.9817 15.9631 16.7122 15.0585 17.125 14H13V11H20.945Z",stroke:"#FF5721",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_2987_12896",children:(0,a.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]}));v.displayName="IconGoogleOutlined";let b=n.forwardRef((e,t)=>(0,a.jsxs)("svg",{...e,ref:t,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_2987_12910)",children:[(0,a.jsx)("path",{d:"M18.3327 1.66675L12.4993 18.3334L9.16602 10.8334L1.66602 7.50008L18.3327 1.66675Z",stroke:"#FF5721",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M18.3327 1.66675L9.16602 10.8334",stroke:"#FF5721",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_2987_12910",children:(0,a.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]}));b.displayName="IconSendReview";let w=n.forwardRef((e,t)=>(0,a.jsxs)("svg",{...e,ref:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{d:"M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H6C4.93913 15 3.92172 15.4214 3.17157 16.1716C2.42143 16.9217 2 17.9391 2 19V21",stroke:"#FF5721",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z",stroke:"#FF5721",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M22 21V19C21.9993 18.1137 21.7044 17.2528 21.1614 16.5523C20.6184 15.8519 19.8581 15.3516 19 15.13",stroke:"#FF5721",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89318 18.7122 8.75608 18.1676 9.45769C17.623 10.1593 16.8604 10.6597 16 10.88",stroke:"#FF5721",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}));w.displayName="IconUsers";var j=s(9777),N=s(61692),C=s(17914),I=s(92973);let k=e=>{let{icon:t,id:s}=e;return(0,a.jsxs)("div",{className:"flex items-start","data-sentry-component":"BenefitRow","data-sentry-source-file":"benefit-row.tsx",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-12 h-12 flex items-center justify-center",children:t}),(0,a.jsx)("span",{className:"text-sm font-normal text-[#454545]",children:(0,a.jsx)(I.Z,{id:s,values:{b:e=>(0,a.jsx)("strong",{children:e})},"data-sentry-element":"FormattedMessage","data-sentry-source-file":"benefit-row.tsx"})})]})},F={feature:"pulse-m",modal:"Discoverability"},S="automated-reviews-discoverability",R=e=>{let{f:t}=(0,x.Y)(),s=(0,f.D)(),{data:d,isLoading:c}=(0,C.Z)(),u=!!d&&(0,N.g)({feature:o.eS.AUTOMATIC_REVIEWS,user:s.user,subscriptionStatus:s.subscriptionStatus}),m=()=>{s.trackAction("web-button-click",{action:"close",text:"X",...F}),e.onClose()};return(0,n.useEffect)(()=>{e.isOpen&&!c&&s.trackAction("web-modal-view",{action:"viewed",source:e.source,...F,hasAccessToFeature:u})},[e,s,u,c]),(0,a.jsxs)(j.u_,{open:e.isOpen,onClose:e.onClose,className:"xs:h-auto sm:max-w-md bg-white overflow-hidden","data-sentry-element":"Modal","data-sentry-component":"ModalDiscoverability","data-sentry-source-file":"discoverability-modal.tsx",children:[(0,a.jsxs)("header",{className:"flex flex-row items-center justify-between border-b border-[#E5E7EB] p-5 max-w-xs",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-md text-[#333333] font-inter font-semibold h-[24px] tracking-tight truncate",children:t({id:"automatedReviews.title"})})}),(0,a.jsx)("button",{onClick:m,type:"button",className:"p-2 hover:opacity-50 transition absolute top-3 right-2",children:(0,a.jsx)(g.bM,{className:"text-gray-400",fill:"currentColor","data-sentry-element":"IconClose","data-sentry-source-file":"discoverability-modal.tsx"})})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(r.default,{src:i,alt:"#","data-sentry-element":"Image","data-sentry-source-file":"discoverability-modal.tsx"}),(0,a.jsxs)("div",{className:"space-y-4 py-5 px-6",children:[(0,a.jsx)(k,{icon:(0,a.jsx)(v,{color:"#FF5721"}),id:"automatedReviews.discoverabilityBenefit1","data-sentry-element":"BenefitRow","data-sentry-source-file":"discoverability-modal.tsx"}),(0,a.jsx)(k,{icon:(0,a.jsx)(w,{color:"#FF5721"}),id:"automatedReviews.discoverabilityBenefit2","data-sentry-element":"BenefitRow","data-sentry-source-file":"discoverability-modal.tsx"}),(0,a.jsx)(k,{icon:(0,a.jsx)(b,{color:"#FF5721"}),id:"automatedReviews.discoverabilityBenefit3","data-sentry-element":"BenefitRow","data-sentry-source-file":"discoverability-modal.tsx"}),(0,a.jsx)(l.default,{onClick:()=>{s.trackAction("web-link-click",{text:"Learn more about how it works.",action:"learn-more",...F})},href:"https://help.invoicesimple.com/en/articles/11187034-how-do-i-collect-automatic-reviews",className:"text-blue-500 hover:text-blue-700 underline block mt-4 ml-4","data-sentry-element":"Link","data-sentry-source-file":"discoverability-modal.tsx",children:t({id:"automatedReviews.learnMore"})})]})]}),(0,a.jsx)(h,{onClose:m,hasAccess:u,isLoading:c,"data-sentry-element":"Footer","data-sentry-source-file":"discoverability-modal.tsx"})]})}},10456:function(e,t,s){"use strict";s.d(t,{Zb:function(){return l},aY:function(){return d},Ol:function(){return i},ll:function(){return o}});var a=s(37821),n=s(87698),r=s(58078);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},10336:function(e,t,s){"use strict";s.d(t,{X:function(){return i}});var a=s(37821),n=s(58078),r=s(58740),l=s(87698);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.fC,{ref:t,className:(0,l.cn)("peer h-5 w-5 shrink-0 rounded-[4px] border border-gray-400 ring-offset-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-blue-600 data-[state=checked]:text-white",s),...n,children:(0,a.jsx)(r.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(o,{className:"h-4 w-4"})})})});i.displayName=r.fC.displayName;let o=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-check",...e,"data-sentry-element":"svg","data-sentry-component":"Check","data-sentry-source-file":"checkbox.tsx",children:(0,a.jsx)("path",{d:"M20 6 9 17l-5-5","data-sentry-element":"path","data-sentry-source-file":"checkbox.tsx"})})},64765:function(e,t,s){"use strict";s.r(t),s.d(t,{Form:function(){return d},FormControl:function(){return y},FormDescription:function(){return h},FormField:function(){return u},FormItem:function(){return f},FormLabel:function(){return p},FormMessage:function(){return g},useFormField:function(){return m}});var a=s(37821),n=s(58078),r=s(70534),l=s(2362),i=s(77732),o=s(87698);let d=i.RV,c=n.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(c.Provider,{value:{name:t.name},"data-sentry-element":"unknown","data-sentry-component":"FormField","data-sentry-source-file":"form.tsx",children:(0,a.jsx)(i.Qr,{...t,"data-sentry-element":"Controller","data-sentry-source-file":"form.tsx"})})},m=()=>{let e=n.useContext(c),t=n.useContext(x),{getFieldState:s,formState:a}=(0,i.Gc)(),r=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...r}},x=n.createContext({}),f=n.forwardRef((e,t)=>{let{className:s,...r}=e,l=n.useId();return(0,a.jsx)(x.Provider,{value:{id:l},children:(0,a.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",s),...r})})});f.displayName="FormItem";let p=n.forwardRef((e,t)=>{let{className:s,...n}=e,{error:r,formItemId:l}=m();return(0,a.jsx)(v,{ref:t,className:(0,o.cn)(r&&"text-destructive","font-light",s),htmlFor:l,...n})});p.displayName="FormLabel";let y=n.forwardRef((e,t)=>{let{...s}=e,{error:n,formItemId:r,formDescriptionId:i,formMessageId:o}=m();return(0,a.jsx)(l.g7,{ref:t,id:r,"aria-describedby":n?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!n,...s})});y.displayName="FormControl";let h=n.forwardRef((e,t)=>{let{className:s,...n}=e,{formDescriptionId:r}=m();return(0,a.jsx)("p",{ref:t,id:r,className:(0,o.cn)("text-sm text-muted-foreground",s),...n})});h.displayName="FormDescription";let g=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e,{error:l,formMessageId:i}=m(),d=l?String(null==l?void 0:l.message):n;return d?(0,a.jsx)("p",{ref:t,id:i,className:(0,o.cn)("text-sm font-medium text-destructive",s),...r,children:d}):null});g.displayName="FormMessage";let v=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.f,{ref:t,className:(0,o.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...n})});v.displayName=r.f.displayName},40834:function(e,t,s){"use strict";s.d(t,{NI:function(){return a.FormControl},Wi:function(){return a.FormField},l0:function(){return a.Form},lX:function(){return a.FormLabel},xJ:function(){return a.FormItem},zG:function(){return a.FormMessage}});var a=s(64765)},66784:function(e,t,s){"use strict";s.d(t,{U:function(){return n}});var a=s(37821);let n=s(58078).forwardRef((e,t)=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...e,ref:t,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}));n.displayName="IconError"},18505:function(e,t,s){"use strict";s.d(t,{r:function(){return n}});var a=s(37821);let n=s(58078).forwardRef((e,t)=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",width:"20",height:"20",...e,ref:t,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}));n.displayName="IconExclamationWarningCircle"},54414:function(e,t,s){"use strict";s.d(t,{f:function(){return n}});var a=s(37821);function n(){return(0,a.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"photograph w-7 h-7 mr-1","data-sentry-element":"svg","data-sentry-component":"IconPhotograph","data-sentry-source-file":"icon-photograph.tsx",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd","data-sentry-element":"path","data-sentry-source-file":"icon-photograph.tsx"})})}s(58078)},79399:function(e,t,s){"use strict";s.d(t,{I:function(){return d}});var a=s(37821),n=s(58078),r=s(82682),l=s(70597),i=s(45104),o=s(87698);let d=n.forwardRef((e,t)=>{let{className:s,type:n,isError:d,isValid:c,isLoading:u,...m}=e;return(0,a.jsxs)("div",{className:(0,o.cn)("relative w-full",s),children:[(0,a.jsx)("input",{type:n,className:(0,o.cn)("flex h-10 w-full rounded-md font-extralight text-xs border border-gray-300 bg-background px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...m}),u&&(0,a.jsx)(r.Z,{className:"absolute right-2 top-2 animate-spin ease-in-out text-blue-600"}),d&&!u&&(0,a.jsx)(l.Z,{className:"absolute right-2 top-2 text-white",fill:"#dc2626"}),c&&!u&&(0,a.jsx)(i.Z,{className:"absolute right-2 top-2 text-white",fill:"#10B981"})]})});d.displayName="Input"},94747:function(e,t,s){"use strict";s.d(t,{Pd:function(){return d},R9:function(){return o},pM:function(){return l}});var a=s(37821),n=s(58078);let r=(0,n.createContext)({openModal:void 0,closeModal:void 0}),l=e=>{let{children:t,modals:s}=e,{openModal:l,closeModal:o}=i(),[d,c]=(0,n.useState)({}),u=e=>{if(!(e in s)){null==o||o(e);return}c(t=>({...t,[e]:!1}))};return(0,a.jsxs)(r.Provider,{value:{openModal:e=>{if(!(e in s)){null==l||l(e);return}c(t=>({...t,[e]:!0}))},closeModal:u},"data-sentry-element":"unknown","data-sentry-component":"ModalsContextProvider","data-sentry-source-file":"modals.context.tsx",children:[t,Object.entries(s).map(e=>{let[t,s]=e,n=d[t]||!1;return"function"==typeof s?(0,a.jsx)(s,{isOpen:n,onClose:()=>u(t)},t):"object"==typeof s&&s.modal?(0,a.jsx)(s.modal,{...s.props,isOpen:n,onClose:()=>u(t)},t):null})]})},i=()=>(0,n.useContext)(r),o=e=>{let{openModal:t}=i();return()=>{null==t||t(e)}};function d(e){return function(t){return s=>(0,a.jsx)(l,{modals:e,"data-sentry-element":"ModalsContextProvider","data-sentry-component":"ComponentWithModals","data-sentry-source-file":"modals.context.tsx",children:(0,a.jsx)(t,{...s,"data-sentry-element":"WrappedComponent","data-sentry-source-file":"modals.context.tsx"})})}}},83753:function(e,t,s){"use strict";s.d(t,{Ph:function(){return o},Bw:function(){return x},Ql:function(){return f},i4:function(){return c},ki:function(){return d}});var a=s(37821),n=s(58078),r=s(82682),l=s(87698),i=s(79739);let o=i.fC;i.ZA;let d=i.B4,c=n.forwardRef((e,t)=>{let{className:s,children:n,isLoading:o,...d}=e;return(0,a.jsxs)(i.xz,{ref:t,className:(0,l.cn)("flex h-10 w-full items-center text-xs font-light justify-between rounded-md border !border-gray-300 border-input bg-white px-3 py-2 placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...d,children:[n,(0,a.jsx)(i.JO,{asChild:!0,children:o?(0,a.jsx)(r.Z,{className:"animate-spin ease-in-out text-blue-600"}):(0,a.jsx)(y,{className:"h-4 w-4"})})]})});c.displayName=i.xz.displayName;let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i.u_,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(y,{className:"h-4 w-4 fill-gray-600"})})});u.displayName=i.u_.displayName;let m=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i.$G,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(p,{className:"h-4 w-4"})})});m.displayName=i.$G.displayName;let x=n.forwardRef((e,t)=>{let{className:s,children:n,position:r="popper",...o}=e;return(0,a.jsx)(i.h_,{children:(0,a.jsxs)(i.VY,{ref:t,className:(0,l.cn)("relative z-50 max-h-96 min-w-[8rem] text-xs overflow-hidden rounded-md border border-gray-300 bg-white text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...o,children:[(0,a.jsx)(u,{}),(0,a.jsx)(i.l_,{className:(0,l.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(m,{})]})})});x.displayName=i.VY.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i.__,{ref:t,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-xs font-light",s),...n})}).displayName=i.__.displayName;let f=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsxs)(i.ck,{ref:t,className:(0,l.cn)('relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-xs outline-none focus:bg-gray-50 focus:text-accent-foreground data-[disabled="true"]:pointer-events-none data-[disabled="true"]:opacity-50 hover:bg-gray-50',s),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.wU,{children:(0,a.jsx)(h,{})})}),(0,a.jsx)(i.eT,{children:n})]})});f.displayName=i.ck.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",s),...n})}).displayName=i.Z0.displayName;let p=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-up",...e,"data-sentry-element":"svg","data-sentry-component":"ChevronUp","data-sentry-source-file":"select.tsx",children:(0,a.jsx)("path",{d:"m18 15-6-6-6 6","data-sentry-element":"path","data-sentry-source-file":"select.tsx"})}),y=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-down",...e,"data-sentry-element":"svg","data-sentry-component":"ChevronDown","data-sentry-source-file":"select.tsx",children:(0,a.jsx)("path",{d:"m6 9 6 6 6-6","data-sentry-element":"path","data-sentry-source-file":"select.tsx"})}),h=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-check",...e,"data-sentry-element":"svg","data-sentry-component":"Check","data-sentry-source-file":"select.tsx",children:(0,a.jsx)("path",{d:"M20 6 9 17l-5-5","data-sentry-element":"path","data-sentry-source-file":"select.tsx"})})},39567:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});var a=s(37821);s(58078);var n=s(87698);function r(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",t),...s,"data-sentry-component":"Skeleton","data-sentry-source-file":"skeleton.tsx"})}},90857:function(e,t,s){"use strict";s.d(t,{r:function(){return a.r}});var a=s(93241)},36723:function(e,t,s){"use strict";s.d(t,{g:function(){return r}});var a=s(37821),n=s(87698);let r=s(58078).forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-gray-300 bg-background px-3 py-2 text-xs font-light ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});r.displayName="Textarea"}},function(e){e.O(0,[5629,3713,5751,4742,4287,4497,8637,8249,2991,2758,3584,7732,9751,7363,34,6587,4727,6935,8477,5774,9167,8280,5588,3528,7799,450,5431,3477,9467,8211,3344,3123,6504,7246,49,5866,1975,7115,7264,1744],function(){return e(e.s=64948)}),_N_E=e.O()}]);