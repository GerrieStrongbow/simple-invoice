!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="bd6de990-32a2-4f29-acf1-02ad16eca266",e._sentryDebugIdIdentifier="sentry-dbid-bd6de990-32a2-4f29-acf1-02ad16eca266")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4379],{39217:function(e,t,n){"use strict";n.d(t,{Tg:function(){return g},XI:function(){return p},hL:function(){return m},j5:function(){return u},oH:function(){return h},xA:function(){return v},zk:function(){return x}});var a=n(8232),i=n(17328),o=n(25457),s=n(62384),r=n(69379),l=n(64142),d=n(26935),c=n(81387);let u=e=>{let{subscriptionStatus:t,source:n}=e,a=!((null==t?void 0:t.active)&&t.hasPaidSub)&&!(null==t?void 0:t.hasFreeSub)&&!(null==t?void 0:t.hadPaidSubsInThePast);return(null==t?void 0:t.docsThresholdCount)===0?a:!!a&&["settings","invoices"].includes(n)},m=e=>e.subscriptionTier===l.QV.STARTER||e.subscriptionTier===l.QV.ESSENTIALS||"legacy-invoice-limit-3"===e.legacyUsageGroup,h=e=>e.subscriptionTier===l.QV.PLUS||"legacy-invoice-limit-10"===e.legacyUsageGroup,p=e=>{let{subscriptionStatus:t,source:n}=e;if(!t)return!1;if(u({subscriptionStatus:t,source:n}))return!0;if(!m(t)&&!h(t))return!1;{let{remainingDocCount:e,threshold:a}=x({subscriptionStatus:t,source:n});return e<=a}},x=e=>{let{subscriptionStatus:t,source:n}=e,a=0,i=0;return t&&(u({subscriptionStatus:t,source:n})?a=Math.max(0,d.Tv.FREE_LIMIT_LOGGED_IN-t.docsThresholdCount):m(t)?(a=Math.max(0,d.Tv.TIER_1_LIMIT-t.docsCountLastMonth),i=1):h(t)&&(a=Math.max(0,d.Tv.TIER_2_LIMIT-t.docsCountLastMonth),i=3)),{remainingDocCount:a,threshold:i}},v=e=>parseInt((0,c.$)().getItem(r.F.DOC_LIMIT_BANNER_COUNT)||"0")!==e&&((0,c.$)().setItem(r.F.DOC_LIMIT_BANNER_COUNT,"".concat(e)),!0),g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;if(!t||"monthly"===t)return e;let r=n;return r=(0,a.Z)(r,(0,i.Z)(e)),r=(0,o.Z)(r,1),(0,s.Z)([r,e])}},52708:function(e,t,n){"use strict";n.d(t,{Y:function(){return i}});var a=n(59792);async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={"x-is-app":"app.invoicesimple.com","x-is-platform":"web","x-is-version":a.env.REACT_APP_VERSION||"99999.0.0-".concat(a.env.REACT_APP_ENV),...t.headers},i=await fetch(e,{...t,headers:n});if(!i.ok)throw Error("Failed to fetch data from next");return i.json()}},98071:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var a=n(59792);let i=()=>a.env.REACT_APP_SLUG_COMMIT},27466:function(e,t,n){"use strict";var a,i,o;n.d(t,{K:function(){return i},Z:function(){return a}}),(a||(a={})).PHONE="phone",(o=i||(i={})).ACKNOWLEDGE_MODAL_SHOWN="acknowledge_modal_shown",o.COMPANY_NAME="company_name",o.IS_GUEST="is_guest",o.PAYMENT_STATUS="payment_status",o.SIGNED_UP_DATE="signed_up",o.WEB_ONBOARDING_V1_START="web_onboarding_v1_start",o.WEB_ONBOARDING_V1_DETAILS="web_onboarding_v1_details",o.WEB_ONBOARDING_V1_SIZE="web_onboarding_v1_size",o.WEB_ONBOARDING_V1_REVENUE="web_onboarding_v1_revenue",o.WEB_ONBOARDING_V1_LOGO="web_onboarding_v1_logo",o.WEB_ONBOARDING_V1_PAYMENTS="web_onboarding_v1_payments",o.WEB_ONBOARDING_V1_TEMPLATE="web_onboarding_v1_template",o.WEB_ONBOARDING_V1_FINISH="web_onboarding_v1_finish",o.IS_SUBCRIPTION_ACTIVE="is_subscription_active",o.HAS_FREE_TRIAL_SUBSCRIPTION="has_free_trial_subscription",o.EXPERIMENTS="experiments"},74379:function(e,t,n){"use strict";n.d(t,{InvoiceEditorFeature:function(){return n2}});var a=n(37821),i=n(58078),o=n(75344),s=n.n(o),r=n(51668),l=n(64142),d=n(67691),c=n(88647),u=n(57733),m=n(56302),h=n(78421),p=JSON.parse('[{"paths":["/invoice-generator"],"locale":"en-US","supportedLocales":["en-CA","en-NZ","en-AU","en-GB","en-IE"],"title":"Invoice Generator","screenshotPaths":["/images/content/en/1-invoice-generator-sample.png","/images/content/en/2-invoice-generator-guide.png","/images/content/en/3-invoice-generator-example.png"]},{"paths":["/fr/facture-en-ligne"],"locale":"fr-FR","title":"Facture En Ligne","screenshotPaths":["/images/content/fr/1-facture-en-ligne.png","/images/content/fr/2-facture-en-ligne.png","/images/content/fr/3-facture-en-ligne.png"]},{"paths":["/de/rechnung-schreiben"],"locale":"de-DE","title":"Rechnung Schreiben","screenshotPaths":["/images/content/de/1-rechnung-schreiben.png","/images/content/de/2-rechnung-schreiben.png","/images/content/de/3-rechnung-schreiben.png"]},{"paths":["/it/fatture-in-cloud"],"locale":"it-IT","title":"Fatture In Cloud","screenshotPaths":["/images/content/it/1-fatture-in-cloud.png","/images/content/it/2-fatture-in-cloud.png","/images/content/it/3-fatture-in-cloud.png"]},{"paths":["/es/factura-simplificada"],"locale":"es-ES","title":"Factura Simplificada","screenshotPaths":["/images/content/es/1-factura-simplificada.png","/images/content/es/2-factura-simplificada.png","/images/content/es/3-factura-simplificada.png"]},{"paths":["/nl/factuur-maken"],"locale":"nl-NL","title":"Factuur Maken","screenshotPaths":["/images/content/nl/1-factuur-maken.png","/images/content/nl/2-factuur-maken.png","/images/content/nl/3-factuur-maken.png"]}]');n(89832);let x=p[0],v=()=>{let{isClosable:e,title:t,body:n,type:i,isOpen:o,closeAlert:s}=(0,u.VY)();return o?(0,a.jsx)(g,{title:t,type:i,body:n,isClosable:e,onClose:s,"data-sentry-element":"StandAloneAlert","data-sentry-component":"Alert","data-sentry-source-file":"alert.tsx"}):null},g=e=>{let{title:t,type:n,body:i,isClosable:o,onClose:s}=e,r="error"===n?"text-red-800":"success"===n?"text-green-800":"warning"===n?"text-yellow-800":"";return(0,a.jsx)("div",{className:"".concat("error"===n?"bg-red-100":"success"===n?"bg-green-100":"warning"===n?"bg-yellow-100":""),role:"alert","data-sentry-component":"StandAloneAlert","data-sentry-source-file":"alert.tsx",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-2 sm:px-6 lg:px-8 flex w-full",children:[(0,a.jsxs)("div",{className:"w-full",children:[t&&(0,a.jsx)("strong",{className:"text-sm ".concat(r),children:t}),(0,a.jsx)("p",{className:"text-sm ".concat(r),children:i})]}),o&&(0,a.jsx)("button",{onClick:s,className:"btn btn-close ".concat(r," px-2"),name:"btn-close",children:(0,a.jsx)("svg",{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{d:"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"})})})]})})};function y(){let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{Promise.all([n.e(5609),n.e(8843)]).then(n.bind(n,8843)).then(n=>{let{init:a}=n;e||(a(),t(!0))})},[e]),{brazeLoaded:e}}var f=n(53138),b=n.n(f),j=n(27466),w=n(9411),I=n(79394);async function C(e){let{client:t,isUpdating:n}=e;if((null==t?void 0:t.name)&&(t.name=t.name.trim()),n&&t&&"string"==typeof t.clientRemoteId){let{clientRemoteId:e,name:n,address1:a,address2:i,address3:o,...s}=t;await (0,m.BT)(e,{...s,deleted:!1,billingName:n,billingAddress1:a,billingAddress2:i,billingAddress3:o,remoteId:e,updated:new Date().getTime()}).catch(async t=>{if(t instanceof Error&&"TypeError"===t.name&&t.message.includes("objectId")){let{data:t}=await (0,m.QF)({...s,deleted:!1,billingName:n,billingAddress1:a,billingAddress2:i,billingAddress3:o,remoteId:e,updated:new Date().getTime(),objectId:void 0});return{newObjectId:t.objectId}}throw t});return}if(t&&void 0===t.objectId){let{objectId:e,clientRemoteId:n,name:a,address1:i,address2:o,address3:s,...r}=t,{data:l}=await (0,m.QF)({...r,deleted:!1,billingName:a,billingAddress1:i,billingAddress2:o,billingAddress3:s,remoteId:n,updated:new Date().getTime(),objectId:e});return{newObjectId:l.objectId}}if(t&&"string"==typeof t.objectId){let{objectId:e,clientRemoteId:n,name:a,address1:i,address2:o,address3:s,...r}=t;await (0,m.Qu)(e,{...r,deleted:!1,billingName:a,billingAddress1:i,billingAddress2:o,billingAddress3:s,remoteId:n,updated:new Date().getTime(),objectId:e})}}var N=n(67986),D=n(98071),E=n(19395);let S=()=>(0,E.useQuery)(["account"],h.ch),A=()=>{let{data:e,isLoading:t}=S();if(t)return(0,a.jsx)("div",{children:"Loading..."});if(h.Wy.is(e))return(0,a.jsx)("div",{children:"Error..."});if(!e)return(0,a.jsx)("div",{children:"No data..."});let n=e.account.abtests?Object.keys(e.account.abtests).map(t=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:t}),(0,a.jsx)("td",{className:"px-2",children:e.account.abtests&&e.account.abtests[t]})]},t)):null;return(0,a.jsx)("div",{className:"dev-footer-body bg-white p-3 text-xs","data-sentry-component":"DevPanel","data-sentry-source-file":"dev-panel.tsx",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-lg-4 col-md-6 col-sm-6",children:(0,a.jsx)("table",{children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-bold",children:"User: "}),(0,a.jsx)("td",{className:"pl-5 text-slate-700",children:e.user.objectId})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-bold",children:"Account: "}),(0,a.jsx)("td",{className:"pl-5 text-slate-700",children:e.account.objectId})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-bold",children:"Session: "}),(0,a.jsxs)("td",{className:"pl-5 text-slate-700",children:[e.user.sessionToken," "]})]})]})})}),(0,a.jsx)("div",{className:"col-lg-2 col-md-6 col-sm-6 pb-2",children:(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{className:"font-bold",children:"Abtests: "}),(0,a.jsx)("tbody",{children:n})]})})]})})},k=()=>{let[e,t]=(0,i.useState)(!1);return"production"===(0,c.AX)()?null:(0,a.jsxs)("div",{className:"fixed bottom-0 w-full","data-sentry-component":"DevFooter","data-sentry-source-file":"dev-footer.tsx",children:[(0,a.jsx)("button",{className:"dev-footer-head",onClick:()=>t(!e),children:(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"col-lg-12 px-3",children:[(0,a.jsx)("span",{className:"app-version text-xs text-gray-400",children:(0,N.C)()}),(0,a.jsx)("span",{children:" | "}),(0,a.jsx)("span",{className:"code-version",children:(0,D.T)()})," "]})})}),e&&(0,a.jsx)(A,{})]})};var P=n(48622),L=n(14193),_=n(58824),R=n(49112),T=n(71156),M=n(7363),U=n(41418),O=n(83171),B=n(9845),F=n(60477),V=n(51648);let W=async e=>{let t=(0,U.Z)(),n=await (0,V.JU)({file:e,remoteId:t});return{uploadRes:await (0,V.p7)({file:e,presignedUrl:n.data.signedRequest}),urlRes:n}},z=e=>{var t,n;let{document:a,updateDocument:o,signatureUrl:s}=e,[r,d]=(0,i.useState)(s?{photoRemoteId:null===(t=a.signature)||void 0===t?void 0:t.resourceRemoteId,signDate:null===(n=a.signature)||void 0===n?void 0:n.signDate,photoUrl:s}:void 0),c=(0,T.useQueryClient)(),{setAlert:h}=(0,u.VY)();async function p(e){let t=await (await fetch(e)).blob();return new File([t],"",{type:t.type})}function x(){return(0,M.Z)(new Date,"yyyy-LL-dd")}async function v(e){let t=await p(e),{uploadRes:n,urlRes:i}=await W(t),s=(0,U.Z)();await (0,m.Pq)({remoteId:s,deleted:!1,url:i.data.url,md5:n.headers.etag,updated:Date.now()});let r=x();return o({...a,signature:{resourceRemoteId:s,signDate:r}}),d({photoRemoteId:s,signDate:r,photoUrl:i.data.url}),{signatureRemoteId:s,signatureUrl:i.data.url,signDate:r}}async function g(e){if(!a.signature)return;let t=await p(e),{uploadRes:n,urlRes:i}=await W(t),s=await (0,m.sU)(a.signature.resourceRemoteId);await (0,m.tU)(null==s?void 0:s.objectId,{url:i.data.url,md5:n.headers.etag,updated:Date.now()});let r=x();return o({...a,signature:{...a.signature,signDate:r}}),d({photoRemoteId:a.signature.resourceRemoteId,signDate:r,photoUrl:i.data.url}),{signatureRemoteId:a.signature.resourceRemoteId,signatureUrl:i.data.url,signDate:r}}(0,i.useEffect)(()=>{async function e(){var e;let t=null===(e=a.signature)||void 0===e?void 0:e.resourceRemoteId;if(!t)return;let n=await c.fetchQuery({queryKey:O.JN.list,queryFn:()=>(0,m.sU)(t)});(null==n?void 0:n.url)&&d({photoRemoteId:a.signature.resourceRemoteId,signDate:a.signature.signDate,photoUrl:null==n?void 0:n.url})}if(a.signature){e();return}d(void 0)},[a.signature]);let{trackInstantFormEvent:y}=(0,B.D)();async function f(e){try{let t;(t=r?await g(e):await v(e))&&y("invoice-signature-save",{documentId:a.objectId,docType:a.docType,platform:l.t4.WEB,...t})}catch(e){h({title:"Error saving signature. Please try again.",body:"Unable to save signature",type:"error",isClosable:!0}),(0,F.S)(),w.D.error("Error saving signature",e)}}return{signature:r,onSignatureSave:f,onSignatureDelete:async function(e){try{let t=await (0,m.sU)(e);await (0,m.tU)(null==t?void 0:t.objectId,{deleted:!0,updated:Date.now()}),o({...a,signature:{resourceRemoteId:"",signDate:""}}),d(void 0)}catch(e){h({title:"Error deleting signature. Please try again.",body:"Unable to deleting signature",type:"error",isClosable:!0}),(0,F.S)(),w.D.error("Error deleting signature",e)}}}};var H=n(59216),Y=n.n(H);async function G(e){let{item:t,isUpdating:n}=e;if(n&&t){let{remoteId:e,code:n,taxable:a,rate:i,description:o}=t;if(!e)return;await (0,m.T8)({remoteId:e,code:n,taxable:a,rate:i,deleted:!1,description:o,updated:new Date().getTime()});return}if(t&&void 0===t.objectId){let{objectId:e,remoteId:n,code:a,taxable:i,rate:o,description:s}=t,{data:r}=await (0,m.ru)({remoteId:n,code:a,taxable:i,rate:o,deleted:!1,description:s,updated:new Date().getTime(),objectId:e});return{newObjectId:r.objectId}}if(t&&"string"==typeof t.objectId){let{objectId:e,remoteId:n,code:a,taxable:i,rate:o,description:s}=t;await (0,m.$G)(e,{objectId:e,remoteId:n,code:a,taxable:i,rate:o,deleted:!1,description:s,updated:new Date().getTime()})}}let Z=(e,t)=>(null==e?void 0:e.code)!==t.code||(null==e?void 0:e.description)!==t.description||(null==e?void 0:e.rate)!==t.rate||(null==e?void 0:e.taxable)!==t.taxable,q=async e=>{if(!e)return[];let t=e.map(e=>e.photoRemoteId||e.resourceRemoteId);return(await (0,m.wP)(t)).data.results},X=e=>{let{data:t}=(0,E.useQuery)(O.z2.list,()=>q(e),{enabled:!!(null==e?void 0:e.length)});return null==e?void 0:e.map(e=>{let n=null==t?void 0:t.find(t=>t.remoteId===e.resourceRemoteId);return{...e,...n}})},Q=e=>{let{document:t,updateDocument:n}=e,[a,o]=(0,i.useState)(null),s=X(t.photos),r=(0,T.useQueryClient)(),{trackInstantFormEvent:d}=(0,B.D)();return{onPhotoUpload:W,onPhotoUploadError:e=>null===w.D||void 0===w.D?void 0:w.D.error("onPhotoUploadError",e),onPhotoSave:async e=>{(0,m.Pq)({...e,deleted:!1}),o(e.remoteId)},onPhotoSaveError:e=>null===w.D||void 0===w.D?void 0:w.D.error("onPhotoSaveError",e),onInvoicePhotoRemove:async e=>{var a;n({...t,photos:null===(a=t.photos)||void 0===a?void 0:a.filter(t=>t.resourceRemoteId!==e&&t.remoteId!==e)}),d("invoice-photo",{platform:l.t4.WEB,action:"delete"}),r.refetchQueries(O.z2.list)},onInvoicePhotoUpdate:async e=>{var a,i;let o=null===(a=t.photos)||void 0===a?void 0:a.find(t=>t.resourceRemoteId===e.remoteId||t.remoteId===e.remoteId),s={name:e.name||"",description:e.description||"",remoteId:null==o?void 0:o.remoteId,photoRemoteId:e.photoRemoteId||(null==o?void 0:o.photoRemoteId),resourceRemoteId:e.photoRemoteId||(null==o?void 0:o.photoRemoteId)||e.remoteId,url:e.url||(null==o?void 0:o.url)},c=null===(i=t.photos)||void 0===i?void 0:i.map(t=>t.resourceRemoteId===e.remoteId||t.photoRemoteId===e.remoteId||t.remoteId===e.remoteId?s:t);n({...t,photos:c}),d("invoice-photo",{platform:l.t4.WEB,action:"update",...!!e.name&&{description:e.name},...!!e.description&&{additionalDetails:e.description}}),r.refetchQueries(O.z2.list)},onInvoicePhotoAddAttempt:async()=>{d("invoice-photo-add-attempted")},onInvoicePhotoAdd:async e=>{if(a){let i={name:e.name||"",description:e.description||"",remoteId:(0,U.Z)(),resourceRemoteId:a,photoRemoteId:a,url:e.url};n({...t,photos:t.photos?[...t.photos,i]:[i]}),d("invoice-photo",{platform:l.t4.WEB,action:"add",number:1}),r.refetchQueries(O.z2.list)}},onPhotoUploadStart:()=>void 0,onPhotoUploadEnd:()=>void 0,photos:s}};var K=n(751),$=n(91177);n(76506);var J=n(61805),ee=n(66088),et=n(81387),en=n(11835);let ea=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,n]=i.useState(e),[a,o]=i.useState(e),s=i.useRef(null),r=e=>{if(e){o(!0),setTimeout(()=>n(!0),100);return}n(!1),setTimeout(()=>o(!1),300)};return{...(0,J.YF)({open:t,onOpenChange:r,placement:"bottom",middleware:[(0,ee.x7)({element:s})]}),open:t,visible:a,toggleOpen:r,arrowRef:s}},ei=i.createContext({client:null}),eo=e=>{let{children:t}=e,n=ea(!1);return(0,a.jsx)(ei.Provider,{value:{client:n},"data-sentry-element":"unknown","data-sentry-component":"TooltipProvider","data-sentry-source-file":"tooltip.tsx",children:t})},es=e=>{var t;return null!==(t=i.useContext(ei)[e])&&void 0!==t?t:null},er=()=>!1,el=e=>{let{name:t,email:n,toggleOpen:a}=e;if(!(er()&&t&&n&&(0,en.v)(n)))return;let i="client-tooltip-shown";"true"!==(0,et.$)().getItem(i)&&(a(!0),(0,et.$)().setItem(i,"true"))};var ed=n(77208);let ec={background:"#111827",opacity:.75,zIndex:-1},eu={background:"white"},em=e=>{let{handleAcknowledgeTerms:t}=e,o=(0,i.useRef)(null),{trackInstantFormEvent:s}=(0,B.D)();(0,i.useEffect)(()=>{s("acknowledgement-modal-shown"),Promise.all([n.e(5609),n.e(8843)]).then(n.bind(n,8843)).then(e=>{var t;let{getUser:n,init:a}=e;a(),null===(t=n())||void 0===t||t.setCustomUserAttribute(j.K.ACKNOWLEDGE_MODAL_SHOWN,!0)})},[]),(0,i.useEffect)(()=>(window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r))),(0,i.useEffect)(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}));let r=async e=>{[13,27].includes(e.keyCode)&&t(e)},l=e=>{var n;null!=o&&null!==(n=o.current)&&void 0!==n&&n.contains(e.target)||t(e)};return(0,a.jsx)("div",{id:"is-acknowledgement-modal",className:"fixed z-50 inset-0 overflow-y-hidden","aria-label":"Terms and Acknowledgement",role:"dialog","aria-modal":"true","data-sentry-component":"Modal","data-sentry-source-file":"modal.tsx",children:(0,a.jsxs)("div",{className:"flex items-center justify-center pt-8 px-4 sm:px-12 pb-20 text-center sm:block sm:p-0",children:[(0,a.jsx)("div",{style:ec,className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity","aria-hidden":"true"}),(0,a.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,a.jsxs)("form",{onSubmit:t,onKeyPress:r,ref:o,style:eu,className:"inline-block align-bottom bg-white rounded-lg text-left overflow-y-visible overflow-x-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:w-full sm:max-w-xl min-h-24",children:[(0,a.jsx)("div",{className:"bg-white px-6 pt-6 pb-3",children:(0,a.jsx)("div",{className:"sm:flex sm:items-start",children:(0,a.jsx)("div",{className:"mt-3 text-left sm:mt-0 sm:text-left",children:(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm font-normal text-gray-500",children:e.dictionary.title})})})})}),(0,a.jsx)("div",{className:"bg-white px-6 pb-3",children:(0,a.jsx)("div",{className:"sm:flex sm:items-start",children:(0,a.jsx)("div",{className:"text-left sm:mt-0 sm:text-left text-gray-500 text-sm",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:e.dictionary.description}})})})}),(0,a.jsx)("div",{className:"pb-6 px-4 sm:px-8 align-right w-full flex justify-end",children:(0,a.jsx)("button",{type:"submit",style:{background:"#FF5721",color:"white"},className:"px-5 py-3 font-normal text-sm rounded-md w-auto",children:e.dictionary.buttonLabel})})]})]})})},eh=e=>{let{currentLocale:t,termsAcknowledged:n,dictionary:o}=e,s=!!n,[r,l]=(0,i.useState)(!s),d=async e=>{e.preventDefault(),(0,ed.d8)("hasAcknowledgedTerms",!0),l(!1)};return s||!r?null:(0,a.jsx)(em,{handleAcknowledgeTerms:d,currentLocale:t,dictionary:o,"data-sentry-element":"Modal","data-sentry-component":"TermsAcknowledgement","data-sentry-source-file":"terms-acknowledgement.tsx"})};n(82969);var ep=n(81071),ex=n(83257),ev=n(42236),eg=n(27248),ey=n(33461),ef=n(89113),eb=n(37296),ej=n(5230),ew=n(88921),eI=n(78085),eC=n(71450),eN=n(18547),eD=n(96995),eE=n(60315),eS=n(57244),eA=n(30393),ek=n(28782),eP=n(46118),eL=n(70517);let e_=(e,t)=>!!t&&!!t[e]&&t[e]>0,eR=e=>e_("fp-po-number",e);var eT=n(45551),eM=n(50753);function eU(e){let{id:t,label:n,disabled:o,value:s,onChange:r,addressDictionary:l}=e,d=void 0!==s.address1||s.address2||s.address3;return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(eM.I,{type:"text",id:"".concat(t,"-address1"),disabled:o,label:n,labelStyle:{minWidth:"5rem"},placeholder:l.address1Placeholder,value:s.address1||"",onChange:e=>{r({...s,address1:e.target.value})},"data-sentry-element":"Input","data-sentry-source-file":"address.tsx"}),d&&(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(eM.I,{type:"text",id:"".concat(t,"-address2"),disabled:o,label:"\xa0",labelStyle:{minWidth:"5rem"},placeholder:l.address2Placeholder,value:s.address2||"",onChange:e=>r({...s,address2:e.target.value})}),(0,a.jsx)(eM.I,{type:"text",id:"".concat(t,"-address3"),disabled:o,label:"\xa0",labelStyle:{minWidth:"5rem"},placeholder:l.address3Placeholder,value:s.address3||"",onChange:e=>r({...s,address3:e.target.value})})]})]})}var eO=n(69327);let eB=e=>{let t=null==e?void 0:e.toLowerCase();if(!(null==t?void 0:t.startsWith("en")))return null;switch(t){case"en-au":return{label:"ABN",placeholder:"53 004 085 616"};case"en-ca":return{label:"GST #",placeholder:"123456789 RT"};case"en-gb":case"en-ie":return{label:"VAT #",placeholder:"123456789"};case"en-nz":return{label:"GST #",placeholder:"108-765-432"};default:return{label:"Business Number",placeholder:"123-45-6789"}}};var eF=n(23426),eV=n.n(eF);n(69835);var eW=n(99171),ez=n.n(eW);function eH(e,t){let[n,a]=(0,i.useState)(e);return(0,i.useEffect)(()=>{let n=ez()(()=>{a(e)},t);return n(),()=>{n.cancel()}},[e,t]),n}var eY=n(4878),eG=n(52708);let eZ=(0,eY.Ue)((e,t)=>({limitMax:10,startSuggestionAt:2,endSuggestionAt:15,clients:[],name:null,setName:t=>{e({name:t})},reset:()=>{e({name:null}),e({clients:[]})},startAutoLoad:async()=>{let{name:n,startSuggestionAt:a,endSuggestionAt:i}=t();n&&n.length>=a&&n.length<=i&&e({clients:await eq(n)})}})),eq=async e=>{let t=eX(),n=new URLSearchParams({billingName:e});return(await (0,eG.Y)("/api/autocomplete/client?".concat(n),{headers:{"X-Parse-Session-Token":t},cache:"no-cache"})).filter(e=>!!e.billingName).map(e=>({remoteId:e.remoteId,name:e.billingName,email:e.email,secondaryEmail:e.secondaryEmail,phone:e.phone,mobile:e.mobile,fax:e.fax,address1:e.billingAddress1,address2:e.billingAddress2,address3:e.billingAddress3}))},eX=()=>{var e,t;let n=null===(t=document)||void 0===t?void 0:null===(e=t.cookie)||void 0===e?void 0:e.split("; "),a=n&&n.find(e=>e.trim().startsWith("sessionToken=")),i=decodeURIComponent((null==a?void 0:a.split("=")[1])||"");if(!i)throw Error("Missing session token (client)");return i};var eQ=n(59441);let eK=e=>{let{onSelect:t,value:n,onChange:o,disabled:s,contactDictionary:r,onReset:l}=e,{reset:d,setName:c,clients:u,startAutoLoad:m,name:h}=eZ(),p=eH(h,500);return(0,i.useEffect)(()=>{setTimeout(()=>{m()},500)},[p]),(0,a.jsxs)("div",{className:/android|webos|iphone|ipad|ipod|blackberry|mobile|windows phone/i.test(window.navigator.userAgent)?"w-full relative":"flex items-center w-full my-2 relative","data-sentry-component":"ClientAutosuggest","data-sentry-source-file":"client-autosuggest.tsx",children:[(0,a.jsx)("label",{htmlFor:"client-name",className:"hidden sm:block text-xs font-medium leading-5 text-gray-700",style:{minWidth:"5rem"},children:r.nameLabel}),(0,a.jsx)(eV(),{inputProps:{id:"client-name",disabled:s,value:n,onChange:o,placeholder:r.namePlaceholder},suggestions:u,getSuggestionValue:e=>e.name,onSuggestionSelected:(e,n)=>{t(n.suggestion)},onSuggestionsFetchRequested:e=>{let{value:t}=e;c(t)},onSuggestionsClearRequested:()=>{d()},renderSuggestion:e=>(0,a.jsxs)("div",{className:"invoice-suggestion-option clearfix","data-sentry-component":"renderSuggestion","data-sentry-source-file":"client-autosuggest.tsx",children:[(0,a.jsx)("span",{className:"invoice-suggestion-name",children:e.name}),(0,a.jsx)("span",{className:"invoice-suggestion-meta",children:e.email})]}),"data-sentry-element":"Autosuggest","data-sentry-source-file":"client-autosuggest.tsx"}),n&&(0,a.jsx)("button",{className:"absolute right-[2px] py-3 px-3 z-1 bg-gray-200 rounded",onClick:()=>{d(),l()},children:(0,a.jsx)(eQ.b,{})})]})};function e$(e){return"company"in e}function eJ(e){let{id:t,header:n,value:o,disabled:s,onChange:r,onBlur:l,isFeatureEnabled:d,contactDictionary:c,onClientChange:u}=e,{email:m,phone:h,mobile:p,fax:x}=o,v=e$(o)?"company":"name",{setPrimaryClientEmail:g,setPrimaryCompanyEmail:y}=(0,eT.K)();return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)("div",{className:"invoice-contact-header text-xl text-gray-600 font-medium",children:n}),u?(0,a.jsx)(eK,{contactDictionary:c,onSelect:function(e){var t;u({...e,clientRemoteId:e.remoteId,isUpdating:!0}),g(null!==(t=e.email)&&void 0!==t?t:"")},onChange:function(e){let t=e.target.value;u({...o||{},name:t}),g(t)},onReset:function(){g(""),u({address1:"",address2:"",address3:"",email:"",name:"",phone:"",mobile:"",fax:"",remoteId:"",clientRemoteId:""})},value:o.name||"",disabled:!!s}):(0,a.jsx)(eM.I,{id:"".concat(t,"-name"),disabled:s,label:c.nameLabel,labelStyle:{minWidth:"5rem"},placeholder:c.namePlaceholder,value:e$(o)?o.company:o.name,onChange:e=>r({...o,[v]:e.target.value}),onBlur:e=>l&&l({...o,[v]:e.target.value})}),(0,a.jsx)(eO.U,{name:"".concat(t,"-email"),label:c.emailLabel,placeholder:c.emailPlaceholder,value:m,disabled:s,onChange:e=>{""===e.target.value&&r({...o,email:void 0}),e$(o)?y(e.target.value):g(e.target.value)},onValidEmail:e=>r({...o,email:e}),"data-sentry-element":"EmailInput","data-sentry-source-file":"contact.tsx"},"".concat(t,"-email")),(0,a.jsx)(eU,{id:"".concat(t,"-address"),label:c.address1Label,disabled:s,value:o,onChange:e=>r({...o,...e}),addressDictionary:c,"data-sentry-element":"Address","data-sentry-source-file":"contact.tsx"}),(0,a.jsx)(eM.I,{id:"".concat(t,"-phone"),label:c.phoneLabel,labelStyle:{minWidth:"5rem"},placeholder:c.phonePlaceholder,value:h||"",disabled:s,maxLength:200,onChange:e=>r({...o,phone:e.target.value}),onBlur:e=>l&&l({...o,phone:e.target.value}),"data-sentry-element":"Input","data-sentry-source-file":"contact.tsx"}),"client"===t&&d&&d("mobile-fax-client-fields")&&(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(eM.I,{id:"".concat(t,"-mobile"),label:c.mobileLabel,labelStyle:{minWidth:"5rem"},placeholder:c.mobilePlaceholder,value:p||"",disabled:s,maxLength:200,onChange:e=>r({...o,mobile:e.target.value})}),(0,a.jsx)(eM.I,{id:"".concat(t,"-fax"),label:c.faxLabel,labelStyle:{minWidth:"5rem"},placeholder:c.faxPlaceholder,value:x||"",disabled:s,maxLength:200,onChange:e=>r({...o,fax:e.target.value})})]})]})}function e0(e){var t;let{id:n,header:o,value:s,disabled:r,onChange:l,onBlur:d,contactDictionary:c,locale:u}=e,{businessNumber:m,website:h,name:p}=s,[x,v]=(0,i.useState)(!!p||!!h),g=null!==(t=eB(u))&&void 0!==t?t:{label:c.businessNumberLabel,placeholder:c.businessNumberPlaceholder};return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(eJ,{id:n,header:o,value:s,disabled:r,onChange:e=>l(e),onBlur:e=>d&&d(e),contactDictionary:c,"data-sentry-element":"Contact","data-sentry-source-file":"contact.tsx"}),(0,a.jsx)(eM.I,{id:"".concat(n,"-business-number"),label:g.label,labelStyle:{minWidth:"5rem"},placeholder:g.placeholder,value:m,onChange:e=>l({...s,businessNumber:e.target.value}),disabled:r,"data-sentry-element":"Input","data-sentry-source-file":"contact.tsx"}),(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)("div",{className:"input-with-label-wrapper",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("label",{style:{minWidth:"5rem"},children:"\xa0"}),(0,a.jsx)("div",{className:"content",children:(0,a.jsx)("button",{"aria-label":"Toggle additional business details",className:"toggle-additional-details text-xs",onClick:()=>v(!x),style:{color:"#2e77bb",textDecoration:"underline",cursor:"pointer"},children:x?c.hideAdditionalBusinessDetails:c.showAdditionalBusinessDetails})})]})}),x&&(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(eM.I,{id:"".concat(n,"-website"),label:c.websiteLabel,labelStyle:{minWidth:"5rem"},placeholder:"https://example-website.com",value:h,disabled:r,maxLength:200,onChange:e=>l({...s,website:e.target.value})}),(0,a.jsx)(eM.I,{id:"".concat(n,"-owner"),label:c.businessOwnerLabel,labelStyle:{minWidth:"5rem"},placeholder:c.businessOwnerPlaceholder,value:p,disabled:r,maxLength:200,onChange:e=>l({...s,name:e.target.value,businessName:e.target.value,ownerName:e.target.value})})]})]})]})}var e1=n(17382),e2=n.n(e1);function e9(e){let t=new Date,o=t.getFullYear(),s=t.getMonth(),r=t.getDate(),l=new Date(o+20,s,r+1),d=new Date(o-20,s,r+1);(0,i.useEffect)(()=>{let t={"fr-FR":async()=>await n.e(1118).then(n.bind(n,31118)).then(e=>e.default),"de-DE":async()=>await n.e(1743).then(n.bind(n,71743)).then(e=>e.default),"it-IT":async()=>await n.e(8293).then(n.bind(n,68293)).then(e=>e.default),"es-ES":async()=>await n.e(7833).then(n.bind(n,27833)).then(e=>e.default),"nl-NL":async()=>await n.e(408).then(n.bind(n,70408)).then(e=>e.default)};(async e=>{t[e]&&e&&(0,e1.registerLocale)(e.split("-")[0],await t[e]())})(e.locale)},[e.locale]);let c=e.mobile?"date-picker-wrapper mt-1 mb-2":"date-picker-wrapper my-2 flex items-center";return(0,a.jsxs)("div",{className:c,"data-sentry-component":"DatePicker","data-sentry-source-file":"date-picker.tsx",children:[!!e.label&&(0,a.jsx)("label",{className:"text-xs leading-5 text-gray-700",htmlFor:e.id,style:{minWidth:e.mobile?void 0:"5rem"},children:e.label}),(0,a.jsx)(e2(),{className:"form-input block w-full rounded border border-gray-400 py-2 px-5 text-xs leading-5 focus:text-gray-600".concat(e.disabled?" cursor-not-allowed text-gray-400":""),selected:e.selected,id:e.id,name:e.name,dateFormat:["PP","yyyy-MM-dd","yyyy/MM/dd","dd-MM-yyyy","dd/MM/yyyy","MM-dd-yyyy","dd-MM-yyyy","MMM dd, yyyy","MMM dd yyyy","MMMM dd, yyyy","MMMM dd yyyy","dd MMMM yyyy","dd MMM yyyy"],locale:e.locale?e.locale.split("-")[0]:"en",todayButton:e.dictionary.todayMessage,disabled:e.disabled,onChange:t=>null===t?void 0:t>d&&t<l?e.onChange(t):e.onChange(new Date),"data-sentry-element":"DatePickerWrapper","data-sentry-source-file":"date-picker.tsx"})]})}function e4(e){let{accentColor:t}=e;return(0,a.jsx)("div",{className:"invoice-detail-accent",style:{height:"4px",backgroundColor:t},"data-sentry-component":"InvoiceAccent","data-sentry-source-file":"invoice-accent.tsx"})}n(27928);var e5=n(81220),e6=n(87698),e8=n(72574),e3=n(64144),e7=n(80331),te=n(36543);let tt={REFINE:"refine",REWRITE:"rewrite"},tn="line-item",ta=(0,i.createContext)(null),ti=()=>{let e=(0,i.useContext)(ta);if(!e)throw Error("This component must be used within AiRewriteControlsProvider");return e},to=e=>{let{children:t,value:n}=e;return(0,a.jsx)(ta.Provider,{value:n,"data-sentry-element":"unknown","data-sentry-component":"AiRewriteControlsProvider","data-sentry-source-file":"ai-rewrite-controls-provider.tsx",children:t})};var ts=n(73378),tr=n(66962);let tl=()=>{let{isLoading:e,displayMode:t,onCancel:n}=ti(),{ft:i}=(0,ev.Y)();return(0,a.jsx)(ts.z,{disabled:e,variant:"white",onClick:n,className:(0,e6.cn)("text-xs border-brand-gray-2 px-2 w-full",{"md:w-auto":"desktop"===t}),"data-sentry-element":"Button","data-sentry-component":"CancelButton","data-sentry-source-file":"cancel-button.tsx",children:(0,a.jsxs)("div",{className:"flex gap-1 justify-center",children:[(0,a.jsx)(tr.bM,{fill:"#555",width:"15",height:"15","data-sentry-element":"IconClose","data-sentry-source-file":"cancel-button.tsx"}),(0,a.jsx)("span",{className:"text-xs",children:i({id:"ai.rewrite.controls.button.cancel"})})]})})},td=e=>(0,a.jsxs)("svg",{width:"12",height:"11",viewBox:"0 0 12 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"group",...e,"data-sentry-element":"svg","data-sentry-component":"IconImproveAi","data-sentry-source-file":"icon-improve-ai.tsx",children:[(0,a.jsx)("path",{d:"M6.99941 2.99922L8.49941 4.49922M2.49941 2.49922V4.49922M9.49941 6.49922V8.49922M4.99941 0.499222V1.49922M3.49941 3.49922H1.49941M10.4994 7.49922H8.49941M5.49941 0.999222H4.49941M10.8194 1.31922L10.1794 0.679222C10.1232 0.62238 10.0562 0.577257 9.98238 0.546461C9.90857 0.515666 9.82939 0.49981 9.74941 0.49981C9.66944 0.49981 9.59026 0.515666 9.51645 0.546461C9.44264 0.577257 9.37567 0.62238 9.31941 0.679222L1.17941 8.81922C1.12257 8.87548 1.07745 8.94245 1.04665 9.01626C1.01586 9.09007 1 9.16925 1 9.24922C1 9.3292 1.01586 9.40838 1.04665 9.48219C1.07745 9.55599 1.12257 9.62296 1.17941 9.67922L1.81941 10.3192C1.87532 10.3767 1.94218 10.4223 2.01603 10.4535C2.08989 10.4847 2.16924 10.5008 2.24941 10.5008C2.32958 10.5008 2.40893 10.4847 2.48279 10.4535C2.55664 10.4223 2.6235 10.3767 2.67941 10.3192L10.8194 2.17922C10.8769 2.12331 10.9225 2.05645 10.9537 1.9826C10.9849 1.90874 11.001 1.82939 11.001 1.74922C11.001 1.66905 10.9849 1.5897 10.9537 1.51584C10.9225 1.44199 10.8769 1.37513 10.8194 1.31922Z",stroke:"url(#paint0_linear_149_2018)",className:"group-hover:opacity-0 transition-opacity duration-300 ease-in-out",strokeLinecap:"round",strokeLinejoin:"round","data-sentry-element":"path","data-sentry-source-file":"icon-improve-ai.tsx"}),(0,a.jsx)("path",{d:"M6.99941 2.99922L8.49941 4.49922M2.49941 2.49922V4.49922M9.49941 6.49922V8.49922M4.99941 0.499222V1.49922M3.49941 3.49922H1.49941M10.4994 7.49922H8.49941M5.49941 0.999222H4.49941M10.8194 1.31922L10.1794 0.679222C10.1232 0.62238 10.0562 0.577257 9.98238 0.546461C9.90857 0.515666 9.82939 0.49981 9.74941 0.49981C9.66944 0.49981 9.59026 0.515666 9.51645 0.546461C9.44264 0.577257 9.37567 0.62238 9.31941 0.679222L1.17941 8.81922C1.12257 8.87548 1.07745 8.94245 1.04665 9.01626C1.01586 9.09007 1 9.16925 1 9.24922C1 9.3292 1.01586 9.40838 1.04665 9.48219C1.07745 9.55599 1.12257 9.62296 1.17941 9.67922L1.81941 10.3192C1.87532 10.3767 1.94218 10.4223 2.01603 10.4535C2.08989 10.4847 2.16924 10.5008 2.24941 10.5008C2.32958 10.5008 2.40893 10.4847 2.48279 10.4535C2.55664 10.4223 2.6235 10.3767 2.67941 10.3192L10.8194 2.17922C10.8769 2.12331 10.9225 2.05645 10.9537 1.9826C10.9849 1.90874 11.001 1.82939 11.001 1.74922C11.001 1.66905 10.9849 1.5897 10.9537 1.51584C10.9225 1.44199 10.8769 1.37513 10.8194 1.31922Z",stroke:"white",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-in-out",strokeLinecap:"round",strokeLinejoin:"round","data-sentry-element":"path","data-sentry-source-file":"icon-improve-ai.tsx"}),(0,a.jsx)("defs",{"data-sentry-element":"defs","data-sentry-source-file":"icon-improve-ai.tsx",children:(0,a.jsxs)("linearGradient",{id:"paint0_linear_149_2018",x1:"1",y1:"5.5",x2:"11.001",y2:"5.5",gradientUnits:"userSpaceOnUse","data-sentry-element":"linearGradient","data-sentry-source-file":"icon-improve-ai.tsx",children:[(0,a.jsx)("stop",{stopColor:"#FB923C","data-sentry-element":"stop","data-sentry-source-file":"icon-improve-ai.tsx"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#FF5721","data-sentry-element":"stop","data-sentry-source-file":"icon-improve-ai.tsx"})]})})]}),tc=e=>{let{disabled:t=!1,isLoading:n,className:i="",onChange:o}=e,{ft:s,fta:r}=(0,ev.Y)(),l=(0,e6.cn)("mt-2 px-4 py-2 rounded-md border text-xs font-normal transition-all duration-300 ease-in-out","border-orange-is hover:border-orange-is-2 bg-gradient-to-r from-orange-is to-orange-is-2","text-label-grey group-hover:text-white group cursor-pointer",{"cursor-not-allowed opacity-60 border-gray-300":n},i),d=(0,e6.cn)("mt-2 rounded-md border absolute inset-0 bg-white opacity-100 group-hover:opacity-0 z-0","transition-all duration-300 ease-in-out border-orange-is hover:border-orange-is-2",{"cursor-not-allowed":t},{"cursor-not-allowed opacity-60 border-gray-300":n});if(n)return(0,a.jsx)("div",{className:"mt-2 px-3 py-2 text-xs font-normal text-gray-500 bg-white border border-gray-300 rounded-md cursor-not-allowed w-full md:w-auto",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 justify-center text-xs",children:[(0,a.jsx)(tr.vM,{color:"black",style:{width:"16px",height:"16px"}}),(0,a.jsxs)("span",{children:[s({id:"ai.rewrite.cta.writing"}),"..."]})]})});let c=(0,e6.cn)("relative text-xs w-full md:w-auto",{"opacity-50 cursor-not-allowed":t,"hover:text-white group cursor-pointer":!t});return(0,a.jsxs)("div",{"data-testid":"improve-with-ai-button",className:c,onClick:t?void 0:o,"data-sentry-component":"ImproveWithAiButton","data-sentry-source-file":"improve-with-ai-button.tsx",children:[!t&&(0,a.jsx)("div",{className:d}),(0,a.jsx)("div",{className:t?"mt-2 px-4 py-2 bg-white border border-orange-is-2 rounded-md cursor-not-allowed":l,children:(0,a.jsxs)("div",{className:"flex items-center gap-2 relative z-1 justify-center",children:[(0,a.jsx)(td,{"data-sentry-element":"IconImproveAi","data-sentry-source-file":"improve-with-ai-button.tsx"}),(0,a.jsx)("span",{children:r({id:"ai.rewrite.cta.improve"})})]})})]})},tu=i.forwardRef((e,t)=>(0,a.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e,children:(0,a.jsx)("path",{d:"M2 2.5V5H2.29076M9.96905 6C9.723 4.02684 8.03981 2.5 6 2.5C4.32131 2.5 2.88415 3.53408 2.29076 5M2.29076 5H4.5M10 10.5V8H9.70924M9.70924 8C9.11585 9.46592 7.67869 10.5 6 10.5C3.96019 10.5 2.277 8.97316 2.03095 7M9.70924 8H7.5",stroke:"#394150",strokeLinecap:"round",strokeLinejoin:"round"})}));tu.displayName="IconRetry";let tm=()=>{let{isLoading:e,refineDisabled:t,displayMode:n,onRewrite:i}=ti(),{ft:o}=(0,ev.Y)();return(0,a.jsx)(ts.z,{disabled:e||t,variant:"white",onClick:e?void 0:i,className:(0,e6.cn)("text-xs border-brand-gray-2 px-2 w-full",{"md:w-auto":"desktop"===n}),"data-sentry-element":"Button","data-sentry-component":"RefineButton","data-sentry-source-file":"refine-button.tsx",children:(0,a.jsx)("div",{className:"flex gap-2 justify-center",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tr.vM,{color:"black",style:{width:"16px",height:"16px"}}),(0,a.jsxs)("span",{className:"text-xs",children:[o({id:"ai.rewrite.controls.button.refining"}),"..."]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tu,{}),(0,a.jsx)("span",{className:"text-xs",children:o({id:"ai.rewrite.controls.button.refine"})})]})})})},th=()=>{let{isLoading:e,generatedInput:t,displayMode:n,onAccept:i}=ti(),{ft:o}=(0,ev.Y)();return(0,a.jsx)(ts.z,{disabled:e,variant:"default",onClick:()=>i(t),className:(0,e6.cn)("text-xs border-brand-gray-2 w-full",{"md:w-auto":"desktop"===n}),"data-sentry-element":"Button","data-sentry-component":"SaveButton","data-sentry-source-file":"save-button.tsx",children:(0,a.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,a.jsx)(tr.f0,{width:"16",height:"16","data-sentry-element":"IconCheck2","data-sentry-source-file":"save-button.tsx"}),(0,a.jsx)("span",{className:"text-xs",children:o({id:"ai.rewrite.controls.button.save"})})]})})},tp=e=>{let t={isLoading:e.isLoading,displayMode:"desktop",generatedInput:e.generatedInput,refineDisabled:e.refineDisabled,onRewrite:e.onRewrite,onAccept:e.onAccept,onCancel:e.onCancel};return(0,a.jsx)(to,{value:t,"data-sentry-element":"AiRewriteControlsProvider","data-sentry-component":"AiRewriteControls","data-sentry-source-file":"ai-rewrite-controls.tsx",children:(0,a.jsx)(a.Fragment,{children:e.generatedInput?(0,a.jsxs)("div",{className:"flex flex-col gap-2 mt-2 w-full md:flex-row md:items-center md:justify-between",children:[(0,a.jsx)("div",{className:"flex items-center w-full md:w-auto",children:(0,a.jsx)(tm,{})}),(0,a.jsxs)("div",{className:"flex items-center gap-1 w-full md:w-auto",children:[(0,a.jsx)(th,{}),(0,a.jsx)(tl,{})]})]}):(0,a.jsx)("div",{className:"flex items-center gap-2 w-full md:w-auto",children:(0,a.jsx)(tc,{onChange:e.onRewrite,disabled:e.disabled,isLoading:e.isLoading})})})})};var tx=n(9),tv=n(13590),tg=n(77740);function ty(e){var t;let{targetType:n,currentAiOutput:a,inputValue:i,items:o,businessDetails:s,onSuccess:r,onSetRefineDisabled:d,onClearAiOutput:c}=e,{user:u}=(0,B.D)(),{f:m}=(0,ev.Y)(),{mutate:h,isLoading:p}=(0,tx.useMutation)((t={processingMode:a?tt.REFINE:tt.REWRITE,targetType:n,input:i,items:o,businessDetails:s,user:u},{mutationFn:async()=>{if(!t.input)throw Error("Please add text input to use AI rewrite");let e={processingMode:t.processingMode,targetType:t.targetType,inputText:t.input,metaData:{requester:"IS",lineItems:t.items,businessDetails:t.businessDetails}};return await (0,e3.KF)("".concat(te.F,"/ai-toolkit/rewrite/text"),{method:"POST",cache:"no-cache",headers:{...await (0,e7.A)({user:t.user}),"Content-Type":l.bT.APP_JSON},body:JSON.stringify(e)})},onSuccess:e=>{if(e.output===a){d(!0),tv.Am.warning(m({id:"ai.refine.toast.error.currentInput"}));return}r(e.output)},onError:e=>{if(e instanceof tg.RateLimitError){tv.Am.error(m({id:"error.429.title"}));return}tv.Am.error(m({id:"error.errorHasOccurred"})),c()}}));return{mutate:h,isLoading:p}}let tf=async(e,t)=>{await Promise.all([n.e(5609),n.e(8843)]).then(n.bind(n,8843)).then(n=>{let{logCustomEvent:a}=n;a(e,t)}).catch(e=>{w.D.error("Error logging Braze client event",e)})};function tb(e){let[t,n]=(0,i.useState)(""),[o,s]=(0,i.useState)(!1),r=(0,i.useRef)(0),{trackInstantFormEvent:l}=(0,B.D)(),d=(0,e8.s)("ai_notes_rewrite").enabled,c=(0,i.useMemo)(()=>e.items.reduce((e,t)=>((t.code||t.description)&&e.push({code:t.code,description:t.description}),e),[]),[e.items]),u=t||e.value||"",{mutate:m,isLoading:h}=ty({targetType:"note",currentAiOutput:t,inputValue:u,items:c,businessDetails:{...e.company,remoteId:""},onSuccess:n,onSetRefineDisabled:s,onClearAiOutput:()=>n("")}),p=e.disabled||h;return(0,a.jsxs)("div",{className:"invoice-detail-notes mt-3","data-sentry-component":"InvoiceNotes","data-sentry-source-file":"invoice-notes.tsx",children:[(0,a.jsx)("label",{htmlFor:e.id,className:"block text-sm font-medium leading-5 text-gray-700 mb-2",children:e.dictionary.notesTitle}),(0,a.jsx)(e5.Z,{className:(0,e6.cn)("invoice-notes form-input block text-xs w-full resize-none rounded border border-gray-400 py-2 px-5 leading-5 focus:text-gray-600",{"cursor-not-allowed text-gray-400":p}),id:e.id,minRows:e.minRows,maxRows:e.maxRows,placeholder:e.dictionary.notesPlaceholder,value:u,disabled:p,onChange:a=>{if(t){o&&s(!1),n(a.target.value);return}e.onChange(a.target.value)},"data-sentry-element":"TextArea","data-sentry-source-file":"invoice-notes.tsx"}),(0,a.jsx)("div",{className:"flex justify-between w-full md:w-auto",children:d&&(0,a.jsx)(tp,{isLoading:h,disabled:!e.value,refineDisabled:o,generatedInput:t,onRewrite:()=>{let n=t?"refine":"rewrite",a=r.current+1,i={feature:"ai-rewrite-note",action:n,refineCount:"refine"===n?a:r.current,invoiceRemoteId:e.invoiceRemoteId,text:""};tf("web-button-click",i),l("web-button-click",i),"refine"===n&&(r.current=a),s(!1),m()},onAccept:()=>{let a={feature:"ai-rewrite-note",action:"accept",refineCount:r.current,invoiceRemoteId:e.invoiceRemoteId,text:t};tf("web-button-click",a),l("web-button-click",a),e.onChange(t),n(""),r.current=0},onCancel:()=>{let t={feature:"ai-rewrite-note",action:"cancel",refineCount:r.current,invoiceRemoteId:e.invoiceRemoteId,text:""};tf("web-button-click",t),l("web-button-click",t),n(""),r.current=0}})})]})}var tj=n(84974),tw=n(27723),tI=n(35914);function tC(e){let[t,n]=(0,i.useState)(e.value);(0,i.useEffect)(()=>{n(e.value)},[e.value]);let o=t&&t.length>0,s=eL.ValidInvoiceNumber.is(t),r=s?(0,a.jsx)(tw.E,{}):(0,a.jsx)(tI.K,{}),l=o?s?void 0:e.dictionary.invalidInputMessage:e.dictionary.emptyInputMessage;return(0,a.jsx)(tj.I,{type:"text",mobile:e.mobile,id:e.name,label:e.label,labelStyle:{minWidth:e.mobile?void 0:"5rem"},value:t,disabled:e.disabled,placeholder:e.dictionary.placeholder,errorText:l,onFocus:t=>{e.onFocus&&e.onFocus(t)},onBlur:t=>{e.onBlur&&e.onBlur(t)},onChange:t=>{n(t.target.value),e.onChange&&e.onChange(t),eL.ValidInvoiceNumber.is(t.target.value)&&e.onValidInvoiceNumber(t.target.value)},addonAfter:r,maxLength:16,"data-sentry-element":"Input","data-sentry-component":"InvoiceNumberInput","data-sentry-source-file":"invoice-number-input.tsx"})}var tN=n(35588),tD=n(26935),tE=n(99170);n(39538);var tS=n(23835),tA=n(61692),tk=n(39067);let tP=e=>{let{className:t}=e;return(0,a.jsx)("svg",{width:"24",height:"18",viewBox:"0 0 24 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,"data-sentry-element":"svg","data-sentry-component":"PortraitIcon","data-sentry-source-file":"portrait-icon.tsx",children:(0,a.jsx)("path",{d:"M21.75 18H2.25C1.00734 18 0 16.9927 0 15.75V2.25C0 1.00734 1.00734 0 2.25 0H21.75C22.9927 0 24 1.00734 24 2.25V15.75C24 16.9927 22.9927 18 21.75 18ZM5.25 2.625C3.80025 2.625 2.625 3.80025 2.625 5.25C2.625 6.69975 3.80025 7.875 5.25 7.875C6.69975 7.875 7.875 6.69975 7.875 5.25C7.875 3.80025 6.69975 2.625 5.25 2.625ZM3 15H21V9.75L16.8977 5.64773C16.6781 5.42808 16.3219 5.42808 16.1022 5.64773L9.75 12L7.14773 9.39773C6.92808 9.17808 6.57192 9.17808 6.35222 9.39773L3 12.75V15Z",fill:"#454545","data-sentry-element":"path","data-sentry-source-file":"portrait-icon.tsx"})})};function tL(e){let{dictionary:t,dropzoneDictionary:n}=e,i=(0,tS._)(),{user:o,isFirstTimer:s}=(0,B.D)(),r=s||(0,tA.N)({user:o,feature:tD.eS.INVOICE_PHOTOS}),d={[l.bT.IMG_JPEG]:[".jpg",".jpeg"],[l.bT.IMG_PNG]:[".png"],[l.bT.IMG_WEBP]:[".webp"]};return e.isUploading?(0,a.jsx)("li",{"data-testid":"loader",className:"invoice-photo-add",id:"tailwind",children:(0,a.jsxs)("button",{disabled:!0,className:"relative overflow-hidden cursor-not-allowed",children:[(0,a.jsx)(tE.T,{color:"black",className:"w-10 h-10"}),(0,a.jsx)("div",{className:"z-1 animate-pulse absolute h-full w-full bg-gray-100 opacity-80 w-full top-0 bottom-0 left-0 right-0"})]})}):(0,a.jsx)("li",{"data-testid":"add-photo-button",className:"invoice-photo-add","data-sentry-component":"AddInvoicePhoto","data-sentry-source-file":"add-invoice-photo.tsx",children:(0,a.jsx)(tN.ZP,{onDrop:(t,a,o)=>{if(!r){i.push("/subscription?feature=".concat(tD.eS.INVOICE_PHOTOS));return}if(e.onInvoicePhotoAddAttempt(),a.length>0){e.onInvoicePhotoError(function(t){let{file:a,errors:i}=t[0],o=i.map(e=>e.code);return o.includes("file-too-large")?(e.trackEvent("validation-error",{action:"upload-photo","file-extension":a.type,size:a.size,type:"invoice-photo"}),n.maxFileSizeExceededError):o.includes("too-many-files")?n.tooManyFilesError:o.includes("file-invalid-type")?n.fileTypeNotSupportedError:n.photoError}(a));return}t&&t[0]?e.onInvoicePhotoUpload(t[0]):e.onInvoicePhotoError(n.photoError)},maxSize:5e6,minSize:1,accept:d,multiple:!1,disabled:!1,"data-sentry-element":"Dropzone","data-sentry-source-file":"add-invoice-photo.tsx",children:n=>{let{getRootProps:i,getInputProps:o}=n;return(0,a.jsxs)("div",{...i(),children:[(0,a.jsx)("input",{...o(),"data-testid":"invoice-photo-add-input",onClick:e.onInvoicePhotoAddAttempt}),(0,a.jsxs)("button",{children:[r?(0,a.jsx)(tP,{}):(0,a.jsx)(tk.m,{style:{width:"25px",marginRight:"0.2rem"}}),(0,a.jsx)("p",{children:t.addPhoto})]})]})}})})}let t_=()=>(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"InfoIcon","data-sentry-source-file":"icons.tsx",children:(0,a.jsx)("path",{d:"M11 14H10V10H9M10 6H10.01M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z",stroke:"#F97316",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","data-sentry-element":"path","data-sentry-source-file":"icons.tsx"})}),tR=()=>(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"SuccessIcon","data-sentry-source-file":"icons.tsx",children:(0,a.jsx)("path",{d:"M7 10L9 12L13 8M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z",stroke:"#22C55E",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","data-sentry-element":"path","data-sentry-source-file":"icons.tsx"})}),tT=()=>(0,a.jsx)("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"DangerIcon","data-sentry-source-file":"icons.tsx",children:(0,a.jsx)("path",{d:"M9.99955 7V9M9.99955 13H10.0095M3.07134 17H16.9277C18.4673 17 19.4296 15.3333 18.6598 14L11.7316 2C10.9618 0.666667 9.0373 0.666667 8.2675 2L1.33929 14C0.569492 15.3333 1.53174 17 3.07134 17Z",stroke:"#EF4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","data-sentry-element":"path","data-sentry-source-file":"icons.tsx"})}),tM=()=>(0,a.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"XIcon","data-sentry-source-file":"icons.tsx",children:(0,a.jsx)("path",{d:"M1 9L9 1M1 1L9 9",stroke:"#555555",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round","data-sentry-element":"path","data-sentry-source-file":"icons.tsx"})}),tU=e=>{let t={success:"#00B87C",warning:"#FFC107",info:"#2196F3",danger:"#F44336"}[e.variant];return e.isOpen?(0,a.jsx)("article",{role:"alert","data-testid":e.dataTestId,"data-sentry-component":"Alert","data-sentry-source-file":"alert-component.tsx",children:(0,a.jsxs)("section",{style:{padding:"8px",marginBottom:"15px"},className:"flex bg-gray-50 rounded-md",children:[(0,a.jsx)("div",{style:{padding:"12px"},children:(0,a.jsx)(tO,{variant:e.variant,"data-sentry-element":"IconComponent","data-sentry-source-file":"alert-component.tsx"})}),(0,a.jsxs)("div",{className:"flex flex-col relative w-full",children:[(0,a.jsx)("h2",{className:"m-0 font-roboto font-semibold",style:{color:t,fontSize:"14px",padding:"8px 0"},children:e.title}),(0,a.jsx)("p",{style:{fontSize:"12px",paddingBottom:"8px"},className:"text-gray-600 font-normal",children:e.description}),(0,a.jsx)("button",{onClick:e.onClose,style:{padding:"12px"},className:"m-0 border-none absolute top-0 right-0 hover:bg-gray-100 focus:outline-none rounded-md",children:(0,a.jsx)(tM,{"data-sentry-element":"XIcon","data-sentry-source-file":"alert-component.tsx"})})]})]})}):null},tO=e=>{let{variant:t}=e;return({success:(0,a.jsx)(tR,{}),warning:(0,a.jsx)(t_,{}),info:(0,a.jsx)(t_,{}),danger:(0,a.jsx)(tT,{})})[t]},tB=()=>{let[e,t]=i.useState(!1),[n,a]=i.useState("info"),[o,s]=i.useState(""),[r,l]=i.useState("");return{isOpen:e,variant:n,title:o,description:r,openAlert:e=>{let{variant:n,title:i,description:o}=e;a(n),s(i),l(o),t(!0)},closeAlert:()=>{t(!1)}}},tF=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fetch";return"https://d28zjh2pk692s7.cloudfront.net"+"/".concat(n,"/").concat(t,"/").concat(e)},tV=()=>(0,a.jsx)("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"PencilIcon","data-sentry-source-file":"pencil-icon.tsx",children:(0,a.jsx)("path",{d:"M10.488 3.48816L12.8451 5.84518M11.488 2.48816C12.1389 1.83728 13.1942 1.83728 13.8451 2.48816C14.4959 3.13903 14.4959 4.1943 13.8451 4.84518L4.66659 14.0237H2.33325V11.6429L11.488 2.48816Z",stroke:"#9CA3AF",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","data-sentry-element":"path","data-sentry-source-file":"pencil-icon.tsx"})});function tW(e){let{dictionary:t}=e;return(0,a.jsx)("div",{className:"invoice-photo","data-testid":"invoice-photo-card","data-sentry-component":"InvoicePhoto","data-sentry-source-file":"invoice-photo.tsx",children:(0,a.jsxs)("article",{children:[(0,a.jsx)("header",{children:(0,a.jsx)("img",{src:tF(e.photo.url,"c_fit,w_400,h_400")})}),(0,a.jsxs)("main",{children:[(0,a.jsx)("strong",{children:e.photo.name}),(0,a.jsx)("p",{children:e.photo.description})]}),(0,a.jsx)(tz,{id:"invoice-photo-actions",dictionary:t,onInvoicePhotoEdit:e.onInvoicePhotoEdit,photo:e.photo,openAlert:e.openAlert,onInvoicePhotoRemove:e.onInvoicePhotoRemove,"data-sentry-element":"PhotoActions","data-sentry-source-file":"invoice-photo.tsx"})]})})}n(74921);let tz=e=>{let{onInvoicePhotoEdit:t,dictionary:n,photo:o,openAlert:s,onInvoicePhotoRemove:r}=e,[l,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!1),m=async e=>{u(!0),d(!1),await r(e).catch(()=>{u(!1),d(!1),s({description:n.invoicePhotoRemoveErrorDescription,title:n.invoicePhotoRemoveErrorTitle,variant:"danger"})})};return c?(0,a.jsx)("footer",{className:"invoice-photo-action-footer","data-testid":"photo-delete-loading",id:"tailwind",children:(0,a.jsx)(tE.T,{color:"black",className:"w-7 h-7"})}):l?(0,a.jsxs)("footer",{className:"invoice-photo-action-footer","data-testid":"confirm",children:[(0,a.jsx)("button",{"data-testid":"confirm-cancel",onClick:()=>d(!1),children:n.cancel}),(0,a.jsx)("button",{onClick:()=>m(o.remoteId),className:"danger","data-testid":"confirm-remove",children:n.confirmDelete})]}):(0,a.jsxs)("footer",{className:"invoice-photo-action-footer","data-sentry-component":"PhotoActions","data-sentry-source-file":"invoice-photo.tsx",children:[(0,a.jsx)("button",{"data-testid":"invoice-photo-edit-button",onClick:()=>t({remoteId:o.remoteId,photoRemoteId:o.photoRemoteId,name:o.name,description:o.description,url:o.url}),children:(0,a.jsx)(tV,{"data-sentry-element":"PencilIcon","data-sentry-source-file":"invoice-photo.tsx"})}),(0,a.jsx)("button",{onClick:()=>d(!0),"data-testid":"invoice-photo-remove-button",children:(0,a.jsx)(eQ.b,{"data-sentry-element":"XIcon","data-sentry-source-file":"invoice-photo.tsx"})})]})};var tH=n(73372),tY=n.n(tH);n(41384);let tG={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)",border:"none",padding:0,borderRadius:"12px"},overlay:{position:"fixed",inset:"0px",backgroundColor:"rgba(0, 0, 0, 0.30)",zIndex:50}};function tZ(e){return(0,a.jsx)(tY(),{isOpen:e.isOpen,ariaHideApp:!0,shouldReturnFocusAfterClose:!0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,preventScroll:!0,shouldCloseOnOverlayClick:!1,onRequestClose:e.onClose,style:tG,"data-sentry-element":"Modal","data-sentry-component":"InvoicePhotoModal","data-sentry-source-file":"invoice-photo-modal.tsx",children:(0,a.jsx)(tq,{onError:e.onError,onClose:e.onClose,isEditing:e.isEditing,previewUrl:e.previewUrl,remoteData:e.remoteData,onInvoicePhotoAdd:e.onInvoicePhotoAdd,onInvoicePhotoUpdate:e.onInvoicePhotoUpdate,dictionary:e.dictionary,isOpen:e.isOpen,"data-sentry-element":"ModalContents","data-sentry-source-file":"invoice-photo-modal.tsx"})})}let tq=e=>{let{onError:t,onClose:n,isEditing:o,previewUrl:s,remoteData:r,onInvoicePhotoAdd:l,onInvoicePhotoUpdate:d,dictionary:c}=e,[u,m]=(0,i.useState)((null==r?void 0:r.description)||""),[h,p]=(0,i.useState)((null==r?void 0:r.name)||""),[x,v]=(0,i.useState)(!1);(0,i.useLayoutEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);let g=e=>{e.preventDefault(),v(!0),o?d({remoteId:r.remoteId,photoRemoteId:r.photoRemoteId,url:r.url,name:h,description:u}).catch(t).finally(()=>{v(!1),n()}):l({remoteId:(0,U.Z)(),url:r.url,name:h,description:u}).catch(t).finally(()=>{v(!1),n()})},y=o?c.saveChanges:c.addPhoto;return(0,a.jsxs)("form",{className:"invoice-photo-modal-content",onSubmit:g,"data-sentry-component":"ModalContents","data-sentry-source-file":"invoice-photo-modal.tsx",children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("h3",{children:c.photoDetails}),(0,a.jsx)("button",{onClick:n,"data-testid":"invoice-photo-modal-x-button",type:"button",children:(0,a.jsx)(eQ.b,{"data-sentry-element":"XIcon","data-sentry-source-file":"invoice-photo-modal.tsx"})})]}),(0,a.jsxs)("main",{children:[(0,a.jsx)("section",{className:"invoice-photo-image-boundary",children:(0,a.jsx)("img",{src:(null==r?void 0:r.url)||s})}),(0,a.jsxs)("section",{className:"data-entry",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"invoice-photo-description-input",hidden:!0,children:c.description}),(0,a.jsx)("input",{type:"text",autoFocus:!0,id:"invoice-photo-description-input",name:"invoice-photo-description-input",className:"w-full",placeholder:c.description,value:h,onChange:e=>p(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"invoice-photo-details-input",hidden:!0,children:c.additionalDetails}),(0,a.jsx)(e5.Z,{name:"invoice-photo-details-input",id:"invoice-photo-details-input",className:"invoice-photo-details-input w-full",minRows:5,maxRows:5,placeholder:c.additionalDetails,value:u,onChange:e=>m(e.target.value),"data-sentry-element":"TextareaAutosize","data-sentry-source-file":"invoice-photo-modal.tsx"})]})]})]}),(0,a.jsxs)("footer",{className:"invoice-photo-modal-content-footer",id:"tailwind",children:[(0,a.jsx)("button",{"data-testid":"invoice-photo-modal-close-button",disabled:x,onClick:n,type:"button",children:c.cancel}),(0,a.jsx)("button",{"data-testid":"invoice-photo-modal-save-button",disabled:x,onClick:g,type:"submit",className:"flex justify-center items-center",style:{minWidth:"97px"},children:x?(0,a.jsx)(tE.T,{color:"white",className:"h-7 w-7"}):y})]})]})},tX=e=>{let{photos:t,invoicePhotoListDictionary:n,invoicePhotoDictionary:o,addInvoicePhotoDictionary:s,invoiceModalDictionary:r,dropzoneDictionary:d,onUploadStart:c,onUploadEnd:u,onPhotoUpload:m,onPhotoUploadError:h,onPhotoSave:p,onPhotoSaveError:x,onInvoicePhotoAddAttempt:v,onInvoicePhotoAdd:g,onInvoicePhotoUpdate:y,onInvoicePhotoRemove:f,trackEvent:b}=e,[j,w]=(0,i.useState)(!1),[I,C]=(0,i.useState)(!1),[N,D]=(0,i.useState)(!1),[E,S]=(0,i.useState)(""),[A,k]=(0,i.useState)(null),{closeAlert:P,isOpen:L,openAlert:_,title:R,description:T}=tB(),M=()=>w(!0),O=async e=>{c(),C(!1),D(!0);let t=(0,U.Z)();try{let{uploadRes:n,urlRes:a}=await m(e);S(a.data.url),k({remoteId:t,url:a.data.url}),await p({remoteId:t,deleted:!1,url:a.data.url,md5:n.headers.etag,type:l.HB.INVOICE,updated:Date.now()}).then(M).catch(x)}catch(e){h(e),_({description:n.invoicePhotoFailedUploadErrorDescription,title:n.invoicePhotoFailedUploadErrorTitle,variant:"danger"})}finally{u(),D(!1)}},B=e=>{let{remoteId:t,photoRemoteId:n,name:a,description:i,url:o}=e;k({remoteId:t,photoRemoteId:n,name:a,description:i,url:o}),C(!0),M()};return(0,a.jsxs)("section",{className:"invoice-photo-grid","data-sentry-component":"PhotoGrid","data-sentry-source-file":"photo-grid.tsx",children:[(0,a.jsx)(tU,{variant:"danger",title:R,description:T,isOpen:L,isClosable:!0,onClose:P,dataTestId:"invoice-photo-error-alert","data-sentry-element":"Alert","data-sentry-source-file":"photo-grid.tsx"}),(0,a.jsxs)("ul",{children:[null==t?void 0:t.map(e=>(0,a.jsx)(tW,{photo:e,dictionary:o,id:e.remoteId,onInvoicePhotoRemove:f,onInvoicePhotoEdit:B,openAlert:_},e.remoteId)),(0,a.jsx)(tL,{onInvoicePhotoAddAttempt:v,onInvoicePhotoUpload:O,onInvoicePhotoError:e=>{_({description:e,title:n.invoicePhotoUnsupportedErrorTitle,variant:"danger"})},trackEvent:b,dictionary:s,dropzoneDictionary:d,id:"add-invoice-photo",isUploading:N,"data-sentry-element":"AddInvoicePhoto","data-sentry-source-file":"photo-grid.tsx"})]}),(0,a.jsx)(tZ,{isOpen:j,onClose:()=>w(!1),isEditing:I,previewUrl:E,remoteData:A,onError:()=>_({description:n.invoicePhotoSaveErrorDescription,title:n.invoicePhotoSaveErrorTitle,variant:"danger"}),onInvoicePhotoAdd:g,onInvoicePhotoUpdate:y,dictionary:r,"data-sentry-element":"InvoicePhotoModal","data-sentry-source-file":"photo-grid.tsx"})]})};n(1086);var tQ=n(99814);function tK(e){return(0,a.jsxs)("div",{className:"content-block","data-sentry-component":"InvoicePhotoList","data-sentry-source-file":"invoice-photo-list.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-row h-fit items-center gap-2",children:[(0,a.jsx)("h3",{className:"invoice-photos-header",children:e.invoicePhotoListDictionary.photosHeader}),(0,a.jsx)(tQ.h,{featureName:tD.eS.INVOICE_PHOTOS,"data-sentry-element":"FeatureAccess","data-sentry-source-file":"invoice-photo-list.tsx"})]}),(0,a.jsx)(tX,{photos:e.photos,onUploadStart:e.onUploadStart,onUploadEnd:e.onUploadEnd,onPhotoUpload:e.onPhotoUpload,onPhotoUploadError:e.onPhotoUploadError,onPhotoSave:e.onPhotoSave,onPhotoSaveError:e.onPhotoSaveError,onInvoicePhotoAddAttempt:e.onInvoicePhotoAddAttempt,onInvoicePhotoAdd:e.onInvoicePhotoAdd,onInvoicePhotoRemove:e.onInvoicePhotoRemove,onInvoicePhotoUpdate:e.onInvoicePhotoUpdate,trackEvent:e.trackEvent,invoicePhotoListDictionary:e.invoicePhotoListDictionary,invoicePhotoDictionary:e.invoicePhotoDictionary,addInvoicePhotoDictionary:e.addInvoicePhotoDictionary,invoiceModalDictionary:e.invoiceModalDictionary,dropzoneDictionary:e.dropzoneDictionary,"data-sentry-element":"PhotoGrid","data-sentry-source-file":"invoice-photo-list.tsx"})]})}function t$(e){let{mobile:t}=e;return t?(0,a.jsx)("svg",{className:"plus w-4 h-4",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"Plus","data-sentry-source-file":"plus.tsx",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6","data-sentry-element":"path","data-sentry-source-file":"plus.tsx"})}):(0,a.jsx)("svg",{className:"plus w-6 h-6",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"Plus","data-sentry-source-file":"plus.tsx",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6","data-sentry-element":"path","data-sentry-source-file":"plus.tsx"})})}function tJ(e){let t="bg-gradient-to-r from-gray-600 to-gray-800 ".concat(e.disabled?"":"hover:from-gray-600 hover:to-gray-700");return(0,a.jsx)("button",{className:"p-1 h-[34px] inline-block rounded border border-gray-500 ".concat(t).concat(e.disabled?" cursor-not-allowed opacity-50":""),id:e.id,title:e.title,disabled:e.disabled,onClick:e.onClick,"data-sentry-component":"AddItemButton","data-sentry-source-file":"add-item-button.tsx",children:(0,a.jsx)(t$,{"data-sentry-element":"Plus","data-sentry-source-file":"add-item-button.tsx"})})}var t0=n(1392),t1=n.n(t0);n(51051);let t2={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)",border:"none",padding:0,borderRadius:"12px",minWidth:"250px",overflow:"hidden"},overlay:{position:"fixed",inset:"0px",backgroundColor:"rgba(0, 0, 0, 0.30)",zIndex:50}},t9=e=>{let{onSave:t,onClose:n,dictionary:o,isSigEmpty:s=!0}=e,[r,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(s),u=(0,i.useRef)(null);async function m(){u.current&&(u.current.off(),l(!0),await t(u.current.toDataURL()),l(!1)),n()}return(0,a.jsxs)(tY(),{isOpen:!0,ariaHideApp:!0,shouldReturnFocusAfterClose:!0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,preventScroll:!0,shouldCloseOnOverlayClick:!1,onRequestClose:n,style:t2,"data-sentry-element":"Modal","data-sentry-component":"InvoiceSignatureModal","data-sentry-source-file":"invoice-signature-modal.tsx",children:[(0,a.jsx)("div",{"data-testid":"signature-pad-container",className:"signature-pad-container",children:(0,a.jsx)(t1(),{ref:e=>{u.current=e},canvasProps:{style:{width:"100%",height:"100%"}},clearOnResize:!1,onEnd:()=>c(!1),"data-sentry-element":"SignaturePad","data-sentry-source-file":"invoice-signature-modal.tsx"})}),(0,a.jsx)("footer",{id:"signature-actions","data-testid":"signature-actions",style:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#444444"},children:r?(0,a.jsx)(tE.T,{color:"white",style:{width:"1.75rem",height:"1.75rem",margin:"0.25rem",animation:"spin 1s linear infinite"}}):(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)("button",{className:"btn btn-prime btn-signature-action",onClick:n,children:o.signatureCancelLabel}),(0,a.jsx)("button",{className:"btn btn-prime btn-signature-action",style:{borderLeft:"1px solid white",borderRight:"1px solid white"},onClick:function(){var e;null===(e=u.current)||void 0===e||e.clear(),c(!0)},children:o.signatureClearLabel}),(0,a.jsx)("button",{"data-testid":"signature-save",className:"btn btn-prime btn-signature-action",disabled:d,onClick:m,children:o.signatureSaveLabel})]})})]})},t4=e=>{let{signature:t,openModal:n,onDelete:o,dictionary:s}=e,[r,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!1);async function u(e){c(!0),l(!1),await o(e).catch(()=>{c(!1)})}return d?(0,a.jsx)("footer",{className:"invoice-photo-action-footer","data-testid":"photo-delete-loading",id:"tailwind",children:(0,a.jsx)(tE.T,{color:"black",className:"w-7 h-7"})}):r?(0,a.jsxs)("footer",{className:"invoice-photo-action-footer","data-testid":"confirm",children:[(0,a.jsx)("button",{"data-testid":"confirm-cancel",onClick:()=>l(!1),children:s.signatureRemoveCancelLabel}),(0,a.jsx)("button",{"data-testid":"confirm-delete",onClick:()=>u(t.photoRemoteId),className:"danger",children:s.signatureRemoveConfirmLabel})]}):(0,a.jsxs)("footer",{"data-testid":"invoice-signature-photo-actions",className:"invoice-photo-action-footer","data-sentry-component":"SignaturePhotoActions","data-sentry-source-file":"signature-photo-actions.tsx",children:[(0,a.jsx)("button",{"data-testid":"invoice-signature-edit",onClick:n,children:(0,a.jsx)(tV,{"data-sentry-element":"PencilIcon","data-sentry-source-file":"signature-photo-actions.tsx"})}),(0,a.jsx)("button",{onClick:()=>{l(!0)},"data-testid":"invoice-signature-remove",children:(0,a.jsx)(eQ.b,{"data-sentry-element":"XIcon","data-sentry-source-file":"signature-photo-actions.tsx"})})]})};n(46498);var t5=n(65833),t6=n(41065);function t8(e){let{locale:t,signature:n,onSave:o,onDelete:s,dictionary:r}=e,[d,c]=(0,i.useState)(!1),u=(0,tS._)(),{user:m,isFirstTimer:h}=(0,B.D)(),p=h||(0,tA.N)({user:m,feature:tD.eS.SIGNATURE});function x(){if(!p){u.push("/subscription?ref=".concat(t5.Wu.INVOICE_SIGNATURE,"&feature=").concat(tD.eS.SIGNATURE));return}c(!0)}return(0,a.jsxs)("div",{"data-testid":"invoice-signature",style:{margin:"25px 0",display:n||p?"block":"flex",alignItems:"center"},"data-sentry-component":"InvoiceSignature","data-sentry-source-file":"invoice-signature.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[!p&&(0,a.jsx)(tk.m,{style:{width:"20px",marginRight:"0.3rem"}}),(0,a.jsx)("h3",{className:"invoice-signature-header",style:{display:"inline-block",fontSize:"14px"},children:r.signatureLabel})]}),n?(0,a.jsx)("div",{className:"invoice-photo",children:(0,a.jsxs)("article",{children:[(0,a.jsx)("header",{style:{height:"50px",aspectRatio:"auto"},children:(0,a.jsx)("img",{"data-testid":"invoice-signature-photo",src:n.photoUrl,style:{display:"block",objectFit:"contain"}})}),(0,a.jsx)("main",{children:n.signDate&&(0,a.jsxs)("strong",{children:[r.signatureSignedOnLabel,":"," ",(0,a.jsx)(t6.U,{date:(0,l.p6)(n.signDate),locale:t})]})}),(0,a.jsx)(t4,{signature:n,openModal:x,onDelete:s,dictionary:r})]})}):(0,a.jsx)(tJ,{id:"invoice-signature-add","data-testid":"invoice-signature-add",title:"Add signature",onClick:x}),(0,a.jsx)(tQ.h,{featureName:tD.eS.SIGNATURE,"data-sentry-element":"FeatureAccess","data-sentry-source-file":"invoice-signature.tsx"})]}),d&&(0,a.jsx)(t9,{dictionary:r,onSave:o,onClose:()=>c(!1)})]})}var t3=n(86129),t7=n(82337);function ne(e){let{value:t,getCurrency:n,className:i,prefix:o}=e;return(0,a.jsxs)("span",{className:i,style:{fontSize:"0.9rem"},"data-sentry-component":"LocalizedCurrency","data-sentry-source-file":"localized-currency.tsx",children:[!!o&&(0,a.jsx)("span",{className:"currency-value-prefix pr-1",children:o}),n(t)]})}function nt(e){let{label:t,content:n,bold:i=!1,className:o,mobile:s}=e;return(0,a.jsxs)("div",{className:"invoice-totals-row flex justify-end text-xs text-gray-700 ".concat(o," ").concat(i?"font-bold":""),style:{paddingRight:s?void 0:"40px"},"data-sentry-component":"SummaryRow","data-sentry-source-file":"InvoiceTotals.tsx",children:[(0,a.jsx)("div",{className:"invoice-summary-label text-right text-xs block content-center",children:t}),(0,a.jsx)("div",{className:"invoice-summary-value text-right block px-1",style:{minWidth:"150px",fontSize:"0.9rem"},children:n})]})}function nn(e){let{isInvoiceTaxNone:t,taxLabel:n,prefix:i,mobile:o,document:s,getCurrency:r}=e;return t?null:(0,a.jsx)(nt,{mobile:o,label:n,className:"invoice-summary-tax","data-selector":"invoice-summary-tax",content:(0,a.jsx)(ne,{className:"invoice-tax-value",value:+(0,t3.i_)(s),prefix:i,getCurrency:r}),"data-sentry-element":"SummaryRow","data-sentry-component":"SummaryTax","data-sentry-source-file":"InvoiceTotals.tsx"})}function na(e){let{document:t,dictionary:n,isInvoiceTaxNone:i,mobile:o,getCurrency:s}=e,{taxType:r,taxRate:d,taxLabel:c,taxInclusive:u,discountType:m,discountRate:h}=t.setting,{payments:p}=(0,t7.I)(),x=(0,eL.isEstimate)(t)?n.totalLabel:n.balanceDueLabel,v=r===l.oA.TAX_SUBTOTAL,g=r===l.oA.TAX_DEDUCTED,y=v||g?"".concat(c," (").concat(d,"%)"):c||"",f=m===l.sC.DISCOUNT_PERCENTAGE?"".concat(n.discountLabel," (").concat(h,"%)"):n.discountLabel,b=u&&r!==l.oA.TAX_DEDUCTED?n.taxInclusivePrefix:void 0;return(0,a.jsxs)("div",{className:"invoice-totals-container block w-full overflow-x-auto overflow-y-hidden","data-sentry-component":"InvoiceTotals","data-sentry-source-file":"InvoiceTotals.tsx",children:[(0,a.jsx)(nt,{mobile:o,label:n.subtotalLabel,className:"invoice-summary-subtotal",content:(0,a.jsx)(ne,{className:"invoice-subtotal-value",value:+(0,t3.Ww)(t),getCurrency:s}),"data-sentry-element":"SummaryRow","data-sentry-source-file":"InvoiceTotals.tsx"}),(m===l.sC.DISCOUNT_PERCENTAGE||m===l.sC.DISCOUNT_FLAT_AMOUNT)&&(0,a.jsx)(nt,{mobile:o,label:f,className:"invoice-summary-discount",content:(0,a.jsx)(ne,{className:"invoice-discount-value",value:-1*+(0,t3.fL)(t),getCurrency:s})}),r!==l.oA.TAX_NONE&&(0,a.jsx)(nn,{mobile:o,document:t,taxLabel:y,isInvoiceTaxNone:i,getCurrency:s,prefix:b}),(0,eL.isInvoice)(t)&&(0,a.jsx)(nt,{mobile:o,"data-selector":"invoice-total",label:n.totalLabel,className:"invoice-summary-total",content:(0,a.jsx)(ne,{className:"invoice-total-value",value:+(0,t3.T)({...t,client:t.client||{shipAmount:void 0}}),getCurrency:s})}),(0,eL.isInvoice)(t)&&(0,t3.bZ)(t).gt(0)&&(0,a.jsx)(nt,{mobile:o,label:n.paymentsLabel,className:"invoice-summary-payments",content:(0,a.jsx)(ne,{className:"invoice-payments-value",value:-1*+(0,t3.bZ)(t),getCurrency:s})}),(0,a.jsx)(nt,{bold:!0,mobile:o,label:x,className:"invoice-summary-balance invoice-balance","data-selector":"invoice-balance",content:(0,a.jsx)(ne,{className:"invoice-balance-value",value:+(0,t3.$k)({...t,client:t.client||{shipAmount:void 0}},p),getCurrency:s}),"data-sentry-element":"SummaryRow","data-sentry-source-file":"InvoiceTotals.tsx"})]})}var ni=n(49618);let no=e=>{let t={isLoading:e.isLoading,displayMode:"mobile",generatedInput:e.generatedInput,refineDisabled:e.refineDisabled,onRewrite:e.onRewrite,onAccept:e.onAccept,onCancel:e.onCancel};return(0,a.jsx)(to,{value:t,"data-sentry-element":"AiRewriteControlsProvider","data-sentry-component":"AiRewriteControlsMobile","data-sentry-source-file":"ai-rewrite-controls-mobile.tsx",children:(0,a.jsx)(a.Fragment,{children:e.generatedInput?(0,a.jsxs)("div",{className:"flex flex-col gap-2 mt-2 w-full",children:[(0,a.jsx)("div",{className:"flex items-center w-full",children:(0,a.jsx)(tm,{})}),(0,a.jsxs)("div",{className:"flex items-center gap-1 w-full",children:[(0,a.jsx)(th,{}),(0,a.jsx)(tl,{})]})]}):(0,a.jsx)("div",{className:"flex items-center gap-2 w-full",children:(0,a.jsx)(tc,{onChange:e.onRewrite,disabled:e.disabled,isLoading:e.isLoading})})})})};function ns(e){let{mobile:t}=e;return t?(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"#555",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"Delete","data-sentry-source-file":"delete.tsx",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M6 18L18 6M6 6l12 12","data-sentry-element":"path","data-sentry-source-file":"delete.tsx"})}):(0,a.jsx)("svg",{className:"w-4 h-4 m-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"Delete","data-sentry-source-file":"delete.tsx",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12","data-sentry-element":"path","data-sentry-source-file":"delete.tsx"})})}function nr(){return(0,a.jsx)("svg",{className:"w-4 h-4 m-1",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",viewBox:"0 0 32 32","data-sentry-element":"svg","data-sentry-component":"Cancel","data-sentry-source-file":"cancel.tsx",children:(0,a.jsx)("g",{"data-name":"Layer 25",id:"Layer_25","data-sentry-element":"g","data-sentry-source-file":"cancel.tsx",children:(0,a.jsx)("path",{d:"M30,16A14,14,0,0,1,2,16H4A12,12,0,1,0,7.08,8H11v2H4V3H6V6.2A14,14,0,0,1,30,16Z","data-sentry-element":"path","data-sentry-source-file":"cancel.tsx"})})})}function nl(){return(0,a.jsx)("svg",{className:"w-4 h-4 m-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"Trash","data-sentry-source-file":"trash.tsx",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16","data-sentry-element":"path","data-sentry-source-file":"trash.tsx"})})}let nd={background:"linear-gradient(#f4f4f4,#e4e4e4)"},nc="p-1 block rounded border border-gray-500 items-center";function nu(e){let{onClick:t,disabled:n}=e;return(0,a.jsx)("button",{"aria-label":"Delete Item",className:"btn-delete ".concat(nc," ").concat(n?" cursor-not-allowed opacity-50":""),style:nd,onClick:t,disabled:n,"data-sentry-component":"DeleteButton","data-sentry-source-file":"item-delete-button.tsx",children:(0,a.jsx)(ns,{"data-sentry-element":"Delete","data-sentry-source-file":"item-delete-button.tsx"})})}function nm(e){let{onClick:t}=e;return(0,a.jsx)("button",{"aria-label":"Undo Delete",className:"btn-cancel mb-1 ".concat(nc),style:nd,onClick:t,"data-sentry-component":"CancelButton","data-sentry-source-file":"item-delete-button.tsx",children:(0,a.jsx)(nr,{"data-sentry-element":"Cancel","data-sentry-source-file":"item-delete-button.tsx"})})}function nh(e){let{onClick:t}=e;return(0,a.jsx)("button",{"aria-label":"Delete Item Confirm",className:"btn-trash ".concat(nc),style:nd,onClick:t,"data-sentry-component":"TrashButton","data-sentry-source-file":"item-delete-button.tsx",children:(0,a.jsx)(nl,{"data-sentry-element":"Trash","data-sentry-source-file":"item-delete-button.tsx"})})}function np(e){let{onDelete:t,disabled:n}=e,[o,s]=(0,i.useState)(!1);return(0,a.jsx)(i.Fragment,{children:o?(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(nm,{onClick:()=>s(!1)}),(0,a.jsx)(nh,{onClick:()=>{s(!1),t()}})]}):(0,a.jsx)(nu,{onClick:()=>s(!0),disabled:n})})}var nx=n(74659);function nv(e){let[t,n]=(0,i.useState)(e.value),o=e.className||"form-input block text-xs text-right rounded border border-gray-400 py-2 px-5 leading-5 focus:text-gray-600 w-4/5 float-right";return(0,a.jsx)(nx.A,{ariaLabel:"Item Quantity",className:o,style:e.style,selectOnFocus:!0,placeholder:e.placeholder,disabled:e.disabled,value:null===t?void 0:t,onChange:t=>{e.onChange(t),n(t)},maxLength:15,"data-sentry-element":"NumericInput","data-sentry-component":"ItemQuantity","data-sentry-source-file":"item-quantity.tsx"})}function ng(e){let[t,n]=(0,i.useState)(e.value);return(0,i.useEffect)(()=>{n(e.value)},[e.value]),(0,a.jsx)(nx.A,{className:e.className,style:e.style,placeholder:e.placeholder,precision:2,disabled:e.disabled,value:null===t?void 0:t,onChange:t=>{e.onChange(t),n(t)},maxLength:20,"data-sentry-element":"NumericInput","data-sentry-component":"ItemRate","data-sentry-source-file":"item-rate.tsx"})}let ny=(0,eY.Ue)((e,t)=>({limitMax:10,startSuggestionAt:2,endSuggestionAt:15,items:[],name:null,setName:t=>{e({name:t})},reset:()=>{e({name:null}),e({items:[]})},startAutoLoad:async()=>{let{name:n,startSuggestionAt:a,endSuggestionAt:i}=t();n&&n.length>=a&&n.length<=i&&e({items:await nf(n)})}})),nf=async e=>{let t=nb(),n=new URLSearchParams({itemCode:e});return(await (0,eG.Y)("/api/autocomplete/item?".concat(n),{headers:{"X-Parse-Session-Token":t},cache:"no-cache"})).filter(e=>!!e.code)},nb=()=>{var e,t;let n=null===(t=document)||void 0===t?void 0:null===(e=t.cookie)||void 0===e?void 0:e.split("; "),a=n&&n.find(e=>e.trim().startsWith("sessionToken=")),i=decodeURIComponent((null==a?void 0:a.split("=")[1])||"");if(!i)throw Error("Missing session token (client)");return i},nj=e=>{let{onSelect:t,value:n,onChange:o,disabled:s,itemInputDictionary:r}=e,[l,d]=(0,i.useState)(n),{reset:c,setName:u,items:m,startAutoLoad:h,name:p}=ny(),x=eH(p,500);return(0,i.useEffect)(()=>{setTimeout(()=>{h()},500)},[x]),(0,a.jsx)("div",{className:/android|webos|iphone|ipad|ipod|blackberry|mobile|windows phone/i.test(window.navigator.userAgent)?"w-full relative":"flex items-center w-full relative","data-sentry-component":"ItemAutosuggest","data-sentry-source-file":"item-autosuggest.tsx",children:(0,a.jsx)(eV(),{inputProps:{id:"item-code",disabled:s,value:l,onChange:e=>{d(e.target.value),o(e)},placeholder:r.placeholderCode},suggestions:m,getSuggestionValue:e=>e.code,onSuggestionSelected:(e,n)=>{t(n.suggestion)},onSuggestionsFetchRequested:e=>{let{value:t}=e;u(t)},onSuggestionsClearRequested:()=>{c()},renderSuggestion:e=>{var t;let n=(null==e?void 0:e.description)&&e.description.length>100?"".concat(null==e?void 0:null===(t=e.description)||void 0===t?void 0:t.substring(0,95),"..."):null==e?void 0:e.description;return(0,a.jsxs)("div",{className:"invoice-suggestion-option clearfix","data-sentry-component":"renderSuggestion","data-sentry-source-file":"item-autosuggest.tsx",children:[(0,a.jsx)("span",{className:"invoice-suggestion-name",children:e.code}),(0,a.jsx)("span",{className:"invoice-suggestion-meta",children:n})]})},"data-sentry-element":"Autosuggest","data-sentry-source-file":"item-autosuggest.tsx"})})};function nw(e){let[t,n]=(0,i.useState)(""),[o,s]=(0,i.useState)(!1),r=(0,i.useRef)(0),{trackInstantFormEvent:l}=(0,B.D)(),d=(0,e8.s)("ai_notes_rewrite").enabled,c=(0,i.useMemo)(()=>[{code:e.item.code,description:t||e.item.description||""}],[e.item.code,e.item.description,t]),u=t||e.item.description||"",{mutate:m,isLoading:h}=ty({targetType:tn,currentAiOutput:t,inputValue:u,items:c,onSuccess:n,onSetRefineDisabled:s,onClearAiOutput:()=>n("")}),p=t=>{e.onItemChange({...e.item,code:t.target.value})},x=e.disabled||h,v="px-1 pt-2 align-top";return(0,a.jsx)(i.Fragment,{children:(0,a.jsxs)("tr",{className:"item-row",style:{borderBottom:"1px dashed #ddd"},children:[(0,a.jsx)("td",{className:"item-row-actions ".concat(v),children:(0,a.jsx)(np,{onDelete:e.onItemDelete,disabled:x,"data-sentry-element":"ItemDeleteButton","data-sentry-source-file":"item-input.tsx"})}),(0,a.jsxs)("td",{"data-label":"Item #".concat(e.index+1),className:"item-row-summary ".concat(v),children:[(0,a.jsx)("div",{className:"item-row-name mb-2",children:e.isMigrated?(0,a.jsx)(nj,{onSelect:t=>{e.onItemChange({...e.item,remoteId:(0,ex.Z)(),code:t.code,description:t.description,rate:t.rate,unit:t.unit,taxable:t.taxable,isUpdating:!0})},value:e.item.code,onChange:p,disabled:x,itemInputDictionary:e.dictionary}):(0,a.jsx)("input",{type:"text",className:(0,e6.cn)("form-input block w-full text-xs rounded border border-gray-400 py-2 px-5 leading-5 focus:text-gray-600",{"cursor-not-allowed text-gray-400":x}),value:e.item.code,id:"item-code-".concat(e.index+1),placeholder:e.dictionary.placeholderCode,disabled:x,onChange:p})}),(0,a.jsx)("div",{className:"item-row-description",children:(0,a.jsx)(e5.Z,{className:(0,e6.cn)("item-description-input form-input block text-xs w-full resize-none rounded border border-gray-400 py-2 px-5 leading-5 focus:text-gray-600",{"cursor-not-allowed text-gray-400":x}),placeholder:e.dictionary.placeholderDescription,minRows:3,maxRows:10,value:u,disabled:x,onChange:a=>{if(t){o&&s(!1),n(a.target.value);return}e.onItemChange({...e.item,description:a.target.value})},"data-sentry-element":"TextareaAutosize","data-sentry-source-file":"item-input.tsx"})}),d&&(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(no,{isLoading:h,disabled:!e.item.description,refineDisabled:o,generatedInput:t,onRewrite:()=>{let n=t?"refine":"rewrite",a=r.current+1,i={feature:"ai-rewrite-item",action:n,refineCount:"refine"===n?a:r.current,invoiceRemoteId:e.invoiceRemoteId,itemRemoteId:e.item.remoteId,text:""};tf("web-button-click",i),l("web-button-click",i),"refine"===n&&(r.current=a),s(!1),m()},onAccept:()=>{let a={feature:"ai-rewrite-item",action:"save",refineCount:r.current,invoiceRemoteId:e.invoiceRemoteId,itemRemoteId:e.item.remoteId,text:""};tf("web-button-click",a),l("web-button-click",a),e.onItemChange({...e.item,description:t}),n(""),r.current=0},onCancel:()=>{let t={feature:"ai-rewrite-item",action:"cancel",refineCount:r.current,invoiceRemoteId:e.invoiceRemoteId,itemRemoteId:e.item.remoteId,text:""};tf("web-button-click",t),l("web-button-click",t),n(""),r.current=0}})})]}),(0,a.jsx)("td",{"data-label":"Price",className:"item-row-rate ".concat(v),children:(0,a.jsx)(ng,{style:!1,placeholder:"0.00",value:e.item.rate,disabled:x,onChange:t=>{e.onItemChange({...e.item,rate:t||0})},"data-sentry-element":"ItemRate","data-sentry-source-file":"item-input.tsx"})}),(0,a.jsx)("td",{"data-label":"Quantity",className:"item-row-quantity ".concat(v),children:(0,a.jsx)(nv,{style:!1,placeholder:"0",value:e.item.quantity,disabled:x,onChange:t=>{e.onItemChange({...e.item,quantity:t||0})},"data-sentry-element":"ItemQuantity","data-sentry-source-file":"item-input.tsx"})}),(0,a.jsx)("td",{"data-label":"Amount",className:"item-row-amount text-right pt-3 ".concat(v),children:(0,a.jsx)(ne,{className:"item-total",value:+(0,t3.Rg)(e.item),getCurrency:e.getCurrency,"data-sentry-element":"LocalizedCurrency","data-sentry-source-file":"item-input.tsx"})}),!e.isInvoiceTaxNone&&(0,a.jsx)("td",{className:"item-row-tax pt-2 ".concat(v," text-right"),children:(0,a.jsx)("input",{"aria-label":"Taxable Checkbox",type:"checkbox",className:(0,e6.cn)("form-checkbox h-6 w-6 text-gray-800",{"cursor-not-allowed":x}),checked:e.item.taxable,onChange:()=>{e.onItemChange({...e.item,taxable:!e.item.taxable})},disabled:x})})]})})}function nI(e){let{trackInstantFormEvent:t}=(0,B.D)(),n=e.items.map((n,i)=>(0,a.jsx)(nw,{invoiceRemoteId:e.invoiceRemoteId,item:n,index:i,dictionary:e.itemInputDictionary,isInvoiceTaxNone:e.isInvoiceTaxNone,getCurrency:e.getCurrency,disabled:e.disabled,onItemChange:t=>{e.onChange([...e.items.slice(0,i),t,...e.items.slice(i+1)])},onItemDelete:()=>{e.onChange([...e.items.slice(0,i),...e.items.slice(i+1)]),t("invoice-item-remove",{platform:l.t4.WEB})},isMigrated:e.isMigrated},n.remoteId)),i=e.itemListDictionary;return(0,a.jsx)("div",{"data-sentry-component":"ItemList","data-sentry-source-file":"item-list.tsx",children:(0,a.jsxs)("table",{className:"table-fixed",children:[(0,a.jsx)("thead",{className:"thead",style:{display:"table-header-group",verticalAlign:"middle",borderTop:"1px solid black",borderBottom:"1px solid black",borderCollapse:"collapse"},children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"item-delete-header",style:{width:"2%"},children:"\xa0"}),(0,a.jsx)("th",{className:"item-description-header text-left font-normal text-xs pl-2",style:{width:"45%",fontSize:"0.7rem"},children:i.descriptionHeader.toUpperCase()}),(0,a.jsx)("th",{className:"item-rate-header text-right font-normal text-xs pr-2",style:{width:"16%",fontSize:"0.7rem"},children:i.rateHeader.toUpperCase()}),(0,a.jsx)("th",{className:"item-quantity-header text-right font-normal text-xs pr-2",style:{width:"16%",fontSize:"0.7rem"},children:i.quantityHeader.toUpperCase()}),(0,a.jsx)("th",{className:"item-amount-header text-right font-normal text-xs pr-1",style:{width:"16%",fontSize:"0.7rem"},children:i.amountHeader.toUpperCase()}),!e.isInvoiceTaxNone&&(0,a.jsx)("th",{className:"item-tax-header text-right font-normal text-xs pr-1 uppercase",style:{width:"5%",fontSize:"0.7rem"},children:e.taxLabel})]})}),(0,a.jsxs)("tbody",{className:"invoice-items",children:[n,(0,a.jsx)("tr",{className:"item-row item-row-new",children:(0,a.jsx)("td",{className:"item-row-actions item-add pt-2",children:(0,a.jsx)(tJ,{id:"add-item-button",title:"add-item-button",disabled:e.disabled,onClick:function(){e.onChange([...e.items,(0,eL.createDefaultDocumentItem)()]),t("invoice-item-add",{platform:l.t4.WEB})},"data-sentry-element":"AddItemButton","data-sentry-source-file":"item-list.tsx"})})})]})]})})}var nC=n(54414);function nN(){return(0,a.jsxs)("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"cloud-upload w-6 h-6","data-sentry-element":"svg","data-sentry-component":"CloudUploadIcon","data-sentry-source-file":"cloud-upload.tsx",children:[(0,a.jsx)("path",{d:"M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 13H11V9.413l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13H5.5z","data-sentry-element":"path","data-sentry-source-file":"cloud-upload.tsx"}),(0,a.jsx)("path",{d:"M9 13h2v5a1 1 0 11-2 0v-5z","data-sentry-element":"path","data-sentry-source-file":"cloud-upload.tsx"})]})}n(57462);let nD=i.forwardRef((e,t)=>(0,a.jsx)("svg",{ref:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",...e,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}));function nE(e){let[t,n]=i.useState(!1),{photoState:o,logoDropDictionary:s,dropzoneDictionary:r}=e,d="photo-loading"===o.type?o.previewUrl:"photo-loaded"===o.type?o.url:null,c="photo-loading"===o.type?"photo-drop-zone uploading":"photo-drop-zone",u={accept:{[l.bT.IMG_JPEG]:[".jpg",".jpeg"],[l.bT.IMG_PNG]:[".png"],[l.bT.IMG_WEBP]:[".webp"]},maxSize:5e6,minSize:1,multiple:e.multiple,onDrop:function(t,n,a){if(n.length>0){e.onError(function(t){let{file:n,errors:a}=t[0],i=a.map(e=>e.code);return i.includes("file-too-large")?(e.trackEvent("validation-error",{action:"upload-photo","file-extension":n.type,size:n.size,type:"logo"}),r.maxFileSizeExceededError):i.includes("too-many-files")?r.tooManyFilesError:i.includes("file-invalid-type")?r.fileTypeNotSupportedError:r.photoError}(n));return}if(t&&t[0]){let n=t[0],a=new Image;a.src=URL.createObjectURL(n),a.onload=()=>{if(a.width*a.height>2e7){e.onError(r.resolutionLimitExceededError);return}e.onUpload(n)}}else e.onError(r.photoError)}},{getRootProps:m,getInputProps:h}=(0,tN.uI)(u),p=e.mobile?{minWidth:"90px",minHeight:"30px"}:{minWidth:"180px",minHeight:"90px"};return(0,a.jsx)(i.Fragment,{children:(0,a.jsxs)("div",{className:"photo-drop rounded border border-gray-400 py-2 px-5",style:p,children:[!!d&&(0,a.jsx)("div",{className:"delete-logo-container","data-testid":"delete-logo-container",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:()=>{"photo-loaded"===o.type&&o.remoteId&&(window.confirm(s.removeConfirmMessage)&&e.onDelete(o.remoteId),n(!1))},children:(0,a.jsx)(nD,{className:"btn-delete-logo w-4 h-4",strokeWidth:"3.5"})}),(0,a.jsxs)("div",{...m({className:c}),children:[(0,a.jsx)("input",{...h()}),(0,a.jsxs)("div",{className:"dropzone-symbols",children:[!!d&&(0,a.jsx)("img",{src:d,alt:""}),!d&&(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(nC.f,{}),(0,a.jsx)("span",{className:"text-xs text-center text-gray-600",children:s.logoMessage})]}),(0,a.jsxs)("span",{className:"upload-message",children:[(0,a.jsx)(nN,{"data-sentry-element":"CloudUploadIcon","data-sentry-source-file":"logo-drop.tsx"}),(0,a.jsx)("b",{children:s.savingMessage})]}),(0,a.jsxs)("span",{className:"guide-message",children:[!d&&(0,a.jsx)("b",{children:s.addMessage}),d&&t?(0,a.jsx)("b",{children:s.removeMessage}):!!d&&(0,a.jsx)("b",{children:s.updateMessage})]})]})]}),"photo-error"===e.photoState.type&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:e.photoState.errorMessage})})]})})}nD.displayName="CancelCrossIcon";var nS=n(90469);function nA(e){let{value:t,disabled:n,onChange:i,dictionary:o}=e;return(0,a.jsx)("div",{className:"invoice-title block w-5/12","data-sentry-component":"Title","data-sentry-source-file":"title.tsx",children:(0,a.jsx)("input",{type:"text",id:"invoice-title",name:"invoice-title",className:"form-input w-full rounded border border-gray-400 py-2 px-3 text-2xl font-medium tracking-wide leading-5 focus:text-gray-600".concat(n?" cursor-not-allowed text-gray-400":""),placeholder:o.invoiceTitle,value:t,disabled:n,onChange:function(e){i(e.target.value)}})})}function nk(){return{...(0,eL.createDefaultContact)(),remoteId:(0,ex.Z)(),clientRemoteId:(0,ex.Z)(),shipVia:void 0,shipTracking:void 0,shippingName:void 0,shippingAddress1:void 0,shippingAddress2:void 0,shippingAddress3:void 0,shipAmount:void 0,shipDate:void 0,shipFob:void 0}}function nP(e){return{calculateInvoiceDate:function(t){if(!(0,eL.isInvoice)(e))return{invoiceDate:(0,l.UW)(t)};{let{termsDay:n}=e.setting;if(!n||!(n>0))return{invoiceDate:(0,l.UW)(t),dueDate:e.setting.dueDate};{let e=new Date(t);return e.setDate(e.getDate()+n),{invoiceDate:(0,l.UW)(t),dueDate:(0,l.UW)(e)}}}},calculateInvoiceTerms:function(t){switch(t){case l.rc.NONE:case l.rc.DUE_ON_RECEIPT:return{termsDay:t,dueDate:void 0};case l.rc.CUSTOM:if((0,eL.isInvoice)(e)){if(e.setting.dueDate)return{termsDay:t,dueDate:e.setting.dueDate};return{termsDay:t,dueDate:(0,l.UW)(new Date)}}return{termsDay:t};default:{let n=(0,l.p6)(e.invoiceDate);return n.setDate(n.getDate()+t),{termsDay:t,dueDate:(0,l.UW)(n)}}}},calculateInvoiceDueDate:function(t){let n={dueDate:(0,l.UW)(t)},a=(0,l.p6)(e.invoiceDate),i=Math.round(((0,l.p6)((0,l.UW)(t)).getTime()-a.getTime())/864e5);return i>0&&Object.values(l.rc).indexOf(i)>-1?{...n,termsDay:i}:{...n,termsDay:l.rc.CUSTOM}}}}function nL(){return[l.rc.NONE,l.rc.CUSTOM,l.rc.DUE_ON_RECEIPT,l.rc.NEXT_DAY,l.rc.DAYS_2,l.rc.DAYS_3,l.rc.DAYS_4,l.rc.DAYS_5,l.rc.DAYS_6,l.rc.DAYS_7,l.rc.DAYS_10,l.rc.DAYS_14,l.rc.DAYS_21,l.rc.DAYS_30,l.rc.DAYS_45,l.rc.DAYS_60,l.rc.DAYS_90,l.rc.DAYS_120,l.rc.DAYS_180,l.rc.DAYS_365]}function n_(e){return(0,eL.isInvoice)(e)&&!(e.setting.termsDay===l.rc.NONE||e.setting.termsDay===l.rc.DUE_ON_RECEIPT)}function nR(e,t){let{invoiceTerms:n}=t;switch(e){case l.rc.NONE:return n.none;case l.rc.CUSTOM:return n.custom;case l.rc.DUE_ON_RECEIPT:return n.dueOnReceipt;case l.rc.NEXT_DAY:return n.nextDay;case l.rc.DAYS_2:return n.days2;case l.rc.DAYS_3:return n.days3;case l.rc.DAYS_4:return n.days4;case l.rc.DAYS_5:return n.days5;case l.rc.DAYS_6:return n.days6;case l.rc.DAYS_7:return n.days7;case l.rc.DAYS_10:return n.days10;case l.rc.DAYS_14:return n.days14;case l.rc.DAYS_21:return n.days21;case l.rc.DAYS_30:return n.days30;case l.rc.DAYS_45:return n.days45;case l.rc.DAYS_60:return n.days60;case l.rc.DAYS_90:return n.days90;case l.rc.DAYS_120:return n.days120;case l.rc.DAYS_180:return n.days180;case l.rc.DAYS_365:return n.days365}}function nT(e){var t,n;let{document:o,onDocumentChange:s,logo:r,onLogoDelete:d,onLogoUpload:c,onLogoError:u,getCurrency:m,locale:h,hasMounted:p,onPhotoUpload:x,onPhotoUploadError:v,onPhotoSave:g,onPhotoSaveError:y,onInvoicePhotoRemove:f,onInvoicePhotoUpdate:b,onInvoicePhotoAddAttempt:j,onInvoicePhotoAdd:w,onPhotoUploadStart:I,onPhotoUploadEnd:C,isFeatureEnabled:N,photos:D,signature:E,onSignatureSave:S,onSignatureDelete:A,onBlur:k,abTests:P,trackEvent:L,onClientChange:_,isMigrated:R}=e,{calculateInvoiceDate:T,calculateInvoiceTerms:M,calculateInvoiceDueDate:U}=nP(o),{client:O=nk(),company:B,invoiceNo:F,invoiceDate:V,items:W}=o,z=o.setting.taxType===l.oA.TAX_NONE,H=eR(P),Y=(0,ni.F)(h),G=null!==(t=eB(h))&&void 0!==t?t:{label:Y.company.businessNumberLabel,placeholder:Y.company.businessNumberPlaceholder};return(0,a.jsxs)("div",{className:"invoice-container","data-sentry-component":"DesktopEditor","data-sentry-source-file":"desktop-editor.tsx",children:[(0,a.jsx)(e4,{accentColor:o.setting.color,"data-sentry-element":"InvoiceAccent","data-sentry-source-file":"desktop-editor.tsx"}),(0,a.jsxs)("div",{className:"invoice-detail-body px-10 py-8",children:[(0,a.jsxs)("div",{className:"invoice-detail-title flex justify-between",children:[(0,a.jsx)(nA,{value:o.title,onChange:e=>s({...o,title:e}),dictionary:Y,disabled:!p,"data-sentry-element":"Title","data-sentry-source-file":"desktop-editor.tsx"}),(0,a.jsx)(nE,{multiple:!1,logoDropDictionary:Y.logoDrop,dropzoneDictionary:Y.dropzone,onDelete:d,onUpload:c,onError:u,photoState:r,trackEvent:L,"data-sentry-element":"LogoDrop","data-sentry-source-file":"desktop-editor.tsx"})]}),(0,a.jsxs)("div",{className:"invoice-detail-header grid grid-cols-2 gap-9",children:[(0,a.jsx)("div",{className:"invoice-contact-business",children:N&&N("additional-business-fields")?(0,a.jsx)(e0,{id:"company",header:Y.company.heading,value:B,onChange:e=>s({...o,company:{...B,...e}}),locale:h,contactDictionary:Y.company,disabled:!p,onBlur:e=>null==k?void 0:k({...o,company:{...B,...e}})}):(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(eJ,{id:"company",header:Y.company.heading,value:B,onChange:e=>s({...o,company:{...B,...e}}),contactDictionary:Y.company,disabled:!p,onBlur:e=>null==k?void 0:k({...o,company:{...B,...e}})}),(0,a.jsx)(eM.I,{id:"company-business-number",label:G.label,labelStyle:{minWidth:"5rem"},placeholder:G.placeholder,value:B.businessNumber,onChange:e=>s({...o,company:{...B,businessNumber:e.target.value}}),disabled:!p})]})}),(0,a.jsx)("div",{children:(0,a.jsx)(eJ,{id:"client",header:Y.client.heading,value:O,onChange:e=>s({...o,client:{...O,...e}}),contactDictionary:Y.client,disabled:!p,isFeatureEnabled:N,onClientChange:_,"data-sentry-element":"Contact","data-sentry-source-file":"desktop-editor.tsx"})})]}),(0,a.jsx)("hr",{className:"my-4"}),(0,a.jsxs)("div",{className:"invoice-detail-terms grid grid-cols-2 gap-9 pb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(tC,{label:Y.invoiceNumber.label,value:eL.ValidInvoiceNumber.is(F)?F:void 0,name:"invoice-number",dictionary:Y.invoiceNumber,onValidInvoiceNumber:e=>{s({...o,invoiceNo:e})},disabled:!p,"data-sentry-element":"InvoiceNumberInput","data-sentry-source-file":"desktop-editor.tsx"},o.remoteId),(0,a.jsx)(e9,{id:"invoice-date",name:"invoice-date",className:"invoice-detail-date",dictionary:Y.datePicker,label:Y.invoiceDateLabel,locale:h,disabled:!p,onChange:e=>{(0,eL.isInvoice)(o)?s({...o,invoiceDate:e?T(e).invoiceDate:V,setting:{...o.setting,dueDate:e?T(e).dueDate:o.setting.dueDate}}):s({...o,invoiceDate:e?T(e).invoiceDate:V})},selected:(0,l.p6)(V),"data-sentry-element":"DatePicker","data-sentry-source-file":"desktop-editor.tsx"}),(0,eL.isInvoice)(o)&&(0,a.jsx)(nS.P,{id:"terms-select",ariaLabel:"Terms Select",label:Y.invoiceTermsLabel,labelStyle:{minWidth:"5rem",color:"#4a5568"},disabled:!p,selected:o.setting.termsDay,possibleValues:nL(),typeToLabel:e=>nR(e,Y),onChange:e=>{let t=M(e);s({...o,setting:{...o.setting,termsDay:t.termsDay,dueDate:t.dueDate}})}}),(0,eL.isInvoice)(o)&&n_(o)&&(0,a.jsx)(e9,{id:"invoice-due-date",name:"invoice-due-date",className:"invoice-detail-due-date",dictionary:Y.datePicker,label:Y.invoiceDueLabel,locale:h,onChange:e=>s({...o,setting:{...o.setting,dueDate:e?U(e).dueDate:o.setting.dueDate,termsDay:e?U(e).termsDay:o.setting.termsDay}}),selected:o.setting.dueDate?(0,l.p6)(o.setting.dueDate):new Date})]}),H&&(0,a.jsx)("div",{"data-testid":"po-number",children:(0,a.jsx)(eM.I,{id:"po-number",label:Y.poNumber,labelStyle:{minWidth:"5rem"},maxLength:50,value:null!==(n=o.poNumber)&&void 0!==n?n:"",onChange:e=>s({...o,poNumber:e.target.value})})})]}),(0,a.jsx)(nI,{invoiceRemoteId:o.remoteId,items:W,itemListDictionary:Y.itemList,itemInputDictionary:Y.itemInput,isInvoiceTaxNone:z,getCurrency:m,onChange:e=>s({...o,items:e}),taxLabel:o.setting.taxLabel,disabled:!p,isMigrated:R,"data-sentry-element":"ItemList","data-sentry-source-file":"desktop-editor.tsx"}),(0,a.jsx)("hr",{className:"my-2"}),(0,a.jsx)(na,{document:o,isInvoiceTaxNone:z,dictionary:Y.invoiceTotals,getCurrency:m,"data-sentry-element":"InvoiceTotals","data-sentry-source-file":"desktop-editor.tsx"}),(0,a.jsx)(tb,{id:"invoice-notes",onChange:e=>s({...o,notes:e}),minRows:5.8,maxRows:20,dictionary:Y.invoiceNotes,invoiceRemoteId:o.remoteId,disabled:!p,value:o.notes,items:o.items,company:o.company,"data-sentry-element":"InvoiceNotes","data-sentry-source-file":"desktop-editor.tsx"}),N&&N("invoice-signature")&&(0,a.jsx)(t8,{locale:h,signature:E,onSave:S,onDelete:A,dictionary:Y.invoiceSignature}),N&&N("invoice-photos")&&(0,a.jsx)(tK,{id:"invoice-photo-list",onPhotoUpload:x,onUploadStart:I,onUploadEnd:C,onPhotoUploadError:v,onPhotoSave:g,onPhotoSaveError:y,onInvoicePhotoRemove:f,onInvoicePhotoUpdate:b,onInvoicePhotoAddAttempt:j,onInvoicePhotoAdd:w,trackEvent:L,photos:D,invoicePhotoListDictionary:Y.invoicePhotoListDictionary,invoicePhotoDictionary:Y.invoicePhotoDictionary,addInvoicePhotoDictionary:Y.addInvoicePhotoDictionary,invoiceModalDictionary:Y.invoiceModalDictionary,dropzoneDictionary:Y.dropzone})]})]})}function nM(e){return(0,a.jsx)(i.Fragment,{children:(0,a.jsxs)("button",{className:"add-button-mobile inline-flex rounded items-center border text-xs",style:{padding:"8px 16px",backgroundColor:"#555555"},id:e.id,title:e.title,disabled:e.disabled,onClick:e.onClick,children:[(0,a.jsx)(t$,{mobile:!0,"data-sentry-element":"Plus","data-sentry-source-file":"add-button-mobile.tsx"}),(0,a.jsx)("span",{className:"text-white font-light ml-1",children:e.buttonText})]})})}function nU(e){let{id:t,header:n,value:o,disabled:s,onChange:r,onBlur:l,isFeatureEnabled:d,contactDictionary:c,onClientChange:u}=e,{name:m,email:h,phone:p,address1:x,mobile:v,fax:g}=o,[y,f]=(0,i.useState)("string"==typeof x),[b,j]=(0,i.useState)("string"==typeof p),{namePlaceholder:w,emailPlaceholder:I,phonePlaceholder:C}=c,N="-mobile";return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)("div",{className:"invoice-contact-header text-xl text-gray-600 font-medium",children:n}),u?(0,a.jsx)(eK,{contactDictionary:c,onSelect:function(e){u({...e,clientRemoteId:e.remoteId,isUpdating:!0})},onChange:function(e){let t=e.target.value;u({...o||{},name:t})},onReset:function(){u({address1:"",address2:"",address3:"",email:"",name:"",phone:"",mobile:"",fax:"",remoteId:"",clientRemoteId:""})},value:o.name||"",disabled:!!s}):(0,a.jsx)(eM.I,{id:"".concat(t,"-name-").concat(N),placeholder:w,disabled:s,value:m,onChange:e=>r({...o,name:e.target.value}),onBlur:e=>null==l?void 0:l({...o,name:e.target.value})}),(0,a.jsx)(eO.U,{name:"".concat(t,"-email-").concat(N),placeholder:I,disabled:s,value:h,onChange:e=>{""===e.target.value&&r({...o,email:void 0})},onValidEmail:e=>r({...o,email:e}),"data-sentry-element":"EmailInput","data-sentry-source-file":"contact-mobile.tsx"},"".concat(t,"-email")),y&&(0,a.jsx)(eU,{id:"".concat(t,"-address-").concat(N),value:o,disabled:s,onChange:e=>r({...o,...e}),addressDictionary:c}),b&&(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(eM.I,{id:"".concat(t,"-phone-").concat(N),placeholder:d&&d("mobile-fax-client-fields")?"Client Phone E.g. (123) 456 789":C,disabled:s,maxLength:200,value:p,onChange:e=>r({...o,phone:e.target.value}),onBlur:e=>null==l?void 0:l({...o,phone:e.target.value})}),"client"===t&&d&&d("mobile-fax-client-fields")&&(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(eM.I,{id:"".concat(t,"-mobile"),placeholder:"Client Mobile E.g. (123) 456 789",value:v,disabled:s,maxLength:200,onChange:e=>r({...o,mobile:e.target.value})}),(0,a.jsx)(eM.I,{id:"".concat(t,"-fax"),placeholder:"Client Fax E.g. (123) 456 789",value:g,disabled:s,maxLength:200,onChange:e=>r({...o,fax:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end",children:[!y&&(0,a.jsx)("span",{children:(0,a.jsx)(nM,{id:"add-address-".concat(N),title:"Add Address",buttonText:c.address1Label,disabled:s,onClick:()=>f(!0)})}),!b&&(0,a.jsx)("span",{className:"ml-2",children:(0,a.jsx)(nM,{id:"add-phone-".concat(N),title:"Add Phone",buttonText:c.phoneLabel,disabled:s,onClick:()=>j(!0)})})]})]})}function nO(e){let{id:t,header:n,value:o,disabled:s,onChange:r,onBlur:l,contactDictionary:d}=e,{name:c,email:u,phone:m,address1:h,website:p,ownerName:x}=o,[v,g]=(0,i.useState)("string"==typeof h),[y,f]=(0,i.useState)("string"==typeof m),[b,j]=(0,i.useState)("string"==typeof p),[w,I]=(0,i.useState)("string"==typeof x),{namePlaceholder:C,emailPlaceholder:N,phonePlaceholder:D}=d,E="-mobile",S=!(v&&y&&b&&w);return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)("div",{className:"invoice-contact-header text-xl text-gray-600 font-medium",children:n}),(0,a.jsx)(eM.I,{id:"".concat(t,"-name-").concat(E),placeholder:C,disabled:s,value:c,onChange:e=>r({...o,name:e.target.value}),onBlur:e=>null==l?void 0:l({...o,name:e.target.value}),"data-sentry-element":"Input","data-sentry-source-file":"contact-mobile.tsx"}),(0,a.jsx)(eO.U,{name:"".concat(t,"-email-").concat(E),placeholder:N,disabled:s,value:u,onChange:e=>{""===e.target.value&&r({...o,email:void 0})},onValidEmail:e=>r({...o,email:e}),"data-sentry-element":"EmailInput","data-sentry-source-file":"contact-mobile.tsx"},"".concat(t,"-email")),v&&(0,a.jsx)(eU,{id:"".concat(t,"-address-").concat(E),value:o,disabled:s,onChange:e=>r({...o,...e}),addressDictionary:d}),y&&(0,a.jsx)(eM.I,{id:"".concat(t,"-phone-").concat(E),placeholder:D,disabled:s,maxLength:200,value:m,onChange:e=>r({...o,phone:e.target.value}),onBlur:e=>null==l?void 0:l({...o,phone:e.target.value})}),b&&(0,a.jsx)(eM.I,{id:"".concat(t,"-website-").concat(E),placeholder:"https://example-website.com",disabled:s,value:p,onChange:e=>r({...o,website:e.target.value})}),w&&(0,a.jsx)(eM.I,{id:"".concat(t,"-owner-").concat(E),placeholder:"Business owner name",disabled:s,value:x,onChange:e=>r({...o,ownerName:e.target.value})}),S&&(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(nM,{id:"show-additional-fields-".concat(E),title:"Show additional business details",buttonText:"Additional Business Details",disabled:s,onClick:()=>{g(!0),f(!0),j(!0),I(!0)}})})]})}let nB="inline-flex rounded border items-center text-xs",nF={padding:"8px 16px"};function nV(e){let{onClick:t,dictionary:n,disabled:i}=e;return(0,a.jsxs)("button",{className:"btn-delete-mobile ".concat(nB),style:nF,onClick:t,disabled:i,"data-sentry-component":"DeleteButton","data-sentry-source-file":"item-delete-button-mobile.tsx",children:[(0,a.jsx)(ns,{mobile:!0,"data-sentry-element":"Delete","data-sentry-source-file":"item-delete-button-mobile.tsx"}),(0,a.jsx)("span",{className:"text-gray-800 font-light ml-1",children:n.deleteMessage})]})}function nW(e){let{onClick:t,dictionary:n}=e;return(0,a.jsx)("button",{className:"btn-cancel-delete-mobile ml-2 ".concat(nB),style:nF,onClick:t,"data-sentry-component":"CancelButton","data-sentry-source-file":"item-delete-button-mobile.tsx",children:(0,a.jsx)("span",{className:"text-gray-800 font-light",children:n.cancelDeleteMessage})})}function nz(e){let{onClick:t,dictionary:n}=e;return(0,a.jsx)("button",{className:"btn-confirm-delete-mobile ".concat(nB),style:{...nF,backgroundColor:"#555555"},onClick:t,"data-sentry-component":"ConfirmButton","data-sentry-source-file":"item-delete-button-mobile.tsx",children:(0,a.jsx)("span",{className:"text-white font-light",children:n.confirmDeleteMessage})})}function nH(e){let{onDelete:t,dictionary:n,disabled:o}=e,[s,r]=(0,i.useState)(!1);return(0,a.jsx)(i.Fragment,{children:s?(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(nz,{onClick:()=>{r(!1),t()},dictionary:n}),(0,a.jsx)(nW,{onClick:()=>r(!1),dictionary:n})]}):(0,a.jsx)(nV,{onClick:()=>r(!0),dictionary:n,disabled:o})})}function nY(e){let[t,n]=(0,i.useState)(""),[o,s]=(0,i.useState)(!1),r=(0,i.useRef)(0),{trackInstantFormEvent:l}=(0,B.D)(),d=(0,e8.s)("ai_notes_rewrite").enabled,c=(0,i.useMemo)(()=>[{code:e.item.code,description:t||e.item.description||""}],[e.item.code,e.item.description,t]),u=t||e.item.description||"",{mutate:m,isLoading:h}=ty({targetType:tn,currentAiOutput:t,inputValue:u,items:c,onSuccess:n,onSetRefineDisabled:s,onClearAiOutput:()=>n("")}),p=t=>{e.onItemChange({...e.item,code:t.target.value})},x=e.disabled||h;return(0,a.jsxs)("div",{className:"invoice-item block","data-sentry-component":"ItemInputMobile","data-sentry-source-file":"item-input-mobile.tsx",children:[(0,a.jsx)("div",{className:"invoice-item-code",children:e.isMigrated?(0,a.jsx)(nj,{onSelect:t=>{e.onItemChange({...e.item,remoteId:(0,ex.Z)(),code:t.code,description:t.description,rate:t.rate,unit:t.unit,taxable:t.taxable,isUpdating:!0})},value:e.item.code,onChange:p,disabled:x,itemInputDictionary:e.dictionary}):(0,a.jsx)("input",{type:"text",className:(0,e6.cn)("form-input block w-full text-xs rounded border border-gray-400 py-2 px-5 leading-5",{"text-gray-400":x}),value:e.item.code,id:"item-code-".concat(e.index+1),placeholder:e.dictionary.placeholderCode,disabled:x,onChange:p})}),(0,a.jsxs)("div",{className:"invoice-item-description pt-2 overflow-x-auto",children:[(0,a.jsx)("div",{className:"item-row-description mb-2",children:(0,a.jsx)(e5.Z,{className:(0,e6.cn)("form-input block w-full text-xs rounded border border-gray-400 py-2 px-5 leading-5 focus:text-gray-600",{"cursor-not-allowed text-gray-400":x}),placeholder:e.dictionary.placeholderDescription,minRows:3,maxRows:10,value:u,disabled:x,onChange:a=>{if(t){o&&s(!1),n(a.target.value);return}e.onItemChange({...e.item,description:a.target.value})},"data-sentry-element":"TextareaAutosize","data-sentry-source-file":"item-input-mobile.tsx"})}),d&&(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(no,{isLoading:h,disabled:!e.item.description,refineDisabled:o,generatedInput:t,onRewrite:()=>{let n=t?"refine":"rewrite",a=r.current+1,i={feature:"ai-rewrite-item",action:n,refineCount:"refine"===n?a:r.current,invoiceRemoteId:e.invoiceRemoteId,itemRemoteId:e.item.remoteId,text:""};tf("web-button-click",i),l("web-button-click",i),"refine"===n&&(r.current=a),s(!1),m()},onAccept:()=>{let a={feature:"ai-rewrite-item",action:"save",refineCount:r.current,invoiceRemoteId:e.invoiceRemoteId,itemRemoteId:e.item.remoteId,text:""};tf("web-button-click",a),l("web-button-click",a),e.onItemChange({...e.item,description:t}),n(""),r.current=0},onCancel:()=>{let t={feature:"ai-rewrite-item",action:"cancel",refineCount:r.current,invoiceRemoteId:e.invoiceRemoteId,itemRemoteId:e.item.remoteId,text:""};tf("web-button-click",t),l("web-button-click",t),n(""),r.current=0}})})]}),(0,a.jsxs)("div",{className:"invoice-item-numbers flex justify-between items-center pt-2 overflow-x-auto",children:[(0,a.jsxs)("div",{className:"flex w-7/12 items-center",children:[(0,a.jsx)(ng,{className:"item-rate form-input w-full text-xs rounded border border-gray-400 py-2 px-5 leading-5",style:!1,placeholder:e.dictionary.placeholderRate,value:e.item.rate||void 0,disabled:x,onChange:t=>{e.onItemChange({...e.item,rate:t||0})},"data-sentry-element":"ItemRate","data-sentry-source-file":"item-input-mobile.tsx"}),(0,a.jsx)("span",{className:"multiplication-sign mx-2 font-light",children:"x"}),(0,a.jsx)(nv,{style:!1,className:"item-quantity form-input w-4/5 text-xs rounded border border-gray-400 py-2 px-5 leading-5",placeholder:void 0,value:e.item.quantity,disabled:x,onChange:t=>{e.onItemChange({...e.item,quantity:t||0})},"data-sentry-element":"ItemQuantity","data-sentry-source-file":"item-input-mobile.tsx"})]}),(0,a.jsx)("div",{className:"invoice-item-total-container",children:(0,a.jsx)(ne,{className:"item-total",value:+(0,t3.Rg)(e.item),getCurrency:e.getCurrency,"data-sentry-element":"LocalizedCurrency","data-sentry-source-file":"item-input-mobile.tsx"})})]})]})}function nG(e){let{trackInstantFormEvent:t}=(0,B.D)();function n(){e.onChange([...e.items,(0,eL.createDefaultDocumentItem)()]),t("invoice-item-add",{platform:l.t4.WEB})}let i=e.items.map((i,o)=>{let s=o===e.items.length-1;return(0,a.jsxs)("div",{className:"invoice-item-container pt-2",children:[(0,a.jsx)(nY,{invoiceRemoteId:e.invoiceRemoteId,item:i,index:o,dictionary:e.itemInputDictionary,getCurrency:e.getCurrency,disabled:e.disabled,onItemChange:t=>{e.onChange([...e.items.slice(0,o),t,...e.items.slice(o+1)])},isMigrated:e.isMigrated}),(0,a.jsxs)("div",{className:"invoice-item-actions flex flex-row-reverse justify-between pt-2",children:[(0,a.jsx)("div",{className:"delete-item-button-container",children:(0,a.jsx)(nH,{onDelete:()=>{e.onChange([...e.items.slice(0,o),...e.items.slice(o+1)]),t("invoice-item-remove",{platform:l.t4.WEB})},dictionary:e.itemDeleteButtonDictionary,disabled:e.disabled})}),s&&(0,a.jsx)("div",{className:"add-item-button-container",children:(0,a.jsx)(nM,{id:"add-item-button",title:"Add Invoice Item",buttonText:"Item",disabled:e.disabled,onClick:n})})]})]},i.remoteId)});return(0,a.jsxs)("div",{className:"invoice-item-list-container","data-sentry-component":"ItemListMobile","data-sentry-source-file":"item-list-mobile.tsx",children:[i,0===e.items.length&&(0,a.jsx)("div",{className:"add-item-button-container pt-2",children:(0,a.jsx)(nM,{id:"add-item-button",title:"Add Invoice Item",buttonText:"Item",onClick:n,disabled:e.disabled})})]})}function nZ(e){var t;let{document:n,onDocumentChange:i,logo:o,onLogoDelete:s,onLogoUpload:r,onLogoError:d,getCurrency:c,locale:u,hasMounted:m,onPhotoUpload:h,onPhotoUploadError:p,onPhotoSave:x,onPhotoSaveError:v,onInvoicePhotoRemove:g,onInvoicePhotoUpdate:y,onInvoicePhotoAddAttempt:f,onInvoicePhotoAdd:b,onPhotoUploadStart:j,onPhotoUploadEnd:w,isFeatureEnabled:I,photos:C,signature:N,onSignatureSave:D,onSignatureDelete:E,onBlur:S,abTests:A,trackEvent:k,onClientChange:P,isMigrated:L}=e,{calculateInvoiceDate:_,calculateInvoiceTerms:R,calculateInvoiceDueDate:T}=nP(n),{client:M=nk(),company:U,invoiceNo:O,invoiceDate:B,items:F}=n,V=n.setting.taxType===l.oA.TAX_NONE,W=(0,ni.F)(u),z=eR(A);return(0,a.jsxs)("div",{className:"invoice-container","data-sentry-component":"MobileEditor","data-sentry-source-file":"mobile-editor.tsx",children:[(0,a.jsx)(e4,{accentColor:n.setting.color,"data-sentry-element":"InvoiceAccent","data-sentry-source-file":"mobile-editor.tsx"}),(0,a.jsxs)("div",{className:"invoice-detail-body px-4 py-3",children:[(0,a.jsxs)("div",{className:"invoice-detail-title flex justify-between",children:[(0,a.jsx)("div",{className:"invoice-title text-2xl font-medium text-gray-600 tracking-wide leading-5",children:n.title||W.invoiceTitle}),(0,a.jsx)(nE,{mobile:!0,multiple:!1,logoDropDictionary:W.logoDrop,dropzoneDictionary:W.dropzone,onDelete:s,onUpload:r,onError:d,photoState:o,trackEvent:k,"data-sentry-element":"LogoDrop","data-sentry-source-file":"mobile-editor.tsx"})]}),(0,a.jsxs)("div",{className:"invoice-detail-header pb-2",children:[(0,a.jsx)("div",{className:"invoice-contact-business",children:I&&I("additional-business-fields")?(0,a.jsx)(nO,{id:"company",header:W.company.heading,value:U,onChange:e=>i({...n,company:{...U,...e}}),contactDictionary:W.company,disabled:!m,onBlur:e=>null==S?void 0:S({...n,company:{...U,...e}})}):(0,a.jsx)(nU,{id:"company",header:W.company.heading,value:U,onChange:e=>i({...n,company:{...U,...e}}),contactDictionary:W.company,disabled:!m,onBlur:e=>null==S?void 0:S({...n,company:{...U,...e}})})}),(0,a.jsx)("div",{className:"invoice-contact-client",children:(0,a.jsx)(nU,{id:"client",header:W.client.heading,value:M,onChange:e=>i({...n,client:{...M,...e}}),contactDictionary:W.client,disabled:!m,isFeatureEnabled:I,onClientChange:P,"data-sentry-element":"ContactMobile","data-sentry-source-file":"mobile-editor.tsx"})})]}),(0,a.jsx)(nG,{invoiceRemoteId:n.remoteId,items:F,itemListDictionary:W.itemList,itemInputDictionary:W.itemInputMobile,itemDeleteButtonDictionary:W.itemDeleteButton,getCurrency:c,onChange:e=>i({...n,items:e}),disabled:!m,isMigrated:L,"data-sentry-element":"ItemListMobile","data-sentry-source-file":"mobile-editor.tsx"}),(0,a.jsx)("hr",{className:"my-3"}),(0,a.jsx)(na,{mobile:!0,document:n,isInvoiceTaxNone:V,dictionary:W.invoiceTotals,getCurrency:c,"data-sentry-element":"InvoiceTotals","data-sentry-source-file":"mobile-editor.tsx"}),(0,a.jsx)("hr",{className:"my-3"}),(0,a.jsxs)("div",{className:"invoice-detail-terms",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(tC,{mobile:!0,label:W.invoiceNumber.label,value:eL.ValidInvoiceNumber.is(O)?O:void 0,name:"invoice-number-mobile",dictionary:W.invoiceNumber,disabled:!m,onValidInvoiceNumber:e=>{i({...n,invoiceNo:e})},"data-sentry-element":"InvoiceNumberInput","data-sentry-source-file":"mobile-editor.tsx"},n.remoteId),(0,a.jsx)(e9,{mobile:!0,id:"invoice-date-mobile",locale:u,name:"invoice-date",className:"invoice-detail-date",dictionary:W.datePicker,label:W.invoiceDateLabel,disabled:!m,onChange:e=>{(0,eL.isInvoice)(n)?i({...n,invoiceDate:e?_(e).invoiceDate:B,setting:{...n.setting,dueDate:e?_(e).dueDate:n.setting.dueDate}}):i({...n,invoiceDate:e?_(e).invoiceDate:B})},selected:(0,l.p6)(B),"data-sentry-element":"DatePicker","data-sentry-source-file":"mobile-editor.tsx"}),(0,eL.isInvoice)(n)&&(0,a.jsx)(nS.P,{mobile:!0,id:"terms-select",ariaLabel:"Terms Select",label:W.invoiceTermsLabel,labelStyle:{color:"#4a5568"},disabled:!m,selected:n.setting.termsDay,possibleValues:nL(),typeToLabel:e=>nR(e,W),onChange:e=>{let t=R(e);i({...n,setting:{...n.setting,termsDay:t.termsDay,dueDate:t.dueDate}})}}),(0,eL.isInvoice)(n)&&n_(n)&&(0,a.jsx)(e9,{mobile:!0,id:"invoice-due-date",name:"invoice-due-date",className:"invoice-detail-due-date",dictionary:W.datePicker,locale:u,label:W.invoiceDueLabel,onChange:e=>i({...n,setting:{...n.setting,dueDate:e?T(e).dueDate:n.setting.dueDate,termsDay:e?T(e).termsDay:n.setting.termsDay}}),selected:n.setting.dueDate?(0,l.p6)(n.setting.dueDate):new Date,disabled:!m})]}),z&&(0,a.jsx)("div",{children:(0,a.jsx)(eM.I,{mobile:!0,id:"po-number",label:W.poNumber,labelStyle:{fontWeight:400},maxLength:50,value:null!==(t=n.poNumber)&&void 0!==t?t:"",onChange:e=>i({...n,poNumber:e.target.value})})})]}),(0,a.jsx)(tb,{id:"invoice-notes",onChange:e=>i({...n,notes:e}),minRows:5.8,maxRows:20,dictionary:W.invoiceNotes,disabled:!m,invoiceRemoteId:n.remoteId,value:n.notes,items:n.items,company:n.company,"data-sentry-element":"InvoiceNotes","data-sentry-source-file":"mobile-editor.tsx"}),I&&I("invoice-signature")&&(0,a.jsx)(t8,{locale:u,signature:N,onSave:D,onDelete:E,dictionary:W.invoiceSignature}),I&&I("invoice-photos")&&(0,a.jsx)(tK,{id:"invoice-photo-list",onPhotoUpload:h,onUploadStart:j,onUploadEnd:w,onPhotoUploadError:p,onPhotoSave:x,onPhotoSaveError:v,onInvoicePhotoRemove:g,onInvoicePhotoUpdate:y,onInvoicePhotoAddAttempt:f,onInvoicePhotoAdd:b,trackEvent:k,photos:C,invoicePhotoListDictionary:W.invoicePhotoListDictionary,invoicePhotoDictionary:W.invoicePhotoDictionary,addInvoicePhotoDictionary:W.addInvoicePhotoDictionary,invoiceModalDictionary:W.invoiceModalDictionary,dropzoneDictionary:W.dropzone})]})]})}n(55145);var nq=n(93985),nX=n(81964),nQ=n(98523);function nK(e){var t,o;let{currentLocale:s,country:r,abtests:d,documentId:c,defaultSettings:u,defaultLogo:m,docType:h,settings:p,hasAcknowledgedTerms:g}=e;(0,i.useEffect)(()=>{N(!0)},[]);let[f,N]=(0,i.useState)(!1),{user:D,isFirstTimer:S,trackAction:A}=(0,B.D)();f||A("app-ready",{country:r||""});let{data:T}=(0,E.useQuery)((0,eI.x)({documentId:c},{enabled:!!c,refetchOnWindowFocus:!1,refetchOnMount:!1})),M=null==T?void 0:T.document,U=(null==T?void 0:T.logo)||m,O=null==T?void 0:null===(t=T.signature)||void 0===t?void 0:t.url,F=(0,ej.y)(u,l.Vd.CompanyName),V=(0,ej.y)(u,l.Vd.ContactName),W=(0,ej.y)(u,l.Vd.ContactEmail),H=(0,ej.y)(u,l.Vd.ContactPhone),q=(0,ej.y)(u,l.Vd.CompanyBusinessNumber),X=(0,ej.y)(u,l.Vd.CompanyAddressLine1),J=(0,ej.y)(u,l.Vd.CompanyAddressLine2),ee=(0,ej.y)(u,l.Vd.CompanyAddressLine3),et=(0,ej.y)(u,l.Vd.ContactWebsiteUrl),en=(0,ej.y)(u,l.Vd.ThemeColor),ea=(0,ej.y)(u,l.Vd.ThemeTemplate),{f:ei,ft:eo}=(0,ev.Y)(),er=(0,ej.y)(u,l.Vd.RenameInvoiceTitle),ed=(0,ej.y)(u,l.Vd.RenameEstimateTitle),ec=(0,ej.y)(u,l.Vd.EstimateSignatureRequired),eu=(0,ej.y)(u,l.Vd.AcornFinancing),em=(0,ej.y)(u,l.Vd.DefaultInvoiceNote),eL=(0,ej.y)(u,l.Vd.DefaultEstimateNote),e_=(0,eb.A)(u),eR=(null==en?void 0:en.valStr)||$.SQ,eT=(0,ef.N)(D,null==ea?void 0:ea.valNum),eM=(null==M?void 0:M.title)?M.title:h===l.ow.DOCTYPE_STATEMENT?eo({id:(0,eg.qm)(h)}):h===l.ow.DOCTYPE_INVOICE?(null==er?void 0:er.valStr)||eo({id:(0,eg.qm)(h)}):(null==ed?void 0:ed.valStr)||eo({id:(0,eg.qm)(h)}),eU={company:null==F?void 0:F.valStr,name:null==V?void 0:V.valStr,email:null==W?void 0:W.valStr,phone:null==H?void 0:H.valStr,businessName:null==V?void 0:V.valStr,businessNumber:null==q?void 0:q.valStr,address1:null==X?void 0:X.valStr,address2:null==J?void 0:J.valStr,address3:null==ee?void 0:ee.valStr,website:null==et?void 0:et.valStr,ownerName:null==V?void 0:V.valStr,remoteId:(0,ex.Z)(),...null==M?void 0:M.company},eO=(null==M?void 0:M.notes)||(h===l.ow.DOCTYPE_INVOICE?null==em?void 0:em.valStr:null==eL?void 0:eL.valStr),{doc_limit_messaging:eB,acorn_financing_web:eF}=(0,eA.V)(["acorn_financing_web","doc_limit_messaging"]),eV=!!(null==eB?void 0:eB.enabled),eW=!!(null==eF?void 0:eF.enabled),{document:ez,updateDocument:eH,isSaving:eY}=(0,P.k)({defaultColor:eR,defaultTemplate:eT,defaultFeesType:e_,docType:h,defaultDocument:{title:eM,...M,company:eU,notes:eO},estimateSignatureRequired:null==ec?void 0:ec.valBool,acornFinancing:eW?null===(o=null==eu?void 0:eu.valBool)||void 0===o||o:void 0,isNewDoc:!(null==M?void 0:M.objectId),isEditor:!0}),{updateClient:eG,currentClient:eZ}=function(e){let[t,n]=(0,i.useState)(e),a=!!(t&&t.name&&(t.address1||t.address2||t.address3||t.fax||t.email||t.mobile||t.phone)),o=(0,I.N)(t,500);return(0,i.useEffect)(()=>{(async()=>{if(o&&a){let{isUpdating:t,...a}=o;try{let i=await C({client:a,isUpdating:!!e||t});if(i&&i.newObjectId){let e=i.newObjectId;n({...o,objectId:e})}}catch(e){e instanceof Error&&w.D.error("useClient",e)}}})()},[o]),{updateClient:n,currentClient:t}}(null==M?void 0:M.client),{updateItems:eq,currentItems:eX}=function(e){let[t,n]=(0,i.useState)(e||[]),[a,o]=(0,i.useState)(Y()(e,"remoteId")||[]),s=(0,I.N)(t,500);return(0,i.useEffect)(()=>{(async()=>{if(s)try{s.filter(e=>{let t=a[e.remoteId];return!t||Z(t,e)}).forEach(async(e,t)=>{if(!(e&&e.code&&e.rate))return;let{isUpdating:i,...r}=e,l=await G({item:r,isUpdating:!!a[e.remoteId]||i});if(l&&l.newObjectId){let a=l.newObjectId,i={...s[t],objectId:a};s[t]=i,o(t=>({...t,[e.remoteId]:i})),n(s)}else o(t=>({...t,[e.remoteId]:e}))})}catch(e){w.D.error("useItems",e)}})()},[s]),{updateItems:n,currentItems:t}}(null==M?void 0:M.items),{currency:eQ,currencyOptions:eK,updateCurrency:e$}=(0,nQ.S)(),{logo:eJ,onLogoDelete:e0,onLogoUpload:e1,onLogoError:e2}=(0,$.uP)(U),e9=function(e){let[t,a]=(0,i.useState)(),{brazeLoaded:o}=y();return(0,i.useEffect)(()=>{Promise.all([n.e(5609),n.e(8843)]).then(n.bind(n,8843)).then(n=>{let{getUser:a}=n;if(o&&void 0!==t){var i;let n=t.trim();null===(i=a())||void 0===i||i.setCustomUserAttribute(e,b()(n)?null:n)}})},[o,t]),a}(j.K.COMPANY_NAME),e4=function(e){let[t,a]=(0,i.useState)(),{brazeLoaded:o}=y();return(0,i.useEffect)(()=>{if(o&&void 0!==t){let a=t.trim();e===j.Z.PHONE?Promise.all([n.e(5609),n.e(8843)]).then(n.bind(n,8843)).then(e=>{var t;let{getUser:n}=e;null===(t=n())||void 0===t||t.setPhoneNumber(b()(a)?null:a)}):w.D.error("No Braze function declared for the attribute: ".concat(e))}},[t]),a}(j.Z.PHONE),{shouldShowRecordPayment:e5}=(0,_.o)({document:ez,abtests:d,country:r});(0,ey.R)();let e6=s||x.locale;function e8(e){return(0,l.n4)({number:e,currencyCode:eQ.value})}function e3(e){e1(e),ez.objectId||eH(ez)}let{isPaypalEligible:e7}=(0,eE.G)();(0,i.useEffect)(()=>{M&&eH(M)},[M]);let te=(0,a.jsx)(nX.p,{document:ez,defaultSettings:u,locale:e6,onUpdateDocument:eH,currency:eQ,currencyOptions:eK,updateCurrency:e$,dictionary:(0,ni.F)(e6),shouldShowPreviewEmail:!0,shouldShowShareButtons:!0,shouldShowPayments:e7(),country:r}),tt=Q({document:ez,updateDocument:eH}),tn=z({document:ez,updateDocument:eH,signatureUrl:O}),ta=es("client"),ti=e=>{var t,n;eH(e),eG({...e.client,objectId:null==eZ?void 0:eZ.objectId}),eq(e.items.map(e=>{let t=eX.find(t=>t.remoteId===e.remoteId);return{...e,objectId:null==t?void 0:t.objectId}})),el({abtests:d,toggleOpen:(null==ta?void 0:ta.toggleOpen)||(()=>{}),name:null===(t=e.client)||void 0===t?void 0:t.name,email:null===(n=e.client)||void 0===n?void 0:n.email,country:r})},to=e=>{let{company:t}=e;e9(t.name),e4(t.phone)},ts=(0,a.jsx)(nq.c,{document:ez,updateDocument:eH}),{isDeleting:tr}=(0,eD.s)(),tl=(0,ep.usePathname)(),td=(0,eC.VZ)(tl,S);return(0,a.jsxs)("div",{"data-sentry-component":"InvoiceEditorMigrated","data-sentry-source-file":"invoice-editor-migrated.tsx",children:[(0,a.jsx)(eh,{currentLocale:s,termsAcknowledged:g,dictionary:(0,ni.F)(e6).termsAcknowledgementDictionary,"data-sentry-element":"TermsAcknowledgement","data-sentry-source-file":"invoice-editor-migrated.tsx"}),(0,a.jsxs)("div",{className:"bg-gray-100 pb-5",children:[(0,a.jsx)(v,{"data-sentry-element":"Alert","data-sentry-source-file":"invoice-editor-migrated.tsx"}),td&&(0,a.jsx)(eP.Z,{className:"pt-[8px]",children:(0,a.jsx)(eN.m,{left:(0,a.jsx)("h1",{className:"font-[600] text-[20px] text-[#555555] sm:block",children:ei((0,eC.tF)(tl)?{id:"seo.estimate.title"}:(0,eC.Wf)(tl)?{id:"seo.receipt.title"}:{id:"seo.invoice.title"})})})}),(0,a.jsxs)(eP.Z,{className:td?"pt-0":"pt-6","data-sentry-element":"DocumentPageContainer","data-sentry-source-file":"invoice-editor-migrated.tsx",children:[(0,a.jsx)(K.Hi,{"data-sentry-element":"Desktop","data-sentry-source-file":"invoice-editor-migrated.tsx",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"col-span-3",children:[h===l.ow.DOCTYPE_INVOICE&&eV&&(0,a.jsx)(eS.j,{source:"invoice-editor"}),(0,a.jsx)(ek.K,{settings:p,document:ez,"data-sentry-element":"InvoicePaidBanner","data-sentry-source-file":"invoice-editor-migrated.tsx"}),(0,a.jsx)(L.A,{isSavingDocument:eY,onDocumentChange:ti,document:ez,disabled:!f||ez.deleted||tr,abtests:d,country:r,docType:h,settings:p,"data-sentry-element":"InvoiceActionsMigrated","data-sentry-source-file":"invoice-editor-migrated.tsx"}),ts,(0,a.jsx)("div",{className:"shadow-lg bg-white",children:(0,a.jsx)(nT,{document:ez,onDocumentChange:ti,onBlur:to,logo:eJ,onLogoDelete:e0,onLogoUpload:e3,onLogoError:e2,getCurrency:e8,locale:e6,hasMounted:f&&!ez.deleted&&!tr,isFeatureEnabled:()=>!0,trackEvent:A,onClientChange:e=>{ti({...ez,client:e})},isMigrated:!0,...tt,...tn,"data-sentry-element":"DesktopEditor","data-sentry-source-file":"invoice-editor-migrated.tsx"})}),(0,a.jsx)(ew.R,{documentId:ez.objectId,docType:h,"data-sentry-element":"DocumentFooter","data-sentry-source-file":"invoice-editor-migrated.tsx"})]}),(0,a.jsx)("div",{className:"col-span-1",children:te})]})}),(0,a.jsxs)(K.ij,{"data-sentry-element":"Mobile","data-sentry-source-file":"invoice-editor-migrated.tsx",children:[h===l.ow.DOCTYPE_INVOICE&&eV&&(0,a.jsx)(eS.j,{source:"invoice-editor"}),(0,a.jsx)(ek.K,{settings:p,document:ez,"data-sentry-element":"InvoicePaidBanner","data-sentry-source-file":"invoice-editor-migrated.tsx"}),(0,a.jsx)(L.A,{isSavingDocument:eY,onDocumentChange:ti,document:ez,disabled:!f||ez.deleted||tr,abtests:d,country:r,docType:h,settings:p,"data-sentry-element":"InvoiceActionsMigrated","data-sentry-source-file":"invoice-editor-migrated.tsx"}),ts,(0,a.jsx)("div",{className:"shadow-lg bg-white",children:(0,a.jsx)(nZ,{document:ez,onDocumentChange:ti,onBlur:to,logo:eJ,onLogoDelete:e0,onLogoUpload:e3,onLogoError:e2,getCurrency:e8,locale:e6,hasMounted:f&&!ez.deleted&&!tr,isFeatureEnabled:()=>!0,trackEvent:A,isMigrated:!0,onClientChange:e=>{ti({...ez,client:e})},...tt,...tn,"data-sentry-element":"MobileEditor","data-sentry-source-file":"invoice-editor-migrated.tsx"})}),(0,a.jsx)(ew.R,{documentId:ez.objectId,docType:h,"data-sentry-element":"DocumentFooter","data-sentry-source-file":"invoice-editor-migrated.tsx"}),e5&&(0,a.jsx)(R.C,{document:ez,disabled:!f,className:"w-full justify-center mt-4"}),(0,a.jsx)("div",{className:"mt-4",children:te})]})]})]}),(0,a.jsx)(k,{"data-sentry-element":"DevFooter","data-sentry-source-file":"invoice-editor-migrated.tsx"})]})}var n$=n(89136),nJ=n(38868);let n0=r.Ry({objectId:r.Z_(),abtests:r.G0([r.IM(r.Z_(),r.Rx()),r.S1()])}),n1=r.Ry({objectId:r.Z_(),sessionToken:r.Z_()});function n2(e){let{country:t,locale:o,extractedVariables:r,account:d,request:p,user:x,settings:v,documentId:g,logo:y,docType:f=l.ow.DOCTYPE_INVOICE,hasAcknowledgedTerms:b}=e;(0,c.o9)(r),(0,i.useEffect)(()=>{Promise.all([n.e(5609),n.e(8843)]).then(n.bind(n,8843)).then(e=>{let{changeUser:t,openSession:n,init:a,automaticallyShowInAppMessages:i}=e;a(),t(x.objectId),i(),n()})},[x.objectId]),(0,h.eI)({request:p,user:x,locale:o,settings:v,account:d});let{close:j,setCurrency:w,tempCurrency:I}=(0,n$.AM)();return(0,a.jsxs)("main",{"data-sentry-component":"InvoiceEditorFeature","data-sentry-source-file":"invoice-editor.feature.tsx",children:[(0,a.jsx)(n$.o7,{onContinue:()=>{w(I),(0,m.o1)({name:l.Vd.LocaleCurrencyCode,value:I.value}),j()},"data-sentry-element":"ModalCurrencyChangeConfirmation","data-sentry-source-file":"invoice-editor.feature.tsx"}),(0,a.jsx)(n$.we,{"data-sentry-element":"ModalCurrencyChangeUpdated","data-sentry-source-file":"invoice-editor.feature.tsx"}),(0,a.jsxs)(s(),{"data-sentry-element":"Head","data-sentry-source-file":"invoice-editor.feature.tsx",children:[(0,c.oO)()&&(0,a.jsx)("link",{rel:"icon",type:l.bT.IMG_PNG,href:"images/staging-logo.png"}),!(0,c.oO)()&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("link",{rel:"icon",type:l.bT.IMG_PNG,sizes:"32x32",href:"images/icon-32.png"}),(0,a.jsx)("link",{rel:"icon",type:l.bT.IMG_PNG,sizes:"16x16",href:"images/icon-16.png"})]})]}),(0,a.jsxs)(u.uZ,{"data-sentry-element":"AlertProvider","data-sentry-source-file":"invoice-editor.feature.tsx",children:[(0,a.jsx)(nJ.Qi,{"data-sentry-element":"ModalUnbrandedUpgrade","data-sentry-source-file":"invoice-editor.feature.tsx"}),f===l.ow.DOCTYPE_INVOICE&&(0,a.jsx)(nJ.SR,{}),(0,a.jsx)(eo,{"data-sentry-element":"TooltipProvider","data-sentry-source-file":"invoice-editor.feature.tsx",children:(0,a.jsx)(nK,{currentLocale:o,country:t,documentId:g,defaultSettings:v,defaultLogo:y,docType:f,settings:v,hasAcknowledgedTerms:b,"data-sentry-element":"InvoiceEditorMigrated","data-sentry-source-file":"invoice-editor.feature.tsx"})})]})]})}r.Ry({account:n0,user:n1,settings:r.IX(d.x4),request:r.Ry({id:r.Z_()}),locale:r.Z_()})},18547:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var a=n(37821);n(58078);var i=n(87698);let o=e=>{let{left:t,right:n,className:o}=e;return(0,a.jsx)("header",{className:"w-full","data-sentry-component":"PageHeader","data-sentry-source-file":"page-header.tsx",children:(0,a.jsxs)("div",{className:(0,i.cn)("flex justify-between flex-row w-full py-[10px]",o),children:[(0,a.jsx)(a.Fragment,{children:t}),(0,a.jsx)(a.Fragment,{children:n})]})})}},24929:function(e,t,n){"use strict";n.d(t,{j:function(){return c}});var a=n(37821),i=n(58078),o=n(73378),s=n(66962);let r={success:"text-green-800",warning:"text-yellow-800",danger:"text-red-800"},l={success:"bg-green-50",warning:"bg-yellow-50",danger:"bg-red-50"},d={success:"bg-green-700",warning:"bg-yellow-600",danger:"bg-red-800"},c=e=>{let{type:t,title:n,button:c,body:u,leftIcon:m,rightIcon:h,isClosable:p,onCtaClick:x}=e,[v,g]=(0,i.useState)(!0),y=l[t],f=d[t],b=r[t];return v?(0,a.jsx)("div",{id:"tailwind",className:"w-full","data-sentry-component":"Banner","data-sentry-source-file":"banner.tsx",children:(0,a.jsxs)("div",{"data-testid":"banner",className:"flex p-[12px] rounded-[4px] ".concat(y),children:[(0,a.jsxs)("div",{className:"flex items-center w-full md:pointer-events-none",onClick:x,children:[m,(0,a.jsxs)("div",{children:[!!n&&(0,a.jsx)("span",{"data-testid":"title",className:"".concat(b),children:n}),!!u&&(0,a.jsx)("span",{"data-testid":"body",className:"text-xs",children:u})]})]}),h&&(0,a.jsx)("div",{className:"flex items-center",children:h}),c&&(0,a.jsx)(o.z,{"data-testid":"btn-banner",variant:"primary",className:"rounded-lg whitespace-nowrap px-[12px] hidden md:block ".concat(f),onClick:x,children:c}),p&&(0,a.jsx)(s.bM,{"data-testid":"x-icon",className:"cursor-pointer",fill:"warning"===t?"#854d0e":"#991b1b",onClick:()=>g(!1)})]})}):null}},57244:function(e,t,n){"use strict";n.d(t,{j:function(){return w}});var a=n(37821),i=n(58078),o=n(64142),s=n(18294),r=n(9845),l=n(81071),d=n(42236),c=n(65833),u=n(24929),m=n(26935),h=n(18505),p=n(27547),x=n(39217);let v=e=>{let t,n,{subscriptionStatus:i,source:s,remainingDocCount:r,intl:l,onCtaClick:d}=e,c=r>0,u="warning";return(0,x.j5)({subscriptionStatus:i,source:s})||!i?(u=c?"warning":"danger",t=y(r,l),n=b(r,l,d)):((0,x.hL)(i)&&(t=g(r,i.planInterval,new Date(i.activeUntil),l),n=f(o.QV.ESSENTIALS,d)),(0,x.oH)(i)&&(t=g(r,i.planInterval,new Date(i.activeUntil),l),n=f(o.QV.PLUS,d))),{type:u,leftIcon:c?void 0:(0,a.jsx)(h.r,{className:"mr-1 stroke-red-50",fill:"currentColor",width:"24",height:"24"}),title:t,body:n,onCtaClick:d,isClosable:!1}},g=(e,t,n,i)=>{let o=1===e?i.ft({id:"docLimit.banner.paid.title.singular"},{date:i.formatDate((0,x.Tg)(n,t),{year:"numeric",month:"short",day:"numeric"})}):i.ft({id:"docLimit.banner.paid.title.plural"},{count:e,date:i.formatDate((0,x.Tg)(n,t),{year:"numeric",month:"short",day:"numeric"})});return(0,a.jsx)("p",{"data-testid":"title",className:"text-xs font-bold","data-sentry-component":"getPaidBannerTitle","data-sentry-source-file":"get-banner-config.tsx",children:o})},y=(e,t)=>{if(e>=m.Tv.FREE_LIMIT_LOGGED_IN)return;let n=1===e?t.ft({id:"docLimit.banner.free.title.singular"}):t.ft({id:"docLimit.banner.free.title.plural"},{count:e});return(0,a.jsx)("p",{"data-testid":"title",className:"text-xs font-bold","data-sentry-component":"getFreeBannerTitle","data-sentry-source-file":"get-banner-config.tsx",children:n})},f=(e,t)=>{let n="/subscription?".concat(c.a$.REF,"=").concat(c.a$.DOC_LIMIT_BANNER);return(0,a.jsx)(p._,{id:"docLimit.banner.".concat(e,".body"),values:{upgrade:e=>(0,a.jsx)("a",{href:n,className:"font-bold underline",onClick:t,"data-sentry-component":"getUpgradeElement","data-sentry-source-file":"get-banner-config.tsx",children:e})},"data-sentry-element":"FormattedMessage","data-sentry-component":"getPaidBannerBody","data-sentry-source-file":"get-banner-config.tsx"})},b=(e,t,n)=>{let i=e>=m.Tv.FREE_LIMIT_LOGGED_IN,o="/subscription?".concat(c.a$.REF,"=").concat(c.a$.DOC_LIMIT_BANNER),s=e=>(0,a.jsx)("a",{href:o,className:"font-bold underline",onClick:n,"data-sentry-component":"getUpgradeElement","data-sentry-source-file":"get-banner-config.tsx",children:e});return i?(0,a.jsxs)(a.Fragment,{children:[t.ft({id:"docLimit.banner.free.initial.body1"},{docCount:m.Tv.FREE_LIMIT_LOGGED_IN}),(0,a.jsx)("span",{className:"hidden sm:inline-block",children:"\xa0"}),(0,a.jsx)("span",{className:"block sm:inline-block",children:(0,a.jsx)(p._,{id:"docLimit.banner.free.initial.body2",values:{upgrade:s}})})]}):(0,a.jsx)(p._,{id:"docLimit.banner.free.body",values:{upgrade:s},"data-sentry-element":"FormattedMessage","data-sentry-component":"getFreeBannerBody","data-sentry-source-file":"get-banner-config.tsx"})},j=e=>{let{source:t,remainingDocCount:n}=e,i=(0,d.Y)(),s=(0,l.useRouter)(),{subscriptionStatus:m,trackAction:h}=(0,r.D)(),p=v({remainingDocCount:n,intl:i,onCtaClick:e=>{e.preventDefault(),h("doc-limit-banner",{action:"cta-click","docs-remaining":n,platform:o.t4.WEB,source:t}),s.push("/subscription?ref=".concat(c.Wu.DOC_LIMIT_BANNER))},subscriptionStatus:m,source:t});return(0,a.jsx)(u.j,{...p,"data-sentry-element":"Banner","data-sentry-component":"DocLimitBanner","data-sentry-source-file":"doc-limit-banner.tsx"})},w=e=>{let{source:t}=e,{subscriptionStatus:n}=(0,r.D)();return(0,x.XI)({subscriptionStatus:n,source:t})?(0,a.jsx)(I,{source:t,"data-sentry-element":"RenderDocLimitBanner","data-sentry-component":"DocLimitBannerWrapper","data-sentry-source-file":"doc-limit-banner-wrapper.tsx"}):null},I=e=>{let{trackAction:t,subscriptionStatus:n}=(0,r.D)();(0,s.Z)(n,"subscriptionStatus should be defined");let{remainingDocCount:l}=(0,x.zk)({subscriptionStatus:n,source:e.source});return(0,i.useEffect)(()=>{(0,x.xA)(l)&&t("doc-limit-banner",{action:"show","docs-remaining":l,platform:o.t4.WEB,source:e.source})},[]),(0,a.jsx)(j,{source:e.source,remainingDocCount:l,"data-sentry-element":"DocLimitBanner","data-sentry-component":"RenderDocLimitBanner","data-sentry-source-file":"doc-limit-banner-wrapper.tsx"})}},18505:function(e,t,n){"use strict";n.d(t,{r:function(){return i}});var a=n(37821);let i=n(58078).forwardRef((e,t)=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",width:"20",height:"20",...e,ref:t,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})}));i.displayName="IconExclamationWarningCircle"},54414:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var a=n(37821);function i(){return(0,a.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"photograph w-7 h-7 mr-1","data-sentry-element":"svg","data-sentry-component":"IconPhotograph","data-sentry-source-file":"icon-photograph.tsx",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd","data-sentry-element":"path","data-sentry-source-file":"icon-photograph.tsx"})})}n(58078)},27547:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var a=n(37821);n(58078);var i=n(92973);function o(e){let{id:t,...n}=e;return(0,a.jsx)(i.Z,{id:t,...n,"data-sentry-element":"ReactIntlFormattedMessage","data-sentry-component":"FormattedMessage","data-sentry-source-file":"formatted-message.tsx"})}},33461:function(e,t,n){"use strict";n.d(t,{R:function(){return l}});var a=n(58078),i=n(14325),o=n(83257),s=n(9845),r=n(12272);let l=()=>{let{boot:e,show:t,hide:n}=(0,i.o)(),{account:l,user:d}=(0,s.D)();return(0,a.useEffect)(()=>{let t=null==d?void 0:d.objectId,n=null==l?void 0:l.objectId,a=n?"".concat(r.t.NEXT_PUBLIC_REACT_APP_ADMIN_URL,"/account/").concat(n):"unknown";e({actionColor:"rgba(255, 87, 33, 1)",verticalPadding:20,alignment:"right",horizontalPadding:20,company:{companyId:n||(0,o.Z)(),customAttributes:{admin:a}},customAttributes:{"app-identifier":r.t.NEXT_PUBLIC_REACT_APP_HOST,"app-name":r.t.NEXT_PUBLIC_REACT_APP_NAME,app_id:r.t.NEXT_PUBLIC_REACT_APP_INTERCOM_APP_ID,user_id:t||"unknown",is_guest:!1,admin:r.t.NEXT_PUBLIC_REACT_APP_ADMIN_URL,last_seen:"".concat(Math.round(Date.now()/1e3))}})},[]),{show:t,hide:n}}},59441:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var a=n(37821);n(58078);let i=()=>(0,a.jsx)("svg",{width:"11",height:"10",viewBox:"0 0 11 10",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"XIcon","data-sentry-source-file":"x-icon.tsx",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.767518 0.434266C1.07994 0.121846 1.58647 0.121846 1.89889 0.434266L5.3332 3.86858L8.76752 0.434266C9.07994 0.121846 9.58647 0.121846 9.89889 0.434266C10.2113 0.746685 10.2113 1.25322 9.89889 1.56564L6.46457 4.99995L9.89889 8.43427C10.2113 8.74669 10.2113 9.25322 9.89889 9.56564C9.58647 9.87806 9.07994 9.87806 8.76752 9.56564L5.3332 6.13132L1.89889 9.56564C1.58647 9.87806 1.07994 9.87806 0.767518 9.56564C0.455098 9.25322 0.455098 8.74669 0.767518 8.43427L4.20183 4.99995L0.767518 1.56564C0.455098 1.25322 0.455098 0.746685 0.767518 0.434266Z",fill:"#9CA3AF","data-sentry-element":"path","data-sentry-source-file":"x-icon.tsx"})})},39538:function(){},69835:function(){},27928:function(){},1086:function(){},41384:function(){},74921:function(){},51051:function(){},46498:function(){},55145:function(){},57462:function(){}}]);