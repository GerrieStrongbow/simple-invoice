!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d25e3261-c33c-4cf2-83a9-3f7cc45253cd",e._sentryDebugIdIdentifier="sentry-dbid-d25e3261-c33c-4cf2-83a9-3f7cc45253cd")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8808],{30585:function(e,t,n){"use strict";n.d(t,{l0:function(){return o},yt:function(){return r},Af:function(){return s.A}});var a=n(37821),i=n(58078);let o=i.forwardRef((e,t)=>{let{className:n="",children:i,...o}=e;return(0,a.jsx)("form",{...o,ref:t,className:"".concat(null!=n?n:""," flex flex-col items-center justify-center w-full p-5 md:p-[45px] rounded-md relative space-y-[10px] md:space-y-[12px]"),children:i})});o.displayName="Form";let r=i.forwardRef((e,t)=>{e.className&&console.warn("Please use inputClassName, labelClassName or wrapperClassName instead of className");let{labelClassName:n,wrapperClassName:i,inputClassName:o,...r}=e,s="".concat("border border-gray-400 font-light min-width-[60] leading-5 w-full inline-block py-[8px] px-[16px] rounded-[4px] focus:text-gray-600 text-[12px]"," ").concat(e.disabled?" cursor-not-allowed text-gray-400":""," ").concat(null!=o?o:"");return(0,a.jsxs)("div",{className:"".concat(null!=i?i:""," flex justify-start items-start w-full flex-col md:flex-row"),children:[(0,a.jsx)("label",{className:"".concat(null!=n?n:""," md:px-4 py-1 md:py-2 min-w-[160px] w-full md:w-auto text-[12px] font-[500] text-gray-700"),htmlFor:e.id,children:e.label}),e.InputComponent?e.InputComponent:(0,a.jsx)("input",{...r,id:e.id,ref:t,className:s})]})});r.displayName="FormInput";var s=n(40899);n(99920)},40899:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var a=n(37821),i=n(13084),o=n.n(i);n(5180);var r=n(58078);let s=r.forwardRef((e,t)=>{var n;let[i,s]=(0,r.useState)(!1),l="".concat(null!==(n=e.className)&&void 0!==n?n:""," border border-gray-400 font-light min-width-[60] leading-5 w-full inline-block py-[8px] px-[16px] disabled:text-[12px] rounded-[4px] focus:text-gray-600 text-[12px]");return((0,r.useEffect)(()=>{s(!0)},[i]),i)?(0,a.jsx)(o(),{"data-testid":e.id,id:e.id,disabled:e.disabled,mobile:e.mobile,step:e.step,min:e.min,max:e.max,ref:t,format:e.format,className:"".concat(l).concat(e.disabled?"cursor-not-allowed text-gray-400":""),style:e.style,placeholder:e.placeholder,precision:e.precision,value:e.value,onChange:e.onChange,maxLength:e.maxLength,onFocus:e=>e.target.select()}):(0,a.jsx)("div",{className:"h-[38px] w-full border border-gray-400 inline-block rounded-[4px]"})});s.displayName="NumericInput"},96995:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});let a=(0,n(4878).Ue)(e=>({isDeleting:!1,setIsDeleting:t=>e({isDeleting:t})}))},39545:function(e,t,n){"use strict";n.d(t,{M:function(){return d}});var a=n(37821),i=n(58078),o=n(17382),r=n.n(o),s=n(42236);n(82969);var l=n(55717);let d=i.forwardRef((e,t)=>{var n;let{hasRegisteredLocale:i}=(0,l.H)(),o=new Date,d=o.getFullYear(),c=o.getMonth(),u=o.getDate(),m=new Date(d+20,c,u+1),p=new Date(d-20,c,u+1),{locale:y}=(0,s.Y)(),v=e.selected||o;return i?(0,a.jsx)(r(),{className:"".concat(null!==(n=e.className)&&void 0!==n?n:""," border border-gray-400 font-light text-[12px] min-width-[60px] leading-5 w-full inline-block py-[8px] px-[16px] rounded-[4px] focus:text-gray-600 ").concat(e.disabled?" cursor-not-allowed text-gray-400":""),wrapperClassName:"w-full",selected:v,id:e.id,name:e.name,dateFormat:["PP","yyyy-MM-dd","yyyy/MM/dd","dd-MM-yyyy","dd/MM/yyyy","MM-dd-yyyy","dd-MM-yyyy","MMM dd, yyyy","MMM dd yyyy","MMMM dd, yyyy","MMMM dd yyyy","dd MMMM yyyy","dd MMM yyyy"],locale:y.split("-")[0],todayButton:e.dictionary.todayMessage,disabled:e.disabled,ref:t,minDate:e.minDate,maxDate:e.maxDate,popperPlacement:"bottom-start",popperModifiers:[{name:"arrow",options:{padding:7}}],onChange:t=>null===t?void 0:t>p&&t<m?e.onChange(t):e.onChange(new Date)}):(0,a.jsx)("div",{className:"h-[38px] w-full border border-gray-400 inline-block rounded-[4px]"})});d.displayName="DatePicker"},23835:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var a=n(81071),i=n(12272);let o=()=>{let e=window.location.host?window.location.host:"",t=i.t.NEXT_PUBLIC_REACT_APP_PROXY_HOST===e,n=(0,a.useRouter)();return{push:e=>{if(t)return window.location.assign("".concat(i.t.NEXT_PUBLIC_REACT_APP_HOST).concat(e));n.push(e)},replace:e=>{if(t)return window.location.assign("".concat(i.t.NEXT_PUBLIC_REACT_APP_HOST).concat(e));n.replace(e)},prefetch:n.prefetch}}},63133:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var a=n(61449),i=n(17892);async function o(e){let t=await (0,i.Y)();return await (0,a.W)("/classes/Invoice/".concat(e),{headers:{"X-Parse-Session-Token":t},cache:"no-cache"})}},72574:function(e,t,n){"use strict";n.d(t,{s:function(){return i}});var a=n(1845);let i=e=>{let[t]=(0,a.rm)(e);return{enabled:t.enabled,variables:t.variables||{},variationKey:t.variationKey||""}};n(35123)},35123:function(e,t,n){"use strict";n.d(t,{X:function(){return d}});var a=n(1845),i=n(12272),o=n(59792);let r=/dev|stag/i.test(o.env.REACT_APP_ENV||""),s=i.t.NEXT_PUBLIC_OPTIMIZELY_SDK_KEY,l=null,d=()=>(l||(l=(0,a.Fs)({sdkKey:s,logLevel:r?"warning":"error",datafileOptions:{autoUpdate:!0,updateInterval:r?6e4:3e5},eventBatchSize:10})),l)},54085:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var a=n(61449),i=n(17892);async function o(e){let t=await (0,i.Y)();return await (0,a.W)("/classes/Photo",{method:"POST",body:JSON.stringify(e),headers:{"X-Parse-Session-Token":t},cache:"no-cache"})}},70572:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var a=n(61449),i=n(17892);let o=async e=>r(e),r=async e=>{let t=[];for(let n=0;n<e.length;n+=10)t.push(e.slice(n,n+10));return(await Promise.all(t.map(e=>s(e)))).flat()};async function s(e){let t=await (0,i.Y)(),n=new URLSearchParams({where:JSON.stringify({$or:e.map(e=>({remoteId:{$eq:e},deleted:{$eq:!1}}))})});return(await (0,a.W)("/classes/Photo?".concat(n),{headers:{"X-Parse-Session-Token":t},cache:"no-cache"})).results}},78641:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var a=n(64142),i=n(64144),o=n(80331),r=n(36543);async function s(e){try{let t=await (0,o.A)(),n=await (0,i.KF)(r.F+"/pulsem/request-review",{method:"POST",headers:{...t,"Content-Type":a.bT.APP_JSON},body:JSON.stringify(e)});return{status:"success",data:n}}catch(e){return{status:"error",error:e}}}},89113:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var a=n(64142),i=n(26935),o=n(61692);let r=(e,t)=>{let n=[a.PB.STYLE_5,a.PB.STYLE_6,a.PB.STYLE_7],r=(0,o.N)({user:e,feature:i.eS.PREMIUM_TEMPLATES});return!t||n.includes(t)&&!r?a.PB.STYLE_1:t}},37296:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(64142),i=n(5230);let o=e=>{var t,n;let o=null===(t=(0,i.y)(e,a.Vd.PaymentFeesType))||void 0===t?void 0:t.valNum,r=null===(n=(0,i.y)(e,a.Vd.PaymentAlwaysAddSurcharge))||void 0===n?void 0:n.valBool;return o?o===a.iD.SURCHARGE&&r?o:a.iD.MARKUP:void 0}},5230:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var a=n(17547);let i=e=>e&&e.remoteId&&(e.valStr||(0,a.jn)(e.valBool)||e.valNum);function o(e,t){return null==e?void 0:e.find(e=>i(e)&&e.remoteId===t)}},85999:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});let a=()=>{var e;let t=null===(e=window)||void 0===e?void 0:e.gtag;null==t||t("event","conversion",{send_to:"AW-1006814914/K4PyCNao3sUZEMKNi-AD"})}},77190:function(e,t,n){"use strict";n.d(t,{Q:function(){return d}});var a=n(37821),i=n(58078),o=n(48751);function r(){return(0,a.jsx)("svg",{className:"check-icon w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"Check","data-sentry-source-file":"check.tsx",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 13l4 4L19 7","data-sentry-element":"path","data-sentry-source-file":"check.tsx"})})}function s(){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-sentry-element":"svg","data-sentry-component":"NoColor","data-sentry-source-file":"no-color.tsx",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.2 7.99999C15.2 11.9764 11.9764 15.2 7.99999 15.2C4.02354 15.2 0.799988 11.9764 0.799988 7.99999C0.799988 4.02354 4.02354 0.799988 7.99999 0.799988C11.9764 0.799988 15.2 4.02354 15.2 7.99999ZM11.1289 12.4016C10.2462 13.0303 9.16626 13.4 7.99999 13.4C5.01765 13.4 2.59999 10.9823 2.59999 7.99999C2.59999 6.83371 2.96972 5.75379 3.59836 4.87104L11.1289 12.4016ZM12.4017 11.1288L4.87117 3.59827C5.7539 2.96968 6.83377 2.59999 7.99999 2.59999C10.9823 2.59999 13.4 5.01765 13.4 7.99999C13.4 9.16621 13.0303 10.2461 12.4017 11.1288Z",fill:"#757575","data-sentry-element":"path","data-sentry-source-file":"no-color.tsx"})})}let l=e=>"#FFFFFF"===(e||"").toUpperCase();function d(e){let{selectedColor:t,colorOptions:n,dictionary:d,onChange:c}=e,u=n.map(e=>{let n=e===t,i=l(e),o=i?"#B7B7B7":e;return(0,a.jsx)("button",{"aria-label":"Template Color Select Hex Code ".concat(e),className:"".concat(n?"selected":""," color-select-option block cursor-pointer float-left rounded relative"),style:{width:30,height:30,padding:"5px 5px",margin:"3px 6px 3px 0",backgroundColor:e,color:n?"white":e,border:"2px ".concat(n?"#455EDE":o," solid")},onClick:()=>c(e),children:i?(0,a.jsx)(s,{}):(0,a.jsx)(r,{})},e)});return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(o.i,{className:"color-select-header","data-sentry-element":"SettingHeader","data-sentry-source-file":"color-select.tsx",children:d.colorSelectHeader}),(0,a.jsx)("div",{className:"color-select-container",children:u})]})}},72288:function(e,t,n){"use strict";n.d(t,{e:function(){return p}});var a=n(37821),i=n(58078),o=n(64142),r=n(90469),s=n(13084),l=n.n(s);function d(e){let{id:t,value:n,label:i,onChange:o}=e;return(0,a.jsxs)("div",{className:"flex items-center w-full my-2","data-sentry-component":"DiscountPercentInput","data-sentry-source-file":"discount-percent-input.tsx",children:[i&&(0,a.jsx)("label",{htmlFor:t,className:"block text-xs leading-5 text-gray-800 font-medium",style:{minWidth:"4.5rem"},children:i}),(0,a.jsxs)("div",{className:"relative w-full rounded-md bg-white",children:[(0,a.jsx)(l(),{id:t,mobile:!1,className:"discount-rate-input form-input block w-full focus:text-gray-600",value:n,step:1,min:0,max:100,precision:3,onChange:e=>{"number"==typeof e&&o(Math.min(100,Math.max(0,e))),"number"!=typeof e&&o(0)},onFocus:e=>e.target.select(),style:!1,"data-sentry-element":"NumericInput","data-sentry-source-file":"discount-percent-input.tsx"}),(0,a.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 font-medium font-inter text-[#9fa6b2] text-sm",children:"%"})]})]})}var c=n(74659);function u(e){let{id:t,value:n,label:i,onChange:o}=e;return(0,a.jsxs)("div",{className:"flex items-center w-full my-2","data-sentry-component":"DiscountAmountInput","data-sentry-source-file":"discount-amount-input.tsx",children:[i&&(0,a.jsx)("label",{htmlFor:t,className:"block text-xs leading-5 text-gray-800 font-medium",style:{minWidth:"4.5rem"},children:i}),(0,a.jsx)(c.A,{id:t,mobile:!1,className:"discount-amount-input form-input block w-full focus:text-gray-600",placeholder:void 0,value:n,step:1,precision:2,min:0,onChange:o,"data-sentry-element":"NumericInput","data-sentry-source-file":"discount-amount-input.tsx"})]})}var m=n(48751);function p(e){let{discountType:t,discountRate:n,discountAmount:s,dictionary:l,onDiscountTypeChange:c,onDiscountRateChange:p,onDiscountAmountChange:y}=e,{discountSetting:v,discountType:g}=l;return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(m.i,{className:"discount-setting-header","data-sentry-element":"SettingHeader","data-sentry-source-file":"discount-settings.tsx",children:v.discountSettingHeader}),(0,a.jsx)(r.P,{id:"discount-setting-type",ariaLabel:"Select Discount Type",label:v.discountTypeLabel,labelStyle:{minWidth:"4.5rem",color:"#2d3748",fontWeight:500},selected:t,possibleValues:[o.sC.DISCOUNT_NONE,o.sC.DISCOUNT_PERCENTAGE,o.sC.DISCOUNT_FLAT_AMOUNT],onChange:c,typeToLabel:e=>(function(e,t){switch(e){case o.sC.DISCOUNT_NONE:return t.none;case o.sC.DISCOUNT_PER_ITEM:return t.perItem;case o.sC.DISCOUNT_PERCENTAGE:return t.percent;case o.sC.DISCOUNT_FLAT_AMOUNT:return t.flatAmount}})(e,g),"data-sentry-element":"Select","data-sentry-source-file":"discount-settings.tsx"}),t===o.sC.DISCOUNT_PERCENTAGE&&(0,a.jsx)(d,{id:"discount-percent",value:n,label:v.discountPercentLabel,onChange:p}),t===o.sC.DISCOUNT_FLAT_AMOUNT&&(0,a.jsx)(u,{id:"discount-flat-amount",value:s,label:v.discountAmountLabel,onChange:y})]})}},48622:function(e,t,n){"use strict";n.d(t,{a:function(){return P},k:function(){return E}});var a=n(58078),i=n(93056),o=n.n(i),r=n(14325),s=n(64142),l=n(70517),d=n(9411),c=n(9845),u=n(68453),m=n(65833),p=n(57733),y=n(78421);let v={COMPANY_NAME:"name",COMPANY_BUSINESS_NUMBER:"businessNumber",COMPANY_EMAIL:"email",COMPANY_PHONE:"phone",COMPANY_LOGO:"logo"},g=[v.COMPANY_BUSINESS_NUMBER,v.COMPANY_EMAIL,v.COMPANY_LOGO,v.COMPANY_NAME,v.COMPANY_PHONE],h=(e,t)=>{if(e.objectId!==t.objectId)return null;for(let n of g)if(e.company[n]!==t.company[n])return{key:n,value:e.company[n]};return null},f=async e=>{let{document:t,prevDocument:n,updateIntercom:a,testAccountId:i}=e;if(!n)return;let o=h(t,n);if(!o)return;let r=i||await (0,y._4)();if("string"==typeof r)switch(o.key){case v.COMPANY_NAME:a({company:{companyId:r,name:t.company.name}});break;case v.COMPANY_PHONE:a({phone:t.company.phone,company:{companyId:r,customAttributes:{phone:t.company.phone}}});break;case v.COMPANY_EMAIL:a({company:{companyId:r,customAttributes:{email:t.company.email}}});break;case v.COMPANY_BUSINESS_NUMBER:a({company:{companyId:r,customAttributes:{businessNumber:t.company.businessNumber}}})}};var b=n(91177),x=n(79394),w=n(56302);async function P(e){var t;let{document:n}=e,a=(null==n?void 0:null===(t=n.client)||void 0===t?void 0:t.name)?{...n,client:{...n.client,name:n.client.name.trim()}}:n;if(void 0===n.objectId){let{objectId:e}=n,{data:t}=await (0,w.Kd)({...a,objectId:e,updated:new Date().getTime()});return{newObjectId:t.objectId}}if("string"==typeof n.objectId){let{objectId:e}=n;await (0,w.gU)(e,{...a,objectId:e,updated:new Date().getTime()})}}var T=n(85999),N=n(86129);function j(e){if(!(e.company.email||e.company.name||e.company.company))return!1;let t=e.client;return!!t&&(!!t.email||!!t.name)&&(0,N.T)({items:e.items,setting:e.setting,client:t}).gt(s.xE)}function E(e){var t;let{defaultColor:n,defaultTemplate:i,defaultFeesType:y,defaultDocument:v,docType:g=s.ow.DOCTYPE_INVOICE,estimateSignatureRequired:h,acornFinancing:w,isEditor:N,isNewDoc:E}=e,{setAlert:C,closeAlert:I}=(0,p.VY)(),{update:S}=(0,r.o)(),{incrementDocCount:D,subscriptionStatus:M}=(0,c.D)(),[A,L]=(0,a.useState)([]),[O,k]=(0,a.useState)(!1),R=g===s.ow.DOCTYPE_INVOICE||g===s.ow.DOCTYPE_STATEMENT?(0,l.createDefaultInvoice)("INV0001",{...(0,l.createDefaultInvoiceSettings)({taxLabelPlaceHolder:"Tax"}),color:n,template:i,feesType:y,acornFinancing:w}):(0,l.createDefaultEstimate)("EST0001",{...(0,l.createDefaultEstimateSettings)({taxLabelPlaceHolder:"Tax"}),color:n,template:i,acornFinancing:w,estimateSignatureRequired:!!h}),[F,_]=(0,a.useState)({...R,...v||{},docType:g}),[B,V]=(0,a.useState)(E?null:{...R,...v||{}}),U=!!F.objectId,{hasSetDefaults:z}=function(e){let{docType:t,updateDocument:n,defaultDocument:i}=e,[o,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{!async function(){try{var e,a,o,s;let r={},d=await (0,b.ZV)();void 0!==d&&(null==i?void 0:null===(e=i.setting)||void 0===e?void 0:e.taxLabel)===void 0&&(r={...r,taxLabel:d});let c=await (0,b.E3)();void 0!==c&&(null==i?void 0:null===(a=i.setting)||void 0===a?void 0:a.taxType)===void 0&&(r={...r,taxType:c});let u=await (0,b.A5)();void 0!==u&&(null==i?void 0:null===(o=i.setting)||void 0===o?void 0:o.taxRate)===void 0&&(r={...r,taxRate:u});let m=await (0,b.zk)();void 0!==m&&(null==i?void 0:null===(s=i.setting)||void 0===s?void 0:s.taxInclusive)===void 0&&(r={...r,taxInclusive:m});let p=await (0,b.nc)(t),y=null==i?void 0:i.invoiceNo;n(e=>((0,l.isInvoice)(e),{...e,invoiceNo:y||p||e.invoiceNo,setting:{...e.setting,...r}}))}finally{r(!0)}}()},[null==i?void 0:i.invoiceNo,t]),{hasSetDefaults:o}}({docType:g,updateDocument:_,defaultDocument:v}),Y=(0,x.N)(F,500);return(0,b.Cc)({hasDocumentBeenSaved:U,defaultDocument:v,docType:g,currentInvoiceNumber:Y.invoiceNo}),(0,b.M_)(Y.company,U,v),(0,a.useEffect)(()=>{let e=(0,m.Lm)(m.a$.LABOR_COSTS),t=(0,m.Lm)(m.a$.MATERIAL_COSTS);if(e||t){let n=Number(e)||0,a=Number(t)||0,i=[];n&&i.push({...(0,l.createDefaultDocumentItem)(),code:"Labor costs",rate:(0,u.c)(n)}),a&&i.push({...(0,l.createDefaultDocumentItem)(),code:"Material costs",rate:(0,u.c)(a)}),_({...F,items:[...i]})}},[]),(0,a.useEffect)(()=>{(async()=>{if(Y&&z&&O&&!o().isEqual(v,Y)){let e="".concat(Math.random());try{L(t=>[...t,e]);let t=await P({document:Y});if(I(),t&&t.newObjectId){let e=t.newObjectId;_(t=>({...t,objectId:e})),D(F.docType)}}catch(e){C({title:"Connectivity problem while contacting our servers.",body:"Please try reloading the app. If the problem persists, contact our support team support@invoicesimple.com",type:"error",isClosable:!1}),d.D.error("useDocument",e)}finally{f({document:F,prevDocument:B,updateIntercom:S}),L(t=>t.filter(t=>t!==e))}}})()},[Y]),function(e){let{document:t,previousDocument:n,isEditor:i,docsThresholdCount:o}=e,[r,l]=(0,a.useState)(()=>j(t)),{trackInstantFormEvent:d}=(0,c.D)();(0,a.useEffect)(()=>{!r&&j(t)&&(l(!0),d("invoice-complete",{"remote-id":t.remoteId,"invoice-id":t.objectId||"","invoice-no":t.invoiceNo,"doc-type":"".concat(t.docType),platform:s.t4.WEB}),o<=1&&(0,T.m)())},[t]),(0,a.useEffect)(()=>{let e=e=>{let t,n;let{field:a,type:i,document:o,previousDocument:r}=e;if(!o||!r)return;let s=a;"setting"===i?(t=o.setting[a],n=r.setting[a],s="setting."+a):(t=o[a],n=r[a]),null!=t&&t!==n&&("dueDate"===a&&(s="dueDate"),d("invoice-set-field",{field:s,value:t}))};["invoiceDate"].forEach(a=>{e({type:"prop",field:a,document:t,previousDocument:n})}),["color","taxType","discountType","taxInclusive","paymentSuppressed","stripePaymentSuppressed","termsDay","dueDate"].forEach(a=>{e({type:"setting",field:a,document:t,previousDocument:n})})},[t,n]),(0,a.useEffect)(()=>{t.objectId&&!(null==n?void 0:n.objectId)&&i&&d("invoice-create",{invoiceId:t.objectId,"doc-type":t.docType,platform:s.t4.WEB,color:t.setting.color,template:t.setting.template,"request-signature":t.docType===s.ow.DOCTYPE_ESTIMATE?!!t.setting.estimateSignatureRequired:void 0})},[t,n])}({document:F,previousDocument:B,isEditor:N,docsThresholdCount:null!==(t=null==M?void 0:M.docsThresholdCount)&&void 0!==t?t:0}),{document:F,updateDocument:function(e){V(F),_(e),k(!0)},isSaving:A.length>0}}},69327:function(e,t,n){"use strict";n.d(t,{U:function(){return d}});var a=n(37821),i=n(58078),o=n(70517),r=n(84974),s=n(27723),l=n(35914);function d(e){let[t,n]=(0,i.useState)(e.value||"");(0,i.useEffect)(()=>{n(e.value||"")},[e.value]);let d=e.autoComplete||"email",c=t&&t.length>0,u=o.ValidEmail.is(t)?(0,a.jsx)(s.E,{}):c?(0,a.jsx)(l.K,{}):"";return(0,a.jsx)(r.I,{type:"email",labelStyle:{minWidth:"5rem"},disabled:e.disabled,id:e.name,name:e.name,autoComplete:d,label:e.label,placeholder:e.placeholder,value:t,onFocus:t=>{e.onFocus&&e.onFocus(t)},onBlur:t=>{e.onBlur&&e.onBlur(t)},onChange:t=>{n(t.target.value),e.onChange&&e.onChange(t),o.ValidEmail.is(t.target.value)&&e.onValidEmail(t.target.value)},onKeyDown:e=>{32===e.which&&e.preventDefault()},addonAfter:u,"data-sentry-element":"Input","data-sentry-component":"EmailInput","data-sentry-source-file":"email-input.tsx"})}},50753:function(e,t,n){"use strict";n.d(t,{I:function(){return a.I}});var a=n(84974)},76651:function(e,t,n){"use strict";n.d(t,{Jb:function(){return i},R0:function(){return a},mT:function(){return o}});let a=[{value:"bank",label:"Bank Transfer",i18nKey:"payment.method.label.banktransfer"},{value:"cash",label:"Cash",i18nKey:"payment.method.label.cash"},{value:"check",label:"Check",i18nKey:"payment.method.label.check"},{value:"card",label:"Card",i18nKey:"payment.method.label.card"},{value:"creditCard",label:"Credit",i18nKey:"payment.method.label.creditcard"},{value:"debit",label:"Debit",i18nKey:"payment.method.label.debit"},{value:"mobilePaymentApp",label:"Mobile Payment App",i18nKey:"payment.method.label.mobilePaymentApp"},{value:"other",label:"Other",i18nKey:"payment.method.label.other"}],i=[{value:"chooseMethod",label:"Select Payment Method",i18nKey:"payment.method.label.chooseMethod"},...a,{value:"paypal",label:"Paypal",i18nKey:"payment.method.label.paypal"},{value:"stripe",label:"Stripe",i18nKey:"payment.method.label.stripe"}],o={control:(e,t)=>({...e,border:"1px solid rgb(159,166,178)",cursor:t.isFocused?"text":"default",borderBottomLeftRadius:t.menuIsOpen?0:e.borderBottomLeftRadius,borderBottomRightRadius:t.menuIsOpen?0:e.borderBottomRightRadius}),placeholder:e=>({...e,color:"#666666",fontSize:"12px",margin:0}),valueContainer:e=>({...e,paddingLeft:"0.5rem"}),singleValue:e=>({...e,margin:0,fontSize:"12px"}),input:e=>({...e,margin:0}),menu:e=>({...e,margin:0}),menuList:e=>({...e,padding:0}),indicatorSeparator:()=>({display:"none"}),option:(e,t)=>({...e,fontSize:"12px",cursor:"pointer",color:t.isSelected||t.isFocused?"#333333":"#666666",backgroundColor:t.isFocused?"rgba(178, 211, 255, 0.3)":t.isSelected?"rgba(178, 211, 255, 0.2)":"transparent"}),dropdownIndicator:e=>({...e,cursor:"pointer",color:"rgb(159, 166, 178)"})}},81365:function(e,t,n){"use strict";n.d(t,{Y:function(){return c}});var a=n(58078),i=n(77774),o=n(61449),r=n(17892);let s=async e=>{try{let t=await (0,r.Y)();return(await (0,o.W)("/functions/invoiceGetPayments",{method:"POST",body:JSON.stringify({invoiceId:e}),headers:{"X-Parse-Session-Token":t}})).result}catch(e){console.error("Error while getting payments from Parse",e);return}};var l=n(76242),d=n(82337);let c=e=>{let[t,n]=(0,a.useState)(null),{setPaymentState:o}=(0,d.I)(),{showAlert:r}=(0,l.V)(),[c,u]=(0,a.useState)(0);return(0,a.useEffect)(()=>{(async()=>{if(!e){n("document.objectId is undefined");return}try{let t=await s(e);o({payments:t})}catch(e){r({isClosable:!0,title:"Error",body:"Failed to fetch payments",type:i.NK.Banner,bannerType:"error"}),n(e.message)}})()},[e,c]),{error:t,refetchPayments:()=>{u(e=>e+1)}}}},82337:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});let a=(0,n(4878).Ue)(e=>({payments:[],setPaymentState:t=>{let{payments:n}=t;return e({payments:n})}})),i=()=>{let{setPaymentState:e,payments:t}=a();return{setPaymentState:e,payments:t}}},67754:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var a=n(70517);let i=(0,n(4878).Ue)(e=>({showRecordPaymentForm:!1,toggleRecordPaymentForm:t=>e({showRecordPaymentForm:t})})),o=e=>{let{document:t}=e;return{showRecordPaymentForm:i(e=>e.showRecordPaymentForm),setShowRecordPaymentForm:i(e=>e.toggleRecordPaymentForm),shouldShowRecordPayment:(0,a.isInvoice)(t)}}},58824:function(e,t,n){"use strict";n.d(t,{o:function(){return o.o}}),n(37821),n(58078);var a=n(6450),i=n(7413);n(93056),n(13084),n(86129),n(64142),n(73378),n(76651),n(98523),n(62215),n(9845),n(82337),(0,a.Z)(new Date,20),(0,i.Z)(new Date,20);var o=n(67754)},49618:function(e,t,n){"use strict";n.d(t,{F:function(){return d}});var a=JSON.parse('{"invoiceTitle":"Rechnung","client":{"namePlaceholder":"Kundenname","emailPlaceholder":"name@kunde.com","address1Placeholder":"Stra\xdfe","address2Placeholder":"Stadtstaat","address3Placeholder":"Postleitzahl","phonePlaceholder":"(123) 456 789","mobilePlaceholder":"(123) 456 789","faxPlaceholder":"(123) 456 789","heading":"Gesetzesentwurf f\xfcr","nameLabel":"Name","emailLabel":"Email","address1Label":"Die Anschrift","address2Label":"Adresse 2","address3Label":"Adresse 3","phoneLabel":"Telefon","mobileLabel":"Mobil","faxLabel":"Fax"},"company":{"namePlaceholder":"Firmenname","emailPlaceholder":"name@unternehmen.com","address1Placeholder":"Stra\xdfe","address2Placeholder":"Stadtstaat","address3Placeholder":"Postleitzahl","phonePlaceholder":"(123) 456 789","businessNumberPlaceholder":"123456789RT","businessNumberLabel":"GST #","heading":"Von","nameLabel":"Name","emailLabel":"Email","address1Label":"Die Anschrift","address2Label":"Adresse 2","address3Label":"Adresse 3","phoneLabel":"Telefon","hideAdditionalBusinessDetails":"Zus\xe4tzliche Gesch\xe4ftsdetails ausblenden","showAdditionalBusinessDetails":"Zus\xe4tzliche Gesch\xe4ftsdetails anzeigen","websiteLabel":"Webseite","businessOwnerLabel":"Inhaber","businessOwnerPlaceholder":"Name des Gesch\xe4ftsinhabers"},"currencySetting":{"currencySettingHeader":"W\xe4hrung"},"logoDrop":{"logoMessage":"+ Logo","savingMessage":"Logo speichern","addMessage":"F\xfcgen Sie Ihr Logo hinzu","updateMessage":"Aktualisieren Sie Ihr Logo","removeMessage":"Entfernen Sie Ihr Logo","removeConfirmMessage":"M\xf6chten Sie Ihr Logo wirklich entfernen?"},"dropzone":{"photoError":"Beim Hochladen Ihres Fotos ist ein Fehler aufgetreten","maxFileSizeExceededError":"Bitte laden Sie eine Bilddatei hoch, die kleiner als 5 MB ist","fileTypeNotSupportedError":"Es sind nur die Dateitypen jpg, jpeg, png und webp erlaubt","tooManyFilesError":"Bitte laden Sie jeweils eine Datei hoch","resolutionLimitExceededError":"Die Bildaufl\xf6sung \xfcberschreitet das maximale Limit von 20 MP."},"invoiceNumber":{"emptyInputMessage":"Nummer ist erforderlich","invalidInputMessage":"Die Nummer sollte aus Buchstaben gefolgt von Ziffern bestehen","placeholder":"INV000","label":"Anzahl"},"datePicker":{"todayMessage":"Heute"},"invoiceShare":{"share":"Teilen","pdf":{"label":"{docType}","title":"Drucken Sie Ihr {docType}"},"link":{"label":"Link bekommen","title":"Holen Sie sich einen Link zu Ihrem {docType} , den Sie mit Ihrem Kunden teilen k\xf6nnen"}},"onlinePaymentPreviewDictionary":{"onlinePaymentPreviewLabel":"Online-Zahlungsvorschau","onlinePaymentPreviewTitle":"Vorschau Ihrer Rechnung auf der Kassenseite","onlinePaymentPreviewCTA":"Verstanden"},"viewOnlinePaymentButtonDictionary":{"viewOnlineButtonLabel":"Online-Zahlung anzeigen","viewOnlineButtonTitle":"Zeigen Sie auf der Checkout-Seite eine Vorschau Ihrer Rechnung an","viewOnlineErrorModalTitle":"Zahlungslink nicht verf\xfcgbar","viewOnlineErrorModalText":"Best\xe4tigen Sie, dass Online-Zahlungen f\xfcr diese Rechnung aktiviert sind, und versuchen Sie es erneut.","viewOnlineErrorModalCTA":"OK"},"invoiceTerms":{"none":"Keiner","custom":"Benutzerdefiniert","dueOnReceipt":"Auf Rezept","nextDay":"N\xe4chster Tag","days2":"2 Tage","days3":"3 Tage","days4":"4 Tage","days5":"5 Tage","days6":"6 Tage","days7":"7 Tage","days10":"10 Tage","days14":"14 Tage","days21":"21 Tage","days30":"30 Tage","days45":"45 Tage","days60":"60 Tage","days90":"90 Tage","days120":"120 Tage","days180":"180 Tage","days365":"365 Tage"},"itemDeleteButton":{"deleteMessage":"L\xf6schen","confirmDeleteMessage":"Best\xe4tigen","cancelDeleteMessage":"Absagen"},"itemInput":{"placeholderCode":"Artikelbeschreibung","placeholderDescription":"Weitere Details"},"itemInputMobile":{"placeholderCode":"Artikelbeschreibung","placeholderDescription":"Weitere Details","placeholderRate":"Preis"},"itemList":{"descriptionHeader":"Beschreibung","rateHeader":"Rate","quantityHeader":"Menge","amountHeader":"H\xf6he","addItemMessage":"Artikel hinzuf\xfcgen"},"invoiceTotals":{"subtotalLabel":"Zwischensumme","discountLabel":"Rabatt","totalLabel":"Gesamt","taxLabel":"Steuer","paymentsLabel":"Zahlungen","balanceDueLabel":"Restbetrag f\xe4llig","taxInclusivePrefix":"inkl"},"invoiceNotes":{"notesTitle":"Anmerkungen","notesPlaceholder":"Hinweise â€“ alle relevanten Informationen, die nicht abgedeckt sind, zus\xe4tzliche Gesch\xe4ftsbedingungen"},"taxSetting":{"taxTypeLabel":"Art","taxLabel":"Etikett","taxRateLabel":"Rate","taxInclusiveLabel":"Inklusive?"},"taxType":{"onTotal":"Auf insgesamt","deducted":"Abgezogen","perItem":"Pro St\xfcck","none":"Keiner"},"discountSetting":{"discountSettingHeader":"Rabatt","discountTypeLabel":"Art","discountPercentLabel":"Prozent","discountAmountLabel":"H\xf6he"},"discountType":{"none":"Keiner","perItem":"Pro St\xfcck","percent":"Prozent","flatAmount":"Pauschalbetrag"},"invoicePhotoListDictionary":{"photosHeader":"Fotos","invoicePhotoFailedUploadErrorDescription":"Fehler beim Hochladen des Fotos. Bitte versuche es erneut.","invoicePhotoFailedUploadErrorTitle":"Foto kann nicht hochgeladen werden","invoicePhotoUnsupportedErrorTitle":"Bild kann nicht hinzugef\xfcgt werden","invoicePhotoSaveErrorDescription":"Fehler beim Speichern des Fotos. Bitte versuche es erneut.","invoicePhotoSaveErrorTitle":"Foto kann nicht gespeichert werden"},"invoicePhotoDictionary":{"confirmDelete":"Best\xe4tigen","cancel":"Absagen","invoicePhotoRemoveErrorDescription":"Fehler beim Entfernen des Fotos. Bitte versuche es erneut.","invoicePhotoRemoveErrorTitle":"Foto kann nicht entfernt werden"},"addInvoicePhotoDictionary":{"photosHeader":"Fotos","addPhoto":"Foto hinzuf\xfcgen"},"invoiceModalDictionary":{"addPhoto":"Foto hinzuf\xfcgen","description":"Beschreibung","additionalDetails":"Weitere Details","photoDetails":"Fotodetails","saveChanges":"\xc4nderungen speichern","cancel":"Absagen"},"invoiceDateLabel":"Datum","invoiceDueLabel":"F\xe4llig","invoiceTermsLabel":"Bedingungen","poNumber":"Bestellnummer","invoiceSignature":{"signatureLabel":"Unterschrift","signatureCancelLabel":"Abbrechen","signatureClearLabel":"L\xf6schen","signatureSaveLabel":"Speichern","signatureSignedOnLabel":"Unterschrieben am","signatureRemoveCancelLabel":"Abbrechen","signatureRemoveConfirmLabel":"Best\xe4tigen"},"termsAcknowledgementDictionary":{"title":"Willkommen bei Invoice Simple. Treten Sie den \xfcber 900K zufriedenen kleinen Unternehmen bei.","description":"Indem Sie fortfahren, stimmen Sie unseren <strong><a href=\\"https://www.invoicesimple.com/terms/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">Nutzungsbedingungen</a></strong> zu und best\xe4tigen, unsere <strong><a href=\\"https://www.invoicesimple.com/privacy/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">Datenschutzrichtlinie</a></strong> gelesen zu haben.","buttonLabel":"Zustimmen und fortfahren"},"paymentDropdownDictionary":{"recordPayment":"Zahlung erfassen","amount":"Betrag (BDT)","date":"Datum","notes":"Notizen","method":"Methode","savePayment":"Zahlung speichern","close":"Schlie\xdfen","paymentHistory":"Zahlungsverlauf","total":"Gesamt","notesPlaceholder":"Optionale Zahlungsnotiz","receivedOn":"empfangen am","paymentScheduling":"Zahlungsplanung","invoiceTotal":"Rechnungssumme","balanceDue":"Restbetrag","depositDue":"Anzahlung f\xe4llig","paid":"Bezahlt","amountRemaining":"Verbleibender Betrag","addUpcomingPayment":"Kommende Zahlung hinzuf\xfcgen","requestDeposit":"Anzahlung anfordern","upcomingPayments":"Anstehende Zahlungen","fullyPaid":"Vollst\xe4ndig bezahlt"},"automatedReviews":{"automatedReviewsHeader":"Geautomatiseerde Beoordelingen","description":"Vraag automatisch Google-beoordelingen aan van betalende klanten.","getStartedButton":"Aan de slag","learnAboutReviewsButton":"Meer over beoordelingen"}}'),i=JSON.parse('{"invoiceTitle":"Invoice","client":{"namePlaceholder":"Client Name","emailPlaceholder":"name@client.com","address1Placeholder":"Street","address2Placeholder":"City, State","address3Placeholder":"Zip code","phonePlaceholder":"(123) 456 789","mobilePlaceholder":"(123) 456 789","faxPlaceholder":"(123) 456 789","heading":"Bill To","nameLabel":"Name","emailLabel":"Email","address1Label":"Address","address2Label":"Address 2","address3Label":"Address 3","phoneLabel":"Phone","mobileLabel":"Mobile","faxLabel":"Fax"},"company":{"namePlaceholder":"Business Name","emailPlaceholder":"name@business.com","address1Placeholder":"Street","address2Placeholder":"City, State","address3Placeholder":"Zip code","phonePlaceholder":"(123) 456 789","businessNumberPlaceholder":"123456789 RT","businessNumberLabel":"GST #","heading":"From","nameLabel":"Name","emailLabel":"Email","address1Label":"Address","address2Label":"Address 2","address3Label":"Address 3","phoneLabel":"Phone","hideAdditionalBusinessDetails":"Hide additional business details","showAdditionalBusinessDetails":"Show additional business details","websiteLabel":"Website","businessOwnerLabel":"Owner","businessOwnerPlaceholder":"Business owner name"},"currencySetting":{"currencySettingHeader":"Currency"},"logoDrop":{"logoMessage":"+ Logo","savingMessage":"Saving logo","addMessage":"Add your logo","updateMessage":"Update your logo","removeMessage":"Remove your logo","removeConfirmMessage":"Are you sure you want to remove your logo?"},"dropzone":{"photoError":"An error occurred uploading your photo","maxFileSizeExceededError":"Please upload an image file smaller than 5Mb","fileTypeNotSupportedError":"Only jpg, jpeg, png, and webp file types are allowed","tooManyFilesError":"Please upload one file at a time","resolutionLimitExceededError":"Image resolution exceeds the maximum limit of 20MP."},"invoiceNumber":{"emptyInputMessage":"Number is required","invalidInputMessage":"Number should be letters followed by digits","placeholder":"INV000","label":"Number"},"datePicker":{"todayMessage":"Today"},"invoiceShare":{"share":"Share","pdf":{"label":"Print {docType}","title":"Print your {docType}"},"link":{"label":"Get Link","title":"Get a link to your {docType} to share with your client"}},"onlinePaymentPreviewDictionary":{"onlinePaymentPreviewLabel":"Online Payment Preview","onlinePaymentPreviewTitle":"Preview your invoice on the checkout page","onlinePaymentPreviewCTA":"Set Up"},"viewOnlinePaymentButtonDictionary":{"viewOnlineButtonLabel":"View Online Payment","viewOnlineButtonTitle":"Preview your invoice on the checkout page","viewOnlineErrorModalTitle":"Payment Link Not Available","viewOnlineErrorModalText":"Confirm Online Payments is enabled for this invoice and try again.","viewOnlineErrorModalCTA":"OK"},"invoiceTerms":{"none":"None","custom":"Custom","dueOnReceipt":"On Receipt","nextDay":"Next Day","days2":"2 Days","days3":"3 Days","days4":"4 Days","days5":"5 Days","days6":"6 Days","days7":"7 Days","days10":"10 Days","days14":"14 Days","days21":"21 Days","days30":"30 Days","days45":"45 Days","days60":"60 Days","days90":"90 Days","days120":"120 Days","days180":"180 Days","days365":"365 Days"},"itemDeleteButton":{"deleteMessage":"Delete","confirmDeleteMessage":"Confirm","cancelDeleteMessage":"Cancel"},"itemInput":{"placeholderCode":"Item Description","placeholderDescription":"Additional details"},"itemInputMobile":{"placeholderCode":"Item Description","placeholderDescription":"Additional details","placeholderRate":"Price"},"itemList":{"descriptionHeader":"Description","rateHeader":"Rate","quantityHeader":"Qty","amountHeader":"Amount","addItemMessage":"Add Item"},"invoiceTotals":{"subtotalLabel":"Subtotal","discountLabel":"Discount","totalLabel":"Total","taxLabel":"Tax","paymentsLabel":"Payments","balanceDueLabel":"Balance Due","taxInclusivePrefix":"inc"},"invoiceNotes":{"notesTitle":"Notes","notesPlaceholder":"Notes - any relevant information not covered, additional terms and conditions"},"taxSetting":{"taxTypeLabel":"Type","taxLabel":"Label","taxRateLabel":"Rate","taxInclusiveLabel":"Inclusive?"},"taxType":{"onTotal":"On Total","deducted":"Deducted","perItem":"Per Item","none":"None"},"discountSetting":{"discountSettingHeader":"Discount","discountTypeLabel":"Type","discountPercentLabel":"Percent","discountAmountLabel":"Amount"},"discountType":{"none":"None","perItem":"Per Item","percent":"Percent","flatAmount":"Flat Amount"},"invoicePhotoListDictionary":{"photosHeader":"Photos","invoicePhotoFailedUploadErrorDescription":"Error uploading photo. Please try again.","invoicePhotoFailedUploadErrorTitle":"Unable to upload photo","invoicePhotoUnsupportedErrorTitle":"Unable to add image","invoicePhotoSaveErrorDescription":"Error saving photo. Please try again.","invoicePhotoSaveErrorTitle":"Unable to save photo"},"invoicePhotoDictionary":{"confirmDelete":"Confirm","cancel":"Cancel","invoicePhotoRemoveErrorDescription":"Error removing photo. Please try again.","invoicePhotoRemoveErrorTitle":"Unable to remove photo"},"addInvoicePhotoDictionary":{"photosHeader":"Photos","addPhoto":"Add Photo"},"invoiceModalDictionary":{"addPhoto":"Add Photo","description":"Description","additionalDetails":"Additional Details","photoDetails":"Photo Details","saveChanges":"Save Changes","cancel":"Cancel"},"invoiceDateLabel":"Date","invoiceDueLabel":"Due","invoiceTermsLabel":"Terms","poNumber":"PO Number","invoiceSignature":{"signatureLabel":"Signature","signatureCancelLabel":"Cancel","signatureClearLabel":"Clear","signatureSaveLabel":"Save","signatureSignedOnLabel":"Signed on","signatureRemoveCancelLabel":"Cancel","signatureRemoveConfirmLabel":"Confirm"},"termsAcknowledgementDictionary":{"title":"Welcome to Invoice Simple. Join the 900K+ happy small businesses.","description":"By continuing you agree to our <strong><a href=\\"https://www.invoicesimple.com/terms/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">Terms of Use</a></strong> and acknowledge that you have read our <strong><a href=\\"https://www.invoicesimple.com/privacy/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">Privacy Policy</a></strong>.","buttonLabel":"Agree and continue"},"paymentDropdownDictionary":{"recordPayment":"Record Payment","amount":"Amount (BDT)","date":"Date","notes":"Notes","method":"Method","savePayment":"Save Payment","close":"Close","paymentHistory":"Payment History","total":"Total","notesPlaceholder":"Optional payment note","receivedOn":"received on","paymentScheduling":"Payment Scheduling","invoiceTotal":"Invoice Total","balanceDue":"Balance Due","depositDue":"Deposit Due","paid":"Paid","amountRemaining":"Amount Remaining","addUpcomingPayment":"Add Upcoming Payment","requestDeposit":"Request Deposit","upcomingPayments":"Upcoming Payments","fullyPaid":"This invoice has been paid"},"automatedReviews":{"automatedReviewsHeader":"Automated Reviews","description":"Automatically request Google reviews from paying customers.","getStartedButton":"Get Started","learnAboutReviewsButton":"Learn about reviews"}}'),o=JSON.parse('{"invoiceTitle":"Factura","client":{"namePlaceholder":"Nombre Del Cliente","emailPlaceholder":"nombre@cliente.com","address1Placeholder":"Calle","address2Placeholder":"Estado de la Ciudad","address3Placeholder":"C\xf3digo postal","phonePlaceholder":"(123) 456 789","mobilePlaceholder":"(123) 456 789","faxPlaceholder":"(123) 456 789","heading":"Cobrar a","nameLabel":"Nombre","emailLabel":"Correo electr\xf3nico","address1Label":"Direcci\xf3n","address2Label":"Direcci\xf3n 2","address3Label":"Direcci\xf3n 3","phoneLabel":"Tel\xe9fono","mobileLabel":"M\xf3vil","faxLabel":"Fax"},"company":{"namePlaceholder":"Nombre Del Negocio","emailPlaceholder":"nombre@negocio.com","address1Placeholder":"Calle","address2Placeholder":"Estado de la Ciudad","address3Placeholder":"C\xf3digo postal","phonePlaceholder":"(123) 456 789","businessNumberPlaceholder":"123456789RT","businessNumberLabel":"GST #","heading":"De","nameLabel":"Nombre","emailLabel":"Correo electr\xf3nico","address1Label":"Direcci\xf3n","address2Label":"Direcci\xf3n 2","address3Label":"Direcci\xf3n 3","phoneLabel":"Tel\xe9fono","hideAdditionalBusinessDetails":"Ocultar detalles adicionales del negocio","showAdditionalBusinessDetails":"Mostrar detalles adicionales del negocio","websiteLabel":"Sitio web","businessOwnerLabel":"Propietario del negocio","businessOwnerPlaceholder":"Nombre del propietario del negocio"},"currencySetting":{"currencySettingHeader":"Moneda"},"logoDrop":{"logoMessage":"+ Logotipo","savingMessage":"Guardar logotipo","addMessage":"A\xf1ade tu logotipo","updateMessage":"Actualice su logotipo","removeMessage":"Quita tu logo","removeConfirmMessage":"\xbfEst\xe1s seguro de que quieres eliminar tu logotipo?"},"dropzone":{"photoError":"Ocurri\xf3 un error al subir tu foto","maxFileSizeExceededError":"Por favor, sube un archivo de imagen m\xe1s peque\xf1o que 5 MB","fileTypeNotSupportedError":"Solo se permiten los tipos de archivo jpg, jpeg, png y webp","tooManyFilesError":"Por favor, sube un archivo a la vez","resolutionLimitExceededError":"La resoluci\xf3n de la imagen excede el l\xedmite m\xe1ximo de 20 MP."},"invoiceNumber":{"emptyInputMessage":"El n\xfamero es requerido","invalidInputMessage":"El n\xfamero debe ser letras seguidas de d\xedgitos","placeholder":"INV000","label":"N\xfamero"},"datePicker":{"todayMessage":"Hoy"},"invoiceShare":{"share":"Cuota","pdf":{"label":"Imprimir {docType}","title":"Imprime tu {docType}"},"link":{"label":"Obtenga el enlace","title":"Obtenga un enlace a su {docType} para compartir con su cliente"}},"onlinePaymentPreviewDictionary":{"onlinePaymentPreviewLabel":"Vista previa del pago en l\xednea","onlinePaymentPreviewTitle":"Vista previa de la factura en la p\xe1gina de pago","onlinePaymentPreviewCTA":"Entendido"},"viewOnlinePaymentButtonDictionary":{"viewOnlineButtonLabel":"Ver pago en l\xednea","viewOnlineButtonTitle":"Obtenga una vista previa de su factura en la p\xe1gina de pago","viewOnlineErrorModalTitle":"Enlace de pago no disponible","viewOnlineErrorModalText":"Confirme que los pagos en l\xednea est\xe9n habilitados para esta factura y vuelva a intentarlo.","viewOnlineErrorModalCTA":"DE ACUERDO"},"invoiceTerms":{"none":"Ninguno","custom":"Disfraz","dueOnReceipt":"En el recibo","nextDay":"D\xeda siguiente","days2":"2 d\xedas","days3":"3 d\xedas","days4":"4 dias","days5":"5 dias","days6":"6 d\xedas","days7":"7 d\xedas","days10":"10 d\xedas","days14":"14 dias","days21":"21 d\xedas","days30":"30 dias","days45":"45 d\xedas","days60":"60 d\xedas","days90":"90 dias","days120":"120 d\xedas","days180":"180 d\xedas","days365":"365 dias"},"itemDeleteButton":{"deleteMessage":"Borrar","confirmDeleteMessage":"Confirmar","cancelDeleteMessage":"Cancelar"},"itemInput":{"placeholderCode":"Descripci\xf3n del Art\xedculo","placeholderDescription":"Detalles adicionales"},"itemInputMobile":{"placeholderCode":"Descripci\xf3n del Art\xedculo","placeholderDescription":"Detalles adicionales","placeholderRate":"Precio"},"itemList":{"descriptionHeader":"Descripci\xf3n","rateHeader":"\xcdndice","quantityHeader":"Cantidad","amountHeader":"Cantidad","addItemMessage":"A\xf1adir art\xedculo"},"invoiceTotals":{"subtotalLabel":"Total parcial","discountLabel":"Descuento","totalLabel":"Total","taxLabel":"Impuesto","paymentsLabel":"Pagos","balanceDueLabel":"Saldo adeudado","taxInclusivePrefix":"C\xaa"},"invoiceNotes":{"notesTitle":"Notas","notesPlaceholder":"Notas: cualquier informaci\xf3n relevante no cubierta, t\xe9rminos y condiciones adicionales"},"taxSetting":{"taxTypeLabel":"Escribe","taxLabel":"Etiqueta","taxRateLabel":"\xcdndice","taxInclusiveLabel":"\xbfInclusivo?"},"taxType":{"onTotal":"En total","deducted":"Deducido","perItem":"Por item","none":"Ninguno"},"discountSetting":{"discountSettingHeader":"Descuento","discountTypeLabel":"Escribe","discountPercentLabel":"Por ciento","discountAmountLabel":"Cantidad"},"discountType":{"none":"Ninguno","perItem":"Por item","percent":"Por ciento","flatAmount":"Cantidad fija"},"invoicePhotoListDictionary":{"photosHeader":"Fotos","invoicePhotoFailedUploadErrorDescription":"Error al cargar la foto. Int\xe9ntalo de nuevo.","invoicePhotoFailedUploadErrorTitle":"No se puede cargar la foto","invoicePhotoUnsupportedErrorTitle":"No se puede agregar la imagen","invoicePhotoSaveErrorDescription":"Error al guardar la foto. Int\xe9ntalo de nuevo.","invoicePhotoSaveErrorTitle":"No se puede guardar la foto"},"invoicePhotoDictionary":{"confirmDelete":"Confirmar","cancel":"Cancelar","invoicePhotoRemoveErrorDescription":"Error al eliminar la foto. Int\xe9ntalo de nuevo.","invoicePhotoRemoveErrorTitle":"No se puede eliminar la foto"},"addInvoicePhotoDictionary":{"photosHeader":"Fotos","addPhoto":"A\xf1adir foto"},"invoiceModalDictionary":{"addPhoto":"A\xf1adir foto","description":"Descripci\xf3n","additionalDetails":"Detalles adicionales","photoDetails":"Detalles de la foto","saveChanges":"Guardar cambios","cancel":"Cancelar"},"invoiceDateLabel":"Fecha","invoiceDueLabel":"Adeudado","invoiceTermsLabel":"T\xe9rminos","poNumber":"N\xfamero de orden de compra","invoiceSignature":{"signatureLabel":"Firma","signatureCancelLabel":"Cancelar","signatureClearLabel":"Borrar","signatureSaveLabel":"Guardar","signatureSignedOnLabel":"Firmado el","signatureRemoveCancelLabel":"Cancelar","signatureRemoveConfirmLabel":"Confirmar"},"termsAcknowledgementDictionary":{"title":"Bienvenido a Invoice Simple. \xdanete a las m\xe1s de 900K peque\xf1as empresas felices.","description":"Al continuar, aceptas nuestros <strong><a href=\\"https://www.invoicesimple.com/terms/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">T\xe9rminos de uso</a></strong> y reconoces haber le\xeddo nuestra <strong><a href=\\"https://www.invoicesimple.com/privacy/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">Pol\xedtica de privacidad</a></strong>.","buttonLabel":"Aceptar y continuar"},"paymentDropdownDictionary":{"recordPayment":"Registrar pago","amount":"Cantidad (BDT)","date":"Fecha","notes":"Notas","method":"M\xe9todo","savePayment":"Guardar pago","close":"Cerrar","paymentHistory":"Historial de pagos","total":"Total","notesPlaceholder":"Nota de pago opcional","receivedOn":"recibido el","paymentScheduling":"Programaci\xf3n de pagos","invoiceTotal":"Total de la factura","balanceDue":"Saldo deudor","depositDue":"Dep\xf3sito adeudado","paid":"Pagado","amountRemaining":"Cantidad restante","addUpcomingPayment":"Agregar pr\xf3ximo pago","requestDeposit":"Solicitar Dep\xf3sito","upcomingPayments":"Pr\xf3ximos pagos","fullyPaid":"Totalmente pagado"},"automatedReviews":{"automatedReviewsHeader":"Rese\xf1as Automatizadas","description":"Solicita autom\xe1ticamente rese\xf1as de Google de clientes que pagan.","getStartedButton":"Comenzar","learnAboutReviewsButton":"Aprender sobre rese\xf1as"}}'),r=JSON.parse('{"invoiceTitle":"Facture d\'achat","client":{"namePlaceholder":"Nom Du Client","emailPlaceholder":"nom@client.com","address1Placeholder":"Rue","address2Placeholder":"Ville, \xc9tat","address3Placeholder":"Code postal","phonePlaceholder":"(123) 456 789","mobilePlaceholder":"(123) 456 789","faxPlaceholder":"(123) 456 789","heading":"Facturer","nameLabel":"Nom","emailLabel":"E-mail","address1Label":"Adresse","address2Label":"Adresse 2","address3Label":"Adresse 3","phoneLabel":"T\xe9l. fixe","mobileLabel":"Portable","faxLabel":"T\xe9l\xe9copie"},"company":{"namePlaceholder":"Nom De L\'entreprise","emailPlaceholder":"nom@entreprise.com","address1Placeholder":"Rue","address2Placeholder":"Ville, \xc9tat","address3Placeholder":"Code postal","phonePlaceholder":"(123) 456 789","businessNumberPlaceholder":"123456789 RT","businessNumberLabel":"N\xb0 de TPS","heading":"\xc0 partir de","nameLabel":"Nom","emailLabel":"E-mail","address1Label":"Adresse","address2Label":"Adresse 2","address3Label":"Adresse 3","phoneLabel":"T\xe9l. fixe","hideAdditionalBusinessDetails":"Masquer les d\xe9tails suppl\xe9mentaires de l\'entreprise","showAdditionalBusinessDetails":"Afficher les d\xe9tails suppl\xe9mentaires de l\'entreprise","websiteLabel":"Site web","businessOwnerLabel":"Propri\xe9taire de l\'entreprise","businessOwnerPlaceholder":"Nom du propri\xe9taire de l\'entreprise"},"currencySetting":{"currencySettingHeader":"Devise"},"logoDrop":{"logoMessage":"+Logo","savingMessage":"Sauvegarder le logo","addMessage":"Ajoutez votre logo","updateMessage":"Mettez \xe0 jour votre logo","removeMessage":"Supprimez votre logo","removeConfirmMessage":"\xcates-vous s\xfbr de vouloir supprimer votre logo?"},"dropzone":{"photoError":"Une erreur s\'est produite lors du t\xe9l\xe9chargement de votre photo","maxFileSizeExceededError":"Veuillez t\xe9l\xe9charger un fichier image de moins de 5 Mo","fileTypeNotSupportedError":"Seuls les types de fichiers jpg, jpeg, png et webp sont autoris\xe9s","tooManyFilesError":"Veuillez t\xe9l\xe9charger un fichier \xe0 la fois","resolutionLimitExceededError":"La r\xe9solution de l\'image d\xe9passe la limite maximale de 20 MP."},"invoiceNumber":{"emptyInputMessage":"Le num\xe9ro est requis","invalidInputMessage":"Le num\xe9ro doit \xeatre compos\xe9 de lettres suivies de chiffres","placeholder":"INV000","label":"Nombre"},"datePicker":{"todayMessage":"Aujourd\'hui"},"invoiceShare":{"share":"Partager","pdf":{"label":"Imprimer {docType}","title":"Imprimez votre {docType}"},"link":{"label":"Obtenir le lien","title":"Obtenez un lien vers votre {docType} \xe0 partager avec votre client"}},"onlinePaymentPreviewDictionary":{"onlinePaymentPreviewLabel":"Aper\xe7u du paiement en ligne","onlinePaymentPreviewTitle":"Pr\xe9visualisez votre facture sur la page de paiement","onlinePaymentPreviewCTA":"Je l\'ai"},"viewOnlinePaymentButtonDictionary":{"viewOnlineButtonLabel":"Voir le paiement en ligne","viewOnlineButtonTitle":"Pr\xe9visualisez votre facture sur la page de paiement","viewOnlineErrorModalTitle":"Lien de paiement non disponible","viewOnlineErrorModalText":"Confirmez que les paiements en ligne sont activ\xe9s pour cette facture et r\xe9essayez.","viewOnlineErrorModalCTA":"D\'ACCORD"},"invoiceTerms":{"none":"Aucun","custom":"Personnalis\xe9","dueOnReceipt":"Sur r\xe9ception","nextDay":"Le prochain jour","days2":"2 jours","days3":"3 jours","days4":"4 jours","days5":"5 jours","days6":"6 jours","days7":"7 jours","days10":"10 jours","days14":"14 jours","days21":"21 jours","days30":"30 jours","days45":"45 jours","days60":"60 jours","days90":"90 jours","days120":"120 jours","days180":"180 jours","days365":"365 jours"},"itemDeleteButton":{"deleteMessage":"Supprimer","confirmDeleteMessage":"Confirmer","cancelDeleteMessage":"Annuler"},"itemInput":{"placeholderCode":"Description de l\'article","placeholderDescription":"D\xe9tails suppl\xe9mentaires"},"itemInputMobile":{"placeholderCode":"Description de l\'article","placeholderDescription":"D\xe9tails suppl\xe9mentaires","placeholderRate":"Prix"},"itemList":{"descriptionHeader":"La description","rateHeader":"Fr\xe9quence","quantityHeader":"Qt\xe9","amountHeader":"Quantit\xe9","addItemMessage":"Ajouter un item"},"invoiceTotals":{"subtotalLabel":"Total","discountLabel":"Rabais","totalLabel":"Le total","taxLabel":"Imp\xf4t","paymentsLabel":"Paiements","balanceDueLabel":"Solde d\xfb","taxInclusivePrefix":"inc."},"invoiceNotes":{"notesTitle":"Remarques","notesPlaceholder":"Notes - toute information pertinente non couverte, termes et conditions suppl\xe9mentaires"},"taxSetting":{"taxTypeLabel":"Taper","taxLabel":"\xc9tiquette","taxRateLabel":"Fr\xe9quence","taxInclusiveLabel":"Compris?"},"taxType":{"onTotal":"Sur totale","deducted":"D\xe9duit","perItem":"Par objet","none":"Aucun"},"discountSetting":{"discountSettingHeader":"Rabais","discountTypeLabel":"Taper","discountPercentLabel":"Pour cent","discountAmountLabel":"Quantit\xe9"},"discountType":{"none":"Aucun","perItem":"Par objet","percent":"Pour cent","flatAmount":"Montant forfaitaire"},"invoicePhotoListDictionary":{"photosHeader":"Photos","invoicePhotoFailedUploadErrorDescription":"Erreur lors du t\xe9l\xe9chargement de la photo. Veuillez r\xe9essayer.","invoicePhotoFailedUploadErrorTitle":"Impossible de t\xe9l\xe9charger la photo","invoicePhotoUnsupportedErrorTitle":"Impossible d\'ajouter l\'image","invoicePhotoSaveErrorDescription":"Erreur lors de l\'enregistrement de la photo. Veuillez r\xe9essayer.","invoicePhotoSaveErrorTitle":"Impossible d\'enregistrer la photo"},"invoicePhotoDictionary":{"confirmDelete":"Confirmer","cancel":"Annuler","invoicePhotoRemoveErrorDescription":"Erreur lors de la suppression de la photo. Veuillez r\xe9essayer.","invoicePhotoRemoveErrorTitle":"Impossible de supprimer la photo"},"addInvoicePhotoDictionary":{"photosHeader":"Photos","addPhoto":"Ajouter une photo"},"invoiceModalDictionary":{"addPhoto":"Ajouter une photo","description":"La description","additionalDetails":"D\xe9tails suppl\xe9mentaires","photoDetails":"D\xe9tails des photos","saveChanges":"Sauvegarder les modifications","cancel":"Annuler"},"invoiceDateLabel":"Date","invoiceDueLabel":"D\xfb","invoiceTermsLabel":"Termes","poNumber":"Num\xe9ro de bon de commande","invoiceSignature":{"signatureLabel":"Signature","signatureCancelLabel":"Annuler","signatureClearLabel":"Effacer","signatureSaveLabel":"Enregistrer","signatureSignedOnLabel":"Sign\xe9 le","signatureRemoveCancelLabel":"Annuler","signatureRemoveConfirmLabel":"Confirmer"},"termsAcknowledgementDictionary":{"title":"Bienvenue chez Invoice Simple. Rejoignez les plus de 900K petites entreprises satisfaites.","description":"En continuant, vous acceptez nos <strong><a href=\\"https://www.invoicesimple.com/terms/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">Conditions d\'utilisation</a></strong> et reconnaissez avoir lu notre <strong><a href=\\"https://www.invoicesimple.com/privacy/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">Politique de confidentialit\xe9</a></strong>.","buttonLabel":"Accepter et continuer"},"paymentDropdownDictionary":{"recordPayment":"Enregistrer le paiement","amount":"Montant (BDT)","date":"Date","notes":"Notes","method":"M\xe9thode","savePayment":"Enregistrer le paiement","close":"Fermer","paymentHistory":"Historique des paiements","total":"Total","notesPlaceholder":"Note de paiement facultative","receivedOn":"re\xe7u le","paymentScheduling":"Planification des paiements","invoiceTotal":"Total de la facture","balanceDue":"Solde d\xfb","depositDue":"D\xe9p\xf4t d\xfb","paid":"Pay\xe9","amountRemaining":"Montant restant","addUpcomingPayment":"Ajouter un paiement \xe0 venir","requestDeposit":"Demander un d\xe9p\xf4t","upcomingPayments":"Paiements \xe0 venir","fullyPaid":"Enti\xe8rement pay\xe9"},"automatedReviews":{"automatedReviewsHeader":"Avis Automatis\xe9s","description":"Demandez automatiquement des avis Google aupr\xe8s des clients payants.","getStartedButton":"Commencer","learnAboutReviewsButton":"En savoir plus sur les avis"}}'),s=JSON.parse('{"invoiceTitle":"Fattura","client":{"namePlaceholder":"Nome Del Cliente","emailPlaceholder":"nome@cliente.com","address1Placeholder":"Strada","address2Placeholder":"Citt\xe0 stato","address3Placeholder":"Cap","phonePlaceholder":"(123) 456 789","mobilePlaceholder":"(123) 456 789","faxPlaceholder":"(123) 456 789","heading":"Disegno di legge per","nameLabel":"Nome","emailLabel":"E-mail","address1Label":"Indirizzo","address2Label":"Indirizzo 2","address3Label":"Indirizzo 3","phoneLabel":"Telefono","mobileLabel":"Cellulare","faxLabel":"Fax"},"company":{"namePlaceholder":"Nome Commerciale","emailPlaceholder":"nome@business.com","address1Placeholder":"Strada","address2Placeholder":"Citt\xe0 stato","address3Placeholder":"Cap","phonePlaceholder":"(123) 456 789","businessNumberPlaceholder":"123456789RT","businessNumberLabel":"GST #","heading":"A partire dal","nameLabel":"Nome","emailLabel":"E-mail","address1Label":"Indirizzo","address2Label":"Indirizzo 2","address3Label":"Indirizzo 3","phoneLabel":"Telefono","hideAdditionalBusinessDetails":"Nascondi dettagli aggiuntivi dell\'attivit\xe0","showAdditionalBusinessDetails":"Mostra dettagli aggiuntivi dell\'attivit\xe0","websiteLabel":"Sito web","businessOwnerLabel":"Proprietario dell\'attivit\xe0","businessOwnerPlaceholder":"Nome del proprietario dell\'attivit\xe0"},"currencySetting":{"currencySettingHeader":"Valuta"},"logoDrop":{"logoMessage":"+ Marchio","savingMessage":"Salvataggio del logo","addMessage":"Aggiungi il tuo logo","updateMessage":"Aggiorna il tuo logo","removeMessage":"Rimuovi il tuo logo","removeConfirmMessage":"Sei sicuro di voler rimuovere il tuo logo?"},"dropzone":{"photoError":"Si \xe8 verificato un errore durante il caricamento della tua foto","maxFileSizeExceededError":"Si prega di caricare un file immagine di dimensioni inferiori a 5 MB","fileTypeNotSupportedError":"Sono consentiti solo i tipi di file jpg, jpeg, png e webp","tooManyFilesError":"Si prega di caricare un file alla volta","resolutionLimitExceededError":"La risoluzione dell\'immagine supera il limite massimo di 20 MP."},"invoiceNumber":{"emptyInputMessage":"Il numero \xe8 obbligatorio","invalidInputMessage":"Il numero deve essere composto da lettere seguite da cifre","placeholder":"INV000","label":"Numero"},"datePicker":{"todayMessage":"Oggi"},"invoiceShare":{"share":"Condividere","pdf":{"label":"Stampa {docType}","title":"Stampa il tuo {docType}"},"link":{"label":"Ottieni collegamento","title":"Ottieni un link al tuo {docType} da condividere con il tuo cliente"}},"onlinePaymentPreviewDictionary":{"onlinePaymentPreviewLabel":"Anteprima del pagamento online","onlinePaymentPreviewTitle":"Anteprima della fattura nella pagina di pagamento","onlinePaymentPreviewCTA":"Capito"},"viewOnlinePaymentButtonDictionary":{"viewOnlineButtonLabel":"Visualizza il pagamento online","viewOnlineButtonTitle":"Visualizza l\'anteprima della fattura nella pagina di pagamento","viewOnlineErrorModalTitle":"Link di pagamento non disponibile","viewOnlineErrorModalText":"Conferma che i pagamenti online siano abilitati per questa fattura e riprova.","viewOnlineErrorModalCTA":"OK"},"invoiceTerms":{"none":"Nessuno","custom":"Costume","dueOnReceipt":"Al ricevimento","nextDay":"Giorno dopo","days2":"2 giorni","days3":"3 giorni","days4":"4 giorni","days5":"5 giorni","days6":"6 giorni","days7":"7 giorni","days10":"10 giorni","days14":"14 giorni","days21":"21 giorni","days30":"30 giorni","days45":"45 giorni","days60":"60 giorni","days90":"90 giorni","days120":"120 giorni","days180":"180 giorni","days365":"365 giorni"},"itemDeleteButton":{"deleteMessage":"Elimina","confirmDeleteMessage":"Confermare","cancelDeleteMessage":"Annulla"},"itemInput":{"placeholderCode":"Descrizione dell\'articolo","placeholderDescription":"Dettagli aggiuntivi"},"itemInputMobile":{"placeholderCode":"Descrizione dell\'articolo","placeholderDescription":"Dettagli aggiuntivi","placeholderRate":"Prezzo"},"itemList":{"descriptionHeader":"Descrizione","rateHeader":"Valutare","quantityHeader":"Qt\xe0","amountHeader":"Quantit\xe0","addItemMessage":"Aggiungi articolo"},"invoiceTotals":{"subtotalLabel":"Totale parziale","discountLabel":"Sconto","totalLabel":"Totale","taxLabel":"Imposta","paymentsLabel":"Pagamenti","balanceDueLabel":"Saldo dovuto","taxInclusivePrefix":"inc"},"invoiceNotes":{"notesTitle":"Appunti","notesPlaceholder":"Note - qualsiasi informazione rilevante non coperta, termini e condizioni aggiuntivi"},"taxSetting":{"taxTypeLabel":"Tipo","taxLabel":"Etichetta","taxRateLabel":"Valutare","taxInclusiveLabel":"Incluso?"},"taxType":{"onTotal":"Sul totale","deducted":"Detratto","perItem":"Per articolo","none":"Nessuno"},"discountSetting":{"discountSettingHeader":"Sconto","discountTypeLabel":"Tipo","discountPercentLabel":"Per cento","discountAmountLabel":"Quantit\xe0"},"discountType":{"none":"Nessuno","perItem":"Per articolo","percent":"Per cento","flatAmount":"Importo forfettario"},"invoicePhotoListDictionary":{"photosHeader":"Fotografie","invoicePhotoFailedUploadErrorDescription":"Errore durante il caricamento della foto. Per favore riprova.","invoicePhotoFailedUploadErrorTitle":"Impossibile caricare la foto","invoicePhotoUnsupportedErrorTitle":"Impossibile aggiungere l\'immagine","invoicePhotoSaveErrorDescription":"Errore durante il salvataggio della foto. Per favore riprova.","invoicePhotoSaveErrorTitle":"Impossibile salvare la foto"},"invoicePhotoDictionary":{"confirmDelete":"Confermare","cancel":"Annulla","invoicePhotoRemoveErrorDescription":"Errore durante la rimozione della foto. Per favore riprova.","invoicePhotoRemoveErrorTitle":"Impossibile rimuovere la foto"},"addInvoicePhotoDictionary":{"photosHeader":"Fotografie","addPhoto":"Aggiungi foto"},"invoiceModalDictionary":{"addPhoto":"Aggiungi foto","description":"Descrizione","additionalDetails":"Dettagli aggiuntivi","photoDetails":"Foto Dettagli","saveChanges":"Salvare le modifiche","cancel":"Annulla"},"invoiceDateLabel":"Data","invoiceDueLabel":"Dovuto","invoiceTermsLabel":"Termini","poNumber":"Numero d\'ordine di acquisto","invoiceSignature":{"signatureLabel":"Firma","signatureCancelLabel":"Annulla","signatureClearLabel":"Cancella","signatureSaveLabel":"Salva","signatureSignedOnLabel":"Firmato il","signatureRemoveCancelLabel":"Annulla","signatureRemoveConfirmLabel":"Conferma"},"termsAcknowledgementDictionary":{"title":"Benvenuto in Invoice Simple. Unisciti alle oltre 900K piccole imprese felici.","description":"Continuando, accetti i nostri <strong><a href=\\"https://www.invoicesimple.com/terms/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">Termini di utilizzo</a></strong> e riconosci di aver letto la nostra <strong><a href=\\"https://www.invoicesimple.com/privacy/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">Informativa sulla privacy</a></strong>.","buttonLabel":"Accetta e continua"},"paymentDropdownDictionary":{"recordPayment":"Registra pagamento","amount":"Importo (BDT)","date":"Data","notes":"Note","method":"Metodo","savePayment":"Salva pagamento","close":"Chiudi","paymentHistory":"Storico pagamenti","total":"Totale","notesPlaceholder":"Nota di pagamento facoltativa","receivedOn":"ricevuto il","paymentScheduling":"Pianificazione dei pagamenti","invoiceTotal":"Totale fattura","balanceDue":"Saldo dovuto","depositDue":"Deposito dovuto","paid":"Pagato","amountRemaining":"Importo rimanente","addUpcomingPayment":"Aggiungi il pagamento imminente","requestDeposit":"Richiedi deposito","upcomingPayments":"Prossimi pagamenti","fullyPaid":"Completamente pagato"},"automatedReviews":{"automatedReviewsHeader":"Recensioni Automatizzate","description":"Richiedi automaticamente recensioni Google dai clienti paganti.","getStartedButton":"Inizia","learnAboutReviewsButton":"Scopri di pi\xf9 sulle recensioni"}}');let l={en:i,fr:r,es:o,nl:JSON.parse('{"invoiceTitle":"Factuur","client":{"namePlaceholder":"Klantnaam","emailPlaceholder":"naam@klant.com","address1Placeholder":"Straat","address2Placeholder":"Stad, staat","address3Placeholder":"Postcode","phonePlaceholder":"(123) 456 789","mobilePlaceholder":"(123) 456 789","faxPlaceholder":"(123) 456 789","heading":"Rekening naar","nameLabel":"Naam","emailLabel":"E-mail","address1Label":"Adres","address2Label":"Adres 2","address3Label":"Adres 3","phoneLabel":"Telefoon","mobileLabel":"Mobiel","faxLabel":"Faxen"},"company":{"namePlaceholder":"Bedrijfsnaam","emailPlaceholder":"naam@business.com","address1Placeholder":"Straat","address2Placeholder":"Stad, staat","address3Placeholder":"Postcode","phonePlaceholder":"(123) 456 789","businessNumberPlaceholder":"123456789 RT","businessNumberLabel":"GST #","heading":"Van","nameLabel":"Naam","emailLabel":"E-mail","address1Label":"Adres","address2Label":"Adres 2","address3Label":"Adres 3","phoneLabel":"Telefoon","hideAdditionalBusinessDetails":"Verberg aanvullende bedrijfsgegevens","showAdditionalBusinessDetails":"Toon aanvullende bedrijfsgegevens","websiteLabel":"Website","businessOwnerLabel":"Eigenaar","businessOwnerPlaceholder":"Naam van de eigenaar"},"currencySetting":{"currencySettingHeader":"Munteenheid"},"logoDrop":{"logoMessage":"+ Logo","savingMessage":"Logo opslaan","addMessage":"Voeg uw logo toe","updateMessage":"Werk uw logo bij","removeMessage":"Verwijder uw logo","removeConfirmMessage":"Weet u zeker dat u uw logo wilt verwijderen?"},"dropzone":{"photoError":"Er is een fout opgetreden bij het uploaden van uw foto","maxFileSizeExceededError":"Gelieve een afbeeldingsbestand te uploaden dat kleiner is dan 5 MB","fileTypeNotSupportedError":"Alleen jpg, jpeg, png en webp bestandstypen zijn toegestaan","tooManyFilesError":"Gelieve \xe9\xe9n bestand tegelijk te uploaden","resolutionLimitExceededError":"De beeldresolutie overschrijdt de maximale limiet van 20 MP."},"invoiceNumber":{"emptyInputMessage":"Nummer is vereist","invalidInputMessage":"Nummer moet bestaan uit letters gevolgd door cijfers","placeholder":"INV000","label":"Nummer"},"datePicker":{"todayMessage":"Vandaag"},"invoiceShare":{"share":"Deel","pdf":{"label":"Afdrukken {docType}","title":"Druk uw {docType}"},"link":{"label":"Krijg link","title":"Ontvang een link naar uw {docType} om te delen met uw klant"}},"onlinePaymentPreviewDictionary":{"onlinePaymentPreviewLabel":"Voorbeeld van online betaling","onlinePaymentPreviewTitle":"Bekijk een voorbeeld van je factuur op de afrekenpagina","onlinePaymentPreviewCTA":"Ik heb het"},"viewOnlinePaymentButtonDictionary":{"viewOnlineButtonLabel":"Bekijk Online betalen","viewOnlineButtonTitle":"Bekijk een voorbeeld van uw factuur op de afrekenpagina","viewOnlineErrorModalTitle":"Betaallink niet beschikbaar","viewOnlineErrorModalText":"Bevestig dat online betalingen zijn ingeschakeld voor deze factuur en probeer het opnieuw.","viewOnlineErrorModalCTA":"OK"},"invoiceTerms":{"none":"Geen","custom":"Aangepast","dueOnReceipt":"Op recept","nextDay":"Volgende dag","days2":"2 dagen","days3":"3 dagen","days4":"4 dagen","days5":"5 dagen","days6":"6 dagen","days7":"7 dagen","days10":"10 dagen","days14":"14 dagen","days21":"21 dagen","days30":"30 dagen","days45":"45 dagen","days60":"60 dagen","days90":"90 dagen","days120":"120 dagen","days180":"180 dagen","days365":"365 dagen"},"itemDeleteButton":{"deleteMessage":"Verwijderen","confirmDeleteMessage":"Bevestigen","cancelDeleteMessage":"Annuleren"},"itemInput":{"placeholderCode":"Product beschrijving","placeholderDescription":"Aanvullende details"},"itemInputMobile":{"placeholderCode":"Product beschrijving","placeholderDescription":"Aanvullende details","placeholderRate":"Prijs"},"itemList":{"descriptionHeader":"Beschrijving","rateHeader":"Tarief","quantityHeader":"Aantal","amountHeader":"Hoeveelheid","addItemMessage":"Voeg item toe"},"invoiceTotals":{"subtotalLabel":"Subtotaal","discountLabel":"Korting","totalLabel":"Totaal","taxLabel":"Belasting","paymentsLabel":"Betalingen","balanceDueLabel":"Saldo verschuldigd","taxInclusivePrefix":"incl"},"invoiceNotes":{"notesTitle":"Notities","notesPlaceholder":"Opmerkingen - alle relevante informatie die niet wordt gedekt, aanvullende voorwaarden"},"taxSetting":{"taxTypeLabel":"Type","taxLabel":"Label","taxRateLabel":"Tarief","taxInclusiveLabel":"Inclusief?"},"taxType":{"onTotal":"Op totaal","deducted":"Afgetrokken","perItem":"Per stuk","none":"Geen"},"discountSetting":{"discountSettingHeader":"Korting","discountTypeLabel":"Type","discountPercentLabel":"Procent","discountAmountLabel":"Hoeveelheid"},"discountType":{"none":"Geen","perItem":"Per stuk","percent":"Procent","flatAmount":"Vast bedrag"},"invoicePhotoListDictionary":{"photosHeader":"Foto\'s","invoicePhotoFailedUploadErrorDescription":"Fout bij uploaden van foto. Probeer het opnieuw.","invoicePhotoFailedUploadErrorTitle":"Kan foto niet uploaden","invoicePhotoUnsupportedErrorTitle":"Kan afbeelding niet toevoegen","invoicePhotoSaveErrorDescription":"Fout bij opslaan van foto. Probeer het opnieuw.","invoicePhotoSaveErrorTitle":"Kan foto niet opslaan"},"invoicePhotoDictionary":{"confirmDelete":"Bevestigen","cancel":"Annuleren","invoicePhotoRemoveErrorDescription":"Fout bij verwijderen van foto. Probeer het opnieuw.","invoicePhotoRemoveErrorTitle":"Kan foto niet verwijderen"},"addInvoicePhotoDictionary":{"photosHeader":"Foto\'s","addPhoto":"Voeg foto toe"},"invoiceModalDictionary":{"addPhoto":"Voeg foto toe","description":"Beschrijving","additionalDetails":"Aanvullende details","photoDetails":"Foto details","saveChanges":"Wijzigingen opslaan","cancel":"Annuleren"},"invoiceDateLabel":"Datum","invoiceDueLabel":"Ten gevolge","invoiceTermsLabel":"Voorwaarden","poNumber":"Bestelnummer","invoiceSignature":{"signatureLabel":"Handtekening","signatureCancelLabel":"Annuleren","signatureClearLabel":"Wissen","signatureSaveLabel":"Opslaan","signatureSignedOnLabel":"Ondertekend op","signatureRemoveCancelLabel":"Annuleren","signatureRemoveConfirmLabel":"Bevestigen"},"termsAcknowledgementDictionary":{"title":"Welkom bij Invoice Simple. Sluit u aan bij de meer dan 900K tevreden kleine bedrijven.","description":"Door verder te gaan, gaat u akkoord met onze <strong><a href=\\"https://www.invoicesimple.com/terms/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">Gebruiksvoorwaarden</a></strong> en erkent u dat u onze <strong><a href=\\"https://www.invoicesimple.com/privacy/\\" target=\\"_blank\\" rel=\\"noreferrer noopener\\" className=\\"hover:text-gray-700 focus:text-gray-600\\">Privacyverklaring</a></strong> hebt gelezen.","buttonLabel":"Akkoord en doorgaan"},"paymentDropdownDictionary":{"recordPayment":"Betaling registreren","amount":"Bedrag (BDT)","date":"Datum","notes":"Notities","method":"Methode","savePayment":"Betaling opslaan","close":"Sluiten","paymentHistory":"Betalingsgeschiedenis","total":"Totaal","notesPlaceholder":"Optionele betalingsnotitie","receivedOn":"ontvangen op","paymentScheduling":"Betalingsplanning","invoiceTotal":"Factuur Totaal","balanceDue":"Saldo verschuldigd","depositDue":"Verschuldigde borg","paid":"Betaald","amountRemaining":"Resterend bedrag","addUpcomingPayment":"Voeg komende betaling toe","requestDeposit":"Aanbetaling aanvragen","upcomingPayments":"Aankomende betalingen","fullyPaid":"Volledig betaald"},"automatedReviews":{"automatedReviewsHeader":"Geautomatiseerde Beoordelingen","description":"Vraag automatisch Google-beoordelingen aan van betalende klanten.","getStartedButton":"Aan de slag","learnAboutReviewsButton":"Meer over beoordelingen"}}'),it:s,de:a};function d(e){let t=(e||"en-US").substring(0,2);return Object.keys(l).includes(t)?l[t]:l.en}},74659:function(e,t,n){"use strict";n.d(t,{A:function(){return l}});var a=n(37821);n(58078);var i=n(13084),o=n.n(i);n(56335);var r=n(75805);let s=[0,"","0","0.00","0%","0.000%"];function l(e){let t=e.className||"form-input block w-full text-xs text-right rounded border border-gray-400 py-2 px-5 leading-5 focus:text-gray-600";return(0,a.jsx)(r.V,{height:"38","data-sentry-element":"RenderOnClient","data-sentry-component":"NumericInput","data-sentry-source-file":"numeric-input.tsx",children:(0,a.jsx)(o(),{id:e.id,"aria-label":e.ariaLabel,disabled:e.disabled,mobile:e.mobile,step:e.step,min:e.min,max:e.max,format:e.format,className:"".concat(t).concat(e.disabled?" cursor-not-allowed text-gray-400":""),style:e.style,placeholder:e.placeholder,precision:e.precision,value:e.value,onChange:e.onChange,onFocus:e.onFocus||(t=>{let n=t.target,a=new MutationObserver(()=>{if(document.activeElement===n){var t;let i=null===(t=n.value)||void 0===t?void 0:t.trim();(e.selectOnFocus||s.includes(i))&&n.select(),a.disconnect()}});a.observe(n.parentElement||n,{childList:!0,subtree:!0}),setTimeout(()=>{if(document.activeElement===n){var t;let i=null===(t=n.value)||void 0===t?void 0:t.trim();(e.selectOnFocus||s.includes(i))&&n.select(),a.disconnect()}},50)}),maxLength:e.maxLength,"data-sentry-element":"ReactNumericInput","data-sentry-source-file":"numeric-input.tsx"})})}},23805:function(e,t,n){"use strict";n.d(t,{x:function(){return d}});var a=n(37821),i=n(58078),o=n(73378),r=n(87698),s=n(69327),l=n(48751);function d(e){let{value:t,dictionary:n,inputDisabled:d,buttonDisabled:c,showSuccess:u,onChange:m,onValidEmail:p,onClick:y,isLoading:v}=e,{previewEmailHeader:g,buttonText:h,buttonTextLoading:f,placeholder:b}=n;return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(l.i,{className:"preview-email-header","data-sentry-element":"SettingHeader","data-sentry-source-file":"preview-email.tsx",children:g}),(0,a.jsx)("div",{className:"preview-email-container",children:u?(0,a.jsx)("p",{className:"block text-xs text-gray-800",children:n.successMessage}):(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(s.U,{"data-testid":"preview-email-input",name:"preview-email",placeholder:b,value:t,disabled:d,onChange:e=>{""===e.target.value?(m(void 0),p(void 0)):m(e.target.value)},onValidEmail:e=>p(e)},"preview-email"),(0,a.jsx)(o.z,{"data-testid":"btn-preview-email-send",variant:"primary",className:(0,r.cn)("w-full",c&&"cursor-not-allowed"),id:"btn-preview-email",disabled:c,onClick:y,children:v?"".concat(f):"".concat(h)})]})})]})}},90469:function(e,t,n){"use strict";n.d(t,{P:function(){return s},X:function(){return r}});var a=n(37821);n(58078);var i=n(37625),o=n(75805);let r={control:(e,t)=>({...e,border:t.menuIsOpen?"1px solid #d2d6dc":"1px solid rgb(159,166,178)",boxShadow:"none",outline:"none",cursor:t.isFocused?"text":"default",borderBottomLeftRadius:t.menuIsOpen?0:e.borderBottomLeftRadius,borderBottomRightRadius:t.menuIsOpen?0:e.borderBottomRightRadius}),valueContainer:e=>({...e,padding:"0.5rem 1rem"}),singleValue:e=>({...e,margin:0}),input:e=>({...e,margin:0}),menu:e=>({...e,margin:0}),menuList:e=>({...e,padding:0}),indicatorSeparator:()=>({display:"none"}),option:(e,t)=>({...e,cursor:"pointer",color:t.isSelected||t.isFocused?"#333333":"#666666",backgroundColor:t.isFocused?"rgba(178, 211, 255, 0.3)":t.isSelected?"rgba(178, 211, 255, 0.2)":"transparent"}),dropdownIndicator:e=>({...e,cursor:"pointer",color:"rgb(159, 166, 178)"})};function s(e){let{id:t,ariaLabel:n,selected:s,possibleValues:l,label:d,mobile:c,labelStyle:u,disabled:m,onChange:p,typeToLabel:y}=e,v=void 0===s?void 0:{label:y(s),value:y(s)},g=l.map(e=>({label:y(e),value:y(e)}));return(0,a.jsx)(o.V,{height:"38","data-sentry-element":"RenderOnClient","data-sentry-component":"Select","data-sentry-source-file":"select.tsx",children:(0,a.jsxs)("div",{"data-testid":"react-select-wrapper",className:"".concat(c?"w-full":"flex items-center w-full my-2").concat(m?" cursor-not-allowed":""),children:[d&&(0,a.jsx)("label",{htmlFor:t,className:"block text-xs leading-5",style:u,children:d}),(0,a.jsx)(i.ZP,{id:t,"aria-label":n,value:v,className:"w-full text-xs leading-5 bg-transparent focus:z-10 focus:outline-none transition ease-in-out duration-150",classNamePrefix:"react-select",styles:r,options:g,isDisabled:m,onChange:function(e){let t=e&&"value"in e?e.value:void 0;p(l.filter(e=>y(e)===t)[0])},"data-sentry-element":"ReactSelect","data-sentry-source-file":"select.tsx"})]})})}},48751:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var a=n(37821);n(58078);let i=e=>(0,a.jsx)("div",{className:"".concat(e.className," uppercase text-gray-800 text-xs font-medium border-b border-gray-800 pb-1 mb-1"),"data-sentry-component":"SettingHeader","data-sentry-source-file":"setting-header.tsx",children:e.children})},80298:function(e,t,n){"use strict";n.d(t,{E3:function(){return o},Y$:function(){return s},rR:function(){return r},th:function(){return l}});var a=n(56302),i=n(47791);async function o(e){try{let t=await (0,a.$8)(e);if(i.tO(t)){let e=t.right.value;if("string"==typeof e)return e}return}catch(e){return}}async function r(e){try{let t=await (0,a.$8)(e);if(i.tO(t)){let e=t.right.value;if("boolean"==typeof e)return e}return}catch(e){return}}async function s(e){try{let t=await (0,a.$8)(e);if(i.tO(t)){let e=t.right.value;if("number"==typeof e)return e}return}catch(e){return}}async function l(e){try{let t=await (0,a.$8)(e);if(i.tO(t)){let e=t.right.value;if("number"==typeof e)return e}return}catch(e){return}}},91177:function(e,t,n){"use strict";n.d(t,{SQ:function(){return r},nc:function(){return b},zk:function(){return o.zk},ZV:function(){return o.ZV},A5:function(){return o.A5},E3:function(){return o.E3},EJ:function(){return g},M_:function(){return d},Cc:function(){return h},uP:function(){return x}}),n(37821);var a=n(58078),i=n(64142);n(70517),n(75459),n(9845),n(88647),n(57733),n(77190),n(72288),n(48622),n(23805),n(2456),n(73174),n(37497),n(5993),n(18528),n(11463);var o=n(56621);n(20653);let r="#FFFFFF";var s=n(56302);function l(e,t,n){(0,a.useEffect)(()=>{n&&(0,s.o1)({name:e,value:t||""})},[t,n])}function d(e,t,n){var a,o,r,s,d,c,u;let m=e.address1,p="address2"in e?e.address2:void 0,y="address3"in e?e.address3:void 0,v=n&&"address2"in n.company?n.company.address2:void 0,g=n&&"address3"in n.company?n.company.address3:void 0,h=t&&m!==(null==n?void 0:null===(a=n.company)||void 0===a?void 0:a.address1),f=t&&p!==v,b=t&&y!==g,x=t&&e.company!==(null==n?void 0:null===(o=n.company)||void 0===o?void 0:o.company),w=t&&e.name!==(null==n?void 0:null===(r=n.company)||void 0===r?void 0:r.name),P=t&&e.email!==(null==n?void 0:null===(s=n.company)||void 0===s?void 0:s.email),T=t&&e.phone!==(null==n?void 0:null===(d=n.company)||void 0===d?void 0:d.phone),N=t&&e.website!==(null==n?void 0:null===(c=n.company)||void 0===c?void 0:c.website),j=t&&e.businessNumber!==(null==n?void 0:null===(u=n.company)||void 0===u?void 0:u.businessNumber);l(i.Vd.CompanyName,e.company,x),l(i.Vd.ContactName,e.name,w),l(i.Vd.ContactEmail,e.email,P),l(i.Vd.CompanyAddressLine1,m,h),l(i.Vd.CompanyAddressLine2,p,f),l(i.Vd.CompanyAddressLine3,y,b),l(i.Vd.ContactPhone,e.phone,T),l(i.Vd.CompanyBusinessNumber,e.businessNumber,j),l(i.Vd.ContactWebsiteUrl,e.website,N)}var c=n(40757),u=n.n(c);let m=e=>{let t=parseInt(e,10)+1,n=e.length-"".concat(t).length;return n>0?u()("0",n)+"".concat(t):t},p=e=>{let t,n;let a=e.match(/(.*?)(\d+)$/);return a?(t=a[1],n=a[2]):t=e,(!n||isNaN(n))&&(n=0),{prefix:t,suffix:n}},y=e=>{e||(e="");let{prefix:t,suffix:n}=p(e);return"".concat(t).concat(m(n))};var v=n(80298);async function g(e,t){if(t===i.ow.DOCTYPE_ESTIMATE){await (0,s.o1)({name:i.Vd.EstimateLastNo,value:e});return}await (0,s.o1)({name:i.Vd.InvoiceLastNo,value:e})}function h(e){let{currentInvoiceNumber:t,hasDocumentBeenSaved:n,docType:i,defaultDocument:o}=e;(0,a.useEffect)(()=>{n&&(null==o?void 0:o.invoiceNo)!==t&&g(t,i)},[t,n,i,o])}async function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.ow.DOCTYPE_INVOICE;return e===i.ow.DOCTYPE_ESTIMATE?(0,v.E3)(i.Vd.EstimateLastNo):(0,v.E3)(i.Vd.InvoiceLastNo)}async function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.ow.DOCTYPE_INVOICE,t=await f(e);if(t)return y(t)}function x(e){let t=null==e?void 0:e.remoteId,n=null==e?void 0:e.url,[o,r]=(0,a.useState)(n&&t?{type:"photo-loaded",url:n,remoteId:t}:{type:"no-photo"});function l(e){r({type:"photo-error",errorMessage:e})}async function d(e){let{remoteId:t,url:n}=e;r({type:"photo-loaded",url:n,remoteId:t});try{await (0,s.o1)({name:i.Vd.CompanyLogo,value:t})}catch(e){l(e&&e.message?e.message:"Failed to update setting")}}return{logo:o,onLogoDelete:async function(e){try{let t=await (0,s.sU)(e);t&&(await (0,s.tU)(t.objectId,{deleted:!0,updated:Date.now()}),r({type:"no-photo"}))}catch(e){l("Failed to delete logo")}},onLogoUpload:async function(e){let t=function(e){try{return URL.createObjectURL(e)}catch(e){return}}(e);r({type:"photo-loading",previewUrl:t||""});try{let t=await (0,s.yA)({file:e});d(t)}catch(e){l("Failed to upload logo")}finally{t&&URL.revokeObjectURL(t)}},onLogoError:l,updateLogoState:r}}},56621:function(e,t,n){"use strict";n.d(t,{A5:function(){return c},E3:function(){return d},ZV:function(){return m},_T:function(){return p},zk:function(){return u}});var a=n(64142),i=n(92566),o=n(58078),r=n(56302),s=n(79394),l=n(80298);async function d(){let e=await (0,l.Y$)(a.Vd.TaxType);if(i.G0([i.i0(0),i.i0(1),i.i0(2),i.i0(3)]).is(e))return e}async function c(){return await (0,l.th)(a.Vd.TaxRate)}async function u(){return await (0,l.rR)(a.Vd.TaxInclusive)}async function m(){return await (0,l.E3)(a.Vd.TaxLabel)}function p(){let{updateType:e}=function(){let[e,t]=(0,o.useState)(null),n=(0,s.N)(e,500);return(0,o.useEffect)(()=>{null!==n&&(0,r.o1)({name:a.Vd.TaxType,value:n})},[n]),{updateType:t}}(),{updateRate:t}=function(){let[e,t]=(0,o.useState)(null),n=(0,s.N)(e,500);return(0,o.useEffect)(()=>{null!==n&&(0,r.o1)({name:a.Vd.TaxRate,value:n})},[n]),{updateRate:t}}(),{updateTaxInclusive:n}=function(){let[e,t]=(0,o.useState)(null),n=(0,s.N)(e,500);return(0,o.useEffect)(()=>{null!==n&&(0,r.o1)({name:a.Vd.TaxInclusive,value:n})},[n]),{updateTaxInclusive:t}}(),{updateLabel:i}=function(){let[e,t]=(0,o.useState)(null),n=(0,s.N)(e,500);return(0,o.useEffect)(()=>{null!==n&&(0,r.o1)({name:a.Vd.TaxLabel,value:n})},[n]),{updateLabel:t}}();return{updateType:e,updateTaxInclusive:n,updateRate:t,updateLabel:i}}},20653:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var a=n(64142),i=n(56302);function o(){return{updateDefaultColor:async function(e){await (0,i.o1)({name:a.Vd.ThemeColor,value:e})}}}},79394:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var a=n(58078);function i(e,t){let[n,i]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let n=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(n)}},[e]),n}},2456:function(e,t,n){"use strict";n.d(t,{Hk:function(){return i}});var a=n(65833);function i(e){window.location.assign("".concat(e,"?").concat(a.a$.REF,"=").concat(a.a$.DOCUMENT_ACTIONS))}},73174:function(e,t,n){"use strict";n.d(t,{a:function(){return p}});var a=n(37821),i=n(58078),o=n(64142),r=n(90469),s=n(50753),l=n(13084),d=n.n(l),c=n(87698);function u(e){let{id:t,value:n,label:i,disabled:o,onChange:r}=e;return(0,a.jsxs)("div",{className:"flex items-center w-full my-2","data-sentry-component":"TaxRateInput","data-sentry-source-file":"tax-rate-input.tsx",children:[i&&(0,a.jsx)("label",{htmlFor:t,className:"block text-xs leading-5 text-gray-800 font-medium",style:{minWidth:"4.5rem"},children:i}),(0,a.jsxs)("div",{className:"relative w-full rounded-md bg-white",children:[(0,a.jsx)(d(),{id:t,mobile:!1,className:(0,c.cn)("tax-rate-input form-input block w-full focus:text-gray-600",{"cursor-not-allowed text-gray-400":o}),disabled:o,value:n,step:1,min:0,max:100,precision:3,onChange:e=>{"number"==typeof e&&r(Math.min(100,Math.max(0,e))),"number"!=typeof e&&r(0)},onFocus:e=>{e.target.select()},style:!1,"data-sentry-element":"NumericInput","data-sentry-source-file":"tax-rate-input.tsx"}),(0,a.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 font-medium font-inter text-[#9fa6b2] text-sm",children:"%"})]})]})}var m=n(48751);function p(e){let{taxType:t,taxLabelValue:n,taxRate:l,taxInclusive:d,dictionary:c,disabled:p,onTaxTypeChange:y,onTaxLabelChange:v,onTaxRateChange:g,onTaxInclusiveChange:h}=e,{taxSetting:f,taxType:b}=c;return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(m.i,{className:"tax-setting-header","data-sentry-element":"SettingHeader","data-sentry-source-file":"tax-setting.tsx",children:n}),(0,a.jsxs)("div",{children:[(0,a.jsx)(r.P,{id:"tax-setting-type",ariaLabel:"Select Tax Type",label:f.taxTypeLabel,labelStyle:{minWidth:"4.5rem",color:"#2d3748",fontWeight:500},selected:t,possibleValues:[o.oA.TAX_SUBTOTAL,o.oA.TAX_DEDUCTED,o.oA.TAX_ITEM,o.oA.TAX_NONE],onChange:y,typeToLabel:e=>(function(e,t){switch(e){case o.oA.TAX_SUBTOTAL:return t.onTotal;case o.oA.TAX_DEDUCTED:return t.deducted;case o.oA.TAX_ITEM:return t.perItem;case o.oA.TAX_NONE:return t.none}})(e,b),"data-sentry-element":"Select","data-sentry-source-file":"tax-setting.tsx"}),t!==o.oA.TAX_NONE&&(0,a.jsx)(s.I,{labelStyle:{minWidth:"4.5rem"},id:"tax-setting-label",label:f.taxLabel,disabled:p,value:n,onChange:e=>v(e.target.value)}),(t===o.oA.TAX_SUBTOTAL||t===o.oA.TAX_DEDUCTED)&&(0,a.jsx)(u,{id:"tax-setting-rate",label:f.taxRateLabel,value:l,disabled:p,onChange:g}),(t===o.oA.TAX_SUBTOTAL||t===o.oA.TAX_ITEM)&&(0,a.jsxs)("div",{className:"tax-setting-inclusive-container flex items-center w-full my-2",children:[(0,a.jsx)("label",{htmlFor:"tax-setting-inclusive",className:"block text-xs leading-5 text-gray-800 font-medium",style:{minWidth:"4.5rem"},children:f.taxInclusiveLabel}),(0,a.jsx)("input",{type:"checkbox",id:"tax-setting-inclusive",className:"tax-inclusive-input",checked:d,onChange:e=>h(e.target.checked)})]})]})]})}},22707:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var a=n(86129);function i(e){let{client:t,...n}=e,i=+(0,a.$k)({client:{shipAmount:null==t?void 0:t.shipAmount},...n});return+(0,a.jI)({client:{shipAmount:null==t?void 0:t.shipAmount},...n})>0&&0>=(i||0)}},68453:function(e,t,n){"use strict";n.d(t,{c:function(){return a},p:function(){return i}});let a=e=>e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?e:0;function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;try{let n=parseFloat(e.toString());if(isNaN(n))throw Error("Invalid number");let a=Math.pow(10,t);return Math.round(n*a)/a}catch(e){return NaN}}},60477:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});let a=()=>{document.body.scrollTop=0,document.documentElement&&(document.documentElement.scrollTop=0)}},35243:function(e,t,n){"use strict";n.d(t,{b:function(){return k},X:function(){return M}});var a=n(37821);n(58078);var i=n(81071),o=n(19395),r=n(64142),s=n(42236),l=n(9411),d=n(37296),c=n(5230),u=n(31957),m=n(78085),p=n(69146),y=n(9845),v=n(85999),g=n(41065),h=n(9),f=n(41418),b=n(86129),x=n(88470),w=n(54085),P=n(70572);let T=async e=>{let t=await (0,P.r)(e.map(e=>e.resourceRemoteId)),n=[];for(let o of t){var a,i;let t=(0,f.Z)(),r={remoteId:t,url:o.url,md5:o.md5,updated:Date.now(),deleted:o.deleted},s=await (0,w.C)(r),l=null===(a=e.find(e=>e.resourceRemoteId===o.remoteId))||void 0===a?void 0:a.name,d=null===(i=e.find(e=>e.resourceRemoteId===o.remoteId))||void 0===i?void 0:i.description;s&&n.push({resourceRemoteId:t,url:o.url,md5:o.md5,updated:Date.now(),deleted:o.deleted,type:o.type,name:l,description:d})}return n.filter(e=>!!e)},N=async e=>{let t=(await (0,P.r)([e.resourceRemoteId]))[0];if(!t)return;let n=(0,f.Z)(),a={remoteId:n,url:t.url,md5:t.md5,updated:Date.now(),deleted:t.deleted};return await (0,w.C)(a),n};var j=n(56302),E=n(91177);let C=e=>(0,h.useMutation)({mutationFn:I,...e}),I=async e=>{var t,n,a,i,o,s,l,d,c;let{estimate:u,renameTitleSetting:m,defaultInvoiceComment:p,defaultEstimateComment:y,defaultTemplateSetting:v,defaultFeesType:g,trackAction:h}=e;if(!u)throw Error("Estimate not found");if(u.docType!==r.ow.DOCTYPE_ESTIMATE)throw Error("Estimate required to convert to Invoice");let w=await (0,E.nc)(r.ow.DOCTYPE_INVOICE)||"INV0001";await (0,E.EJ)(w,r.ow.DOCTYPE_INVOICE);let P=e=>({...e,remoteId:(0,f.Z)()}),N=S({estimateNote:u.notes,defaultEstimateComment:y||"",defaultInvoiceComment:p||""}),C=(null===(t=u.photos)||void 0===t?void 0:t.length)?await T(u.photos):[],I=await D(u.signature),M=u.items.map(e=>P({code:e.code,description:e.description,discountRate:e.discountRate,discountType:e.discountType,quantity:e.quantity,rate:e.rate,taxRate:e.taxRate,taxable:e.taxable})),A=(0,f.Z)(),L=C.length?null==C?void 0:C.map(e=>P(e)):[],O=new Date,k=(await (0,j.Kd)({client:P(u.client),company:P(u.company),items:M,photos:L,setting:{...P(u.setting),estimateId:u.remoteId,fullyPaid:!1,template:v,feesType:g},docType:r.ow.DOCTYPE_INVOICE,title:m||"Invoice",createDate:O,deleted:!1,remoteId:A,invoiceDate:O.toISOString().split("T")[0],invoiceNo:w||"INV0001",updated:O.valueOf(),notes:N,poNumber:u.poNumber,signature:I,payments:[],sentStatus:{name:"draft"},objectId:void 0,platform:r.t4.WEB})).data;h("estimate-to-invoice",{estimateRemoteId:u.remoteId,invoiceRemoteId:A,platform:r.t4.WEB,"client-signature":(null===(n=u.setting)||void 0===n?void 0:n.estimateSignatureRequired)?u.setting.estimateSignedAt?"signed":"unsigned":"off"}),h("invoice-create",{invoiceId:k.objectId,"doc-type":r.ow.DOCTYPE_INVOICE,platform:r.t4.WEB,color:null==k?void 0:null===(a=k.setting)||void 0===a?void 0:a.color,template:null==k?void 0:null===(i=k.setting)||void 0===i?void 0:i.template}),(0,x.FY)("invoice-create");let R=(!!(null===(o=u.client)||void 0===o?void 0:o.name)||!!(null===(s=u.client)||void 0===s?void 0:s.email))&&(!!(null===(l=u.company)||void 0===l?void 0:l.name)||!!(null===(d=u.company)||void 0===d?void 0:d.email)||(null===(c=u.company)||void 0===c?void 0:c.company))&&(0,b.T)({items:u.items,setting:u.setting,client:u.client}).gt(r.xE);return{newInvoiceObjectId:k.objectId,newInvoiceRemoteId:k.remoteId,nextInvoiceNumber:w,isInvoiceCompleted:R}},S=e=>{let{estimateNote:t,defaultEstimateComment:n,defaultInvoiceComment:a}=e;return t||n||a?t&&t.includes(n)?t.replace(n,a):t&&!t.includes(n)?"".concat(t,"\n\n").concat(a):a:void 0},D=async e=>{if(!(null==e?void 0:e.resourceRemoteId))return;let t=await N(e);if(t)return{resourceRemoteId:t,signDate:e.signDate}},M=e=>{var t,n,h,f;let{document:b,defaultSettings:x,locale:w}=e,{f:P,ft:T,fta:N}=(0,s.Y)(),j=(null===(t=(0,c.y)(x,r.Vd.LocaleDateFormat))||void 0===t?void 0:t.valStr)||"PP",E=(0,i.useRouter)(),{user:I,subscriptionStatus:S,incrementDocCount:D,trackAction:M}=(0,y.D)(),{data:A}=(0,o.useQuery)((0,m.x)({documentId:b.objectId},{enabled:!!b.objectId,refetchOnWindowFocus:!1,refetchOnMount:!1})),{mutate:L}=C({onSuccess:e=>{let{newInvoiceObjectId:t,nextInvoiceNumber:n,newInvoiceRemoteId:a,isInvoiceCompleted:i}=e;if(i){var o;D(r.ow.DOCTYPE_INVOICE),M("invoice-complete",{"invoice-id":t,"remote-id":a,"invoice-no":n,"doc-type":r.ow.DOCTYPE_INVOICE,platform:r.t4.WEB}),(null!==(o=null==S?void 0:S.docsThresholdCount)&&void 0!==o?o:0)<=1&&(0,v.m)()}E.push("/invoices/".concat(t)),(0,u.O7)({title:P({id:"invoice.make.alert.success.title"},{invoiceNo:n,estimateNo:b.invoiceNo}),isClosable:!0})},onError:e=>{l.D.error("failed to make invoice from estimate",e),(0,u.jx)({title:P({id:"invoice.make.alert.failed.title"}),isClosable:!0})}}),O=null===(n=(0,c.y)(x,r.Vd.RenameInvoiceTitle))||void 0===n?void 0:n.valStr,k=null===(h=(0,c.y)(x,r.Vd.DefaultInvoiceNote))||void 0===h?void 0:h.valStr,R=null===(f=(0,c.y)(x,r.Vd.DefaultEstimateNote))||void 0===f?void 0:f.valStr,F=(0,d.A)(x),_=async()=>{let e=(0,p.Ut)(I,S,r.ow.DOCTYPE_INVOICE);if(e){E.push(e);return}L({estimate:null==A?void 0:A.document,renameTitleSetting:O,defaultInvoiceComment:k,defaultEstimateComment:R,defaultFeesType:F,trackAction:M})},B=b.setting.estimateSignedAt;return B?(0,a.jsxs)("div",{"data-testid":"estimate-client-signature-wrapper",className:"py-[10px] px-[16px] mb-5 rounded bg-white text-[#1f2937] text-xs leading-[16px] cursor-pointer w-full border border-gray-400 hover:opacity-80",onClick:_,"data-sentry-component":"SignedEstimateMakeInvoice","data-sentry-source-file":"signed-estimate-make-invoice.tsx",children:[(0,a.jsxs)("div",{"data-testid":"estimate-client-signature-title",className:"font-bold",children:[T({id:"doc.history.signed"})+" ",(0,a.jsx)(g.U,{date:new Date(B.iso),locale:w,dateFormat:j,"data-sentry-element":"LocalizedDate","data-sentry-source-file":"signed-estimate-make-invoice.tsx"})]}),(0,a.jsx)("div",{"data-testid":"estimate-client-signature-button",className:"mt-1 font-semibold text-[#2563EB] inline-flex items-center hover:text-[#2563EB] focus:text-[#2563EB] active:text-[#2563EB]",children:N({id:"kebab.make.invoice"})})]}):null};var A=n(73378),L=n(89113),O=n(48622);let k=e=>{var t,n,o,m;let{estimate:g,disabled:h,settings:f}=e,{f:b}=(0,s.Y)(),x=(0,i.useRouter)(),{user:w,subscriptionStatus:P,incrementDocCount:T,trackAction:N}=(0,y.D)(),j=async()=>{let e={...g.setting,fullyPaid:!0};await (0,O.a)({document:{...g,setting:e}})},E=async(e,t)=>{await j(),x.push("/invoices/".concat(e)),(0,u.O7)({title:b({id:"invoice.make.alert.success.title"}),body:b({id:"invoice.make.alert.success.body"},{invoiceNo:t,estimateNo:g.invoiceNo}),isClosable:!0})},{mutate:I}=C({onSuccess:async e=>{let{newInvoiceObjectId:t,nextInvoiceNumber:n,newInvoiceRemoteId:a,isInvoiceCompleted:i}=e;if(await E(t,n),i){var o;T(r.ow.DOCTYPE_INVOICE),N("invoice-complete",{"invoice-id":t,"remote-id":a,"invoice-no":n,"doc-type":r.ow.DOCTYPE_INVOICE,platform:r.t4.WEB}),(null!==(o=null==P?void 0:P.docsThresholdCount)&&void 0!==o?o:0)<=1&&(0,v.m)()}},onError:e=>{l.D.error("failed to make invoice from estimate",e),(0,u.jx)({title:b({id:"invoice.make.alert.failed.title"}),isClosable:!0})}}),S=null===(t=(0,c.y)(f,r.Vd.RenameInvoiceTitle))||void 0===t?void 0:t.valStr,D=null===(n=(0,c.y)(f,r.Vd.DefaultInvoiceNote))||void 0===n?void 0:n.valStr,M=null===(o=(0,c.y)(f,r.Vd.DefaultEstimateNote))||void 0===o?void 0:o.valStr,k=null===(m=(0,c.y)(f,r.Vd.ThemeTemplate))||void 0===m?void 0:m.valNum,R=(0,d.A)(f),F=async()=>{let e=(0,p.Ut)(w,P,r.ow.DOCTYPE_INVOICE);if(e){x.push(e);return}I({estimate:g,renameTitleSetting:S,defaultInvoiceComment:D,defaultEstimateComment:M,defaultTemplateSetting:(0,L.N)(w,k),defaultFeesType:R,trackAction:N})};return(0,a.jsx)(A.z,{disabled:h,onClick:F,"data-sentry-element":"Button","data-sentry-component":"ButtonMakeInvoice","data-sentry-source-file":"button-make-invoice.tsx",children:b({id:"kebab.make.invoice"})})}},88921:function(e,t,n){"use strict";n.d(t,{R:function(){return b}});var a=n(37821),i=n(81071),o=n(64142),r=n(73378),s=n(42236),l=n(27248),d=n(23835);n(58078);let c=e=>{let{left:t,right:n}=e;return(0,a.jsx)("header",{className:"my-[10px] w-full","data-sentry-component":"PageFooter","data-sentry-source-file":"page-footer.tsx",children:(0,a.jsxs)("div",{className:"flex justify-between flex-row w-full py-[8px]",children:[(0,a.jsx)(a.Fragment,{children:t}),(0,a.jsx)(a.Fragment,{children:n})]})})};var u=n(19395),m=n(9),p=n(51509),y=n(61449),v=n(17892),g=n(78085),h=n(96995);let f=e=>{var t,n,d,c;let{documentId:f,docType:b=o.ow.DOCTYPE_INVOICE}=e,{isDeleting:x,setIsDeleting:w}=(0,h.s)(),{ft:P}=(0,s.Y)(),T=(0,i.useRouter)(),{data:N}=(0,u.useQuery)((0,g.x)({documentId:f},{enabled:!!f})),j=b===o.ow.DOCTYPE_ESTIMATE?"/estimates":"/invoices",E=(0,m.useMutation)((d={documentId:f},{mutationFn:async()=>{let e=await (0,v.Y)();await (0,y.W)("/classes/Invoice/".concat(d.documentId),{headers:{"X-Parse-Session-Token":e},cache:"no-cache",body:JSON.stringify({updated:new Date().getTime(),deleted:!0}),method:"PUT"})},onSuccess:()=>{T.push(j)},onSettled:()=>{w(!1)}})),C=(0,m.useMutation)((c={documentId:f},{mutationFn:async()=>{let e=await (0,v.Y)();await (0,y.W)("/classes/Invoice/".concat(c.documentId),{headers:{"X-Parse-Session-Token":e},cache:"no-cache",body:JSON.stringify({updated:new Date().getTime(),deleted:!1}),method:"PUT"})},onSuccess:()=>{T.push(j)},onSettled:()=>{w(!1)}}));return f?null!==(n=null==N?void 0:null===(t=N.document)||void 0===t?void 0:t.deleted)&&void 0!==n&&n?(0,a.jsx)(r.z,{onClick:()=>{C.mutate()},children:P({id:"invoice.invoiceControls.restoreDocument"},{docType:P({id:(0,l.qm)(b)})})}):x?(0,a.jsxs)("div",{className:"flex space-x-2 flex-col sm:flex-row",children:[(0,a.jsx)(r.z,{onClick:()=>w(!1),children:P({id:"invoice.invoiceControls.cancelRemoval"})}),(0,a.jsx)(r.z,{onClick:()=>{E.mutate()},disabled:E.isLoading,children:P({id:"invoice.invoiceControls.confirmRemoval"})})]}):(0,a.jsx)(r.z,{onClick:()=>w(!0),"data-sentry-element":"Button","data-sentry-component":"DocumentDeleteButton","data-sentry-source-file":"button-delete-document.tsx",children:P({id:"invoice.invoiceControls.delete"},(0,p.m)(b,P))}):null},b=e=>{let{documentId:t,docType:n=o.ow.DOCTYPE_INVOICE}=e,{ft:u}=(0,s.Y)(),m=(0,i.useRouter)(),p=n===o.ow.DOCTYPE_ESTIMATE?"/estimates":"/invoices",{push:y}=(0,d._)();return(0,a.jsx)(c,{left:(0,a.jsx)(r.z,{onClick:()=>{y(p),m.refresh()},children:u({id:"invoice.invoiceControls.close"},{docType:u({id:(0,l.qm)(n)})})}),right:(0,a.jsx)(f,{documentId:t,docType:n}),"data-sentry-element":"PageFooter","data-sentry-component":"DocumentFooter","data-sentry-source-file":"document-footer.tsx"})}},75459:function(e,t,n){"use strict";n.d(t,{o:function(){return eo}});var a=n(37821),i=n(58078),o=n(64142),r=n(90734),s=n(11626),l=n(18519),d=n(68018),c=n(42236),u=n(40540),m=n(51985),p=n(31957),y=n(74064),v=n(9777),g=n(74734),h=n(60315),f=n(57659),b=n(9845),x=n(86204);let w=e=>{let{isModalOpen:t,setModalOpen:n,isPaymentMethods:o,onConfirmBlock:r,paymentsCtaViewedEventMeta:m,updateDocument:p,invoice:y}=e,w=!!y.setting.stripePaymentSuppressed,P=!!y.setting.paymentSuppressed,T=(0,i.useRef)(null),{isStripeEligibleAndOptedIn:N}=(0,f.M)(),{isPaypalEligible:j}=(0,h.G)(),[E,C]=(0,i.useState)(!1),I=(0,l.n)(),S=(0,d.Z)(),[D,M]=(0,i.useState)(o.filter(e=>{let{status:t}=e;return"allowed"===t})),{f:A}=(0,c.Y)(),{trackAction:L}=(0,b.D)(),O=()=>{L("payments-cta",{...m,component:u.Z.modalClosedPaymentMethodSelector}),n(!1)};(0,i.useEffect)(()=>{p(e=>({...e,setting:{...e.setting,stripePaymentSuppressed:w,paymentSuppressed:P}}))},[]);let k=(0,i.useCallback)(async()=>{C(!0);let e=o.reduce((e,t)=>{let{id:n}=t;return D.some(e=>e.id===n)||e.push(n),e},[]),t=o.reduce((t,n)=>{let{id:a,name:i,status:o}=n;return"allowed"===o&&e.includes(a)?t.push("".concat(i,"-disabled")):"blocked"!==o||e.includes(a)||t.push("".concat(i,"-enabled")),t},[]).join(","),a=D.some(e=>{let{provider:t}=e;return t===s.ON.PAYPAL}),i=D.some(e=>{let{provider:t}=e;return t===s.ON.STRIPE}),l=!a,d=!i;a&&P?l=!1:a||P||(l=!0),i&&w?d=!1:i||w||(d=!0),y.objectId&&(await r({toBlock:e,docId:y.objectId,flags:{shouldIncludePaypalUnbrandedAch:S,shouldIncludePaypalBnpl:I}}),p(e=>({...e,setting:{...e.setting,paymentSuppressed:l,stripePaymentSuppressed:d}}))),N()&&L("payments-cta",{...m,component:t,activePaymentProvider:u.f.stripe}),j()&&L("payments-cta",{...m,component:t,activePaymentProvider:u.f.paypal}),L("payments-cta",{...m,component:u.Z.modalPaymentMethodSelector}),C(!1),n(!1)},[D,o,y.objectId,w,P]),R=e=>{if(D.some(t=>{let{id:n}=t;return n===e}))M(D.filter(t=>{let{id:n}=t;return n!==e}));else{let t=o.find(t=>{let{id:n}=t;return n===e});t&&M([...D,t])}};return(0,g.B)({...m,component:u.Z.modalPaymentMethodSelector}),(0,a.jsxs)(v.u_,{ref:T,open:t,onClose:O,"data-sentry-element":"Modal","data-sentry-component":"IsPaymentMethodsModal","data-sentry-source-file":"is-payment-methods-invoice-editor-modal.tsx",children:[(0,a.jsx)(x.xB,{onClickXIcon:O,headerMessage:A({id:"payments.configure.modal.title"}),"data-sentry-element":"ModalHeader","data-sentry-source-file":"is-payment-methods-invoice-editor-modal.tsx"}),(0,a.jsx)("div",{className:"h-[1px] bg-gray-100 w-full"}),(0,a.jsxs)("section",{className:"flex flex-col py-5 px-[15px]",children:[(0,a.jsx)("p",{className:"text-[11px] text-[#374151] mb-[15px]",children:A({id:"payments.configure.modal.label"})}),(0,a.jsx)("div",{className:"flex flex-col gap-y-[10px]",children:o.map(e=>{let{id:t,logo:n,provider:i,fees:o,description:r}=e;return(0,a.jsx)(x.IH,{isEnabled:D.some(e=>{let{id:n}=e;return n===t}),title:r,fees:o,onChange:()=>R(t),disabled:E,provider:i,children:(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:n.map((e,n)=>(0,a.jsx)("img",{src:e,alt:i,className:"max-h-4 h-full"},"".concat(t,"_icon_").concat(n)))})},t)})})]}),(0,a.jsx)("div",{className:"h-[1px] bg-gray-100 w-full"}),(0,a.jsx)(x.mz,{onCancel:O,onConfirm:k,disabled:E,"data-sentry-element":"ModalFooter","data-sentry-source-file":"is-payment-methods-invoice-editor-modal.tsx"})]})};var P=n(15836),T=n(80212),N=n(34992),j=n(2540),E=n(53528),C=n(30393),I=n(99547),S=n(67308),D=n(97393),M=n(88782);let A=()=>{let e=(0,S.zf)(),{open:t,isOpen:n}=(0,M.C)(),{trackAction:i,user:o}=(0,b.D)(),{f:r}=(0,c.Y)(),s=(0,I.T)(o),l=()=>{i("payments-cta",{...e,"from-guest-account":s,component:u.Z.learnMore}),t()};return(0,a.jsxs)("div",{"data-testid":"learnMore",className:"cursor-pointer","data-sentry-component":"LearnMore","data-sentry-source-file":"learn-more.tsx",children:[n&&(0,a.jsx)(D.R,{}),(0,a.jsxs)("div",{className:"text-xs py-2 flex flex-col",onClick:l,children:[(0,a.jsx)("p",{className:"font-medium",children:r({id:"learnMore.title"})}),(0,a.jsxs)("p",{className:"text-xs py-2 text-[#555555]",children:[r({id:"learnMore.subtitle"}),"\xa0",(0,a.jsx)("button",{type:"button","data-testid":"learnMoreButton",onClick:l,className:"bg-transparent border-none inline text-blue-600 hover:cursor-pointer hover:underline break-words",children:(0,a.jsx)("b",{children:r({id:"learnMore"})})})]})]})]})};var L=n(81071);let O=()=>{let e=(0,S.zf)(),{user:t,trackAction:n}=(0,b.D)(),i=(0,I.T)(t),o=(0,L.useRouter)(),{f:r}=(0,c.Y)();return(0,a.jsx)("div",{"data-testid":"managePaymentSettings","data-sentry-component":"ManagePaymentSettings","data-sentry-source-file":"manage-payment-settings.tsx",children:(0,a.jsx)("button",{type:"button",className:"bg-transparent border-none text-blue-600 hover:cursor-pointer hover:underline text-xs font-medium p-0",rel:"nofollow","data-testid":"managePaymentSettingsButton",onClick:()=>{n("payments-cta",{...e,"from-guest-account":i,component:u.Z.managePaymentSettings}),o.push("/settings")},children:r({id:"payments.widget.managePaymentSettings"})})})};var k=n(26088),R=n(7465),F=n(31899),_=n(98523);let B=e=>{let{currency:t}=(0,_.S)(),n=(0,F.l)(t.value);return!e&&n},V=e=>{var t;let{invoice:n,onCurrencyMismatchFix:o,updateDocument:r}=e,[v,g]=(0,i.useState)(!1),{isStripeEligibleAndOptedIn:x,isStripeSubsetOfAccepting:I,isStripeSubsetOfAcceptingAndEnabled:S,isStripePendingVerification:D}=(0,f.M)(),{isPaypalEligible:M,isPaypalAccepting:L,isPaypalEnabled:F,isPaypalInitial:_,isACHUpgradeEligible:V,isACHAccepting:U}=(0,h.G)(),z=(0,c.Y)(),{paypal_v_stripe_variant:Y,payments_enabled:H}=(0,C.V)(["paypal_v_stripe_variant","payments_enabled"]),{trackAction:q}=(0,b.D)(),Z=e=>{r(t=>({...t,setting:{...t.setting,paymentSuppressed:e}}))},G=e=>{r(t=>({...t,setting:{...t.setting,stripePaymentSuppressed:e}}))},W=(0,l.n)(),K=(0,d.Z)(),X=(0,T.c)(),$=(0,j.N)(),Q=H.enabled,J=Y.enabled,ee=J&&x(),et=(V()||U())&&K&&!J,en=Q&&(M()||x()),{getISPaymentMethods:ea,blockISPaymentMethods:ei,allISPaymentMethods:eo}=(0,N.C)(),er=S()&&!n.setting.stripePaymentSuppressed,es=L(),el=F(),ed=(0,i.useMemo)(()=>(0,y.g)(eo,{shouldIncludeStripePaymentMethods:er,shouldIncludePaypalPaymentMethods:es&&el&&!n.setting.paymentSuppressed,isMultiprocessor:J,shouldIncludePaypalUnbrandedAch:et,shouldIncludePaypalBnpl:W}),[eo,er,es,el,n.setting.paymentSuppressed,J,et,W]),ec=B(null!==(t=n.setting.stripePaymentSuppressed)&&void 0!==t&&t);(0,i.useEffect)(()=>{ea({docId:n.objectId,flags:{shouldIncludePaypalUnbrandedAch:et,shouldIncludePaypalBnpl:W}})},[ea,n.objectId,W,et,ee,ec]);let eu=(0,i.useCallback)(async(e,t,a)=>{let i=eo.reduce((n,a)=>{let{id:i,provider:o,status:r}=a;return o!==t&&"blocked"===r&&n.push(i),o===t&&e&&n.push(i),n},[]);try{n.objectId&&(await ei({toBlock:i,docId:n.objectId,flags:{shouldIncludePaypalUnbrandedAch:et,shouldIncludePaypalBnpl:W}}),a(e))}catch(a){let n=e?"enable":"disable";(0,p.jx)({title:"Failed to ".concat(n," ").concat(t," payment status"),isClosable:!0,body:a.message})}},[eo,ei,n.objectId,W,et]),em=I()||D()||M()&&!_(),ep=(0,i.useMemo)(()=>(0,m.D)(),[]),ey={eligiblePaymentProviders:[x()?u.f.stripe:null,M()?u.f.paypal:null].filter(e=>null!==e),source:ep};return en&&$?(0,a.jsxs)("div",{"data-sentry-component":"InvoiceSimplePayments","data-sentry-source-file":"invoice-simple-payments.tsx",children:[ed.length>0&&ec&&v&&(0,a.jsx)(w,{isModalOpen:v,setModalOpen:g,isPaymentMethods:ed,onConfirmBlock:ei,paymentsCtaViewedEventMeta:ey,updateDocument:r,invoice:n}),(0,a.jsx)("div",{"data-testid":"invoice-simple-payments"}),(0,a.jsx)("div",{className:"grid justify-start border-b border-gray-800 pb-1 mb-1",children:(0,a.jsx)(E.N,{className:"w-full","data-sentry-element":"InvoiceSimplePaymentsLogo","data-sentry-source-file":"invoice-simple-payments.tsx"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[et||X?(0,a.jsx)("span",{className:"pb-1"}):(0,a.jsx)(A,{}),J&&(0,a.jsx)(R.l,{source:"invoice-editor",stripePaymentSuppressed:!!n.setting.stripePaymentSuppressed,onCurrencyMismatchFix:o,onUpdateStripePaymentSuppressed:e=>{eu(e,s.ON.STRIPE,G)}}),(0,a.jsx)(k.w,{source:"invoice-editor",paymentSuppressed:!!n.setting.paymentSuppressed,onCurrencyMismatchFix:o,onUpdatePaypalPaymentSuppressed:e=>{eu(e,s.ON.PAYPAL,Z)}}),em&&(0,a.jsx)(O,{}),ed.length>0&&ec&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"uppercase text-gray-800 text-xs font-medium border-b border-gray-800 pb-1 mt-7",children:z.f({id:"payments.configure.label.paymentMethods"})}),(0,a.jsxs)("div",{className:"flex-col w-full",children:[(0,a.jsx)(P.d,{isPaymentMethods:ed,paymentsCtaViewedEventMeta:ey}),(0,a.jsx)(P.m,{onClick:()=>{q("payments-cta",{...ey,component:u.Z.tilePaymentMethodSelector}),g(!0)},buttonText:z.f({id:"payments.configure.modal.button"})})]})]})]})]}):null};var U=n(19395),z=n(86129),Y=n(97107),H=n(9411),q=n(29205),Z=n(82337),G=n(77114),W=n(73378);let K=(0,n(4878).Ue)(e=>({isMarkingUpPaymentFees:!1,setIsMarkingUpPaymentFees:t=>e({isMarkingUpPaymentFees:t})}));var X=n(21100);let $=e=>{let{docType:t,currencyCode:n,paymentSuppressed:i,stripePaymentSuppressed:r}=e.document,s=(0,h.G)(),l=(0,f.M)(),{isPaypalUsable:d,isStripeUsable:c}=(0,X.p)(n),u=null==s?void 0:s.getPaypalFees(),m=null==l?void 0:l.getStripeFees(),{trackAction:p}=(0,b.D)(),y=u||m||null;return t===o.ow.DOCTYPE_INVOICE&&y?(0,a.jsx)(Q,{isEligibleForPF:d&&!i&&!!u||c&&!r&&!!m,paymentFees:y,...e,"data-sentry-element":"PaymentMarkupFeesComponent","data-sentry-component":"PaymentMarkupFees","data-sentry-source-file":"payment-markup-fees.tsx"}):null},Q=e=>{let{isEligibleForPF:t,paymentFees:n,document:o,onMarkupPaymentFeesButtonClick:r}=e,{f:s}=(0,c.Y)(),{isMarkingUpPaymentFees:l}=K(),{trackAction:d}=(0,b.D)();return(0,i.useEffect)(()=>{o.invoiceId&&d("paypal-invoice-passingFeesShown",{invoiceId:o.invoiceId,isEligibleForPF:t})},[o.invoiceId]),(0,a.jsxs)("div",{className:"mt-4","data-sentry-component":"PaymentMarkupFeesComponent","data-sentry-source-file":"payment-markup-fees.tsx",children:[(0,a.jsx)("h4",{className:"uppercase text-gray-800 text-xs font-medium border-b border-gray-800 pb-1 mb-1",children:s({id:"payments.surcharge.title"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-light",children:t?(0,a.jsx)(a.Fragment,{children:s({id:"payments.surcharge.eligible.description"})}):(0,a.jsx)(a.Fragment,{children:s({id:"payments.surcharge.ineligible.description"})})}),t&&(0,a.jsx)("div",{className:"mt-2 w-full",children:(0,a.jsx)(W.z,{disabled:l,title:"Add fees",className:"w-full disabled:opacity-100",variant:l?"white":"primary",onClick:()=>{r(n)},children:l?(0,a.jsxs)("div",{className:"text-green-500",children:["âœ” ",s({id:"payments.surcharge.success.message"})]}):s({id:"payments.surcharge.eligible.cta"})})})]})})]})};var J=n(36521),ee=n(86854),et=n(1931);let en=e=>{let{feesType:t,surcharge:n,onFeesTypeToggleChange:r,setSurchargeConsentGiven:s}=e,[l,d]=(0,i.useState)(!1),{user:u}=(0,b.D)(),{f:m}=(0,c.Y)(),y=async e=>{if(!e){r(!1);return}r(!0),await (0,q.F0)({consentType:o.RX.PASSING_FEES_SURCHARGE,consentValue:ea,user:u})?r(!0):(d(!0),r(!1))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(et.NF,{isOpen:l,onSubmit:async e=>{try{await s(e),r(!0)}catch(t){(0,p.jx)({title:"Error while saving consent details",body:t.message}),H.D.error(Error("Error while saving consent details",{cause:t}),{accountId:null==u?void 0:u.account.objectId,data:[{consentType:o.RX.PASSING_FEES_SURCHARGE,consentStatus:"CONSENT_GIVEN",consentValue:ea,consentMessage:e}],createdAt:new Date().toISOString()})}},onClose:()=>{d(!1)},"data-sentry-element":"ModalSurchargeConsent","data-sentry-source-file":"payment-surcharge-fees.tsx"}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{"data-testid":"transaction-fees-h4",className:"uppercase text-gray-800 text-xs font-medium border-b border-gray-800 pb-1 mb-1",children:m({id:"payments.surcharge.title.v2"})}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex flex-row pt-2 pb-1",children:[(0,a.jsx)("label",{className:"text-xs",children:m({id:"payments.surcharge.coverFees"})}),(0,a.jsx)("div",{className:"ml-2",children:(0,a.jsx)(ee.Z,{checked:t===o.iD.SURCHARGE,disabled:!1,onChange:y,"data-sentry-element":"ToggleSwitch","data-sentry-source-file":"payment-surcharge-fees.tsx"})})]}),(0,a.jsx)("div",{className:"flex bg-gray-200 p-3 text-xs rounded-md justify-between text-gray-500",children:(0,a.jsxs)("p",{children:["Adds"," ",(0,a.jsx)("strong",{children:(0,a.jsx)(J.i,{value:n,"data-sentry-element":"CurrencyDisplay","data-sentry-source-file":"payment-surcharge-fees.tsx"})})," ","surcharge to invoice when a customer pays with Invoice Simple Payments."]})})]})]})]})},ea="v0",ei=e=>{var t,n,i;let{document:r,updateDocument:s}=e,l=(0,h.G)(),d=(0,f.M)(),{setIsMarkingUpPaymentFees:c}=K(),{user:u,trackAction:m}=(0,b.D)(),{data:y}=(0,U.useQuery)((0,G.F)({})),v=null==y?void 0:null===(t=y.settings.find(e=>{if(e.remoteId===o.Vd.LocaleCurrencyCode)return e}))||void 0===t?void 0:t.valStr,{isPaypalUsable:g,isStripeUsable:x}=(0,X.p)(v),w=(0,U.useQuery)((0,G.F)({})),{payments:P}=(0,Z.I)(),T=r.docType,N=r.setting.paymentSuppressed,j=r.setting.stripePaymentSuppressed,E=null==l?void 0:l.getPaypalFees(),C=(0,Y.E)({invoice:{...r,setting:{...r.setting,currencyCode:v}}}),I=null==d?void 0:d.getStripeFees(),S=null==w?void 0:null===(i=w.data)||void 0===i?void 0:null===(n=i.settings.find(e=>e.remoteId===o.Vd.PaymentFeesType))||void 0===n?void 0:n.valNum,D=g&&!N&&E,M=x&&!j&&I,A=Math.max(E?+(0,z.OW)(C,E,P):0,I?+(0,z.OW)(C,I,P):0),L=async e=>{let t=[{consentType:o.RX.PASSING_FEES_SURCHARGE,consentStatus:o.lg.CONSENT_GIVEN,consentValue:ea,consentMessage:e}];try{await (0,q.F0)({consentType:o.RX.PASSING_FEES_SURCHARGE,consentValue:ea,user:u})||await (0,q.p)({data:t,user:u})}catch(e){(0,p.jx)({title:"Error while saving consent details",body:e.message}),H.D.error(Error("Error while saving consent details",{cause:e}),{accountId:null==u?void 0:u.account.objectId,data:t,createdAt:new Date().toISOString()})}},O=async e=>{c(!0);try{let t=+(0,z.T)(C),n=r.items.map(t=>{let n=+(0,z.Bm)({invoice:C,item:t,paymentFees:e});return{...t,rate:n,amount:n*t.quantity}});s({...r,items:n});let a=(0,Y.E)({invoice:{...r,items:n,setting:{...r.setting,currencyCode:v}}}),i=+(0,z.T)(a);m("paypal-invoice-passingFeesClicked",{invoiceId:r.objectId,invoiceNumItems:(0,z.kQ)(C),currencyCode:v,invoiceTotal:t,invoiceTotalMutated:i}),setTimeout(()=>{c(!1)},1e4)}catch(e){c(!1),(0,p.jx)({title:"Unable to markup payment fees",body:e.message})}};return(D||M)&&T===o.ow.DOCTYPE_INVOICE?S===o.iD.SURCHARGE?(0,a.jsx)(en,{surcharge:A,onFeesTypeToggleChange:e=>{s({...r,setting:{...r.setting,feesType:e?o.iD.SURCHARGE:o.iD.MARKUP}}),m("web-button-click",{text:"Cover Processing Fees",action:"toggled",invoiceId:C.objectId,value:e,feature:"payments-surcharge-invoice-cover-transaction-fees"})},feesType:C.setting.feesType,setSurchargeConsentGiven:L,"data-sentry-element":"PaymentSurchargeFees","data-sentry-component":"SurchargeFees","data-sentry-source-file":"surcharge-fees.tsx"}):(0,a.jsx)($,{document:{docType:C.docType,paymentSuppressed:C.setting.paymentSuppressed,stripePaymentSuppressed:C.setting.stripePaymentSuppressed,currencyCode:v,invoiceId:C.objectId},onMarkupPaymentFeesButtonClick:O,"data-sentry-element":"PaymentMarkupFees","data-sentry-component":"SurchargeFees","data-sentry-source-file":"surcharge-fees.tsx"}):null},eo=e=>{let{document:t,updateDocument:n,updateCurrency:i}=e;return(0,r.P)()?(0,a.jsxs)("div",{"data-testid":"widget-payments","data-sentry-component":"WidgetPayments","data-sentry-source-file":"widget-payments.tsx",children:[(0,a.jsx)(V,{invoice:t,onCurrencyMismatchFix:e=>{i((0,o.P8)().find(t=>t.value.toUpperCase()===e))},updateDocument:n,"data-sentry-element":"InvoiceSimplePayments","data-sentry-source-file":"widget-payments.tsx"}),(0,a.jsx)(ei,{document:t,updateDocument:n,"data-sentry-element":"SurchargeFees","data-sentry-source-file":"widget-payments.tsx"})]}):null}},78085:function(e,t,n){"use strict";n.d(t,{x:function(){return p}});var a=n(83171),i=n(63133),o=n(64142),r=n(70517);function s(e){var t;return"string"==typeof(null==e?void 0:e.address1)&&(null==e?void 0:null===(t=e.address1)||void 0===t?void 0:t.length)>0?{address1:e.address1,address2:e.address2,address3:e.address3}:{address1:void 0}}function l(e){var t,n,a;let i=e.setting,{remoteId:r,taxLabel:s,color:l,template:d,discountType:c,discountRate:u,discountAmount:m,fullyPaid:p,optionQtyRate:y}=i;return{remoteId:r,taxRate:null!==(t=i.taxRate)&&void 0!==t?t:0,taxLabel:s,taxType:null!==(n=i.taxType)&&void 0!==n?n:o.oA.TAX_NONE,color:l,template:d,discountRate:u,discountType:c,discountAmount:null!=m?m:0,taxInclusive:null!==(a=i.taxInclusive)&&void 0!==a&&a,fullyPaid:p,optionQtyRate:y}}let d=e=>{let{document:t,fetchedPhotos:n}=e,a=t.setting,i=t.remoteId,d=t.objectId,c=t.deleted,u=t.updated,m=t.poNumber,p=t.createDate,y=t.invoiceDate,v=t.invoiceNo,g=t.sentStatus,h=t.docType,f=t.title,b=function(e){var t;let n=e.client;return n?{...n,clientRemoteId:null!==(t=n.clientRemoteId)&&void 0!==t?t:"",name:n.name,email:r.OptionalEmail.is(n.email)?n.email:void 0,secondaryEmail:r.OptionalEmail.is(n.secondaryEmail)?n.secondaryEmail:void 0,phone:n.phone,fax:n.fax,mobile:n.mobile,...s(n),shipAmount:n.shipAmount,shipVia:n.shipVia,shipTracking:n.shipTracking,shippingName:n.shippingName,shippingAddress1:n.shippingAddress1,shippingAddress2:n.shippingAddress2,shippingAddress3:n.shippingAddress3,shipDate:n.shipDate,shipFob:n.shipFob}:void 0}(t),x=a.comment,w=function(e){let t=e.signature,n=e.signDate;return t?{resourceRemoteId:t,signDate:n}:void 0}(t),P=(t.items||[]).map(e=>{var t,n;return{remoteId:e.remoteId,code:null!==(t=e.code)&&void 0!==t?t:"",description:e.description,quantity:null!==(n=e.quantity)&&void 0!==n?n:0,rate:e.rate,unit:e.unit,taxable:e.taxable,taxRate:e.taxRate,discountRate:e.discountRate,discountType:e.discountType}}),T=function(e){let t=null==e?void 0:e.company;return{...t,company:(null==t?void 0:t.company)||(null==t?void 0:t.name),businessNumber:null==t?void 0:t.businessNumber,name:(null==t?void 0:t.ownerName)||(null==t?void 0:t.name),ownerName:void 0,email:r.OptionalEmail.is(null==t?void 0:t.email)?null==t?void 0:t.email:void 0,phone:null==t?void 0:t.phone,fax:null==t?void 0:t.fax,mobile:null==t?void 0:t.mobile,website:null==t?void 0:t.website,...s(t)}}(t),N=t.platform,j=n.map(e=>{var n,a;let i=t.photos.find(t=>t.photoRemoteId===e.remoteId);return{url:e.url,md5:e.md5,resourceRemoteId:null==i?void 0:i.photoRemoteId,name:null!==(n=null==i?void 0:i.name)&&void 0!==n?n:"",description:null!==(a=null==i?void 0:i.description)&&void 0!==a?a:"",...i}});if(h===o.ow.DOCTYPE_ESTIMATE)return{remoteId:i,docType:h,deleted:c,invoiceNo:v,invoiceDate:y,poNumber:m,title:f,sentStatus:g,client:b,company:T,items:P,signature:w,photos:j,notes:x,updated:u,createDate:p,objectId:d,setting:function(e){let t=l(e),{estimateSignatureRequired:n,estimateSignedText:a,estimateSignedAt:i,acornFinancing:o}=e.setting;return{...t,estimateSignatureRequired:n,estimateSignedText:a,estimateSignedAt:i,acornFinancing:o}}(t),platform:N};if(h===o.ow.DOCTYPE_INVOICE||h===o.ow.DOCTYPE_STATEMENT)return{remoteId:i,docType:h,deleted:c,invoiceNo:v,invoiceDate:y,poNumber:m,title:f,sentStatus:g,client:b,company:T,items:P,signature:w,photos:j,notes:x,updated:u,createDate:p,objectId:d,setting:function(e){let t=l(e),n=e.paidDate,a=e.dueDate,{termsDay:i,paymentSuppressed:o,estimateId:r,depositType:s,depositRate:d,depositAmount:c,stripePaymentSuppressed:u,feesType:m,acornFinancing:p}=e.setting;return{...t,paidDate:n,dueDate:a,termsDay:i,paymentSuppressed:o,estimateId:r,depositType:s,depositRate:d,depositAmount:c,stripePaymentSuppressed:u,feesType:m,acornFinancing:p}}(t),payments:(t.payments||[]).map(e=>({...e,notes:e.notes,date:new Date(e.date.iso)})),platform:N};throw Error("Unknown document type")};var c=n(70572);let u=async e=>{let{document:t,settings:n}=e,a=n.find(e=>"company.logo"===e.remoteId),i=null==a?void 0:a.valStr,o=[i,t.signature,...t.photos.map(e=>e.photoRemoteId)].filter(e=>!!e),r=o.length?await (0,c.r)(o):[];return{logo:r.find(e=>e.remoteId===i),signature:r.find(e=>e.remoteId===t.signature),photos:r.filter(e=>t.photos.map(e=>e.photoRemoteId).includes(e.remoteId))}};var m=n(29530);function p(e,t){return{queryKey:a.zl.byId(e.documentId),queryFn:async()=>{let t=await (0,i.c)(e.documentId),n=await (0,m.T)(),{photos:a,logo:o,signature:r}=await u({document:t,settings:n});return{document:d({document:t,fetchedPhotos:a,settings:n}),logo:o,signature:r}},...t}}},13254:function(e,t,n){"use strict";n.d(t,{C:function(){return d}});var a=n(83171),i=n(61449),o=n(17892);let r=async()=>{let e=["version_restored","version_saved_manual"],t=await s(),n=t.reduce((t,n)=>{var a;let i=null===(a=n.status)||void 0===a?void 0:a.eventType;return n.remoteId&&i&&e.includes(i)||t.push(n.remoteId),t},[]);if(0===n.length)return[];let a=await l(n);return t.map(e=>(e.events=a.filter(t=>t.msgRemoteId===e.remoteId),e))};async function s(){let e=await (0,o.Y)(),t=await (0,i.W)("/classes/Msg",{headers:{"X-Parse-Session-Token":e},cache:"no-cache"});return 0===t.results.length?[]:t.results}async function l(e){let t=await (0,o.Y)(),n=new URLSearchParams({where:JSON.stringify({msgRemoteId:{$in:e}})}),a=await (0,i.W)("/classes/MsgEvent?".concat(n),{headers:{"X-Parse-Session-Token":t},cache:"no-cache"});return 0===a.results.length?[]:a.results}function d(e){return{queryKey:a.KV.list,queryFn:async()=>({sentDocumentEvents:await r()}),...e}}},71450:function(e,t,n){"use strict";n.d(t,{NE:function(){return m},VZ:function(){return s},Wf:function(){return c},c:function(){return u},lo:function(){return l},tF:function(){return d}}),n(64142);let a=/^\/estimate-template\/estimate-maker\/?$/i,i=/^\/receipt-template\/receipt-maker\/?$/i,o=/^\/(v2\/)?invoice-generator\/?$/i,r=[/^\/es\/factura-simplificada\/?/i,/^\/fr\/facture-en-ligne\/?/i,/^\/nl\/factuur-maken\/?/i],s=(e,t)=>!!((null==e?void 0:e.match(o))||(null==e?void 0:e.match(a))||(null==e?void 0:e.match(i))||r.some(t=>null==e?void 0:e.match(t)))||t,l=e=>!!("/"===e||"/invoice/new"===e||"/invoices/new"===e||(null==e?void 0:e.match(o)))||r.some(t=>null==e?void 0:e.match(t)),d=e=>"/estimate/new"===e||"/estimates/new"===e||!!(null==e?void 0:e.match(a)),c=e=>!!(null==e?void 0:e.match(i)),u=e=>!!r.some(t=>null==e?void 0:e.match(t)),m=e=>!!((null==e?void 0:e.match(o))||(null==e?void 0:e.match(a))||(null==e?void 0:e.match(i))||(null==e?void 0:e.match(o)))},99920:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});var a=n(37821),i=n(58078),o=n(81220);let r=(0,i.forwardRef)((e,t)=>{let{isDisabled:n,...i}=e,r="".concat("min-h-[100px] w-full border border-gray-400 font-light min-width-[60px] leading-5 w-full inline-block py-[8px] px-[16px] rounded-[4px] focus:text-gray-600 text-[12px]"," ").concat(n?" cursor-not-allowed text-gray-400":"");return(0,a.jsx)(o.Z,{ref:t,disabled:n,style:{height:100},minRows:4,maxRows:20,...i,className:r})})},28782:function(e,t,n){"use strict";n.d(t,{K:function(){return P}});var a=n(37821),i=n(58078),o=n(45104),r=n(13590),s=n(64142),l=n(26935),d=n(9418),c=n(94747),u=n(42236),m=n(78641),p=n(5230),y=n(61692),v=n(17914),g=n(9845),h=n(30393),f=n(22707),b=n(73378),x=n(9777);let w=e=>{let{f:t}=(0,u.Y)();return(0,a.jsxs)(x.u_,{open:e.isOpen,onClose:e.onClose,className:"xs:h-auto sm:max-w-sm bg-white overflow-hidden","data-sentry-element":"Modal","data-sentry-component":"ModalRequestReview","data-sentry-source-file":"request-review-modal.tsx",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("section",{className:"flex flex-col p-5 gap-y-4",children:[(0,a.jsx)("h3",{className:"text-base text-[#333333] font-bold h-[24px] tracking-tight",children:t({id:"automatedReviews.confirmReviewRequest"})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm text-[#454545] font-normal",children:t({id:"automatedReviews.emailSentRequestingReview"})})})]})}),(0,a.jsxs)("div",{className:"flex justify-end w-full p-3 border-t border-[#E5E7EB]",children:[(0,a.jsx)(b.z,{type:"button",variant:"white",className:"text-[12px] py-[6px] px-3 rounded-[4px] border-[#999999]",onClick:e.onClose,"data-sentry-element":"Button","data-sentry-source-file":"request-review-modal.tsx",children:t({id:"app.cancel"})}),(0,a.jsx)(b.z,{className:"text-[12px] py-[6px] px-3 rounded-[4px] ml-3",onClick:e.onSend,variant:"primary",type:"button","data-sentry-element":"Button","data-sentry-source-file":"request-review-modal.tsx",children:t({id:"app.send"})})]})]})},P=(0,c.Pd)({[d.y]:{modal:d.h,props:{source:"invoice-paid-banner"}}})(function(e){var t;let{f:n}=(0,u.Y)(),b=(0,g.D)(),{pulsem_reviews:x}=(0,h.V)(["pulsem_reviews"]),P=(0,c.R9)(d.y),[T,N]=(0,i.useState)(!1),[j,E]=(0,i.useState)(!1),C=null===(t=(0,p.y)(e.settings,s.Vd.AutomaticReviewsEnabled))||void 0===t?void 0:t.valBool,{data:I}=(0,v.Z)(),S=(0,y.g)({feature:l.eS.AUTOMATIC_REVIEWS,user:b.user,subscriptionStatus:b.subscriptionStatus}),D=async()=>{try{var t;await (0,m.e)({details:{accountId:b.account.objectId,invoiceId:e.document.objectId,email:null===(t=e.document.client)||void 0===t?void 0:t.email,userId:b.user.objectId}}),b.trackAction("pulse-m",{type:"alert",action:"request-review-send",platform:"web"}),E(!0)}catch(e){E(!1)}finally{M()}},M=()=>N(!1),A=(0,f.O)(e.document);if((0,i.useEffect)(()=>{A&&b.trackAction("banner",{type:"invoice-paid",action:"show",platform:"web"})},[b,A]),A)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"bg-green-50 rounded-sm",children:(0,a.jsxs)("div",{className:"p-2 flex items-center",children:[(0,a.jsx)(o.Z,{size:24,color:"#FFF",fill:"#155724","data-sentry-element":"CircleCheck","data-sentry-source-file":"invoice-fully-paid-banner.tsx"}),(0,a.jsxs)("div",{className:"flex flex-col pl-2",children:[(0,a.jsx)("span",{className:"text-[#155724] font-semibold text-xs",children:n({id:"automatedReviews.invoicePaidinfull"})}),!C&&(null==x?void 0:x.enabled)&&(0,a.jsx)("span",{className:"transition text-[#155724] font-medium text-xs ".concat(j?"":"underline cursor-pointer"),onClick:j?void 0:()=>{if(null==I?void 0:I.onboarded){var t;if(!(null===(t=e.document.client)||void 0===t?void 0:t.email)){r.Am.error(n({id:"automatedReviews.error.missingClientEmail"}));return}if(!S){r.Am.error(n({id:"automatedReviews.error.upgrade"}));return}N(!0)}else P()},children:j?n({id:"automatedReviews.sent"}):n({id:"automatedReviews.sendReviewRequest"})})]})]})}),(0,a.jsx)(w,{isOpen:T,onClose:M,onSend:D,"data-sentry-element":"ModalRequestReview","data-sentry-source-file":"invoice-fully-paid-banner.tsx"})]})})},99814:function(e,t,n){"use strict";n.d(t,{h:function(){return m}});var a=n(37821),i=n(58078),o=n(2320),r=n(14870),s=n(64142),l=n(26935),d=n(87698),c=n(72574);let u={premiumTier:{id:"freeTrial.premium",defaultMessage:"Premium"},plusTier:{id:"freeTrial.plus",defaultMessage:"Plus"}},m=e=>{let{featureName:t}=e,n=(0,c.s)("web_free_trial").enabled,m=(0,l.uW)(),p=(0,r.Z)(),{backgroundColor:y,strokeColor:v,message:g}=(0,i.useMemo)(()=>{let e=m.find(e=>e.name===t);switch((null==e?void 0:e.supportedTiers.find(e=>e===s.QV.PLUS))||(null==e?void 0:e.supportedTiers.find(e=>e===s.QV.PREMIUM))){case s.QV.PREMIUM:return{backgroundColor:"bg-premium-indigo",strokeColor:"text-premium-indigo",message:u.premiumTier};case s.QV.PLUS:return{backgroundColor:"bg-plus-green",strokeColor:"text-plus-green",message:u.plusTier};default:return{}}},[t]);return n&&y&&v&&g?(0,a.jsxs)("div",{"data-testid":"feature-access-badge",className:(0,d.cn)("flex flex-row rounded-full pr-2 h-fit gap-1 items-center",y),"data-sentry-component":"FeatureAccess","data-sentry-source-file":"feature-access.tsx",children:[(0,a.jsx)(o.Z,{size:16,fill:"white",strokeWidth:3,className:v,"data-sentry-element":"Clock","data-sentry-source-file":"feature-access.tsx"}),(0,a.jsx)("p",{className:"text-white text-xs font-medium normal-case",children:p.formatMessage(g)})]}):null}},57733:function(e,t,n){"use strict";n.d(t,{VY:function(){return d},uZ:function(){return l}});var a=n(37821),i=n(58078);let o={isClosable:!1,title:"",body:"",type:"error",isOpen:!1,closeAlert:()=>{},setAlert:()=>{}},r=(0,i.createContext)(o);function s(e,t){switch(t.type){case"CLOSE_ALERT":return{...e,isOpen:!1};case"SET_ALERT":{let{alert:{body:n,isClosable:a,title:i,type:o}}=t;return{...e,title:i,body:n,type:o,isClosable:a,isOpen:!0}}default:return{...e}}}r.displayName="AlertContext";let l=e=>{let[t,n]=(0,i.useReducer)(s,o),l=(0,i.useCallback)(()=>n({type:"CLOSE_ALERT"}),[n]),d=(0,i.useCallback)(e=>n({type:"SET_ALERT",alert:e}),[n]),c=(0,i.useMemo)(()=>({...t,closeAlert:l,setAlert:d}),[t]);return(0,a.jsx)(r.Provider,{value:c,...e,"data-sentry-element":"unknown","data-sentry-component":"AlertProvider","data-sentry-source-file":"use-alert.tsx"})},d=()=>{let e=(0,i.useContext)(r);if(void 0===e)throw Error("useAlert must be used within an AlertContext");return e}},46118:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(37821);n(58078);var i=n(87698);let o=e=>{let{className:t,children:n}=e;return(0,a.jsx)("div",{className:(0,i.cn)("max-w-7xl mx-auto sm:px-6 lg:px-8",t),"data-sentry-component":"DocumentPageContainer","data-sentry-source-file":"document-page-container.tsx",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:n})})}},27723:function(e,t,n){"use strict";n.d(t,{E:function(){return o}});var a=n(37821);function i(e){let{color:t}=e;return(0,a.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"check-circle w-6 h-6 ".concat(t&&"grey"===t?"text-gray-400":""),"data-sentry-element":"svg","data-sentry-component":"CheckCircle","data-sentry-source-file":"check-circle.tsx",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd","data-sentry-element":"path","data-sentry-source-file":"check-circle.tsx"})})}function o(){return(0,a.jsx)(i,{color:"grey","data-sentry-element":"CheckCircle","data-sentry-component":"CheckCircleGrey","data-sentry-source-file":"check-circle.tsx"})}n(58078)},35914:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var a=n(37821);function i(e){let{color:t}=e;return(0,a.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"exclamation-circle w-6 h-6 ".concat(t&&"red"===t?"text-red-500":""),"data-sentry-element":"svg","data-sentry-component":"ExclamationCircle","data-sentry-source-file":"exclamation-circle.tsx",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd","data-sentry-element":"path","data-sentry-source-file":"exclamation-circle.tsx"})})}function o(){return(0,a.jsx)(i,{color:"red","data-sentry-element":"ExclamationCircle","data-sentry-component":"ExclamationCircleRed","data-sentry-source-file":"exclamation-circle.tsx"})}n(58078)},99170:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var a=n(37821);n(58078);let i=e=>{let{color:t,className:n,style:i}=e;return(0,a.jsxs)("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"loading-spinner",className:"animate-spin h-5 w-5 ".concat(n),style:{maxWidth:"24px",...i},"data-sentry-element":"svg","data-sentry-component":"LoadingSpinnerIcon","data-sentry-source-file":"loading-spinner-icon.tsx",children:[(0,a.jsx)("path",{opacity:"0.6",d:"M10.5 5.3125C11.2767 5.3125 11.9062 4.6829 11.9062 3.90625C11.9062 3.1296 11.2767 2.5 10.5 2.5C9.72335 2.5 9.09375 3.1296 9.09375 3.90625C9.09375 4.6829 9.72335 5.3125 10.5 5.3125Z",fill:t,"data-sentry-element":"path","data-sentry-source-file":"loading-spinner-icon.tsx"}),(0,a.jsx)("path",{opacity:"0.8",d:"M14.8086 7.09766C15.5852 7.09766 16.2148 6.46806 16.2148 5.69141C16.2148 4.91476 15.5852 4.28516 14.8086 4.28516C14.0319 4.28516 13.4023 4.91476 13.4023 5.69141C13.4023 6.46806 14.0319 7.09766 14.8086 7.09766Z",fill:t,"data-sentry-element":"path","data-sentry-source-file":"loading-spinner-icon.tsx"}),(0,a.jsx)("path",{d:"M16.5937 11.4064C17.3704 11.4064 18 10.7768 18 10.0001C18 9.22347 17.3704 8.59387 16.5937 8.59387C15.8171 8.59387 15.1875 9.22347 15.1875 10.0001C15.1875 10.7768 15.8171 11.4064 16.5937 11.4064Z",fill:t,"data-sentry-element":"path","data-sentry-source-file":"loading-spinner-icon.tsx"}),(0,a.jsx)("path",{opacity:"0.4",d:"M14.8086 15.715C15.5852 15.715 16.2148 15.0854 16.2148 14.3087C16.2148 13.5321 15.5852 12.9025 14.8086 12.9025C14.0319 12.9025 13.4023 13.5321 13.4023 14.3087C13.4023 15.0854 14.0319 15.715 14.8086 15.715Z",fill:t,"data-sentry-element":"path","data-sentry-source-file":"loading-spinner-icon.tsx"}),(0,a.jsx)("path",{opacity:"0.4",d:"M10.5 17.5C11.2767 17.5 11.9062 16.8704 11.9062 16.0937C11.9062 15.3171 11.2767 14.6875 10.5 14.6875C9.72335 14.6875 9.09375 15.3171 9.09375 16.0937C9.09375 16.8704 9.72335 17.5 10.5 17.5Z",fill:t,"data-sentry-element":"path","data-sentry-source-file":"loading-spinner-icon.tsx"}),(0,a.jsx)("path",{opacity:"0.4",d:"M6.19141 15.715C6.96806 15.715 7.59766 15.0854 7.59766 14.3087C7.59766 13.5321 6.96806 12.9025 6.19141 12.9025C5.41476 12.9025 4.78516 13.5321 4.78516 14.3087C4.78516 15.0854 5.41476 15.715 6.19141 15.715Z",fill:t,"data-sentry-element":"path","data-sentry-source-file":"loading-spinner-icon.tsx"}),(0,a.jsx)("path",{opacity:"0.4",d:"M4.40625 11.4064C5.1829 11.4064 5.8125 10.7768 5.8125 10.0001C5.8125 9.22347 5.1829 8.59387 4.40625 8.59387C3.6296 8.59387 3 9.22347 3 10.0001C3 10.7768 3.6296 11.4064 4.40625 11.4064Z",fill:t,"data-sentry-element":"path","data-sentry-source-file":"loading-spinner-icon.tsx"}),(0,a.jsx)("path",{opacity:"0.4",d:"M6.19141 7.09766C6.96806 7.09766 7.59766 6.46806 7.59766 5.69141C7.59766 4.91476 6.96806 4.28516 6.19141 4.28516C5.41476 4.28516 4.78516 4.91476 4.78516 5.69141C4.78516 6.46806 5.41476 7.09766 6.19141 7.09766Z",fill:t,"data-sentry-element":"path","data-sentry-source-file":"loading-spinner-icon.tsx"})]})}},84974:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var a=n(37821);function i(e){let{label:t,addonAfter:n,helpText:i,errorText:o,mobile:r,labelStyle:s,...l}={...e},d="".concat(l.id,"-description"),c="".concat(l.id,"-error-text");return(0,a.jsxs)("div",{className:"input".concat(t?"-with-label-wrapper":"-wrapper"),"data-sentry-component":"Input","data-sentry-source-file":"input.tsx",children:[(0,a.jsxs)("div",{className:r?"w-full":"flex items-center w-full my-2",children:[t&&(0,a.jsx)("label",{htmlFor:l.id,className:"block text-xs font-medium leading-5 text-gray-700",style:s,children:t}),(0,a.jsxs)("div",{className:"relative rounded-md shadow-sm w-full",children:[(0,a.jsx)("input",{className:"form-input block w-full text-xs rounded border border-gray-400 py-2 px-4 leading-5 focus:text-gray-600".concat(l.disabled?" cursor-not-allowed text-gray-400":""),"aria-describedby":d,...l}),n&&(0,a.jsx)("div",{className:"absolute inset-y-2 right-0 pr-3 flex items-center pointer-events-none",children:n})]})]}),i&&(0,a.jsx)("p",{className:"block mt-1 pl-1 text-xs text-gray-500",id:d,children:i}),o&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-600",id:c,"data-testid":"".concat(t,"-error-text"),children:o})]})}n(58078)},14193:function(e,t,n){"use strict";n.d(t,{A:function(){return _}});var a=n(37821),i=n(58078),o=n(81071),r=n(71156),s=n(84715),l=n(86129),d=n(64142),c=n(9418),u=n(73378),m=n(94747),p=n(42236),y=n(83171),v=n(87698),g=n(23835),h=n(30521),f=n(5230),b=n(35243),x=n(19395),w=n(27248),P=n(99547),T=n(31957),N=n(9845),j=n(48622),E=n(65833),C=n(13254);let I=e=>{let{data:t,isLoading:n}=(0,x.useQuery)((0,C.C)()),{user:i,subscriptionStatus:o}=(0,N.D)(),{ft:r,f:s}=(0,p.Y)(),l=(0,g._)(),d=async()=>{let n=(0,P.T)(i),a=(0,h.I)({exportType:"email",user:i,subscriptionStatus:o,sentDocumentEvents:null==t?void 0:t.sentDocumentEvents});if(!e.document.objectId){let t=await (0,j.a)({document:e.document}).catch(()=>{(0,T.jx)({body:s({id:"app.alert.connectivityErrors.body"}),title:s({id:"app.alert.connectivityErrors.title"})})});if(!(null==t?void 0:t.newObjectId)){(0,T.jx)({body:s({id:"app.alert.connectivityErrors.body"}),title:s({id:"app.alert.connectivityErrors.title"})});return}e.onDocumentChange({...e.document,objectId:null==t?void 0:t.newObjectId});let a=null==t?void 0:t.newObjectId;if(n)return l.push("/signup?ref=".concat(E.a$.SEND_DOCUMENT,"&id=").concat(a,"&email-docType=").concat(e.document.docType))}return a?e.openModal():n?l.push("/signup?ref=".concat(E.a$.SEND_DOCUMENT,"&id=").concat(e.currentDocumentId,"&email-docType=").concat(e.document.docType)):l.push((0,E.X2)({ref:E.a$.SEND_DOCUMENT}))};return(0,a.jsx)(u.z,{className:"flex-1 sm:flex-none min-w-fit",type:"button",variant:"primary",onClick:d,disabled:e.isOpen||n,title:"Email the Invoice to your client","data-sentry-element":"Button","data-sentry-component":"ButtonEmailDocument","data-sentry-source-file":"button-email-document.tsx",children:r(e.hasDeposit?{id:"controls.email-document-type.labelForDeposit"}:{id:"controls.email-document-type.label"},{docType:r({id:(0,w.qm)(e.document.docType)})})})};var S=n(55575),D=n(45551),M=n(71450),A=n(12272),L=n(88647),O=n(57733),k=n(58824),R=n(49112),F=n(751);function _(e){var t;let{isSavingDocument:n,onDocumentChange:x,document:w,disabled:P,abtests:T,country:C,settings:_,docType:B=d.ow.DOCTYPE_INVOICE}=e,[V,U]=(0,i.useState)(!1),[z,Y]=(0,i.useState)(n),H=(0,o.useParams)(),{subscriptionStatus:q,user:Z,trackAction:G}=(0,N.D)(),{f:W,ft:K}=(0,p.Y)(),X=(0,r.useQueryClient)(),$=(0,o.useRouter)(),Q=(0,g._)(),J=(0,o.usePathname)(),{setAlert:ee,closeAlert:et}=(0,O.VY)(),{shouldShowRecordPayment:en}=(0,k.o)({document:w,abtests:T,country:C}),ea=null===(t=(0,f.y)(_,d.Vd.EmailDefaultMessage))||void 0===t?void 0:t.valStr,{isOpen:ei,openModal:eo,setPrimaryClientEmail:er}=(0,D.K)(),es=!(0,M.lo)(J)&&!(0,M.tF)(J),el=(0,L.TI)(),ed=(null==H?void 0:H.documentId)||w.objectId,ec=B===d.ow.DOCTYPE_INVOICE||B===d.ow.DOCTYPE_STATEMENT;(0,i.useEffect)(()=>{Y(n)},[n]),(0,i.useEffect)(()=>{if(ed){let e="".concat(el,"/").concat(ec?"invoices":"estimates","/").concat(ed);(null==J?void 0:J.includes("/edit"))?Q.prefetch(e):Q.prefetch("".concat(e,"/edit"))}},[ed,Q]);let eu=async()=>{let e=ec?"invoices":"estimates";if(et(),!w.objectId){let t=await (0,j.a)({document:w}).catch(e=>{ee({title:W({id:"app.alert.connectivityErrors.title"}),body:W({id:"app.alert.connectivityErrors.body"},{details:e.message}),type:"error",isClosable:!1})});if(null==t?void 0:t.newObjectId){x({...w,objectId:null==t?void 0:t.newObjectId}),G("invoice-preview-nav"),Q.push("".concat(el,"/").concat(e,"/").concat(t.newObjectId));return}ee({title:W({id:"app.alert.connectivityErrors.title"}),body:W({id:"app.alert.connectivityErrors.body"}),type:"error",isClosable:!1});return}let t="".concat(el,"/").concat(e,"/").concat(ed);X.invalidateQueries(y.zl.byId(ed)),G("invoice-preview-nav"),Q.push(t)},em=async()=>{X.invalidateQueries(y.zl.byId(ed)),X.invalidateQueries(y.zl.all);let e="".concat(el,"/").concat(ec?"invoices":"estimates","/").concat(ed,"/edit");G("invoice-edit-nav"),Q.push(e)},ep=()=>{let e=B===d.ow.DOCTYPE_INVOICE?"invoice":"estimate";$.push("/".concat(e,"/history?documentId=").concat(ed,"&documentRemoteId=").concat(w.remoteId))},ey=async()=>{let e=!!(null==q?void 0:q.active),t=!((null==Z?void 0:Z.username)&&(null==Z?void 0:Z.username.match(/new_/)));if((0,h.I)({exportType:"PDF",user:Z,subscriptionStatus:q})){U(!0);let e=new URLSearchParams;e.append("timeZone",Intl.DateTimeFormat().resolvedOptions().timeZone);let t=A.t.NEXT_PUBLIC_REACT_APP_PDF_HOST,n="https://".concat(t,"/").concat(w.objectId,".pdf?").concat(e.toString());G("invoice-download",{"doc-type":w.docType,invoiceId:ed,docCount:null==q?void 0:q.allDocsCount,platform:d.t4.WEB}),Q.replace(n),U(!1);return}if(t)return Q.push("/signup?ref=".concat(E.a$.DOCUMENT_ACTIONS));if(!e)return Q.push((0,E.X2)({ref:E.a$.DOCUMENT_ACTIONS}));if(!w.objectId){U(!0);let e=await (0,j.a)({document:w}).catch(e=>{U(!1),ee({title:W({id:"app.alert.connectivityErrors.title"}),body:W({id:"app.alert.connectivityErrors.body"},{details:e.message}),type:"error",isClosable:!1})});if(!(null==e?void 0:e.newObjectId)){U(!1),ee({title:W({id:"app.alert.connectivityErrors.title"}),body:W({id:"app.alert.connectivityErrors.body"}),type:"error",isClosable:!1});return}x({...w,objectId:null==e?void 0:e.newObjectId});let t=null==e?void 0:e.newObjectId,n=A.t.NEXT_PUBLIC_REACT_APP_PDF_HOST,a="https://".concat(n,"/").concat(t,".pdf");return G("invoice-download",{"doc-type":w.docType,invoiceId:ed,docCount:null==q?void 0:q.allDocsCount,platform:d.t4.WEB}),U(!1),window.location.assign(a)}U(!0);let n=A.t.NEXT_PUBLIC_REACT_APP_PDF_HOST,a="https://".concat(n,"/").concat(ed,".pdf");G("invoice-download",{"doc-type":w.docType,invoiceId:ed,docCount:null==q?void 0:q.allDocsCount,platform:d.t4.WEB}),Q.replace(a),U(!1)},ev=!!(null==J?void 0:J.includes("/edit"))||"/"===J||"/invoices/new"===J||"/estimates/new"===J||"/invoice/new"===J||"/estimate/new"===J||(0,M.c)(J)||(0,M.NE)(J),eg=(0,l.o6)(w),eh=!((null==H?void 0:H.documentId)||w.objectId);return(0,a.jsx)(s.Z,{innerZ:3,"data-sentry-element":"Sticky","data-sentry-component":"InvoiceActionsMigrated","data-sentry-source-file":"invoice-actions-migrated.tsx",children:e=>(0,a.jsxs)(m.pM,{modals:{[c.y]:{modal:c.h,props:{source:"invoice"}}},children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 py-2 ".concat(e.status===s.Z.STATUS_FIXED&&"bg-gray-100 bg-opacity-90 border-gray-200 border-b"),children:[(0,a.jsx)("div",{className:"invoice-actions grow flex justify-between flex-wrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(u.z,{type:"button",onClick:eu,disabled:!!P||!ev||z,className:"h-full sm:rounded-r-none ".concat(ev?"":"hidden"," sm:inline-block"),children:K({id:"previewEditToggle.preview"})}),(0,a.jsx)(u.z,{type:"button",onClick:em,disabled:eh||!!P||ev,className:"h-full sm:rounded-l-none ".concat(ev?"hidden":""," sm:inline-block"),children:K({id:"previewEditToggle.edit"})}),(0,a.jsx)(F.Hi,{className:"hidden md:inline-block",children:es&&(0,a.jsx)(u.z,{type:"button",disabled:eh||!!P,onClick:ep,className:(0,v.cn)("h-full ml-1 sm:inline-block",ev&&"hidden"),children:K({id:"doc.history.title"})})})]})}),(0,a.jsx)("div",{className:"uppercase self-center text-xs flex-1",children:z&&(0,a.jsx)("p",{children:"Saving"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,a.jsx)(F.Hi,{children:en&&(0,a.jsx)(R.C,{document:w,isLoading:V,disabled:null!=P&&P,abtests:T,country:C})}),B===d.ow.DOCTYPE_ESTIMATE&&(0,a.jsx)(b.b,{disabled:eh||V||!!P,estimate:w,settings:_}),(0,a.jsx)(u.z,{onClick:ey,disabled:eh||V||!!P,type:"button",title:"Download a PDF copy of the invoice to your device",children:W({id:"public.invoice.actions.pdf"})})]})}),(0,a.jsx)(I,{isOpen:ei,openModal:()=>{var e,t;er(null!==(t=null===(e=w.client)||void 0===e?void 0:e.email)&&void 0!==t?t:""),eo()},document:w,currentDocumentId:ed,onDocumentChange:x,hasDeposit:eg})]}),(0,a.jsx)(S.W,{document:w,defaultEmailMessage:null!=ea?ea:""})]})})}},49112:function(e,t,n){"use strict";n.d(t,{C:function(){return m}});var a=n(37821),i=n(58078),o=n(86129),r=n(64142),s=n(42236),l=n(9845),d=n(60477);let c=e=>{let{theme:t,children:n,disabled:i,onClick:o,className:r,style:s,title:l,type:d,...c}=e,u="btn inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md focus:outline-none focus:border-blue-300 focus:ring-blue transition ease-in-out duration-150",m="".concat(u," btn-primary ").concat(i&&"cursor-not-allowed opacity-50 bg-gray-200 text-gray-700"),p="".concat(u," text-gray-700 bg-gray-200 ").concat(i?"cursor-not-allowed opacity-50":"hover:text-gray-500 active:text-gray-800 active:bg-gray-50");return(0,a.jsx)("button",{type:d,title:l,disabled:i,className:"".concat("dark"===t?m:p," ").concat(r||""),style:s,onClick:o,...c,"data-sentry-component":"Button","data-sentry-source-file":"button.tsx",children:n})};var u=n(67754);let m=e=>{var t;let{document:n,className:m,isLoading:p,disabled:y,abtests:v,country:g}=e,{showRecordPaymentForm:h,setShowRecordPaymentForm:f,shouldShowRecordPayment:b}=(0,u.o)({document:n,abtests:v,country:g}),{trackInstantFormEvent:x}=(0,l.D)(),w=(0,o.T)({items:n.items,setting:n.setting,client:{shipAmount:null===(t=n.client)||void 0===t?void 0:t.shipAmount}}).gt(r.xE),P=p||y||!w;(0,i.useEffect)(()=>{b&&!P&&x("invoice-payment-nav")},[b,P]);let{ft:T}=(0,s.Y)();return(0,a.jsx)(c,{"data-testid":"btn-record-payment",theme:"light",type:"button",disabled:P,className:m,onClick:()=>{h||x("invoice-payment-view"),f(!0),(0,d.S)()},"data-sentry-element":"Button","data-sentry-component":"InvoiceRecordPaymentButton","data-sentry-source-file":"invoice-record-payment-button.tsx",children:T({id:"invoice.recordPaymentButton.paymentScheduling"})})}},93985:function(e,t,n){"use strict";n.d(t,{c:function(){return ey}});var a=n(37821),i=n(58078),o=n(42236),r=n(9845),s=n(49618),l=n(67754),d=n(65882),c=n(9418),u=n(9777),m=n(94747),p=n(4878);let y=(0,p.Ue)(e=>({document:void 0,setDocument:t=>e({document:t}),updateDocument:e=>{},setUpdateDocument:t=>e({updateDocument:t})}));var v=n(81365);let g=(0,p.Ue)(e=>({isDeposit:!1,isHistorical:!1,payment:void 0,setPaymentFormState:t=>{let{isDeposit:n,isHistorical:a,payment:i}=t;return e({isDeposit:n,isHistorical:a,payment:i})}})),h=()=>{let{isDeposit:e,isHistorical:t,setPaymentFormState:n,payment:a}=g();return{isDeposit:e,isHistorical:t,setPaymentFormState:n,payment:a}};var f=n(77732),b=n(37625),x=n(86129),w=n(64142),P=n(97107),T=n(39545),N=n(36723),j=n(61449),E=n(17892);let C=async(e,t)=>{try{let n=await (0,E.Y)(),a=t.date instanceof Date?t.date:new Date;await (0,j.W)("/functions/addHistoricalPayments",{method:"POST",body:JSON.stringify({invoiceId:e,payment:{date:{__type:"Date",iso:a.toISOString()},amount:t.amount,paymentMethod:t.method,notes:t.notes,paymentMode:t.paymentMode||void 0,paymentValue:t.paymentValue||void 0}}),headers:{"X-Parse-Session-Token":n},cache:"no-cache"})}catch(e){console.error("Error while adding payments to Payment collection in Parse",e)}},I=async e=>{try{let t=await (0,E.Y)();return(await (0,j.W)("/functions/invoiceUpdatePayment",{method:"POST",body:JSON.stringify({payment:{objectId:e.objectId,paymentMode:e.paymentMode,paymentValue:e.paymentValue,amount:e.amount,date:e.date,method:e.method,notes:e.notes}}),headers:{"X-Parse-Session-Token":t}})).result}catch(e){console.error("Error while adding payments to Payment collection in Parse",e)}};var S=n(30585),D=n(71156),M=n(43057),A=n(81387),L=n(78641),O=n(65556),k=n(77114),R=n(30393);let F=()=>{let{pulsem_reviews:e}=(0,R.V)(["pulsem_reviews"]),{user:t,account:n}=(0,r.D)(),a=(0,m.R9)(c.y),o=(0,D.useQueryClient)();return(0,i.useCallback)(async function(i){var r,s,l;let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.enabled)return;if(d){let e={isEligible:!1};try{let t=await fetch("/api/checkout-eligibility?documentRemoteId=".concat(i.remoteId));e=(await t.json()).eligibility}catch(e){console.error("Failed to load payment eligibility:",e)}if(e.isEligible)return}let c=await (0,O.f)();if(!(null==c?void 0:c.onboarded)){let e=(0,A.$)();if(e.getItem("automatedReviewsOnboardingShown"))return;return e.setItem("automatedReviewsOnboardingShown","true"),a()}let{settings:u}=await o.fetchQuery((0,k.F)({}));if(null!==(s=null==u?void 0:null===(r=u.find(e=>e.remoteId===w.Vd.AutomaticReviewsEnabled))||void 0===r?void 0:r.valBool)&&void 0!==s&&s){let e=null===(l=i.client)||void 0===l?void 0:l.email,a=i.objectId;if(!t||!e||!a)return;try{await (0,L.e)({details:{accountId:n.objectId,invoiceId:a,email:e,userId:t.objectId}})}catch(e){console.error("Failed to send review request:",e),(0,M.Tb)(e)}}},[n.objectId,a,e.enabled,o,t])};var _=n(68453),B=n(76651);function V(){let{ft:e}=(0,o.Y)();return[{value:w.h$.NONE,label:e({id:"invoice.deposits.depositTypeNone"})},{value:w.h$.PERCENT,label:e({id:"invoice.deposits.depositTypePercent"})},{value:w.h$.FLAT,label:e({id:"invoice.deposits.depositTypeFlat"})}]}function U(){let{ft:e}=(0,o.Y)();return[{value:w.nY.PAYMENT_NONE,label:e({id:"invoice.deposits.depositTypeNone"})},{value:w.nY.PAYMENT_TEN,label:"".concat(w.nY.PAYMENT_TEN,"%")},{value:w.nY.PAYMENT_TWENTY,label:"".concat(w.nY.PAYMENT_TWENTY,"%")},{value:w.nY.PAYMENT_THIRTY,label:"".concat(w.nY.PAYMENT_THIRTY,"%")},{value:w.nY.PAYMENT_FORTY,label:"".concat(w.nY.PAYMENT_FORTY,"%")},{value:w.nY.PAYMENT_FIFTY,label:"".concat(w.nY.PAYMENT_FIFTY,"%")}]}var z=n(70517),Y=n(63133);let H=async(e,t)=>{if(null==e?void 0:e.objectId){let n=await (0,Y.c)(null==e?void 0:e.objectId);t(e=>(0,z.isInvoice)(e)?{...e,payments:n.payments,setting:{...e.setting,depositType:n.setting.depositType,depositAmount:n.setting.depositAmount,depositRate:n.setting.depositRate}}:e)}},q=e=>{let{onClose:t,open:n}=e,[s,l]=(0,i.useState)(null),c=(0,i.useRef)(null),m=V(),p=U(),{document:v,updateDocument:g}=y(),{payment:j}=h(),E=!!j&&!(0,x.fq)(j),{f:D,fta:M,ft:A}=(0,o.Y)(),{trackAction:L,isFirstTimer:O}=(0,r.D)(),{control:k,register:R,handleSubmit:z,watch:Y,resetField:q,reset:Z,formState:{errors:G,isValid:W,isSubmitting:K,isSubmitSuccessful:X}}=(0,f.cI)({mode:"onChange"}),$=X||K||!W;(0,i.useEffect)(()=>{Z(E?{name:null==j?void 0:j.label,paymentMode:j.paymentMode,paymentRate:(null==j?void 0:j.paymentMode)===w.h$.PERCENT?j.paymentValue:w.nY.PAYMENT_NONE,paymentAmount:(null==j?void 0:j.paymentMode)===w.h$.FLAT?j.paymentValue:w.Uc.PAYMENT_NONE,paymentMethod:j.method,date:(0,w.sG)(null==j?void 0:j.date),notes:j.notes}:{name:A({id:"invoice.multiplePayment.payment"}),paymentMode:w.h$.NONE,paymentRate:w.nY.PAYMENT_NONE,paymentAmount:w.Uc.PAYMENT_NONE,date:new Date,notes:""})},[E,j,n,Z]),(0,i.useEffect)(()=>{let e=Y((e,t)=>{let{name:n,type:a}=t;"paymentMode"===n&&"change"===a&&(e.paymentMode===w.h$.PERCENT?q("paymentAmount"):e.paymentMode===w.h$.FLAT&&q("paymentRate"))});return()=>e.unsubscribe()},[Y]);let Q=F(),J=async e=>{try{var n,a;let{paymentMode:i,paymentAmount:o,paymentRate:r,paymentMethod:s,date:l,notes:d}=e;if(!(null==v?void 0:v.objectId)||void 0===s||""===s)return;let c=(0,P.E)({invoice:v}),u=i===w.h$.FLAT?o:r,m=(0,x.ng)(c,c.payments||[]),p=null!==(a=null===(n=c.payments)||void 0===n?void 0:n.filter(e=>e.date&&e.amount))&&void 0!==a?a:[],y=m.lte(w.xE)&&p.length>0,h=null!=u?u:0;i===w.h$.PERCENT&&(h=(0,_.p)((0,x.NV)(c,{paymentMode:i,paymentValue:u,method:s,date:l,notes:d}))),E&&j.objectId?(await I({objectId:j.objectId,paymentMode:i,paymentValue:u,amount:(0,_.p)(h),date:l,method:s,notes:d}),L("web-button-click",{action:"historical-payment-updated",text:"Submit",paymentMode:i,paymentValue:u,date:l})):(await C(null==v?void 0:v.objectId,{paymentMode:i,paymentValue:u,amount:(0,_.p)(h),date:l,method:s,notes:d}),L("web-button-click",{action:"historical-payment-added",text:"Submit",paymentMode:i,paymentValue:u,date:l})),t(!0),await H(v,g);let f=m.minus(h).lte(w.xE);!y&&f&&v&&!O&&Q(v),Z()}catch(e){console.error("Failed to submit payment:",e),l(A({id:"invoice.multiplePayment.network.error"}))}},ee=()=>{t(),Z()};return(0,a.jsxs)(u.u_,{ref:c,open:n,onClose:ee,"data-sentry-element":"Modal","data-sentry-component":"CompletedPaymentFormModal","data-sentry-source-file":"completed-payment-form-modal.tsx",children:[(0,a.jsx)("header",{children:(0,a.jsxs)("div",{className:"py-4 px-5 relative flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-medium text-xs","data-testid":"payment-form-header",children:D({id:"invoice.recordPayment.header"}).toUpperCase()}),(0,a.jsx)("button",{"data-testid":"closeButton",className:"w-5",onClick:ee,children:(0,a.jsx)(d.Z,{width:20,height:20,"data-sentry-element":"XIcon","data-sentry-source-file":"completed-payment-form-modal.tsx"})})]})}),(0,a.jsxs)(S.l0,{"data-testid":"completed-payment-form-modal",onSubmit:z(J),className:"p-6 md:!p-6 md:!pb-4 md:!pt-0 py-2 pr-5","data-sentry-element":"Form","data-sentry-source-file":"completed-payment-form-modal.tsx",children:[(0,a.jsx)(S.yt,{label:A({id:"invoice.multiplePayment.name"}),id:"name",...R("name",{required:!0}),disabled:!0,inputClassName:"border-none pl-0","data-testid":"payment-name","data-sentry-element":"FormInput","data-sentry-source-file":"completed-payment-form-modal.tsx"}),(0,a.jsx)(S.yt,{label:A({id:"invoice.multiplePayment.type"}),id:"paymentMode",InputComponent:(0,a.jsx)(f.Qr,{name:"paymentMode",control:k,rules:{validate:e=>{if(Number.isNaN(e)||e===w.h$.NONE)return A({id:"invoice.multiplePayment.paymentMode.error"})}},render:e=>{let{field:t}=e;return(0,a.jsx)("div",{className:"w-36","data-testid":"completed-payment-paymentMode",children:(0,a.jsx)(b.ZP,{inputId:"paymentMode",placeholder:"None",name:t.name,onBlur:t.onBlur,isSearchable:!1,defaultValue:m.find(e=>e.value===t.value),styles:B.mT,onChange:e=>{t.onChange(null==e?void 0:e.value)},options:m})})}}),"data-sentry-element":"FormInput","data-sentry-source-file":"completed-payment-form-modal.tsx"}),Y("paymentMode")===w.h$.PERCENT&&(0,a.jsx)(S.yt,{label:A({id:"invoice.recordPayment.amount"}),id:"paymentRate",InputComponent:(0,a.jsx)(f.Qr,{name:"paymentRate",control:k,rules:{validate:e=>{if(Number.isNaN(e)||e===w.nY.PAYMENT_NONE)return A({id:"invoice.multiplePayment.paymentRate.error"})}},render:e=>{let{field:t}=e;return(0,a.jsx)("div",{className:"w-36","data-testid":"completed-payment-paymentRate",children:(0,a.jsx)(b.ZP,{inputId:"paymentRate",placeholder:"None",name:t.name,onBlur:t.onBlur,defaultValue:p.find(e=>e.value===t.value),isSearchable:!1,styles:B.mT,onChange:e=>{t.onChange(null==e?void 0:e.value)},options:p})})}})}),Y("paymentMode")===w.h$.FLAT&&(0,a.jsx)(S.yt,{label:M({id:"invoice.recordPayment.amount"}),id:"paymentAmount",InputComponent:(0,a.jsx)("div",{className:"flex justify-start w-28","data-testid":"completed-payment-paymentAmt",children:(0,a.jsx)(f.Qr,{name:"paymentAmount",control:k,rules:{required:!0,min:{value:.01,message:A({id:"invoice.multiplePayment.amount.error"})}},render:e=>{let{field:t}=e;return(0,a.jsx)(S.Af,{placeholder:"0.00",precision:2,style:!1,id:"paymentAmount",...t})}})})}),(0,a.jsx)(S.yt,{label:A({id:"invoice.recordPayment.method"}),id:"paymentMethod",InputComponent:(0,a.jsx)(f.Qr,{name:"paymentMethod",control:k,rules:{required:A({id:"invoice.multiplePayment.paymentMethod.error"})},render:e=>{let{field:t}=e;return(0,a.jsx)("div",{className:"w-36","data-testid":"paymentMethod",children:(0,a.jsx)(b.ZP,{inputId:"paymentMethod",name:t.name,onBlur:t.onBlur,isSearchable:!1,styles:B.mT,placeholder:A({id:"invoice.multiplePayment.selectMethod"}),onChange:e=>{t.onChange(null==e?void 0:e.value)},defaultValue:B.R0.find(e=>e.value===t.value),options:B.R0.map(e=>({value:e.value,label:A({id:e.i18nKey}),i18nKey:e.i18nKey}))})})}}),"data-sentry-element":"FormInput","data-sentry-source-file":"completed-payment-form-modal.tsx"}),(0,a.jsx)(S.yt,{label:A({id:"invoice.recordPayment.date"}),id:"date",InputComponent:(0,a.jsx)("div",{className:"flex justify-start w-36","data-testid":"completed-payment-date",children:(0,a.jsx)(f.Qr,{name:"date",control:k,render:e=>{let{field:t}=e;return(0,a.jsx)(T.M,{id:"date",selected:t.value,className:"text-xs group-hover:bg-gray-50 rounded",dictionary:{todayMessage:A({id:"datePicker.today"})},...t})}})}),"data-sentry-element":"FormInput","data-sentry-source-file":"completed-payment-form-modal.tsx"}),(0,a.jsx)(S.yt,{label:A({id:"invoice.recordPayment.notes"}),id:"notes",InputComponent:(0,a.jsx)(N.g,{id:"notes","data-testid":"notes",placeholder:A({id:"invoice.multiplePayment.addANote"}),className:"border-gray-400 rounded",...R("notes")}),"data-sentry-element":"FormInput","data-sentry-source-file":"completed-payment-form-modal.tsx"}),G.paymentAmount&&(0,a.jsx)("div",{className:"p-4 mb-4 text-sm text-red-500 rounded-xl bg-red-50 font-normal w-full",role:"alert",children:G.paymentAmount.message}),s&&(0,a.jsx)("div",{className:"p-4 mb-4 text-sm text-red-500 rounded-xl bg-red-50 font-normal w-full",role:"alert",children:s}),(0,a.jsx)("footer",{className:"w-full p-0 pt-4 flex",children:(0,a.jsx)("button",{"data-testid":"completed-payment-btn",type:"submit",disabled:$,className:"text-white py-[0.38rem] px-3 rounded-[0.19rem] ".concat($?"bg-gray-400":"bg-[#444]"),children:M({id:"invoice.recordPayment.savePayment"})})})]})]})};n(96308);var Z=n(73378),G=n(19395),W=n(36521),K=n(82337),X=n(95422),$=n(68615);let Q=async e=>{try{let t=await (0,E.Y)(),{objectId:n,paymentType:a,paymentMode:i,paymentValue:o,dueDate:r,label:s,amount:l,method:d}=e;return(await (0,j.W)("/functions/invoiceUpdatePayment",{method:"POST",body:JSON.stringify({markPaid:!0,payment:{objectId:n,paymentType:a,paymentMode:i,paymentValue:o,dueDate:r,label:s,amount:l,date:(0,$.Z)(new Date().toISOString()),method:d}}),headers:{"X-Parse-Session-Token":t}})).result}catch(e){console.error("Error while getting payments from Parse",e);return}};var J=n(21576);let ee=async e=>{try{let t=await (0,E.Y)();await (0,j.W)("/functions/invoiceUpdatePayment",{method:"POST",body:JSON.stringify({payment:{objectId:e,deleted:!0}}),headers:{"X-Parse-Session-Token":t}})}catch(e){console.error("Error while getting payments from Parse",e)}};var et=n(14883);let en=e=>{let{open:t,closeModal:n,payment:i}=e,{f:s}=(0,o.Y)(),{document:l,updateDocument:c}=y(),{refetchPayments:m}=(0,v.Y)(null==l?void 0:l.objectId),{trackAction:p}=(0,r.D)(),g=()=>{n()},h=async()=>{i.objectId&&(await ee(i.objectId),p("web-button-click",{action:"payment-deleted",text:"Delete",isDeposit:i.paymentType===w.IX.DEPOSIT,paymentMode:i.paymentMode,paymentValue:i.paymentValue,amount:i.amount,dueDate:i.dueDate,date:i.date}),m(),await H(l,c)),g()};return(0,a.jsx)(u.u_,{open:t,onClose:g,className:"fixed sm:relative [@media(max-width:640px)]:inset-0 bg-opacity-75 transition-opacity flex items-center justify-center","data-sentry-element":"Modal","data-sentry-component":"DeletePaymentModal","data-sentry-source-file":"delete-payment-modal.tsx",children:(0,a.jsxs)("section",{"data-testid":"delete-payment-modal",className:"bg-white rounded-lg shadow-xl overflow-hidden w-full ",children:[(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(J.V.Title,{"data-testid":"delete-payment-title",as:"h1",className:"text-gray-800 text-xl leading-loose text-left font-semibold","data-sentry-element":"unknown","data-sentry-source-file":"delete-payment-modal.tsx",children:s({id:"invoice.upcomingPayment.deletePayment"})}),(0,a.jsx)("button",{className:"text-gray-400 hover:text-gray-600",onClick:n,children:(0,a.jsx)(d.Z,{className:"text-gray-400","data-testid":"x-icon",size:20,"data-sentry-element":"X","data-sentry-source-file":"delete-payment-modal.tsx"})})]})}),(0,a.jsx)(J.V.Title,{as:"div",className:"px-6 pb-5","data-testid":"delete-payment-confirmation","data-sentry-element":"unknown","data-sentry-source-file":"delete-payment-modal.tsx",children:(0,a.jsxs)("p",{children:[" ",s({id:"invoice.upcomingPayment.deletePaymentInfo"})]})}),(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-100 flex justify-end space-x-3",children:[(0,a.jsx)(et.z,{"data-testid":"delete-payment-delete",color:"custom",className:"bg-gray-200 hover:bg-gray-300 text-gray-800",onClick:h,"data-sentry-element":"RoundedButton","data-sentry-source-file":"delete-payment-modal.tsx",children:s({id:"invoice.upcomingPayment.delete"})}),(0,a.jsx)(et.z,{"data-testid":"delete-payment-cancel",color:"custom",onClick:()=>g(),className:"bg-gray-600 hover:bg-gray-700 text-white ","data-sentry-element":"RoundedButton","data-sentry-source-file":"delete-payment-modal.tsx",children:s({id:"invoice.upcomingPayment.cancel"})})]})]})})},ea=e=>{let{payment:t}=e,[n,s]=(0,i.useState)(!1),{f:l}=(0,o.Y)(),{open:d}=(0,u.dd)(),{setPaymentFormState:c}=h(),{document:m,updateDocument:p}=y(),{refetchPayments:g}=(0,v.Y)(null==m?void 0:m.objectId),{trackAction:f,isFirstTimer:b}=(0,r.D)(),T=!!t.date&&!!t.amount,N=t.paymentType===w.IX.DEPOSIT,j=F(),E=async e=>{var n,a,i;let o=(0,P.E)({invoice:m}),r=(0,x.ng)(o,null!==(a=o.payments)&&void 0!==a?a:[]),s=null!==(i=null===(n=o.payments)||void 0===n?void 0:n.filter(e=>e.date&&e.amount))&&void 0!==i?i:[],l=r.lte(w.xE)&&s.length>0,d={...t,method:e},c=Number((0,x.NV)(o,d));await Q({...d,amount:c}),f("web-button-click",{action:"payment-marked-paid",text:"payment-marked-paid",isDeposit:N,paymentMode:t.paymentMode,paymentValue:t.paymentValue,amount:c,dueDate:t.dueDate,date:t.date}),g(),await H(m,p);let u=r.minus(c).lte(w.xE);!l&&u&&m&&!b&&j(m)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(X.fQ,{"data-sentry-element":"KebabMenu","data-sentry-source-file":"payment-menu.tsx",children:[!T&&(0,a.jsx)(X.h_,{label:l({id:"kebab.mark.paid"}),inKebabMenu:!0,"data-testid":"kebab.mark.paid",children:B.R0.map(e=>(0,a.jsx)(X.sN,{"data-testid":e.value,label:l({id:e.i18nKey}),onClick:()=>{"chooseMethod"!==e.value&&E(e.value)}},e.value))}),(0,a.jsx)(X.sN,{"data-testid":"edit",label:l({id:"kebab.edit"}),onClick:()=>{c({isHistorical:T,isDeposit:N,payment:t}),d()},"data-sentry-element":"MenuItem","data-sentry-source-file":"payment-menu.tsx"}),(0,a.jsx)(X.sN,{"data-testid":"delete",label:l({id:"kebab.delete"}),className:"separator-top delete-button",onClick:()=>s(!0),"data-sentry-element":"MenuItem","data-sentry-source-file":"payment-menu.tsx"})]}),(0,a.jsx)(en,{payment:t,open:n,closeModal:()=>s(!1),"data-sentry-element":"DeletePaymentModal","data-sentry-source-file":"payment-menu.tsx"})]})};function ei(e){var t;let{payment:n,isUpcoming:i,dateFormat:r}=e,s=(0,o.Y)(),{document:l}=y(),{f:d}=s,c=(0,P.E)({invoice:l}),u=i?(0,x.NV)(c,n):n.amount,m=function(e,t,n){let{ft:a,locale:i}=(0,o.Y)();return(0,x.fq)(e)?e.paymentType===w.IX.NONE&&t?"".concat(a({id:"invoice.multiplePayment.due"})," ").concat((0,w.LH)({date:(0,w.sG)(e.dueDate),format:n,localeCode:i})):null:(0,w.LH)({date:(0,w.sG)(e.date),format:n,localeCode:i})}(n,i,r),p=d({id:(null===(t=B.Jb.find(e=>e.value===n.method))||void 0===t?void 0:t.i18nKey)||"payment.method.label.other"});return(0,a.jsxs)("li",{className:"p-2.5 flex justify-between","data-sentry-component":"PaymentRow","data-sentry-source-file":"payment-rows.tsx",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{"data-testid":"payment-label",className:"font-semibold text-[0.813rem]",children:[n.label," ",n.method&&!i&&(0,a.jsx)("span",{"data-testid":"payment-method",children:"(".concat(p,")")})]}),m&&(0,a.jsx)("p",{"data-testid":"payment-dueDate",className:"text-xs",children:m}),n.notes&&(0,a.jsx)("p",{"data-testid":"payment-note",className:"text-xs mt-1",children:n.notes})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("p",{"data-testid":"payment-amount",className:"text-sm font-semibold",children:(0,a.jsx)(W.i,{value:u||0,"data-sentry-element":"CurrencyDisplay","data-sentry-source-file":"payment-rows.tsx"})}),(0,a.jsx)(ea,{payment:n,"data-sentry-element":"PaymentMenu","data-sentry-source-file":"payment-rows.tsx"})]})]})}function eo(e){var t;let{isUpcoming:n}=e,{payments:i}=(0,K.I)(),o=n?(0,x.oM)(i):i.filter(e=>!(0,x.fq)(e)),{data:r}=(0,G.useQuery)((0,k.F)({})),s=null==r?void 0:null===(t=r.settings.find(e=>{if(e.remoteId===w.Vd.LocaleDateFormat)return e}))||void 0===t?void 0:t.valStr;return(0,a.jsx)("ul",{className:"rounded bg-[#F6F6F6] divide-y divide-[#ECECEC]","data-sentry-component":"PaymentRows","data-sentry-source-file":"payment-rows.tsx",children:o.map(e=>(0,a.jsx)(ei,{payment:e,isUpcoming:n,dateFormat:s||"PP"},e.objectId))})}function er(e){let{dictionary:t}=e,{open:n}=(0,u.dd)(),{setPaymentFormState:i}=h();return(0,a.jsxs)("div",{className:"pt-[0.9375rem] pb-[0.9375rem] payment-scheduling","data-sentry-component":"CompletedPaymentsSection","data-sentry-source-file":"completed-payments-section.tsx",children:[t.paymentHistory,(0,a.jsx)("div",{className:"flex flex-row py-5",children:(0,a.jsx)(Z.z,{"data-testid":"recordPayment",variant:"default",type:"button",onClick:()=>{i({isHistorical:!0}),n()},disabled:!1,"data-sentry-element":"Button","data-sentry-source-file":"completed-payments-section.tsx",children:t.recordPayment})}),(0,a.jsx)(eo,{isUpcoming:!1,"data-sentry-element":"PaymentRows","data-sentry-source-file":"completed-payments-section.tsx"})]})}var es=n(98523);let el=e=>{let{dictionary:t}=e,{payments:n}=(0,K.I)(),{document:i}=y(),{currency:{value:o}}=(0,es.S)(),r=(0,P.E)({invoice:i}),s=(0,x.jI)(r,n),l=(0,x.$k)(r,n),d=(0,x.bZ)({payments:n}),c=(0,x.GZ)(n),u=c&&(0,x.rs)(c),m=(0,x.ng)(r,n),p=n.filter(e=>e.date&&e.amount),v=l.lte(w.xE)&&p.length>0,g=[{label:t.invoiceTotal,value:s},{label:t.paid,value:d},{label:t.amountRemaining,value:m},{label:u?t.depositDue:t.balanceDue,value:l,isBold:!0,prefix:o}];return(0,a.jsxs)("div",{className:"pb-[0.9375rem] payment-scheduling","data-sentry-component":"PaymentDetailsSection","data-sentry-source-file":"payment-details-section.tsx",children:[g.map((e,t)=>{let{label:n,value:i,isBold:o,prefix:r}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-[0.297rem] ".concat(o?"font-bold":""),children:[(0,a.jsx)("p",{children:n}),(0,a.jsx)(W.i,{prefix:r,value:i,textStyle:{paddingRight:"0.125rem"}})]},t)}),v&&(0,a.jsx)("div",{className:"text-right text-xs text-gray-500 justify-between p-[0.297rem]",children:t.fullyPaid})]})},ed=async(e,t)=>{try{let n=await (0,E.Y)();return(await (0,j.W)("/functions/invoiceAddPayment",{method:"POST",body:JSON.stringify({invoiceId:e,payment:{paymentType:t.paymentType,paymentMode:t.paymentMode,paymentValue:t.paymentValue,dueDate:t.dueDate,label:t.label}}),headers:{"X-Parse-Session-Token":n}})).result}catch(e){console.error("Error while getting payments from Parse",e);return}},ec=async e=>{try{let t=await (0,E.Y)();return(await (0,j.W)("/functions/invoiceUpdatePayment",{method:"POST",body:JSON.stringify({payment:{objectId:e.objectId,paymentType:e.paymentType,paymentMode:e.paymentMode,paymentValue:e.paymentValue,dueDate:e.dueDate,label:e.label}}),headers:{"X-Parse-Session-Token":t}})).result}catch(e){console.error("Error while getting payments from Parse",e);return}},eu=e=>{let{onClose:t,open:n}=e,s=(0,i.useRef)(null),[l,c]=(0,i.useState)(null),m=V(),p=U(),{isDeposit:v,payment:g}=h(),{f:N,fta:j,ft:E}=(0,o.Y)(),{trackAction:C}=(0,r.D)(),{document:I,updateDocument:D}=y(),{payments:M}=(0,K.I)(),A=(0,P.E)({invoice:I}),L=(0,x.jI)(A,M),O=!!g,{control:k,register:R,handleSubmit:F,watch:_,resetField:z,reset:Y,formState:{errors:q,isValid:Z,isSubmitting:G,isSubmitSuccessful:W}}=(0,f.cI)({mode:"onChange"}),X=W||G||!Z;(0,i.useEffect)(()=>{n&&Y(O?{name:null==g?void 0:g.label,paymentMode:g.paymentMode,paymentRate:(null==g?void 0:g.paymentMode)===w.h$.PERCENT?g.paymentValue:w.nY.PAYMENT_NONE,paymentAmount:(null==g?void 0:g.paymentMode)===w.h$.FLAT?g.paymentValue:w.Uc.PAYMENT_NONE,...!v&&{dueDate:(0,w.sG)(null==g?void 0:g.dueDate)||new Date}}:{name:v?E({id:"invoice.multiplePayment.deposit"}):E({id:"invoice.multiplePayment.payment"}),paymentMode:w.h$.NONE,paymentRate:w.nY.PAYMENT_NONE,paymentAmount:w.Uc.PAYMENT_NONE,...!v&&{dueDate:new Date}})},[O,v,g,n]),(0,i.useEffect)(()=>{let e=_((e,t)=>{let{name:n,type:a}=t;"paymentMode"===n&&"change"===a&&(e.paymentMode===w.h$.PERCENT?z("paymentAmount"):e.paymentMode===w.h$.FLAT&&z("paymentRate"))});return()=>e.unsubscribe()},[_]);let $=async e=>{try{let{paymentMode:n,paymentRate:a,paymentAmount:i,dueDate:o,name:r}=e;if(!(null==I?void 0:I.objectId))return;let s=n===w.h$.PERCENT?a:i,l={paymentMode:n,paymentValue:s,label:r,...!v&&{dueDate:{__type:"Date",iso:(null==o?void 0:o.toISOString())||new Date().toISOString()}}};O?await ec({objectId:g.objectId,paymentType:g.paymentType,...l}):(await ed(I.objectId,{paymentType:v?w.IX.DEPOSIT:w.IX.NONE,...l}),C("web-button-click",{action:"payment-added",text:"Submit",isDeposit:v||!1,paymentMode:n,paymentValue:s,dueDate:o})),await H(I,D),t(!0)}catch(e){console.error("Failed to submit payment:",e),c(E({id:"invoice.multiplePayment.network.error"}))}},Q=()=>{t()};return(0,a.jsxs)(u.u_,{ref:s,open:n,onClose:Q,"data-sentry-element":"Modal","data-sentry-component":"UpcomingPaymentFormModal","data-sentry-source-file":"upcoming-payment-form-modal.tsx",children:[(0,a.jsx)("header",{children:(0,a.jsxs)("div",{className:"py-4 px-5 relative flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-medium text-xs",children:v?N({id:"invoice.multiplePayment.requestDeposit"}).toUpperCase():N({id:"invoice.multiplePayment.addUpcomingPayment"}).toUpperCase()}),(0,a.jsx)("button",{"data-testid":"closeButton",className:"w-5",onClick:Q,children:(0,a.jsx)(d.Z,{width:20,height:20,"data-sentry-element":"XIcon","data-sentry-source-file":"upcoming-payment-form-modal.tsx"})})]})}),(0,a.jsxs)(S.l0,{"data-testid":"upcoming-payment-form-modal",onSubmit:F($),className:"p-6 md:!p-6 md:!pb-4 md:!pt-0 py-2 pr-5","data-sentry-element":"Form","data-sentry-source-file":"upcoming-payment-form-modal.tsx",children:[(0,a.jsx)(S.yt,{label:E({id:"invoice.multiplePayment.name"}),id:"name",...R("name",{required:!0}),disabled:!0,inputClassName:"border-none pl-0","data-testid":"upcoming-payment-name","data-sentry-element":"FormInput","data-sentry-source-file":"upcoming-payment-form-modal.tsx"}),(0,a.jsx)(S.yt,{label:E({id:"invoice.multiplePayment.type"}),id:"paymentMode",InputComponent:(0,a.jsx)(f.Qr,{name:"paymentMode",control:k,rules:{validate:e=>{if(Number.isNaN(e)||e===w.h$.NONE)return E({id:"invoice.multiplePayment.paymentMode.error"})}},render:e=>{let{field:t}=e;return(0,a.jsx)("div",{className:"w-36","data-testid":"upcoming-payment-paymentMode",children:(0,a.jsx)(b.ZP,{inputId:"paymentMode",placeholder:"None",name:t.name,onBlur:t.onBlur,isSearchable:!1,defaultValue:m.find(e=>e.value===t.value),styles:B.mT,onChange:e=>{t.onChange(null==e?void 0:e.value)},options:m})})}}),"data-sentry-element":"FormInput","data-sentry-source-file":"upcoming-payment-form-modal.tsx"}),_("paymentMode")===w.h$.PERCENT&&(0,a.jsx)(S.yt,{label:E({id:"invoice.recordPayment.amount"}),id:"paymentRate",InputComponent:(0,a.jsx)(f.Qr,{name:"paymentRate",control:k,rules:{validate:e=>{if(Number.isNaN(e)||e===w.nY.PAYMENT_NONE)return E({id:"invoice.multiplePayment.paymentRate.error"})}},render:e=>{let{field:t}=e;return(0,a.jsx)("div",{className:"w-36","data-testid":"upcoming-payment-paymentRate",children:(0,a.jsx)(b.ZP,{placeholder:"None",name:t.name,onBlur:t.onBlur,defaultValue:p.find(e=>e.value===t.value),isSearchable:!1,styles:B.mT,onChange:e=>{t.onChange(null==e?void 0:e.value)},options:p})})}})}),_("paymentMode")===w.h$.FLAT&&(0,a.jsx)(S.yt,{label:E({id:"invoice.recordPayment.amount"}),id:"paymentAmount",InputComponent:(0,a.jsx)("div",{className:"flex justify-start w-28",children:(0,a.jsx)(f.Qr,{name:"paymentAmount",control:k,rules:{min:{value:.01,message:E({id:"invoice.multiplePayment.amount.error"})},max:{value:+L,message:E({id:"invoice.multiplePayment.amount.max"},{invoiceTotal:+L})}},render:e=>{let{field:t}=e;return(0,a.jsx)(S.Af,{placeholder:"0.00",precision:2,maxLength:10,style:!1,id:"paymentAmount",...t})}})})}),!v&&(0,a.jsx)(S.yt,{label:E({id:"invoice.multiplePayment.due"}),id:"dueDate",InputComponent:(0,a.jsx)("div",{className:"flex justify-start w-36","data-testid":"upcoming-payment-dueDate",children:(0,a.jsx)(f.Qr,{name:"dueDate",control:k,render:e=>{let{field:t}=e;return(0,a.jsx)(T.M,{id:"dueDate",selected:t.value,className:"text-xs group-hover:bg-gray-50 rounded",dictionary:{todayMessage:E({id:"datePicker.today"})},...t})}})})}),q.paymentAmount&&(0,a.jsx)("div",{className:"p-4 mb-4 text-sm text-red-500 rounded-xl bg-red-50 font-normal w-full",role:"alert",children:q.paymentAmount.message}),l&&(0,a.jsx)("div",{className:"p-4 mb-4 text-sm text-red-500 rounded-xl bg-red-50 font-normal w-full",role:"alert",children:l}),(0,a.jsx)("footer",{className:"w-full p-0 pt-4 flex",children:(0,a.jsx)("button",{type:"submit","data-testid":"savePayment",disabled:X,className:"text-white py-[0.38rem] px-3 rounded-[0.19rem] ".concat(X?"bg-gray-400":"bg-[#444]"),children:j({id:"invoice.recordPayment.savePayment"})})})]})]})};function em(e){let{dictionary:t}=e,{open:n}=(0,u.dd)(),{setPaymentFormState:i}=h(),{document:o}=y(),r=(0,P.E)({invoice:o}),{payments:s}=(0,K.I)(),l=(0,x.$k)(r,s),d=s.some(e=>e.paymentType===w.IX.DEPOSIT),c=s.filter(e=>!(0,x.fq)(e)),m=l.lte(w.xE)&&c.length>0,p=(0,x.oM)(s);return m&&!p.length?null:(0,a.jsxs)("div",{className:"pt-[0.9375rem] pb-[0.9375rem] payment-scheduling","data-sentry-component":"UpcomingPaymentsSection","data-sentry-source-file":"upcoming-payments-section.tsx",children:[t.upcomingPayments,!m&&(0,a.jsxs)("div",{className:"flex flex-row gap-[0.1875rem] py-5",children:[!d&&!c.length&&(0,a.jsx)(Z.z,{"data-testid":"requestDeposit",variant:"primary",type:"button",onClick:()=>{i({isHistorical:!1,isDeposit:!0}),n()},disabled:!1,children:t.requestDeposit}),(0,a.jsx)(Z.z,{"data-testid":"addUpcomingPayment",variant:"default",type:"button",onClick:()=>{i({isHistorical:!1,isDeposit:!1}),n()},disabled:!1,children:t.addUpcomingPayment})]}),m&&(0,a.jsx)("div",{className:"pt-[0.9375rem]"}),(0,a.jsx)(eo,{isUpcoming:!0,"data-sentry-element":"PaymentRows","data-sentry-source-file":"upcoming-payments-section.tsx"})]})}let ep=e=>{let{document:t,onClose:n,dictionary:o,updateDocument:r}=e,{isOpen:s,close:l}=(0,u.dd)(),{isHistorical:p}=h(),{error:g,refetchPayments:f}=(0,v.Y)(t.objectId),{setDocument:b,setUpdateDocument:x}=y();(0,i.useEffect)(()=>{b(t),x(r)},[r,x]);let w=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&f(),l()};return g?null:(0,a.jsxs)(m.pM,{modals:{[c.y]:{modal:c.h,props:{source:"payment-scheduling"}}},"data-sentry-element":"ModalsContextProvider","data-sentry-component":"PaymentScheduling","data-sentry-source-file":"payment-scheduling.tsx",children:[(0,a.jsxs)("div",{"data-testid":"payment-scheduling",className:"d-print-none bg-white relative text-gray-700 text-xs border rounded-[0.313rem] shadow-lg",children:[(0,a.jsxs)("div",{className:"p-5 relative flex justify-between border-b border-solid border-gray-200",children:[(0,a.jsx)("h3",{className:"font-medium text-[1.094rem]",children:o.paymentScheduling}),(0,a.jsx)("button",{className:"w-5",onClick:n,"data-testid":"close-button",children:(0,a.jsx)(d.Z,{width:20,height:20,"data-sentry-element":"XIcon","data-sentry-source-file":"payment-scheduling.tsx"})})]}),(0,a.jsxs)("div",{className:"p-5 divide-y",children:[(0,a.jsx)(el,{dictionary:o,"data-sentry-element":"PaymentDetailsSection","data-sentry-source-file":"payment-scheduling.tsx"}),(0,a.jsx)(em,{dictionary:o,"data-sentry-element":"UpcomingPaymentsSection","data-sentry-source-file":"payment-scheduling.tsx"}),(0,a.jsx)(er,{dictionary:o,"data-sentry-element":"CompletedPaymentsSection","data-sentry-source-file":"payment-scheduling.tsx"})]})]}),(0,a.jsx)(eu,{open:s&&!p,onClose:w,"data-sentry-element":"UpcomingPaymentFormModal","data-sentry-source-file":"payment-scheduling.tsx"}),(0,a.jsx)(q,{open:s&&p,onClose:w,"data-sentry-element":"CompletedPaymentFormModal","data-sentry-source-file":"payment-scheduling.tsx"})]})},ey=e=>{let{document:t,updateDocument:n}=e,{locale:d,country:c}=(0,o.Y)(),{trackAction:u}=(0,r.D)(),{showRecordPaymentForm:m,setShowRecordPaymentForm:p,shouldShowRecordPayment:y}=(0,l.o)({document:t,country:c}),v=y&&m;return((0,i.useEffect)(()=>{v&&u("web-button-click",{action:"payment-scheduling",text:"Payment Scheduling"})},[v,u]),v)?(0,a.jsx)(ep,{onClose:()=>{p(!1)},dictionary:(0,s.F)(d).paymentDropdownDictionary,document:t,updateDocument:n,"data-sentry-element":"PaymentScheduling","data-sentry-component":"PaymentForm","data-sentry-source-file":"payment-form.tsx"}):null}},18528:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var a=n(37821);n(58078);var i=n(70517),o=n(76506),r=n.n(o);let s={label:"Print {docType}",title:"Print your {docType}"},l=e=>{let{document:t,dictionary:n={invoiceShare:{pdf:s}},pdfHost:o,className:l="",disabled:d=!1,onClick:c}=e,u=e=>e.replace("{docType}",(0,i.isInvoice)(t)?"Invoice":(0,i.isEstimate)(t)?"Estimate":"Receipt"),m=()=>t.id?t.id:t.objectId||"",p=(e,t)=>"https://".concat(e,"/").concat(t,".pdf"),y=e=>!!e&&10===e.length,v=async()=>{y(m())&&c&&await c(p(o,m()))},g=r()([{"cursor-not-allowed opacity-60":d},"btn-print-pdf","btn btn-print btn-block border w-full px-4 py-2 rounded border border-gray-500 text-gray-700 bg-gray-200 focus:outline-none focus:border-blue-300 focus:ring-blue active:text-gray-800 active:bg-gray-50 transition ease-in-out duration-150 hover:text-gray-500 text-sm",l]),{invoiceShare:h}=n;return(0,a.jsx)("button",{type:"button",disabled:d,title:u(h.pdf.title),className:g,onClick:v,"data-sentry-component":"InvoicePrint","data-sentry-source-file":"invoice-print.tsx",children:(0,a.jsx)("span",{children:u(h.pdf.label)})})}},11463:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var a=n(37821);n(58078);var i=n(70517),o=n(76506),r=n.n(o);let s=e=>{let{document:t,dictionary:n,onClick:o,appUrl:s,disabled:l=!1,className:d=""}=e,c=e=>e.replace("{docType}",(0,i.isInvoice)(t)?"Invoice":"Estimate"),{invoiceShare:u}=n,m=()=>t.id||t.objectId||"",p=e=>"/v/".concat(e),y=e=>!!e&&10===e.length,v=(e,t)=>"".concat(e).concat(p(t)),g=async()=>{y(m())&&o&&await o(v(s,m()))},h=r()([{"cursor-not-allowed opacity-60":l},"btn-get-public-link","btn btn-print btn-block border w-full px-4 py-2 rounded border border-gray-500 bg-gradient-to-r from-gray-600 to-gray-800 hover:from-gray-600 text-gray-100 hover:to-gray-700 text-sm font-medium",d]);return(0,a.jsx)("button",{type:"button",disabled:l,title:c(u.link.title),className:h,onClick:g,"data-sentry-component":"InvoicePublicLink","data-sentry-source-file":"invoice-public-link.tsx",children:(0,a.jsx)("span",{children:c(u.link.label)})})}},75805:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var a=n(37821),i=n(58078);let o=e=>{let[t,n]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{n(!0)},[]),t)?(0,a.jsx)(a.Fragment,{children:e.children}):(0,a.jsx)("div",{style:{height:e.height}})}},751:function(e,t,n){"use strict";n.d(t,{Hi:function(){return s},ij:function(){return r}});var a=n(37821),i=n(58078);function o(){let[e,t]=(0,i.useState)({width:void 0,height:void 0});return(0,i.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}let r=e=>{let{width:t}=o();return t&&t>768?(0,a.jsx)(i.Fragment,{}):(0,a.jsx)("div",{className:"block md:hidden",...e,"data-sentry-component":"Mobile","data-sentry-source-file":"responsive.tsx"})},s=e=>{let{width:t}=o();return t&&t<768?(0,a.jsx)(i.Fragment,{}):(0,a.jsx)("div",{className:"hidden md:block",...e,"data-sentry-component":"Desktop","data-sentry-source-file":"responsive.tsx"})}},37497:function(e,t,n){"use strict";n.d(t,{v:function(){return y}});var a=n(37821),i=n(58078),o=n(24728),r=n(37625),s=n(90469),l=n(48751);function d(e){let{currencyOption:t}=e;return(0,a.jsxs)("div",{className:"invoice-currency-option flex justify-between items-center text-xs",title:t.value,"data-sentry-component":"CurrencyWrapper","data-sentry-source-file":"currency-wrapper.tsx",children:[(0,a.jsx)("div",{className:"block flex-auto",children:(0,a.jsx)("span",{className:"currency-select-code inline-block",children:t.value})}),(0,a.jsxs)("div",{className:"currency-flag flex items-center flex-none",children:[(0,a.jsx)("span",{className:"currency-select-symbol pr-2",style:{fontSize:"18px"},children:t.label}),t.country&&(0,a.jsx)("img",{className:"currency-select-flag align-middle block",src:t.imageUrl,"aria-label":"Currency Country Flag",alt:"flag",style:{width:"40px",height:"24px",margin:"5px 0",borderRadius:"4px",objectFit:"cover"}})]})]})}function c(e){let{currencyOption:t}=e;return(0,a.jsx)(d,{currencyOption:t,"data-sentry-element":"CurrencyWrapper","data-sentry-component":"CurrencySelectOption","data-sentry-source-file":"currency-wrapper.tsx"})}function u(e){let{currencyOption:t}=e;return(0,a.jsx)(d,{currencyOption:t,"data-sentry-element":"CurrencyWrapper","data-sentry-component":"CurrencySelectValue","data-sentry-source-file":"currency-wrapper.tsx"})}var m=n(75805);function p(e){let{selectedCurrency:t,currencyOptions:n,onCurrencyChange:d,dictionary:p}=e,{currencySetting:y}=p,v={...s.X,singleValue:e=>({...e,width:"100%",paddingRight:"1.5rem",cursor:"pointer",margin:0}),dropdownIndicator:()=>({display:"none"})};return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(l.i,{className:"currency-select-header","data-sentry-element":"SettingHeader","data-sentry-source-file":"currency-setting.tsx",children:y.currencySettingHeader}),(0,a.jsx)(m.V,{height:"50","data-sentry-element":"RenderOnClient","data-sentry-source-file":"currency-setting.tsx",children:(0,a.jsx)(r.ZP,{id:"currency-setting","aria-label":"Select Currency",className:"currency-select text-xs",classNamePrefix:"currency-select",options:n,value:t,components:{Option:function(e){return(0,a.jsx)(o.c.Option,{...e,"data-sentry-element":"unknown","data-sentry-component":"Option","data-sentry-source-file":"currency-setting.tsx",children:(0,a.jsx)(c,{currencyOption:e.data,"data-sentry-element":"CurrencySelectOption","data-sentry-source-file":"currency-setting.tsx"})})},SingleValue:function(e){return(0,a.jsx)(o.c.SingleValue,{...e,"data-sentry-element":"unknown","data-sentry-component":"SingleValue","data-sentry-source-file":"currency-setting.tsx",children:(0,a.jsx)(u,{currencyOption:t,"data-sentry-element":"CurrencySelectValue","data-sentry-source-file":"currency-setting.tsx"})})}},styles:v,onChange:function(e,t){let a=e&&"value"in e?e.value:void 0;d(n.filter(e=>e.value===a)[0])},"data-sentry-element":"ReactSelect","data-sentry-source-file":"currency-setting.tsx"})})]})}let y=i.memo(function(e){let{currency:t,currencyOptions:n,updateCurrency:i,dictionary:o}=e;return(0,a.jsx)(p,{currencyOptions:n,selectedCurrency:t,onCurrencyChange:i,dictionary:o})})},5993:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(37821),i=n(58078),o=n(4580),r=n(91933),s=n(78527),l=n(42236);let d=e=>{if(!e)return[];let t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,a)=>"#"+t+t+n+n+a+a).substring(1).match(/.{2}/g);return t?t.map(e=>parseInt(e,16)):[]},c=e=>{let[t,n]=(0,i.useState)(d(e.value)),[c,u]=(0,i.useState)(!1),m=e.value||e.colorOptions[0],{ft:p}=(0,l.Y)(),y=t=>t&&e.colorOptions.includes(t);return(0,i.useEffect)(()=>{y(e.value)&&n(d(e.value))},[e.value]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"w-full border-grey-100 bg-white rounded-sm center p-0 mt-2",style:{border:"1px solid #9FA6B2"},children:[(0,a.jsxs)("button",{className:"w-full border-none bg-white flex justify-between items-center flex-column px-2 py-2.5",onClick:()=>u(!c),type:"button",children:[y(m)?(0,a.jsx)("img",{src:"/images/color-wheel.png",width:"34px",height:"34px"}):(0,a.jsx)("div",{id:"widget-button-state",className:"selected w-[53px] h-[34px] rounded flex justify-center items-center relative",style:{backgroundColor:e.value},children:(0,a.jsx)("div",{className:"absolute top-0 bottom-0 right-0 left-0 flex justify-center items-center",children:(0,a.jsx)(r.G,{icon:s.LEp,width:15,height:15,color:"#fff"})})},e.value),(0,a.jsx)("p",{className:"text-sm w-full h-full pl-3 p-2 text-left",style:{fontSize:"13px"},id:"color-widget-button",children:p({id:"settings.list.theme.custom"})}),(0,a.jsx)("div",{className:"flex justify-center content-center items-center",style:{height:"100%",padding:"0.5rem 1rem"},children:(0,a.jsx)(r.G,{icon:c?s.onQ:s.gc2,color:"#9FA6B2",width:20,height:20,"data-sentry-element":"FontAwesomeIcon","data-sentry-source-file":"custom-color-picker.tsx"})})]}),c&&(0,a.jsx)("div",{id:"color-widget",style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"12px",boxShadow:"none"},children:(0,a.jsx)(o.AI,{color:{r:t[0],g:t[1],b:t[2]},onChangeComplete:t=>e.onChange(t.hex),onChange:e=>n(d(e.hex)),disableAlpha:!0,styles:{default:{picker:{borderRadius:"0px",boxShadow:"none"},body:{padding:"8px"}}}})})]})})}},81964:function(e,t,n){"use strict";n.d(t,{p:function(){return eH}});var a=n(37821),i=n(58078),o=n(19395),r=n(86129),s=n(64142),l=n(70517),d=n(26935),c=n(73378),u=n(42236),m=n(23835),p=n(83257),y=n(77740),v=n(64144),g=n(63133),h=n(30161);n(69836);var f=n(69227);let b=async e=>await (0,f.Y)("/api/revalidate?path=".concat(e),{method:"GET",headers:{"Content-Type":s.bT.APP_JSON}});var x=n(56303),w=n(12272);let P=e=>{let t=w.t.NEXT_PUBLIC_REACT_APP_HOST;if(!e.includes("reviewapp")||!t)return e;let n=new URL(e);return"https://".concat(t).concat(n.pathname)},T=async e=>{let t=await (0,h.getUser)(),n=await (0,g.c)(e.invoiceId);try{let a=e.toEmail.split(",");if(a.length>5)throw new y.InvalidRequestError(x.L);e.trackEvent("invoice-email",{platform:s.t4.WEB,invoice:n.objectId,"doc-type":n.docType,invoiceTotal:n.total,recipients:e.toEmail.split(",").length,remoteId:e.invoiceRemoteId}),await b("/invoice/history");let i=(0,p.Z)(),{invoiceUrl:o,...r}=e,l=[];a.forEach((n,a)=>{l.push((0,v.KF)("/api/v2/email-invoice",{method:"POST",body:JSON.stringify({...r,toEmail:n,invoiceUrl:P(o),versionRemoteId:0===a?i:null}),headers:{"x-is-account":e.accountId,"x-is-user":null==t?void 0:t.objectId,"x-parse-session-token":null==t?void 0:t.sessionToken,"Content-Type":s.bT.APP_JSON},cache:"no-cache",parseAsText:!0}))}),await Promise.all(l)}catch(t){throw console.error("error:",{err:t}),e.trackEvent("invoice-email-error"),t}};var N=n(35243),j=n(45551),E=n(75459),C=n(13254),I=n(9845),S=n(30393),D=n(65833),M=n(88647),A=n(57733),L=n(9418),O=n(99814),k=n(61692),R=n(17914),F=n(48751);function _(e){let{dictionary:t}=e,{isFirstTimer:n,user:o,subscriptionStatus:r}=(0,I.D)(),{pulsem_reviews:s}=(0,S.V)(["pulsem_reviews"]),[l,u]=(0,i.useState)(!1),m=()=>u(!0),{data:p,isLoading:y}=(0,R.Z)({enabled:s.enabled&&!n}),v=()=>{m()};if(!s.enabled||(null==p?void 0:p.onboarded)||y)return null;let g=(0,k.g)({feature:d.eS.AUTOMATIC_REVIEWS,user:o,subscriptionStatus:r});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-gray-100 rounded","data-testid":"automated-reviews-widget",children:[(0,a.jsx)(F.i,{"data-sentry-element":"SettingHeader","data-sentry-source-file":"automated-reviews.tsx",children:(0,a.jsxs)("div",{className:"flex flex-row gap-2 justify-start items-end",children:[t.automatedReviewsHeader,(0,a.jsx)(O.h,{featureName:d.eS.AUTOMATIC_REVIEWS,"data-sentry-element":"FeatureAccess","data-sentry-source-file":"automated-reviews.tsx"})]})}),g?(0,a.jsx)(c.z,{onClick:v,variant:"primary",className:"w-full",disabled:!1,children:t.getStartedButton}):(0,a.jsx)(c.z,{onClick:v,variant:"primary",className:"w-full",disabled:!1,children:t.learnAboutReviewsButton}),(0,a.jsx)("p",{className:"text-xs py-2 text-[#555555]",children:t.description})]}),(0,a.jsx)(L.h,{isOpen:l,onClose:()=>u(!1),source:"invoice","data-sentry-element":"ModalDiscoverability","data-sentry-source-file":"automated-reviews.tsx"})]})}var B=n(77190),V=n(72288),U=n(48622),z=n(82337),Y=n(23805),H=n(73174),q=n(37497),Z=n(5993),G=n(81071),W=n(87698);let K=i.forwardRef((e,t)=>{let{className:n,fill:i,...o}=e;return(0,a.jsx)("svg",{"data-testid":"lock-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:i||"#FF5721",className:(0,W.cn)("w-6 h-6",n),...o,ref:t,children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z",clipRule:"evenodd",fill:i||"#FF5721"})})});K.displayName="IconLock";var X=n(30521),$=n(99547),Q=n(28419);let J=e=>{let{f:t}=(0,u.Y)(),n=(0,m._)(),i=(0,G.usePathname)(),r=(0,G.useSearchParams)(),{trackInstantFormEvent:s}=(0,I.D)(),{openModalWithReminder:l,setPrimaryClientEmail:c}=(0,j.K)(),{user:p,subscriptionStatus:y}=(0,I.D)(),{data:v,isLoading:g}=(0,o.useQuery)((0,C.C)()),h=(0,Q.f)(e.invoice),{setAlert:f}=(0,A.VY)(),b=(0,k.N)({feature:d.eS.DUE_DATE_REMINDERS,user:p}),x=async()=>{if(!b){n.push((0,D.X2)({feature:d.eS.DUE_DATE_REMINDERS}));return}s("send-reminder-button-clicked"),await w()},w=async()=>{let a=(0,$.T)(p),o=(0,X.I)({exportType:"email",user:p,subscriptionStatus:y,sentDocumentEvents:null==v?void 0:v.sentDocumentEvents});if(!e.invoice.objectId){let i=await (0,U.a)({document:e.invoice}).catch(e=>{f({title:t({id:"app.alert.connectivityErrors.title"}),body:t({id:"app.alert.connectivityErrors.body"},{details:e.message}),type:"error",isClosable:!1})});if(!(null==i?void 0:i.newObjectId)){f({title:t({id:"app.alert.connectivityErrors.title"}),body:t({id:"app.alert.connectivityErrors.body"}),type:"error",isClosable:!1});return}let o=null==i?void 0:i.newObjectId;if(a)return n.push("/signup?ref=".concat(D.a$.SEND_DOCUMENT,"&id=").concat(o,"&email-docType=").concat(e.invoice.docType))}if(o){var s,d;let t=new URLSearchParams(null==r?void 0:r.toString());t.set(D.a$.EMAIL,"true"),t.set(D.a$.MESSAGE,D.a$.REMINDER),n.push("".concat(i,"?").concat(t.toString())),c(null!==(d=null===(s=e.invoice.client)||void 0===s?void 0:s.email)&&void 0!==d?d:""),l();return}return a?n.push("/signup?ref=".concat(D.a$.SEND_DOCUMENT,"&id=").concat(e.invoice.objectId,"&email-docType=").concat(e.invoice.docType)):n.push((0,D.X2)({ref:D.a$.SEND_DOCUMENT}))};return g?null:(0,a.jsxs)("div",{"data-testid":"reminder-wrapper",className:"py-2.5 px-4 rounded-md bg-white text-gray-700 text-xs cursor-pointer w-full border border-gray-300 hover:opacity-80",onClick:x,"data-sentry-component":"InvoiceSendReminder","data-sentry-source-file":"invoice-send-reminder.tsx",children:[(0,a.jsx)("div",{"data-testid":"reminder-title",children:t({id:h.id},h.values)}),(0,a.jsxs)("div",{"data-testid":"reminder-button",className:"inline-flex mt-1 text-xs text-red-500",children:[t({id:"invoiceSettings.share.reminder.send"}),!b&&(0,a.jsx)(K,{className:"w-3 ml-0.5"})]})]})};var ee=n(56302),et=n(39067);function en(e){let{toggleSwitch:t,dictionary:n,handleToggle:o}=e,{requestClientSignatureDictionary:r}=n,{user:s,isFirstTimer:l}=(0,I.D)(),c=l||(0,k.N)({user:s,feature:d.eS.CLIENT_SIGNATURE});return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(F.i,{"data-sentry-element":"SettingHeader","data-sentry-source-file":"request-client-signature.tsx",children:(0,a.jsxs)("div",{className:"flex flex-row gap-2 justify-start items-end",children:[r.header,(0,a.jsx)(O.h,{featureName:d.eS.CLIENT_SIGNATURE,"data-sentry-element":"FeatureAccess","data-sentry-source-file":"request-client-signature.tsx"})]})}),(0,a.jsxs)("div",{className:"flex flex-row items-center mt-3 flex-wrap",children:[(0,a.jsxs)("div",{className:"mr-3 text-xs flex h-full item-center justify-center",children:[(0,a.jsx)("p",{className:"mt-1",children:r.subtitle}),!c&&(0,a.jsx)(et.m,{style:{width:"15px",marginLeft:"2px"}})]}),(0,a.jsxs)("label",{className:"switch",children:[(0,a.jsx)("input",{type:"checkbox",className:"switch-input",checked:t,onChange:e=>o(e.target.checked)}),(0,a.jsx)("span",{className:"slider"})]})]})]})}let ea=e=>{let{document:t,onUpdateDocument:n}=e,o=t.setting.estimateSignatureRequired,r=(0,m._)(),{user:c}=(0,I.D)(),p=(0,k.N)({user:c,feature:d.eS.CLIENT_SIGNATURE}),[y,v]=(0,i.useState)(p&&!!o),g=(0,u.Y)();return(0,a.jsx)("div",{className:"mb-3","data-sentry-component":"RequestClientSignature","data-sentry-source-file":"request-client-signature.tsx",children:(0,a.jsx)(en,{toggleSwitch:y,dictionary:{requestClientSignatureDictionary:{header:g.ft({id:"settings.list.clientSignatures"}),subtitle:g.f({id:"invoiceSettings.clientSignatures.request"})}},handleToggle:e=>{if(!p){r.push((0,D.X2)({ref:D.a$.ESTIMATE_EDITOR,feature:d.eS.CLIENT_SIGNATURE}));return}v(e),(0,ee.o1)({name:s.Vd.EstimateSignatureRequired,value:e}),n(t=>(0,l.isInvoice)(t)?t:{...t,setting:{...t.setting,estimateSignatureRequired:e}})},"data-sentry-element":"RequestClientSignatureComponent","data-sentry-source-file":"request-client-signature.tsx"})})};var ei=n(90734),eo=n(40540),er=n(51985),es=n(67308),el=n(76506),ed=n.n(el);let ec=e=>{let{dictionary:t,disabled:n=!1,className:i="",onOpenModal:o}=e,r=ed()([{"cursor-not-allowed opacity-60":n},"btn-get-public-link","mt-2 btn btn-print btn-block border w-full px-4 py-2 rounded border border-gray-500 bg-gradient-to-r from-gray-600 to-gray-800 hover:from-gray-600 text-gray-100 hover:to-gray-700 text-sm font-medium",i]);return(0,a.jsx)("button",{type:"button",disabled:n,title:t.onlinePaymentPreviewTitle,className:r,onClick:o,"data-sentry-component":"CheckoutPreviewButton","data-sentry-source-file":"online-payment-preview-button.tsx",children:(0,a.jsx)("span",{children:t.onlinePaymentPreviewLabel})})};var eu=n(23528),em={src:"/_next/static/media/payments-merchant-client-route.7accd47d.webp",height:800,width:800,blurWidth:0,blurHeight:0},ep=n(9777),ey=n(1309),ev=n(23165),eg=n(72249);let eh=e=>{let{isModalOpen:t,onCloseModal:n,dictionary:i}=e,o=(0,es.zf)(),{trackAction:r}=(0,I.D)();return(0,a.jsxs)(ep.u_,{open:t,onClose:n,"data-sentry-element":"Modal","data-sentry-component":"OnlinePaymentPreviewModal","data-sentry-source-file":"online-payment-preview-modal.tsx",children:[(0,a.jsx)(ey.L,{onClickXIcon:n,headerMessage:i.onlinePaymentPreviewLabel,"data-sentry-element":"TopContainer","data-sentry-source-file":"online-payment-preview-modal.tsx"}),(0,a.jsx)(eu.default,{loading:"lazy",alt:"Payments Merchant Demo",src:em,"data-sentry-element":"Image","data-sentry-source-file":"online-payment-preview-modal.tsx"}),(0,a.jsx)(eg.qO,{handleClick:()=>{r("payments-cta",{...o,source:er._.invoicePreview,component:eo.Z.onlinePaymentPreviewModalCTA}),(0,ev._)(!0,er._.onlinePaymentPreviewModal)},buttonMessage:i.onlinePaymentPreviewCTA,"data-sentry-element":"ButtonContainer","data-sentry-source-file":"online-payment-preview-modal.tsx"})]})},ef=e=>{let t=(0,es.zf)(),{trackAction:n}=(0,I.D)(),[o,r]=(0,i.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eh,{dictionary:e.dictionary,isModalOpen:o,onCloseModal:()=>{n("payments-cta",{...t,source:er._.invoicePreview,component:eo.Z.onlinePaymentPreviewModalClose}),r(!1)},"data-sentry-element":"OnlinePaymentPreviewModal","data-sentry-source-file":"online-payment-preview.tsx"}),(0,a.jsx)(ec,{...e,onOpenModal:()=>{n("payments-cta",{...t,source:er._.invoicePreview,component:eo.Z.onlinePaymentPreview}),r(!0)},"data-sentry-element":"CheckoutPreviewButton","data-sentry-source-file":"online-payment-preview.tsx"})]})};var eb=n(60315),ex=n(57659);let ew=e=>{let{document:t}=e,{payments_enabled:n,paypal_v_stripe_variant:a}=(0,S.V)(["payments_enabled","paypal_v_stripe_variant"]),{isPaypalAccepting:o,isPaypalClosed:r,isPaypalEligible:s}=(0,eb.G)(),{isStripeSubsetOfAccepting:d,isStripeRestricted:c,isStripeRejected:u,isStripeEligibleAndOptedIn:m}=(0,ex.M)();return(0,i.useMemo)(()=>{if(!(null==n?void 0:n.enabled)||!t||!(0,l.isInvoice)(t))return!1;let e=[{isEligible:()=>s(),conditionsMet:()=>!o()&&!r()},{isEligible:()=>m()&&(null==a?void 0:a.enabled),conditionsMet:()=>!d()&&!c()&&!u()}].filter(e=>e.isEligible());return 0!==e.length&&e.every(e=>e.conditionsMet())},[t,n,a,o,r,d,c,u,m])};var eP=n(36400);let eT=()=>{let[e,t]=(0,i.useState)(!1),n=(0,es.zf)(),{user:a,trackAction:o}=(0,I.D)();return{isLoading:e,handle:async e=>{let{openErrorModal:i,invoiceRemoteId:r}=e;try{if(t(!0),!(null==a?void 0:a.account.objectId)||!r)return i(!0);let e=await (0,eP.b)(a.account.objectId,r);if(!e.isEligible||!e.checkoutUrl)return i(!0);o("payments-cta",{...n,source:er._.invoicePreview,component:eo.Z.onlinePaymentLink});let s=new URL(e.checkoutUrl);s.searchParams.set("is_owner","true"),window.open(s,"_blank")}catch(e){return i(!0)}finally{t(!1)}}}};var eN=n(99170);let ej=e=>{let{onClick:t,disabled:n,loading:i,title:o,label:r}=e,s=ed()([{"cursor-not-allowed opacity-60":n},{"cursor-wait opacity-80":i},"btn-get-public-link","flex items-center justify-center","mt-2 btn btn-print btn-block border w-full px-4 py-2 rounded border border-gray-500 bg-gradient-to-r from-gray-600 to-gray-800 hover:from-gray-600 text-gray-100 hover:to-gray-700 text-sm font-medium"]),l=ed()(["w-10 h-10",{hidden:!i},{visible:i}]);return(0,a.jsxs)("button",{type:"button",disabled:n||i,className:s,title:o,onClick:t,"data-sentry-component":"ViewOnlinePaymentButton","data-sentry-source-file":"view-online-payment-button.tsx",children:[(0,a.jsx)(eN.T,{color:"white",className:l,"data-sentry-element":"LoadingSpinnerIcon","data-sentry-source-file":"view-online-payment-button.tsx"}),(0,a.jsx)("span",{children:r})]})},eE=e=>{let{isModalOpen:t,onCloseModal:n,dictionary:i}=e,o=()=>{n()};return(0,a.jsxs)(ep.u_,{open:t,onClose:o,"data-sentry-element":"Modal","data-sentry-component":"ViewOnlinePaymentErrorModal","data-sentry-source-file":"view-online-payment-error-modal.tsx",children:[(0,a.jsx)(ey.L,{onClickXIcon:o,headerMessage:i.viewOnlineErrorModalTitle,"data-sentry-element":"TopContainer","data-sentry-source-file":"view-online-payment-error-modal.tsx"}),(0,a.jsx)("main",{className:"w-full font-inter leading-7 py-2 px-7 text-[#454545] [@media(max-width:400px)]:overflow-y-scroll [@media(max-width:400px)]:h-48",children:(0,a.jsx)("p",{children:i.viewOnlineErrorModalText})}),(0,a.jsx)(eg.qO,{handleClick:o,buttonMessage:i.viewOnlineErrorModalCTA,"data-sentry-element":"ButtonContainer","data-sentry-source-file":"view-online-payment-error-modal.tsx"})]})},eC=e=>{let[t,n]=(0,i.useState)(!1),{handle:o,isLoading:r}=eT();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eE,{dictionary:e.dictionary,isModalOpen:t,onCloseModal:()=>{n(!1)},"data-sentry-element":"ViewOnlinePaymentErrorModal","data-sentry-source-file":"view-online-payment.tsx"}),(0,a.jsx)(ej,{title:e.dictionary.viewOnlineButtonTitle,label:e.dictionary.viewOnlineButtonLabel,loading:r,onClick:()=>{t||o({openErrorModal:n,invoiceRemoteId:e.document.remoteId})},...e,"data-sentry-element":"ViewOnlinePaymentButton","data-sentry-source-file":"view-online-payment.tsx"})]})};var eI=n(22707);let eS=e=>{let{document:t}=e,{payments_enabled:n}=(0,S.V)(["payments_enabled"]),{isPaypalAccepting:a,isPaypalClosed:o}=(0,eb.G)(),{isStripeSubsetOfAccepting:r,isStripeRejected:s,isStripeRestricted:d}=(0,ex.M)(),{subscriptionStatus:c}=(0,I.D)();return(0,i.useMemo)(()=>!(!(null==n?void 0:n.enabled)||!(null==c?void 0:c.active)||!t||!(0,l.isInvoice)(t)||(0,eI.O)(t))&&[{isEligible:()=>a()||o()},{isEligible:()=>r()||s()||d()}].some(e=>e.isEligible()),[t,n,a,o,r,s,d])},eD=e=>{let t=(0,ei.P)(),n=ew({document:e.document}),i=eS({document:e.document});return t?n?(0,a.jsx)(ef,{...e}):i?(0,a.jsx)(eC,{...e}):null:null};var eM=n(18528),eA=n(11463),eL=n(2456);let eO=e=>{let{dictionary:t,document:n}=e,{user:i,subscriptionStatus:o,trackAction:r}=(0,I.D)(),l=(0,X.I)({exportType:"print",user:i,subscriptionStatus:o}),d=async()=>{if(r("invoice-link",{"doc-type":n.docType,invoiceId:n.objectId,docCount:null==o?void 0:o.allDocsCount,platform:s.t4.WEB}),(0,$.T)(i))return(0,eL.Hk)((0,M.TI)()+"/signup");if(!l)return(0,eL.Hk)((0,M.TI)()+"/subscription");let e=window.open("/v/".concat(n.objectId),"_blank");e&&e.focus()},c=async()=>{if(r("invoice-print",{"doc-type":n.docType,invoiceId:n.objectId,docCount:null==o?void 0:o.allDocsCount}),(0,$.T)(i))return(0,eL.Hk)((0,M.TI)()+"/signup");if(!l)return(0,eL.Hk)((0,M.TI)()+"/subscription");let e=new URLSearchParams;e.append("viewType","mobile"),e.append("timeZone",Intl.DateTimeFormat().resolvedOptions().timeZone);let t="/v/".concat(n.objectId,"?").concat(e.toString());window.printUrl(t)};return(0,a.jsxs)("div",{className:"mt-4","data-sentry-component":"ShareButtons","data-sentry-source-file":"share-buttons-migrated.tsx",children:[(0,a.jsx)("div",{className:"uppercase text-gray-800 text-xs font-medium border-b border-gray-800 pb-1 mb-2",children:"Options"}),(0,a.jsx)("div",{children:(0,a.jsx)(eA.V,{disabled:!n.objectId,dictionary:t,document:n,onClick:d,appUrl:(0,M.TI)(),"data-sentry-element":"InvoicePublicLink","data-sentry-source-file":"share-buttons-migrated.tsx"})}),(0,a.jsx)(eD,{disabled:!n.objectId,dictionary:{...t.onlinePaymentPreviewDictionary,...t.viewOnlinePaymentButtonDictionary},document:n,"data-sentry-element":"CheckoutPreview","data-sentry-source-file":"share-buttons-migrated.tsx"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(eM.d,{dictionary:t,document:n,disabled:!n.objectId,pdfHost:(0,M.Z$)(),onClick:c,"data-sentry-element":"InvoicePrint","data-sentry-source-file":"share-buttons-migrated.tsx"})})]})};var ek=n(6168);function eR(e){let{toggleSwitch:t,handleToggle:n}=e,{fta:o,f:r,ft:s}=(0,u.Y)(),l=o({id:"settings.list.customerFinancing"}),d=s({id:"settings.list.customerFinancing.showFinancingOptions"}),c=o({id:"learnMore"}),m=r({id:"poweredBy"}),p=s({id:"settings.list.customerFinancing.offerFreeFinancingToYourCustomers"});return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(F.i,{"data-sentry-element":"SettingHeader","data-sentry-source-file":"show-customer-financing-options.tsx",children:l}),(0,a.jsxs)("div",{className:"flex flex-row items-center mt-3 flex-wrap",children:[(0,a.jsx)("div",{className:"mr-3 text-xs flex h-full item-center justify-center",children:(0,a.jsx)("p",{children:d})}),(0,a.jsxs)("label",{className:"switch mt-1",children:[(0,a.jsx)("input",{"data-testid":"financing-options-toggle-switch",type:"checkbox",className:"switch-input",checked:t,onChange:e=>n(e.target.checked)}),(0,a.jsx)("span",{className:"slider"})]})]}),(0,a.jsxs)("p",{className:"text-xs font-light mt-3",children:[p," ",(0,a.jsx)("a",{className:"font-semibold text-blue-600",href:"https://help.invoicesimple.com/en/articles/10595059-how-do-i-offer-my-clients-payment-financing",children:c})]}),(0,a.jsxs)("div",{className:"flex mt-3 space-x-1",children:[(0,a.jsx)("p",{className:"text-xs font-light",children:m}),(0,a.jsx)(eu.default,{src:ek.Z,alt:"acorn-logo",width:52,height:16,"data-sentry-element":"Image","data-sentry-source-file":"show-customer-financing-options.tsx"})]})]})}let eF=e=>{let{document:t,paymentSuppressedEnabledOnInvoice:n,stripePaymentSuppressedEnabledOnInvoice:a,globalPaypalEnabled:i,globalStripeEnabled:o}=e,{acorn_financing_invoice_web:r}=(0,S.V)(["acorn_financing_invoice_web"]);return!!(0,l.isInvoice)(t)&&!!r.enabled&&(!i&&!o||!!n&&!!a||!!i&&!o&&!!n||!!o&&!i&&!!a)},e_=e=>{let{document:t,onUpdateDocument:n}=e,{acorn_financing_web:i}=(0,S.V)(["acorn_financing_web"]),{isPaypalAccepting:o,isPaypalEnabled:r}=(0,eb.G)(),{isStripeAcceptingAndEnabled:s}=(0,ex.M)(),d=o()&&r(),c=s(),u=!!(0,l.isInvoice)(t)&&!!t.setting.paymentSuppressed,m=!!(0,l.isInvoice)(t)&&!!t.setting.stripePaymentSuppressed,p=eF({document:t,paymentSuppressedEnabledOnInvoice:u,stripePaymentSuppressedEnabledOnInvoice:m,globalPaypalEnabled:d,globalStripeEnabled:c});return i.enabled&&((0,l.isEstimate)(t)||p&&(0,l.isInvoice)(t))?(0,a.jsx)(eB,{document:t,onUpdateDocument:n,"data-sentry-element":"ShowCustomerFinancingOptionsSection","data-sentry-component":"ShowCustomerFinancingOptions","data-sentry-source-file":"show-customer-financing-options.tsx"}):null},eB=e=>{var t;let{document:n,onUpdateDocument:i}=e,o=(null===(t=n.setting)||void 0===t?void 0:t.acornFinancing)||!1,r=n.docType===s.ow.DOCTYPE_INVOICE,l=(0,es.zf)(),{trackAction:d}=(0,I.D)();return(0,a.jsx)("div",{"data-testid":"show-customer-financing-options","data-sentry-component":"ShowCustomerFinancingOptionsSection","data-sentry-source-file":"show-customer-financing-options.tsx",children:(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(eR,{toggleSwitch:o,handleToggle:e=>{i(t=>({...t,setting:{...t.setting,acornFinancing:e}})),d("payments-cta",{...l,action:r?"toggle-financing-invoice":"toggle-financing-estimate",ctaValue:e})},"data-sentry-element":"ShowFinancingOptionsComponent","data-sentry-source-file":"show-customer-financing-options.tsx"})})})};var eV=n(56621),eU=n(20653);let ez=["#FFFFFF","#333333","#555555","#455A64","#C62828","#D81B60","#7B1FA2","#4527A0","#283593","#1565C0","#0277BD","#00695C","#2E7D32","#558B2F"],eY=ez[0];function eH(e){var t;let{document:n,defaultSettings:p,onUpdateDocument:y,currency:v,updateCurrency:g,currencyOptions:h,dictionary:f,shouldShowPreviewEmail:b,shouldShowShareButtons:x,locale:w,country:P}=e,L=(0,m._)(),{payments:O}=(0,z.I)(),{setAlert:k}=(0,A.VY)(),{updateDefaultColor:R}=(0,eU.$)(),{updateLabel:F,updateRate:G,updateTaxInclusive:W,updateType:K}=(0,eV._T)(),{discountType:X=s.sC.DISCOUNT_NONE,discountRate:$,discountAmount:Q,taxType:ee,taxLabel:et="",taxRate:en,taxInclusive:ei}=n.setting,{primaryCompanyEmail:eo,setPrimaryCompanyEmail:er}=(0,j.K)(),[es,el]=(0,i.useState)(!1),[ed,ec]=(0,i.useState)(!1),{client_signatures:eu}=(0,S.V)(["client_signatures"]),em=(0,M.TI)(),{ft:ep}=(0,u.Y)(),{account:ey,user:ev,isFirstTimer:eg,trackAction:eh}=(0,I.D)(),{data:ef,isLoading:eb}=(0,o.useQuery)((0,C.C)()),ex=n.docType===s.ow.DOCTYPE_ESTIMATE&&!!n.setting.estimateSignedAt,ew=async()=>{let e=!!(null==ev?void 0:ev.activeSubscriptionTier),t=!((null==ev?void 0:ev.username)&&(null==ev?void 0:ev.username.match(/new_/))),a=t?d._K.FREE_EXPORT_LIMIT_ANONYMOUS:d._K.FREE_EXPORT_LIMIT_LOGGED_IN,i=e||!!((null==ef?void 0:ef.sentDocumentEvents)&&ef.sentDocumentEvents.length<a);if(t){eh("instant-form-preview-email"),L.push("/signup?ref=".concat(D.a$.SEND_DOCUMENT));return}if(!i){eh("instant-form-preview-email"),L.push("/subscription?ref=".concat(D.a$.DOCUMENT_ACTIONS));return}try{var o;el(!0);let e=n.objectId?n.objectId:null===(o=await (0,U.a)({document:n}))||void 0===o?void 0:o.newObjectId;await T({accountId:null==ey?void 0:ey.objectId,toEmail:eo||n.company.email,fromEmail:eo||n.company.email,msgBody:"",color:n.setting.color||eY,invoiceId:e,invoiceRemoteId:n.remoteId,invoiceNo:n.invoiceNo,invoiceUrl:"".concat(em,"/v/").concat(n.objectId),no_branding:!1,sendToSelf:!0,trackEvent:eh}),ec(!0),n.objectId||y(t=>({...t,objectId:e}))}catch(e){k({title:ep({id:"app.alert.connectivityErrors.title"}),body:ep({id:"app.alert.connectivityErrors.body"}),type:"error",isClosable:!1}),ec(!1)}finally{el(!1)}},eP=e=>{y(t=>((0,l.isInvoice)(t),{...t,setting:{...t.setting,color:e}})),R(e)},eT=(null==n?void 0:n.docType)===s.ow.DOCTYPE_INVOICE&&!!n.setting.dueDate&&(0,r.$k)({payments:null==n?void 0:n.payments,items:null==n?void 0:n.items,setting:null==n?void 0:n.setting,client:{shipAmount:null==n?void 0:null===(t=n.client)||void 0===t?void 0:t.shipAmount}},O)>0;(0,i.useEffect)(()=>{var e;er(null!==(e=n.company.email)&&void 0!==e?e:"")},[]);let eN=l.ValidEmail.is(eo),ej=es||eb;return(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:mt-10","data-sentry-component":"SettingsSidebarMigrated","data-sentry-source-file":"settings-sidebar-migrated.tsx",children:[eT&&(0,a.jsx)(J,{invoice:n}),b&&!eg&&(0,a.jsxs)("div",{className:"block",children:[ex&&(0,a.jsx)(N.X,{document:n,defaultSettings:p,locale:w}),(0,a.jsx)(Y.x,{value:n.company.email,inputDisabled:es,buttonDisabled:!eN||ej,showSuccess:ed,isLoading:es,dictionary:{previewEmailHeader:ep({id:"sendToSelfEmail.title"}),buttonText:ep({id:"sendToSelfEmail.button.label"}),placeholder:"name@business.com",successMessage:ep({id:"sendToSelfEmail.alert.success"},{invoiceCompanyEmail:eo||n.company.email}),buttonTextLoading:ep({id:"sendToSelfEmail.button.pending.label"})},onChange:e=>{er(null!=e?e:"")},onValidEmail:e=>{y(t=>({...t,company:{...t.company,email:e}}))},onClick:ew})]}),n.docType===s.ow.DOCTYPE_ESTIMATE&&eu.enabled&&(0,a.jsx)("div",{children:(0,a.jsx)(ea,{document:n,onUpdateDocument:y})}),n.docType===s.ow.DOCTYPE_INVOICE&&(0,a.jsx)(E.o,{document:n,updateDocument:y,currencyCode:v.value,updateCurrency:g,country:P}),(0,a.jsx)(e_,{document:n,onUpdateDocument:y,"data-sentry-element":"ShowCustomerFinancingOptions","data-sentry-source-file":"settings-sidebar-migrated.tsx"}),(0,a.jsxs)("div",{className:"inline-block",children:[(0,a.jsx)(B.Q,{selectedColor:n.setting.color||ez[0],colorOptions:ez,dictionary:{colorSelectHeader:ep({id:eg?"invoiceSettings.color":"invoiceSettings.template"})},onChange:eP,"data-sentry-element":"ColorSelect","data-sentry-source-file":"settings-sidebar-migrated.tsx"}),!eg&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{clear:"both"}}),(0,a.jsx)(Z.Z,{onChange:eP,isLoading:es,value:n.setting.color,colorOptions:ez}),(0,a.jsx)("div",{style:{clear:"both"}}),(0,a.jsx)(c.z,{className:"btn btn-print btn-block mt-3 w-full",onClick:()=>{let e=new URLSearchParams;e.set("invoiceId",n.objectId||"new-document"),e.set("docType",n.docType.toString()),L.push("".concat(em,"/templates?").concat(e.toString()))},children:(0,a.jsx)("span",{className:"capitalize",children:ep({id:"settings.list.customize"})})})]})]}),(0,a.jsx)(_,{dictionary:{automatedReviewsHeader:ep({id:"automatedReviews.header"}),description:ep({id:"automatedReviews.description"}),getStartedButton:ep({id:"automatedReviews.getStartedButton"}),learnAboutReviewsButton:ep({id:"automatedReviews.learnAboutReviewsButton"})},"data-sentry-element":"AutomatedReviews","data-sentry-source-file":"settings-sidebar-migrated.tsx"}),(0,a.jsx)("div",{className:"block",children:(0,a.jsx)(H.a,{taxType:ee,taxLabelValue:et,taxRate:en,taxInclusive:ei,dictionary:f,onTaxTypeChange:e=>{y(t=>((0,l.isInvoice)(t),{...t,setting:{...t.setting,taxType:e}})),K(e)},onTaxLabelChange:e=>{y(t=>((0,l.isInvoice)(t),{...t,setting:{...t.setting,taxLabel:e}})),F(e)},onTaxRateChange:e=>{let t=null===e?0:e;y(e=>((0,l.isInvoice)(e),{...e,setting:{...e.setting,taxRate:t}})),G(t)},onTaxInclusiveChange:e=>{y(t=>((0,l.isInvoice)(t),{...t,setting:{...t.setting,taxInclusive:e}})),W(e)},"data-sentry-element":"TaxSetting","data-sentry-source-file":"settings-sidebar-migrated.tsx"})}),(0,a.jsx)("div",{className:"block",children:(0,a.jsx)(V.e,{discountType:X,discountRate:$,discountAmount:Q,dictionary:f,onDiscountTypeChange:e=>{y(t=>((0,l.isInvoice)(t),{...t,setting:{...t.setting,discountType:e}}))},onDiscountRateChange:e=>{y(t=>((0,l.isInvoice)(t),{...t,setting:{...t.setting,discountRate:null===e?void 0:e}}))},onDiscountAmountChange:e=>{y(t=>((0,l.isInvoice)(t),{...t,setting:{...t.setting,discountAmount:null===e?0:e}}))},"data-sentry-element":"DiscountSetting","data-sentry-source-file":"settings-sidebar-migrated.tsx"})}),(0,a.jsx)("div",{children:(0,a.jsx)(q.v,{currencyOptions:h,currency:v,updateCurrency:g,dictionary:f,"data-sentry-element":"CurrencySelector","data-sentry-source-file":"settings-sidebar-migrated.tsx"})}),x&&!eg&&(0,a.jsx)("div",{children:(0,a.jsx)(eO,{document:n,dictionary:f})})]})}},5180:function(){},62215:function(){},96308:function(){},56335:function(){}}]);