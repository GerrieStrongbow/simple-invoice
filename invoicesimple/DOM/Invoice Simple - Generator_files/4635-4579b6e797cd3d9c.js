!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="cca009fc-d6a9-49c3-88b5-b9c066c90997",e._sentryDebugIdIdentifier="sentry-dbid-cca009fc-d6a9-49c3-88b5-b9c066c90997")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4635],{56303:function(e,t,n){n.d(t,{L:function(){return r}});let r="Only 5 recipients per email is allowed"},69146:function(e,t,n){n.d(t,{Ut:function(){return s},g1:function(){return d},u3:function(){return l}});var r=n(64142),a=n(26935),i=n(99547),o=n(65833);let s=(e,t,n)=>e&&t?n===r.ow.DOCTYPE_ESTIMATE?l(e,t)?"/signup?ref=".concat(o.a$.CREATE_DOCUMENT):void 0:c(e,t)?"/signup?ref=".concat(o.a$.CREATE_DOCUMENT):d(e,t)?t.hasPaidSub?"/subscription":"/subscription?ref=".concat(o.a$.CREATE_DOCUMENT):void 0:"/subscription",l=(e,t)=>!!(0,i.T)(e)&&t.allDocsCount>=a.Tv.FREE_LIMIT_LOGGED_IN,c=(e,t)=>!!(0,i.T)(e)&&t.docsThresholdCount>=a.Tv.FREE_LIMIT_ANONYMOUS,d=(e,t)=>!!(!(0,i.T)(e)&&!t.hasFreeSub&&!t.hasPaidSub&&t.docsThresholdCount>=a.Tv.FREE_LIMIT_LOGGED_IN||u(t)&&t.docsCountLastMonth>=a.Tv.TIER_1_LIMIT||m(t)&&t.docsCountLastMonth>=a.Tv.TIER_2_LIMIT),u=e=>e.subscriptionTier===r.QV.ESSENTIALS||(null==e?void 0:e.legacyUsageGroup)==="legacy-invoice-limit-3",m=e=>e.subscriptionTier===r.QV.PLUS||(null==e?void 0:e.legacyUsageGroup)==="legacy-invoice-limit-10"},17914:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(19395),a=n(83171),i=n(65556),o=n(30393);let s=e=>{let{pulsem_reviews:t}=(0,o.V)(["pulsem_reviews"]);return(0,r.useQuery)({queryKey:a.m7.status,queryFn:()=>(0,i.f)(),enabled:null==t?void 0:t.enabled,...e})}},2246:function(e,t,n){n.d(t,{uV:function(){return r.uV},z_:function(){return r.z_}});var r=n(93426)},93426:function(e,t,n){n.d(t,{VT:function(){return f},X$:function(){return u},u4:function(){return m},uV:function(){return l},z_:function(){return c}});var r=n(13967),a=n(40610),i=n(18962),o=n(69379),s=n(81387);let l=e=>e.active&&"com.invoicesimple.freetrial.14day"===e.orderSku&&!(null==e?void 0:e.hadPaidSubsInThePast),c=e=>!!e&&l(e),d=e=>(null==e?void 0:e.active)?(0,r.Z)(e.activeUntil,1).getTime():0,u=e=>{let t=d(e),n=Date.now(),r=(0,a.Z)(t,n);return r<=0?0:r},m=e=>({featuresTotal:Object.values(e).length,featuresCompleted:Object.values(e).filter(e=>"completed"===e).length}),f=()=>{var e;let t=new Date(null!==(e=(0,s.$)().getItem(o.F.TRIAL_BANNER_LAST_SHOWN))&&void 0!==e?e:0),n=new Date;return!(t&&(0,i.Z)(t,n))&&((0,s.$)().setItem(o.F.TRIAL_BANNER_LAST_SHOWN,n.toString()),!0)}},77774:function(e,t,n){n.d(t,{NK:function(){return a.N},Y0:function(){return r.AlertBanner}});var r=n(47396);n(61603),n(16243);var a=n(96755)},96755:function(e,t,n){var r,a;n.d(t,{N:function(){return r}}),(a=r||(r={})).Banner="banner",a.Modal="modal"},51509:function(e,t,n){n.d(t,{m:function(){return a}});var r=n(27248);let a=(e,t)=>({docType:t({id:(0,r.qm)(e)}),pluralDocType:t({id:(0,r.si)(e)})})},27248:function(e,t,n){n.d(t,{qm:function(){return a},si:function(){return i}}),n(92838);var r=n(64142);let a=e=>{switch(e){case r.ow.DOCTYPE_STATEMENT:return"app.receipt";case r.ow.DOCTYPE_ESTIMATE:return"app.estimate";default:return"app.invoice"}},i=e=>{switch(e){case r.ow.DOCTYPE_STATEMENT:return"app.receipts";case r.ow.DOCTYPE_ESTIMATE:return"app.estimates";default:return"app.invoices"}}},36543:function(e,t,n){n.d(t,{F:function(){return r}});let r="/api/v3/app"},30521:function(e,t,n){n.d(t,{I:function(){return i}});var r=n(26935),a=n(99547);let i=e=>{let{exportType:t,user:n,subscriptionStatus:i,sentDocumentEvents:o}=e;if(!n||!i)return!1;if(i.active)return!0;let s=(0,a.T)(n),l=s?r._K.FREE_EXPORT_LIMIT_ANONYMOUS:r._K.FREE_EXPORT_LIMIT_LOGGED_IN;switch(t){case"email":return!!(o&&o.length<l);case"public-link":case"print":return!s&&i.docsThresholdCount<r.Tv.FREE_LIMIT_LOGGED_IN;default:return!1}}},65556:function(e,t,n){n.d(t,{f:function(){return s}});var r=n(77740),a=n(64144),i=n(80331),o=n(36543);async function s(){try{let e=await (0,i.A)();return await (0,a.KF)(o.F+"/pulsem/account",{method:"GET",headers:{...e,"Content-Type":"application/json"}})}catch(t){if(t instanceof r.RequestFailedError){var e;switch(null===(e=t.logData)||void 0===e?void 0:e.statusCode){case 403:return null;case 404:return{onboarded:!1}}}throw t}}},29530:function(e,t,n){n.d(t,{T:function(){return i}});var r=n(61449),a=n(17892);async function i(){let e=await (0,a.Y)(),t=new URLSearchParams({where:JSON.stringify({deleted:{$eq:!1}})});return(await (0,r.W)("/classes/Setting?".concat(t),{headers:{"X-Parse-Session-Token":e},cache:"no-cache"})).results}},76242:function(e,t,n){n.d(t,{V:function(){return r}});let r=(0,n(4878).Ue)(e=>({alert:null,showAlert:t=>e(()=>({alert:t})),hideAlert:()=>e(()=>({alert:null}))}))},61692:function(e,t,n){n.d(t,{N:function(){return o},g:function(){return s}});var r=n(26935),a=n(9411),i=n(2246);let o=e=>{let{user:t,feature:n,numUses:i,additionalConditions:o}=e;return t?(0,r.LM)({feature:n,user:t,numUses:i,additionalConditions:o}):(a.D.warning("User not found when checking feature access",{feature:n}),!1)},s=e=>{let{user:t,feature:n,subscriptionStatus:r}=e;if(!t)return a.D.warning("User not found when checking feature access",{feature:n}),!1;let s=!!r&&(0,i.uV)(r);return o({user:t,feature:n})||s}},28419:function(e,t,n){n.d(t,{f:function(){return a}});var r=n(76010);let a=e=>{let t=(0,r.OT)(e.setting.dueDate?(0,r.p6)(e.setting.dueDate):new Date);if(1===t)return{id:"invoiceSettings.share.reminder.dueTomorrow"};switch(Math.sign(t)){case -1:return{id:"invoiceSettings.share.reminder.overdue"};case 1:return{id:"invoiceSettings.share.reminder.dueInDays",values:{days:t}};default:return{id:"invoiceSettings.share.reminder.dueToday"}}}},36400:function(e,t,n){n.d(t,{b:function(){return r}}),n(8956);var r=(0,n(3349).$)("742cde63318bf53deaf5ca86d64ce55ef7846fac")},76010:function(e,t,n){n.d(t,{OT:function(){return c},p6:function(){return l},xu:function(){return d}});var r=n(26587),a=n(48139),i=n(60215),o=n(7363),s=n(15695);let l=e=>(0,r.Z)(e,"yyyy-MM-dd",new Date),c=e=>(0,a.Z)((0,i.Z)(e),Date.now()),d=e=>{let t=(0,s.Z)(e,"UTC");return"".concat((0,o.Z)(t,"PP")," ").concat((0,o.Z)(t,"HH:mm")," UTC")}},11835:function(e,t,n){n.d(t,{v:function(){return a}});let r=/.+@.+\..+/,a=e=>"string"==typeof e&&r.test(e.trim())},36521:function(e,t,n){n.d(t,{i:function(){return c}});var r=n(37821);n(58078);var a=n(19395),i=n(64142),o=n(42236),s=n(77114);let l=e=>{var t;let{value:n,currencyCode:l,textStyle:c}=e,{locale:d}=(0,o.Y)(),{data:u}=(0,a.useQuery)((0,s.F)({})),m=null==u?void 0:null===(t=u.settings.find(e=>{if(e.remoteId===i.Vd.LocaleCurrencyCode)return e}))||void 0===t?void 0:t.valStr;return(0,r.jsx)("span",{className:"localized-number",style:c,"data-sentry-component":"LocalizedCurrency","data-sentry-source-file":"localized-currency.tsx",children:(0,i.n4)({number:n,currencyCode:l||m,localeCode:d})})},c=e=>{let t=e.className?"currency ".concat(e.className):"currency";return(0,r.jsxs)("span",{className:t,style:e.containerStyle,"data-sentry-component":"CurrencyDisplay","data-sentry-source-file":"currency-display.tsx",children:[!!e.prefix&&(0,r.jsx)("span",{className:"currency-prefix",style:e.textStyle,children:e.prefix}),(0,r.jsx)(l,{value:e.value,currencyCode:e.currencyCode,textStyle:e.textStyle,"data-sentry-element":"LocalizedCurrency","data-sentry-source-file":"currency-display.tsx"}),!!e.suffix&&(0,r.jsx)("span",{className:"currency-suffix",style:e.textStyle,children:e.suffix})]})}},55575:function(e,t,n){n.d(t,{i:function(){return Z},W:function(){return W}});var r=n(37821),a=n(58078),i=n(81071),o=n(9),s=n(52730),l=n(13590),c=n(86129),d=n(70517),u=n(77774),m=n(9418),f=n(73378),p=n(66962),x=n(9777),h=n(94747),y=n(36723),v=n(42236),b=n(27248),g=n(64144),w=n(9411);let j=async()=>{Promise.all([n.e(5609),n.e(8843)]).then(n.bind(n,8843)).then(e=>{e.requestPushPermission((e,t,n)=>{},e=>{})})},C=async()=>Promise.all([n.e(5609),n.e(8843)]).then(n.bind(n,8843)).then(e=>!!e.isPushSupported());var E=n(81387),N=n(76242),T=n(28419),k=n(18294),A=n(9845),I=n(12272),F=n(30393),M=n(11835);n(8956);var _=(0,n(3349).$)("2cc026d1825d103a6fb5ebd97a9a0c1863ba3c35"),L=n(86586),S=n(56303),R=n(92466),D=n(87698);let O=(0,R.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow",secondary:"border-transparent bg-[#E9E9EB] text-[#212121]",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),B=a.forwardRef((e,t)=>{let{className:n,variant:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,D.cn)(O({variant:a}),n),...i})});B.displayName="Badge";let P=e=>{let{className:t,value:n,onChange:i,...o}=e,[s,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(null),u=(0,a.useRef)(null);(0,a.useEffect)(()=>{u.current&&u.current.focus()},[]),(0,a.useEffect)(()=>{s.includes(",")&&(i(Array.from(new Set([...n,...s.split(",").map(e=>e.trim())]))),l(""))},[s,n]);let m=()=>{s&&(i(Array.from(new Set([...n,s.trim().replace(/\s+/g,"")]))),l(""))},f=e=>{i(Array.from(new Set([...n,...e])))},p=e=>{d(e)},x=async e=>{if((e.ctrlKey||e.metaKey)&&"v"===e.key){e.preventDefault();try{let e=await navigator.clipboard.readText(),t=e.match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}\b/g);if(t){f(t);return}l(e)}catch(e){console.error("Failed to read clipboard contents: ",e)}}("Enter"===e.key||","===e.key||" "===e.key)&&(e.preventDefault(),(0,M.v)(s)&&m()),e.key&&d(null)};return(0,r.jsxs)("div",{className:(0,D.cn)("flex w-full flex-wrap rounded-md border bg-white text-sm ring-offset-white disabled:cursor-not-allowed disabled:opacity-50","focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2 items-center flex my-1 py-1 focus:outline-none",t),onBlur:()=>{(0,M.v)(s)&&m(),s&&!(0,M.v)(s)&&m(),d(null)},onKeyDown:e=>{if("Backspace"===e.key&&c&&(e.preventDefault(),i(n.filter(e=>e!==c)),d(null),u)){var t;null===(t=u.current)||void 0===t||t.focus()}"Backspace"===e.key&&0===s.length&&n.length>0&&!c&&(e.preventDefault(),d(n[n.length-1]))},tabIndex:0,"data-sentry-component":"EmailInputTags","data-sentry-source-file":"email-tag-input.tsx",children:[n.map(e=>(0,r.jsx)(B,{variant:"secondary",tabIndex:0,onFocus:()=>d(e),style:{maxWidth:"calc(100% - 20px)"},className:(0,D.cn)("flex ml-2 h-[25px] rounded-md cursor-pointer my-1 max-w-full trucate",(0,M.v)(e)?"":"border-red-500 bg-red-50 text-red-700",c===e?"border-blue-500 bg-blue-50 text-blue-700":""),onClick:()=>p(e),children:(0,r.jsx)("p",{className:"truncate",children:e})},e)),(0,r.jsx)("input",{className:(0,D.cn)("text-[12px] font-normal rounded-md","flex-1 placeholder:text-neutral-500 outline-none border-none","focus:ring-0 focus-within:ring-0 focus-within:border-0"),type:"email",id:"to-email",name:"to-email",autoComplete:"email",value:s,onChange:e=>l(e.target.value),onKeyDown:x,...o,ref:u})]})};P.displayName="EmailInputTags";var U=n(45551);let W=e=>{let{isOpen:t,closeModal:n}=(0,U.K)(),a=()=>{n()};return(0,r.jsx)(x.u_,{open:t,onClose:a,className:"h-[70vh] xs:h-auto sm:max-w-lg p-5 bg-[#F9FAFB]","data-sentry-element":"Modal","data-sentry-component":"ModalEmailDocumentFormInvoiceEditor","data-sentry-source-file":"modal-email-document-form.tsx",children:(0,r.jsx)(V,{...e,onClose:a,"data-sentry-element":"EmailDocumentForm","data-sentry-source-file":"modal-email-document-form.tsx"})})},Z=e=>(0,r.jsx)(x.u_,{open:e.isOpen,onClose:e.closeDialog,className:"h-[70vh] xs:h-auto sm:max-w-lg p-5 bg-[#F9FAFB]","data-sentry-element":"Modal","data-sentry-component":"ModalEmailDocumentFormDocList","data-sentry-source-file":"modal-email-document-form.tsx",children:(0,r.jsx)(V,{...e,onClose:e.closeDialog,"data-sentry-element":"EmailDocumentForm","data-sentry-source-file":"modal-email-document-form.tsx"})}),V=e=>{var t,n,x,R,D,O;let{isReminder:B,primaryClientEmail:W,setPrimaryClientEmail:Z,primaryCompanyEmail:V,emailMessage:z,setEmailMessage:G}=(0,U.K)(),[Y,K]=(0,a.useState)(!1),{fta:$,ft:q,f:H}=(0,v.Y)(),Q=(0,i.useParams)(),{account:X,user:J}=(0,A.D)(),{showAlert:ee}=(0,N.V)(),et=H({id:(0,b.qm)(e.document.docType)}),en=(0,T.f)(e.document),er=(0,c.o6)(e.document),[ea,ei]=(0,a.useState)([]),eo=(0,h.R9)(m.y),es=null!==(R=null===(t=e.document.client)||void 0===t?void 0:t.email)&&void 0!==R?R:"",el=null!==(D=null===(n=e.document.client)||void 0===n?void 0:n.secondaryEmail)&&void 0!==D?D:"";(0,a.useEffect)(()=>{if(W&&(0,M.v)(W)){ei([W,el].filter(M.v));return}if(es&&(0,M.v)(es)){ei([es,el].filter(M.v));return}},[W,es,el]);let ec=z||e.defaultEmailMessage,ed=B?H({id:en.id},en.values):ec,[eu,em]=(0,a.useState)(ed),ef=null!==(O=((0,M.v)(V)?V:null===(x=e.document.company)||void 0===x?void 0:x.email)||(null==J?void 0:J.email))&&void 0!==O?O:"",ep=()=>{K(!1),ee({bannerType:"error",title:H({id:"app.alert.connectivityErrors.title"}),body:H({id:"app.alert.connectivityErrors.body"},{details:""}),isClosable:!0,type:u.NK.Banner})},ex=ea.length&&ea.every(e=>(0,M.v)(e))&&(0,M.v)(ef)&&!Y,eh=(null==Q?void 0:Q.documentId)||e.document.objectId,{pulsem_reviews:ey}=(0,F.V)(["pulsem_reviews"]),{mutate:ev}=(0,o.useMutation)({mutationFn:async e=>{let t=await _(e);return ey.enabled&&await (0,L.r)(eo),t},onError:ep,onSuccess:eb});async function eb(t){try{if(Z(""),t.errorMessage){if(e.onClose(),ep(),t.errorMessage===g.en){l.Am.error(g.en);return}t.errorMessage===S.L&&l.Am.error(S.L);return}"Notification"in window&&"default"===Notification.permission&&"true"!==(0,E.$)().getItem("deniedPushNotifications")&&await C()&&l.Am.success(H({id:"notification.push.primer.message"}),{action:{label:H({id:"notification.push.primer.cta"}),onClick:()=>{j(),l.Am.dismiss()}},position:"top-center",duration:3e4,closeButton:!0,onDismiss:()=>{(0,E.$)().setItem("deniedPushNotifications","true")}}),l.Am.success((()=>{let t=e.document.invoiceNo,n=(0,d.isInvoice)(e.document)?q({id:"app.invoice"}):q({id:"app.estimate"});return ea.length<=2?q({id:"invoice.email.alert.success.title"},{docType:n,invoiceNo:t,userEmail:1===ea.length?ea[0]:ea.join(", ")}):q({id:"invoice.multiple.emails.alert.success.title"},{docType:n,invoiceNo:t,userEmail:ea[0],number:(ea.length-1).toString()})})())}catch(e){w.D.error(Error("Invoice email mutation onSuccess callback failed",{cause:e}))}finally{e.onClose()}}let{executeRecaptcha:eg}=(0,s.xX)(),ew=(0,a.useCallback)(async()=>{if(eg)try{let e=await eg();eC(e)}catch(e){e instanceof Error&&w.D.error("Failed to execute recaptcha:",e)}},[eg]);(0,a.useEffect)(()=>{ew()},[ew]);let[ej,eC]=(0,a.useState)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{className:"flex flex-row items-center justify-between",children:[(0,r.jsx)("div",{style:{maxWidth:"calc(100% - 20px)"},children:(0,r.jsxs)("h3",{className:"text-md text-black font-inter font-semibold h-[24px] tracking-tight truncate",children:[$({id:"invoice.sendEmail.email"},{docType:et}),!!e.document.title&&" - ".concat(e.document.title)]})}),(0,r.jsx)("button",{onClick:e.onClose,type:"button",className:"p-2 hover:opacity-50 transition absolute top-3 right-2",children:(0,r.jsx)(p.bM,{color:"black",fill:"black","data-sentry-element":"IconClose","data-sentry-source-file":"modal-email-document-form.tsx"})})]}),(0,r.jsxs)("section",{children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"text-[12px] text-[#555555] font-inter font-extralight",htmlFor:"to-email",children:[q({id:"invoice.sendEmail.to"})," ",(0,r.jsxs)("small",{className:"text-muted",children:["(",H({id:"invoice.sendEmail.required"}),")"]})]}),(0,r.jsx)(P,{className:"text-[12px] font-normal border border-brand-gray-2 rounded-md",value:ea,onChange:ei,placeholder:"",autoFocus:!0,"data-sentry-element":"EmailInputTags","data-sentry-source-file":"modal-email-document-form.tsx"})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("label",{className:"font-inter font-extralight text-[12px] text-[#555555]",htmlFor:"email-message-input",children:q({id:"invoice.sendEmail.message"})}),(0,r.jsx)(y.g,{placeholder:q({id:"invoice.sendEmail.messagePlaceholder"}),id:"email-message-input",className:"h-[100px] mt-1 border border-brand-gray-2 text-black email-message-input text-[12px] font-normal form-input block w-full rounded py-2 pl-4 pr-5 leading-5",value:eu,disabled:Y,onChange:e=>{em(e.target.value),G(e.target.value)},"data-sentry-element":"Textarea","data-sentry-source-file":"modal-email-document-form.tsx"})]}),(0,r.jsxs)("div",{className:"flex justify-between w-full pt-3",children:[(0,r.jsx)(f.z,{className:"text-[12px] py-[6px] px-3 rounded-[4px]","data-testid":"send-email-button",onClick:()=>{K(!0);let t=null==X?void 0:X.objectId;(0,k.Z)(t,"Account is required"),(0,k.Z)(eh,"Document ID is required"),ev({accountId:t,toEmail:ea.join(","),fromEmail:ef,docType:e.document.docType,message:eu,color:e.document.setting.color||"",invoiceId:eh,invoiceRemoteId:e.document.remoteId,invoiceNo:e.document.invoiceNo,invoiceUrl:"".concat(I.t.NEXT_PUBLIC_REACT_APP_URL,"/v/").concat(e.document.objectId),captchaToken:ej})},disabled:!ex||Y,variant:"primary",type:"button","data-sentry-element":"Button","data-sentry-source-file":"modal-email-document-form.tsx",children:$(Y?{id:"invoice.sendEmail.sendingState"}:{id:er&&!B?"invoice.sendEmail.emailButtonTitleForDeposit":"invoice.sendEmail.header"},{docType:et})}),(0,r.jsx)(f.z,{type:"button",className:"text-[12px] py-[6px] px-3 rounded-[4px]",onClick:e.onClose,"data-sentry-element":"Button","data-sentry-source-file":"modal-email-document-form.tsx",children:q({id:"invoice.sendEmail.close"})})]})]})]})}},45551:function(e,t,n){n.d(t,{K:function(){return r}});let r=(0,n(4878).Ue)(e=>({isOpen:!1,isReminder:!1,openModal:()=>e({isOpen:!0}),closeModal:()=>e({isOpen:!1,isReminder:!1}),openModalWithReminder:()=>e({isOpen:!0,isReminder:!0}),setPrimaryCompanyEmail:t=>e({primaryCompanyEmail:t}),primaryCompanyEmail:"",setPrimaryClientEmail:t=>e({primaryClientEmail:t}),primaryClientEmail:"",setEmailMessage:t=>e({emailMessage:t}),emailMessage:""}))},77114:function(e,t,n){n.d(t,{F:function(){return i}});var r=n(83171),a=n(29530);function i(e,t){return{queryKey:r.pO.global,queryFn:async()=>({settings:await (0,a.T)()}),...t}}},86586:function(e,t,n){n.d(t,{c:function(){return d},r:function(){return u}});var r=n(43057),a=n(81387),i=n(30161),o=n(36400);n(8956);var s=n(3349);(0,s.$)("fb147ca13c1232359a4eb14d64d6783a8d222c7d");var l=(0,s.$)("93128a9be410a696895cdeda67916083d307a0de"),c=(0,s.$)("d3759523e7618a66f9eb744720d7be88534a227c");let d=async function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{if((0,r.YA)("feature","pulsem"),!e.enabled||!t.objectId)return;if(a){let e=await (0,i.getUser)();if(!(await (0,o.b)(e.account.objectId,t.remoteId)).isEligible)return}if(!await u(n)){var s;c(t.objectId,null===(s=t.client)||void 0===s?void 0:s.email)}}catch(e){(0,r.Tb)(e)}},u=async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];(0,r.YA)("feature","pulsem");let n=(0,a.$)(),i=n.getItem("automatedReviewsOnboardingShown"),o=await l();return t?"true"!==i&&!!o&&(n.setItem("automatedReviewsOnboardingShown","true"),null==e||e(),!0):!!o&&(null==e||e(),!0)}},47396:function(e,t,n){n.r(t),n.d(t,{AlertBanner:function(){return s}});var r=n(37821);n(58078);var a=n(16243),i=n(96755),o=n(76242);let s=()=>{let{alert:e,hideAlert:t}=(0,o.V)();return e&&e.type===i.N.Banner?(0,r.jsx)(a.j,{...e,onClose:t,"data-sentry-element":"Banner","data-sentry-component":"AlertBanner","data-sentry-source-file":"alert-banner.tsx"}):null}},61603:function(e,t,n){n.r(t),n.d(t,{AlertModal:function(){return u}});var r=n(37821),a=n(58078),i=n(66962),o=n(9777),s=n(21576),l=n(42236),c=n(76242),d=n(96755);let u=()=>{let{alert:e,hideAlert:t}=(0,c.V)(),n=(0,a.useRef)(null),{f:u}=(0,l.Y)();if(!e||e.type!==d.N.Modal)return null;let m=(null==e?void 0:e.confirmText)||u({id:"alert.modal.confirm.button"}),f=(null==e?void 0:e.cancelText)||u({id:"alert.modal.cancel.button"});return(0,r.jsx)(o.u_,{ref:n,open:!!e&&e.type===d.N.Modal,onClose:()=>{t();let n=e.onCancel;n&&n()},"data-sentry-element":"Modal","data-sentry-component":"AlertModal","data-sentry-source-file":"alert-modal.tsx",children:(0,r.jsxs)("section",{className:"sm:p-6 px-4 pb-4 pt-5",children:[(0,r.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,r.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,r.jsx)(i.FC,{className:"h-6 w-6 text-red-600","aria-hidden":"true","data-sentry-element":"IconWarning","data-sentry-source-file":"alert-modal.tsx"})}),(0,r.jsxs)("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[(0,r.jsx)(s.V.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900","data-sentry-element":"unknown","data-sentry-source-file":"alert-modal.tsx",children:null==e?void 0:e.title}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:null==e?void 0:e.body})})]})]}),(0,r.jsxs)("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[(0,r.jsx)("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:()=>{t(),e.onConfirm()},children:m}),!(null==e?void 0:e.hideCancelButton)&&(0,r.jsx)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>{t();let n=e.onCancel;n&&n()},ref:n,children:f})]})]})})}},16243:function(e,t,n){n.d(t,{j:function(){return l}});var r=n(37821);n(58078);let a={error:"bg-red-100",success:"bg-green-100",warning:"bg-yellow-100"},i={...a,warning:"bg-amber-50"},o={error:"text-red-800",success:"text-green-800",warning:"text-yellow-800"},s={...o,warning:"text-slate-800"},l=e=>{let{bannerVersion:t="v1",...n}=e,l="v2"===t,c=l?i:a,d=l?s:o,u=c[n.bannerType],m=d[n.bannerType];return(0,r.jsx)("div",{className:"".concat(u," ").concat(l?"rounded-[10px]":""," w-full"),role:"alert","data-sentry-component":"Banner","data-sentry-source-file":"banner.tsx",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto ".concat(l?"py-3 px-5":"px-4 py-2 sm:px-6 lg:px-8"," flex w-full"),children:[(0,r.jsxs)("div",{className:"w-full",children:[n.title&&(0,r.jsx)("strong",{className:"text-sm ".concat(m),children:n.title}),(0,r.jsx)("p",{className:"text-sm ".concat(m),children:n.body})]}),n.isClosable&&(0,r.jsx)("button",{onClick:n.onClose,className:"btn btn-close ".concat(m," px-2"),name:"btn-close",children:(0,r.jsx)("svg",{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:(0,r.jsx)("path",{d:"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"})})})]})})};l.displayName="Banner"},9418:function(e,t,n){n.d(t,{h:function(){return I},y:function(){return A}});var r=n(37821),a=n(58078),i=n(23528),o=n(37903),s={src:"/_next/static/media/automated-reviews.2f5e6098.png",height:600,width:1238,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAY0lEQVR42hXBOwrCQBQF0Nm94C5EdAXiLmwEi1RphBQp8ubd+z4zCSHknJL3i78fHL4EKQt/H3/d8nkt+I8wW/c9gZ4tt40gxqGonXprYewRQkdoNS+1CuFmodDMJsZZJ5V6ANNbWFRn+ZBwAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},l=n(26935),c=n(81071),d=n(82682),u=n(23398),m=n(73378),f=n(42236),p=n(9845),x=n(65833);let h={feature:"pulse-m",modal:"Discoverability"},y=e=>{let{f:t}=(0,f.Y)(),n=(0,c.useRouter)(),[i,o]=(0,a.useState)(!1),s=(0,p.D)(),y=(0,c.usePathname)();return e.isLoading?(0,r.jsx)("div",{className:"flex flex-col gap-3 w-full p-5 bg-[#F3F4F6]",children:(0,r.jsx)("div",{className:"flex justify-center py-2",children:(0,r.jsx)(d.Z,{className:"animate-spin ease-in-out text-blue-600"})})}):(0,r.jsx)("div",{className:"flex flex-col gap-3 w-full p-5 bg-[#F3F4F6]","data-sentry-component":"Footer","data-sentry-source-file":"footer.tsx",children:e.hasAccess?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.z,{className:"text-sm py-2 px-4 rounded-md",onClick:()=>{(0,u.zB)("google",{redirectTo:"/onboarding-automated-reviews?redirect=".concat(y)}),s.trackAction("web-button-click",{action:"start-google",text:"Get Started With Google",...h})},variant:"primary",type:"button",children:t({id:"automatedReviews.discoverabilityGetStartedGoogle"})}),(0,r.jsx)(m.z,{type:"button",variant:"white",className:"text-sm py-2 px-4 rounded-md border-[#999999]",onClick:()=>{n.push("/onboarding-automated-reviews"),s.trackAction("web-button-click",{action:"another-platform",text:"Continue Without A Google Account",...h})},children:t({id:"automatedReviews.discoverabilityContinueWithoutGoogle"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.z,{className:"flex text-sm py-2 px-4 rounded-md justify-center",onClick:()=>{o(!0);let e=x.a$.AUTOMATIC_REVIEWS;n.push((0,x.X2)({feature:l.eS.AUTOMATIC_REVIEWS,ref:e,successReturnPath:"/invoices?ref=".concat(e)})),s.trackAction("web-button-click",{action:"upgrade-now",text:"Upgrade now",...h})},disabled:i,variant:"primary",type:"button",children:i?(0,r.jsx)(d.Z,{className:"animate-spin text-white"}):t({id:"automatedReviews.upgrade"})}),(0,r.jsx)(m.z,{type:"button",variant:"white",className:"text-sm py-2 px-4 rounded-md border-[#999999]",onClick:e.onClose,children:t({id:"automatedReviews.maybeLater"})})]})})};var v=n(66962);let b=a.forwardRef((e,t)=>(0,r.jsxs)("svg",{...e,ref:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,r.jsx)("g",{clipPath:"url(#clip0_2987_12896)",children:(0,r.jsx)("path",{d:"M20.945 11C21.1767 13.0717 20.682 15.1595 19.5455 16.907C18.4091 18.6545 16.7012 19.9533 14.7136 20.5817C12.726 21.21 10.5819 21.1289 8.6474 20.3522C6.71294 19.5755 5.10807 18.1514 4.10684 16.323C3.10561 14.4946 2.77011 12.3754 3.15763 10.3272C3.54514 8.27895 4.63164 6.42875 6.2316 5.09251C7.83157 3.75627 9.84576 3.01686 11.9303 3.00054C14.0148 2.98421 16.0403 3.69198 17.661 5.003L15.006 7.395C14.0544 6.77425 12.934 6.46341 11.7986 6.5052C10.6633 6.54699 9.56873 6.93935 8.66538 7.62837C7.76204 8.31739 7.09424 9.26925 6.75374 10.3532C6.41325 11.4371 6.41678 12.5998 6.76385 13.6816C7.11092 14.7634 7.78448 15.7112 8.692 16.3948C9.59951 17.0783 10.6964 17.464 11.832 17.4989C12.9676 17.5338 14.0861 17.2161 15.0339 16.5896C15.9817 15.9631 16.7122 15.0585 17.125 14H13V11H20.945Z",stroke:"#FF5721",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_2987_12896",children:(0,r.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]}));b.displayName="IconGoogleOutlined";let g=a.forwardRef((e,t)=>(0,r.jsxs)("svg",{...e,ref:t,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_2987_12910)",children:[(0,r.jsx)("path",{d:"M18.3327 1.66675L12.4993 18.3334L9.16602 10.8334L1.66602 7.50008L18.3327 1.66675Z",stroke:"#FF5721",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M18.3327 1.66675L9.16602 10.8334",stroke:"#FF5721",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_2987_12910",children:(0,r.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]}));g.displayName="IconSendReview";let w=a.forwardRef((e,t)=>(0,r.jsxs)("svg",{...e,ref:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,r.jsx)("path",{d:"M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H6C4.93913 15 3.92172 15.4214 3.17157 16.1716C2.42143 16.9217 2 17.9391 2 19V21",stroke:"#FF5721",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z",stroke:"#FF5721",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M22 21V19C21.9993 18.1137 21.7044 17.2528 21.1614 16.5523C20.6184 15.8519 19.8581 15.3516 19 15.13",stroke:"#FF5721",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89318 18.7122 8.75608 18.1676 9.45769C17.623 10.1593 16.8604 10.6597 16 10.88",stroke:"#FF5721",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}));w.displayName="IconUsers";var j=n(9777),C=n(61692),E=n(17914),N=n(92973);let T=e=>{let{icon:t,id:n}=e;return(0,r.jsxs)("div",{className:"flex items-start","data-sentry-component":"BenefitRow","data-sentry-source-file":"benefit-row.tsx",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-12 h-12 flex items-center justify-center",children:t}),(0,r.jsx)("span",{className:"text-sm font-normal text-[#454545]",children:(0,r.jsx)(N.Z,{id:n,values:{b:e=>(0,r.jsx)("strong",{children:e})},"data-sentry-element":"FormattedMessage","data-sentry-source-file":"benefit-row.tsx"})})]})},k={feature:"pulse-m",modal:"Discoverability"},A="automated-reviews-discoverability",I=e=>{let{f:t}=(0,f.Y)(),n=(0,p.D)(),{data:c,isLoading:d}=(0,E.Z)(),u=!!c&&(0,C.g)({feature:l.eS.AUTOMATIC_REVIEWS,user:n.user,subscriptionStatus:n.subscriptionStatus}),m=()=>{n.trackAction("web-button-click",{action:"close",text:"X",...k}),e.onClose()};return(0,a.useEffect)(()=>{e.isOpen&&!d&&n.trackAction("web-modal-view",{action:"viewed",source:e.source,...k,hasAccessToFeature:u})},[e,n,u,d]),(0,r.jsxs)(j.u_,{open:e.isOpen,onClose:e.onClose,className:"xs:h-auto sm:max-w-md bg-white overflow-hidden","data-sentry-element":"Modal","data-sentry-component":"ModalDiscoverability","data-sentry-source-file":"discoverability-modal.tsx",children:[(0,r.jsxs)("header",{className:"flex flex-row items-center justify-between border-b border-[#E5E7EB] p-5 max-w-xs",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h3",{className:"text-md text-[#333333] font-inter font-semibold h-[24px] tracking-tight truncate",children:t({id:"automatedReviews.title"})})}),(0,r.jsx)("button",{onClick:m,type:"button",className:"p-2 hover:opacity-50 transition absolute top-3 right-2",children:(0,r.jsx)(v.bM,{className:"text-gray-400",fill:"currentColor","data-sentry-element":"IconClose","data-sentry-source-file":"discoverability-modal.tsx"})})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)(i.default,{src:s,alt:"#","data-sentry-element":"Image","data-sentry-source-file":"discoverability-modal.tsx"}),(0,r.jsxs)("div",{className:"space-y-4 py-5 px-6",children:[(0,r.jsx)(T,{icon:(0,r.jsx)(b,{color:"#FF5721"}),id:"automatedReviews.discoverabilityBenefit1","data-sentry-element":"BenefitRow","data-sentry-source-file":"discoverability-modal.tsx"}),(0,r.jsx)(T,{icon:(0,r.jsx)(w,{color:"#FF5721"}),id:"automatedReviews.discoverabilityBenefit2","data-sentry-element":"BenefitRow","data-sentry-source-file":"discoverability-modal.tsx"}),(0,r.jsx)(T,{icon:(0,r.jsx)(g,{color:"#FF5721"}),id:"automatedReviews.discoverabilityBenefit3","data-sentry-element":"BenefitRow","data-sentry-source-file":"discoverability-modal.tsx"}),(0,r.jsx)(o.default,{onClick:()=>{n.trackAction("web-link-click",{text:"Learn more about how it works.",action:"learn-more",...k})},href:"https://help.invoicesimple.com/en/articles/11187034-how-do-i-collect-automatic-reviews",className:"text-blue-500 hover:text-blue-700 underline block mt-4 ml-4","data-sentry-element":"Link","data-sentry-source-file":"discoverability-modal.tsx",children:t({id:"automatedReviews.learnMore"})})]})]}),(0,r.jsx)(y,{onClose:m,hasAccess:u,isLoading:d,"data-sentry-element":"Footer","data-sentry-source-file":"discoverability-modal.tsx"})]})}},66784:function(e,t,n){n.d(t,{U:function(){return a}});var r=n(37821);let a=n(58078).forwardRef((e,t)=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...e,ref:t,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}));a.displayName="IconError"},94747:function(e,t,n){n.d(t,{Pd:function(){return c},R9:function(){return l},pM:function(){return o}});var r=n(37821),a=n(58078);let i=(0,a.createContext)({openModal:void 0,closeModal:void 0}),o=e=>{let{children:t,modals:n}=e,{openModal:o,closeModal:l}=s(),[c,d]=(0,a.useState)({}),u=e=>{if(!(e in n)){null==l||l(e);return}d(t=>({...t,[e]:!1}))};return(0,r.jsxs)(i.Provider,{value:{openModal:e=>{if(!(e in n)){null==o||o(e);return}d(t=>({...t,[e]:!0}))},closeModal:u},"data-sentry-element":"unknown","data-sentry-component":"ModalsContextProvider","data-sentry-source-file":"modals.context.tsx",children:[t,Object.entries(n).map(e=>{let[t,n]=e,a=c[t]||!1;return"function"==typeof n?(0,r.jsx)(n,{isOpen:a,onClose:()=>u(t)},t):"object"==typeof n&&n.modal?(0,r.jsx)(n.modal,{...n.props,isOpen:a,onClose:()=>u(t)},t):null})]})},s=()=>(0,a.useContext)(i),l=e=>{let{openModal:t}=s();return()=>{null==t||t(e)}};function c(e){return function(t){return n=>(0,r.jsx)(o,{modals:e,"data-sentry-element":"ModalsContextProvider","data-sentry-component":"ComponentWithModals","data-sentry-source-file":"modals.context.tsx",children:(0,r.jsx)(t,{...n,"data-sentry-element":"WrappedComponent","data-sentry-source-file":"modals.context.tsx"})})}}},36723:function(e,t,n){n.d(t,{g:function(){return i}});var r=n(37821),a=n(87698);let i=n(58078).forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-gray-300 bg-background px-3 py-2 text-xs font-light ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i})});i.displayName="Textarea"},41065:function(e,t,n){n.d(t,{U:function(){return s}});var r=n(37821),a=n(58078),i=n(7363);let o=e=>{let[t,r]=(0,a.useState)(null),i={"en-US":async()=>await Promise.resolve().then(n.bind(n,44513)).then(e=>e.default),"fr-FR":async()=>await n.e(1118).then(n.bind(n,31118)).then(e=>e.default),"de-DE":async()=>await n.e(1743).then(n.bind(n,71743)).then(e=>e.default),"it-IT":async()=>await n.e(8293).then(n.bind(n,68293)).then(e=>e.default),"es-ES":async()=>await n.e(7833).then(n.bind(n,27833)).then(e=>e.default),"nl-NL":async()=>await n.e(408).then(n.bind(n,70408)).then(e=>e.default)};return(0,a.useEffect)(()=>{(async()=>{if(!i[e]){r(await i["en-US"]());return}r(await i[e]())})()},[e]),{datesLocale:t}},s=e=>{let{date:t,dateFormat:n="PP",locale:a}=e,{datesLocale:s}=o(a),l={};return s&&(l.locale=s),(0,r.jsx)("span",{className:"localized-date","data-sentry-component":"LocalizedDate","data-sentry-source-file":"localalized-date.tsx",children:(0,i.Z)(t,n,l)})}}}]);